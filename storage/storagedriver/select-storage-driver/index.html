<!-- Page generated 2019-05-30 20:10:33 +0900 -->
<!-- relative link basehrefs -->

	
	
	
		
			
		
	
		
			
		
	
		
			
			


<!-- Logic for 'edit this button' -->


	

	

	

	

	

	

	

	

	


<!-- End of logic for 'edit this button' -->


<!DOCTYPE html>
<html lang="ja">

<head>
	<base href="https://matsuand.github.io/docs.docker.jp.onthefly/storage/storagedriver/" />
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<style type="text/css">
		@charset "UTF-8";
		[ng\:cloak],
		[ng-cloak],
		[data-ng-cloak],
		[x-ng-cloak],
		.ng-cloak,
		.x-ng-cloak,
		.ng-hide:not(.ng-hide-animate) {
			display: none !important;
		}

		ng\:form {
			display: block;
		}
	</style>
	<script type="text/javascript">
	  !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="4.0.0";
	  analytics.load("IWj9D0UpZHZdZUZX9jl98PcpBFWBnBMy");
	  analytics.page();
	  }}();
	</script>
	
	<!-- favicon -->
	<link rel="icon" type="image/x-icon" href="https://matsuand.github.io/docs.docker.jp.onthefly/favicons/docs@2x.ico" sizes="129x128">
	<meta name="msapplication-TileImage" content="https://matsuand.github.io/docs.docker.jp.onthefly/favicons/docs@2x.ico">
	<link rel="apple-touch-icon" type="image/x-icon" href="https://matsuand.github.io/docs.docker.jp.onthefly/favicons/docs@2x.ico" sizes="129x128">
	<meta property="og:image" content="https://matsuand.github.io/docs.docker.jp.onthefly/favicons/docs@2x.ico"/>
	<!-- metadata -->
	<meta property="og:type" content="website"/>
	<meta property="og:updated_time" itemprop="dateUpdated" content="2019-05-30T20:10:33+09:00"/>
	<meta property="og:image" itemprop="image primaryImageOfPage" content="https://matsuand.github.io/docs.docker.jp.onthefly/images/docs@2x.png"/>
	<meta name="twitter:card" content="summary"/>
	<meta name="twitter:domain" content="docs.docker.jp"/>
	<meta name="twitter:site" content="@docker_docs"/>
	<meta name="twitter:url" content="https://twitter.com/docker_docs"/>
	<meta name="twitter:title" itemprop="title name" content="Docker storage drivers"/>
	<meta name="twitter:description" property="og:description" itemprop="description" content="Ideally, very little data is written to a container’s writable layer, and you use Docker volumes to write data. However, some workloads require you to be able to write to..." />
	<meta name="twitter:image:src" content="https://matsuand.github.io/docs.docker.jp.onthefly/images/docs@2x.png"/>
	<meta name="twitter:image:alt" content="Docker Documentation"/>
	<meta property="article:published_time" itemprop="datePublished" content="2019-05-30T20:10:33+09:00"/>

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="keywords" content="container, storage, driver, aufs, btrfs, devicemapper, zfs, overlay, overlay2">
	<link rel="stylesheet" href="https://matsuand.github.io/docs.docker.jp.onthefly/css/font-awesome.min.css">
	<link rel="stylesheet" href="https://matsuand.github.io/docs.docker.jp.onthefly/css/bootstrap.min.css">
	<link id="pygments" rel="stylesheet" href="https://matsuand.github.io/docs.docker.jp.onthefly/css/pygments/perldoc.css">
	<link id="pagestyle" rel="stylesheet" href="https://matsuand.github.io/docs.docker.jp.onthefly/css/style.css">

	<!-- Go get "Open Sans" font from Google -->
	<link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
	<!-- SEO stuff -->
	<title>Docker storage drivers | Docker Documentation</title>
<meta property="og:title" content="Docker storage drivers" />
<meta property="og:locale" content="ja_JP" />
<meta name="description" content="Learn how to select the proper storage driver for your container." />
<meta property="og:description" content="Learn how to select the proper storage driver for your container." />
<link rel="canonical" href="https://matsuand.github.io/docs.docker.jp.onthefly/storage/storagedriver/select-storage-driver/" />
<meta property="og:url" content="https://matsuand.github.io/docs.docker.jp.onthefly/storage/storagedriver/select-storage-driver/" />
<meta property="og:site_name" content="Docker Documentation" />
<script type="application/ld+json">
{"@context":"http://schema.org","@type":"WebPage","headline":"Docker storage drivers","description":"Learn how to select the proper storage driver for your container.","url":"https://matsuand.github.io/docs.docker.jp.onthefly/storage/storagedriver/select-storage-driver/"}</script>
	<!-- END SEO STUFF -->
	
	<script language="javascript">
	// Default to assuming this is an archive and hiding some stuff
	// See js/archive.js and js/docs.js for logic relating to this
	var isArchive = true;
	var dockerVersion = 'v18.09';
	</script>
</head>
<body ng-app="Docker" ng-controller="DockerController" class="colums">
	<header>
		 <nav class="nav-secondary navbar navbar-fixed-top">
    <!-- <div class="fan"></div> -->
    <div class="container-fluid">
        <div class="navbar-header">
            <a href="https://matsuand.github.io/docs.docker.jp.onthefly/"><img class="logo" src="https://matsuand.github.io/docs.docker.jp.onthefly/images/docker-docs-logo.svg" alt="Docker Docs" title="Docker Docs"></a>
        </div>
        <div class="navbar-collapse" aria-expanded="false" style="height: 1px;">
            <div class="search-form" id="search-div" style="visibility: hidden">
    <form class="search-form form-inline ng-pristine ng-valid" /id="searchForm" action="/docs.docker.jp.onthefly/search/">
        <input class="search-field form-control ds-input" id="st-search-input" value="" name="q" placeholder="文書内検索" type="search" autocomplete="off" spellcheck="false" dir="auto" style="position: relative; vertical-align: top;">
        <div id="autocompleteContainer">
            <div id="autocompleteResults"></div>
        </div>
        <!-- <button type="submit" class="search-submit btn btn-default">検索</button> -->
    </form>
</div>
<div class="sidebar-toggle">
    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
    </button>
</div>
<div class="nav-container">
    <div id="tabs">
        <ul class="tabs" id="jsTOCHorizontal">

        </ul>
    </div>
    <div class="ctrl-right hidden-xs hidden-sm">
        <a href="javascript:void(0)" id="menu-toggle"><i class="fa fa-indent" aria-hidden="true"></i></a>
        <div class="btn-group" style="visibility: hidden">
  <button type="button" class="btn btn-default dropdown-btn dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    Docker v18.09 (current)        <span class="caret"></span>
  </button>
  <ul class="dropdown-menu">
    <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/edge/">Docker edge</a></li><li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/v18.03/">Docker v18.03</a></li><li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/v17.12/">Docker v17.12</a></li><li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/v17.09/">Docker v17.09</a></li><li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/v17.06/">Docker v17.06</a></li><li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/v17.03/">Docker v17.03</a></li>
  </ul>
</div>

    </div>
</div>

        </div>
    </div>
</nav>

	</header>

	<div class="wrapper right-open">
		<div class="container-fluid">
			<div class="row">
				<div class="col-body">
					<main class="col-content content">
						<section class="section">
							
								
							<h1>Docker storage drivers</h1>  <span class="reading-time" title="Estimated reading time">
  <span class="reading-time-label">読む時間の目安: </span>
  
  
    10 分
  
</span>

							
							
							<p>Ideally, very little data is written to a container’s writable layer, and you
use Docker volumes to write data. However, some workloads require you to be able
to write to the container’s writable layer. This is where storage drivers come
in.</p>

<p>Docker supports several different storage drivers, using a pluggable
architecture. The storage driver controls how images and containers are stored
and managed on your Docker host.</p>

<p>After you have read the <a href="https://matsuand.github.io/docs.docker.jp.onthefly/storage/storagedriver/">storage driver overview</a>, the
next step is to choose the best storage driver for your workloads. In making
this decision, there are three high-level factors to consider:</p>

<p>If multiple storage drivers are supported in your kernel, Docker has a prioritized
list of which storage driver to use if no storage driver is explicitly configured,
assuming that the storage driver meets the prerequisites.</p>

<p>Use the storage driver with the best overall performance and stability in the most
usual scenarios.</p>

<p>Docker supports the following storage drivers:</p>

<ul>
  <li><code class="highlighter-rouge">overlay2</code> is the preferred storage driver, for all currently supported
 Linux distributions, and requires no extra configuration.</li>
  <li><code class="highlighter-rouge">aufs</code> is the preferred storage driver for Docker 18.06 and older, when
 running on Ubuntu 14.04 on kernel 3.13 which has no support for <code class="highlighter-rouge">overlay2</code>.</li>
  <li><code class="highlighter-rouge">devicemapper</code> is supported, but requires <code class="highlighter-rouge">direct-lvm</code> for production
 environments, because <code class="highlighter-rouge">loopback-lvm</code>, while zero-configuration, has very
 poor performance. <code class="highlighter-rouge">devicemapper</code> was the recommended storage driver for
 CentOS and RHEL, as their kernel version did not support <code class="highlighter-rouge">overlay2</code>. However,
 current versions of CentOS and RHEL now have support for <code class="highlighter-rouge">overlay2</code>,
 which is now the recommended driver.</li>
  <li>The <code class="highlighter-rouge">btrfs</code> and <code class="highlighter-rouge">zfs</code> storage drivers are used if they are the backing
filesystem (the filesystem of the host on which Docker is installed).
These filesystems allow for advanced options, such as creating “snapshots”,
but require more maintenance and setup. Each of these relies on the backing
filesystem being configured correctly.</li>
  <li>The <code class="highlighter-rouge">vfs</code> storage driver is intended for testing purposes, and for situations
where no copy-on-write filesystem can be used. Performance of this storage
driver is poor, and is not generally recommended for production use.</li>
</ul>

<p>Docker’s source code defines the selection order. You can see the order at
<a href="https://github.com/docker/docker-ce/blob/18.09/components/engine/daemon/graphdriver/driver_linux.go#L50">the source code for Docker Engine - Community 18.09</a></p>

<p id="storage-driver-order">If you run a different version of Docker, you can use the branch selector at the top of the file viewer to choose a different branch.</p>

<p>Some storage drivers require you to use a specific format for the backing filesystem. If you have external
requirements to use a specific backing filesystem, this may limit your choices. See <a href="https://matsuand.github.io/docs.docker.jp.onthefly/storage/storagedriver/select-storage-driver/#supported-backing-filesystems">Supported backing filesystems</a>.</p>

<p>After you have narrowed down which storage drivers you can choose from, your choice is determined by the
characteristics of your workload and the level of stability you need. See <a href="https://matsuand.github.io/docs.docker.jp.onthefly/storage/storagedriver/select-storage-driver/#other-considerations">Other considerations</a>
for help in making the final decision.</p>

<blockquote>
  <p><strong><em>NOTE</em></strong>: Your choice may be limited by your Docker edition, operating system, and distribution.
For instance, <code class="highlighter-rouge">aufs</code> is only supported on Ubuntu and Debian, and may require extra packages
to be installed, while <code class="highlighter-rouge">btrfs</code> is only supported on SLES, which is only supported with Docker
Enterprise. See <a href="https://matsuand.github.io/docs.docker.jp.onthefly/storage/storagedriver/select-storage-driver/#supported-storage-drivers-per-linux-distribution">Support storage drivers per Linux distribution</a>
for more information.</p>
</blockquote>

<h2 id="supported-storage-drivers-per-linux-distribution">Supported storage drivers per Linux distribution</h2>

<p>At a high level, the storage drivers you can use is partially determined by
the Docker edition you use.</p>

<p>In addition, Docker does not recommend any configuration that requires you to
disable security features of your operating system, such as the need to disable
<code class="highlighter-rouge">selinux</code> if you use the <code class="highlighter-rouge">overlay</code> or <code class="highlighter-rouge">overlay2</code> driver on CentOS.</p>

<h3 id="docker-engine---enterprise-and-docker-enterprise">Docker Engine - Enterprise and Docker Enterprise</h3>

<p>For Docker Engine - Enterprise and Docker Enterprise, the definitive resource for which
storage drivers are supported is the
<a href="https://success.docker.com/Policies/Compatibility_Matrix">Product compatibility matrix</a>.
To get commercial support from Docker, you must use a supported configuration.</p>

<h3 id="docker-engine---community">Docker Engine - Community</h3>

<p>For Docker Engine - Community, only some configurations are tested, and your operating
system’s kernel may not support every storage driver. In general, the following
configurations work on recent versions of the Linux distribution:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Linux distribution</th>
      <th style="text-align: left">Recommended storage drivers</th>
      <th style="text-align: left">Alternative drivers</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">Docker Engine - Community on Ubuntu</td>
      <td style="text-align: left"><code class="highlighter-rouge">overlay2</code> or <code class="highlighter-rouge">aufs</code> (for Ubuntu 14.04 running on kernel 3.13)</td>
      <td style="text-align: left"><code class="highlighter-rouge">overlay</code>¹, <code class="highlighter-rouge">devicemapper</code>², <code class="highlighter-rouge">zfs</code>, <code class="highlighter-rouge">vfs</code></td>
    </tr>
    <tr>
      <td style="text-align: left">Docker Engine - Community on Debian</td>
      <td style="text-align: left"><code class="highlighter-rouge">overlay2</code> (Debian Stretch), <code class="highlighter-rouge">aufs</code> or <code class="highlighter-rouge">devicemapper</code> (older versions)</td>
      <td style="text-align: left"><code class="highlighter-rouge">overlay</code>¹, <code class="highlighter-rouge">vfs</code></td>
    </tr>
    <tr>
      <td style="text-align: left">Docker Engine - Community on CentOS</td>
      <td style="text-align: left"><code class="highlighter-rouge">overlay2</code></td>
      <td style="text-align: left"><code class="highlighter-rouge">overlay</code>¹, <code class="highlighter-rouge">devicemapper</code>², <code class="highlighter-rouge">zfs</code>, <code class="highlighter-rouge">vfs</code></td>
    </tr>
    <tr>
      <td style="text-align: left">Docker Engine - Community on Fedora</td>
      <td style="text-align: left"><code class="highlighter-rouge">overlay2</code></td>
      <td style="text-align: left"><code class="highlighter-rouge">overlay</code>¹, <code class="highlighter-rouge">devicemapper</code>², <code class="highlighter-rouge">zfs</code>, <code class="highlighter-rouge">vfs</code></td>
    </tr>
  </tbody>
</table>

<p>¹) The <code class="highlighter-rouge">overlay</code> storage driver is deprecated in Docker Engine - Enterprise 18.09, and will be
removed in a future release. It is recommended that users of the <code class="highlighter-rouge">overlay</code> storage driver
migrate to <code class="highlighter-rouge">overlay2</code>.</p>

<p>²) The <code class="highlighter-rouge">devicemapper</code> storage driver is deprecated in Docker Engine 18.09, and will be
removed in a future release. It is recommended that users of the <code class="highlighter-rouge">devicemapper</code> storage driver
migrate to <code class="highlighter-rouge">overlay2</code>.</p>

<p>When possible, <code class="highlighter-rouge">overlay2</code> is the recommended storage driver. When installing
Docker for the first time, <code class="highlighter-rouge">overlay2</code> is used by default. Previously, <code class="highlighter-rouge">aufs</code> was
used by default when available, but this is no longer the case. If you want to
use <code class="highlighter-rouge">aufs</code> on new installations going forward, you need to explicitly configure
it, and you may need to install extra packages, such as <code class="highlighter-rouge">linux-image-extra</code>.
See <a href="https://matsuand.github.io/docs.docker.jp.onthefly/storage/storagedriver/aufs-driver/">aufs</a>.</p>

<p>On existing installations using <code class="highlighter-rouge">aufs</code>, it is still used.</p>

<p>When in doubt, the best all-around configuration is to use a modern Linux
distribution with a kernel that supports the <code class="highlighter-rouge">overlay2</code> storage driver, and to
use Docker volumes for write-heavy workloads instead of relying on writing data
to the container’s writable layer.</p>

<p>The <code class="highlighter-rouge">vfs</code> storage driver is usually not the best choice. Before using the <code class="highlighter-rouge">vfs</code>
storage driver, be sure to read about
<a href="https://matsuand.github.io/docs.docker.jp.onthefly/storage/storagedriver/vfs-driver/">its performance and storage characteristics and limitations</a>.</p>

<blockquote>
  <p><strong>Expectations for non-recommended storage drivers</strong>: Commercial support is
not available for Docker Engine - Community, and you can technically use any storage driver
that is available for your platform. For instance, you can use <code class="highlighter-rouge">btrfs</code> with
Docker Engine - Community, even though it is not recommended on any platform for
Docker Engine - Community, and you do so at your own risk.</p>

  <p>The recommendations in the table above are based on automated regression
testing and the configurations that are known to work for a large number of
users. If you use a recommended configuration and find a reproducible issue,
it is likely to be fixed very quickly. If the driver that you want to use is
not recommended according to this table, you can run it at your own risk. You
can and should still report any issues you run into. However, such issues
have a lower priority than issues encountered when using a recommended
configuration.</p>
</blockquote>

<h3 id="docker-desktop-for-mac-and-docker-desktop-for-windows">Docker Desktop for Mac and Docker Desktop for Windows</h3>

<p>Docker Desktop for Mac and Docker Desktop for Windows are intended for development, rather
than production. Modifying the storage driver on these platforms is not
possible.</p>

<h2 id="supported-backing-filesystems">Supported backing filesystems</h2>

<p>With regard to Docker, the backing filesystem is the filesystem where
<code class="highlighter-rouge">/var/lib/docker/</code> is located. Some storage drivers only work with specific
backing filesystems.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Storage driver</th>
      <th style="text-align: left">Supported backing filesystems</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">overlay2</code>, <code class="highlighter-rouge">overlay</code></td>
      <td style="text-align: left"><code class="highlighter-rouge">xfs</code> with ftype=1, <code class="highlighter-rouge">ext4</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">aufs</code></td>
      <td style="text-align: left"><code class="highlighter-rouge">xfs</code>, <code class="highlighter-rouge">ext4</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">devicemapper</code></td>
      <td style="text-align: left"><code class="highlighter-rouge">direct-lvm</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">btrfs</code></td>
      <td style="text-align: left"><code class="highlighter-rouge">btrfs</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">zfs</code></td>
      <td style="text-align: left"><code class="highlighter-rouge">zfs</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">vfs</code></td>
      <td style="text-align: left">any filesystem</td>
    </tr>
  </tbody>
</table>

<h2 id="other-considerations">Other considerations</h2>

<h3 id="suitability-for-your-workload">Suitability for your workload</h3>

<p>Among other things, each storage driver has its own performance characteristics
that make it more or less suitable for different workloads. Consider the
following generalizations:</p>

<ul>
  <li><code class="highlighter-rouge">overlay2</code>, <code class="highlighter-rouge">aufs</code>, and <code class="highlighter-rouge">overlay</code> all operate at the file level rather than
the block level. This uses memory more efficiently, but the container’s
writable layer may grow quite large in write-heavy workloads.</li>
  <li>Block-level storage drivers such as <code class="highlighter-rouge">devicemapper</code>, <code class="highlighter-rouge">btrfs</code>, and <code class="highlighter-rouge">zfs</code> perform
better for write-heavy workloads (though not as well as Docker volumes).</li>
  <li>For lots of small writes or containers with many layers or deep filesystems,
<code class="highlighter-rouge">overlay</code> may perform better than <code class="highlighter-rouge">overlay2</code>, but consumes more inodes, which
can lead to inode exhaustion.</li>
  <li><code class="highlighter-rouge">btrfs</code> and <code class="highlighter-rouge">zfs</code> require a lot of memory.</li>
  <li><code class="highlighter-rouge">zfs</code> is a good choice for high-density workloads such as PaaS.</li>
</ul>

<p>More information about performance, suitability, and best practices is available
in the documentation for each storage driver.</p>

<h3 id="shared-storage-systems-and-the-storage-driver">Shared storage systems and the storage driver</h3>

<p>If your enterprise uses SAN, NAS, hardware RAID, or other shared storage
systems, they may provide high availability, increased performance, thin
provisioning, deduplication, and compression. In many cases, Docker can work on
top of these storage systems, but Docker does not closely integrate with them.</p>

<p>Each Docker storage driver is based on a Linux filesystem or volume manager. Be
sure to follow existing best practices for operating your storage driver
(filesystem or volume manager) on top of your shared storage system. For
example, if using the ZFS storage driver on top of a shared storage system, be
sure to follow best practices for operating ZFS filesystems on top of that
specific shared storage system.</p>

<h3 id="stability">Stability</h3>

<p>For some users, stability is more important than performance. Though Docker
considers all of the storage drivers mentioned here to be stable, some are newer
and are still under active development. In general, <code class="highlighter-rouge">overlay2</code>, <code class="highlighter-rouge">aufs</code>, <code class="highlighter-rouge">overlay</code>,
and <code class="highlighter-rouge">devicemapper</code> are the choices with the highest stability.</p>

<h3 id="test-with-your-own-workloads">Test with your own workloads</h3>

<p>You can test Docker’s performance when running your own workloads on different
storage drivers. Make sure to use equivalent hardware and workloads to match
production conditions, so you can see which storage driver offers the best
overall performance.</p>

<h2 id="check-your-current-storage-driver">Check your current storage driver</h2>

<p>The detailed documentation for each individual storage driver details all of the
set-up steps to use a given storage driver.</p>

<p>To see what storage driver Docker is currently using, use <code class="highlighter-rouge">docker info</code> and look
for the <code class="highlighter-rouge">Storage Driver</code> line:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker info

Containers: 0
Images: 0
Storage Driver: overlay2
 Backing Filesystem: xfs
&lt;output truncated&gt;
</code></pre></div></div>

<p>To change the storage driver, see the specific instructions for the new storage
driver. Some drivers require additional configuration, including configuration
to physical or logical disks on the Docker host.</p>

<blockquote class="important">
  <p><strong>Important</strong>: When you change the storage driver, any existing images and
containers become inaccessible. This is because their layers cannot be used
by the new storage driver. If you revert your changes, you can
access the old images and containers again, but any that you pulled or
created using the new driver are then inaccessible.</p>
</blockquote>

<h2 id="related-information">Related information</h2>

<ul>
  <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/storage/storagedriver/">About images, containers, and storage drivers</a></li>
  <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/storage/storagedriver/aufs-driver/"><code class="highlighter-rouge">aufs</code> storage driver in practice</a></li>
  <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/storage/storagedriver/device-mapper-driver/"><code class="highlighter-rouge">devicemapper</code> storage driver in practice</a></li>
  <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/storage/storagedriver/overlayfs-driver/"><code class="highlighter-rouge">overlay</code> and <code class="highlighter-rouge">overlay2</code> storage drivers in practice</a></li>
  <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/storage/storagedriver/btrfs-driver/"><code class="highlighter-rouge">btrfs</code> storage driver in practice</a></li>
  <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/storage/storagedriver/zfs-driver/"><code class="highlighter-rouge">zfs</code> storage driver in practice</a></li>
</ul>

							<!-- tags -->
							
							
							
							<span class="glyphicon glyphicon-tags" style="padding-right: 10px"></span><span style="vertical-align: 2px"><a href="https://matsuand.github.io/docs.docker.jp.onthefly/glossary/?term=container">container</a>, <a href="https://matsuand.github.io/docs.docker.jp.onthefly/glossary/?term=storage">storage</a>, <a href="https://matsuand.github.io/docs.docker.jp.onthefly/glossary/?term=driver">driver</a>, <a href="https://matsuand.github.io/docs.docker.jp.onthefly/glossary/?term=aufs">aufs</a>, <a href="https://matsuand.github.io/docs.docker.jp.onthefly/glossary/?term=btrfs">btrfs</a>, <a href="https://matsuand.github.io/docs.docker.jp.onthefly/glossary/?term=devicemapper">devicemapper</a>, <a href="https://matsuand.github.io/docs.docker.jp.onthefly/glossary/?term=zfs">zfs</a>, <a href="https://matsuand.github.io/docs.docker.jp.onthefly/glossary/?term=overlay">overlay</a>, <a href="https://matsuand.github.io/docs.docker.jp.onthefly/glossary/?term=overlay2">overlay2</a></span>
							
							<!-- link corrections -->
              <script language="JavaScript">
							var x = document.links.length;
							var baseHref = document.getElementsByTagName('base')[0].href
							for (i = 0; i < x; i++) {
							  var munged = false;
							  var thisHREF = document.links[i].href;
							  var originalURL = "/storage/storagedriver/select-storage-driver/";
							  if (thisHREF.indexOf(baseHref + "#") > -1) {
							    // hash fix
							    //console.log('BEFORE: base:',baseHref,'thisHREF:',thisHREF,'originalURL:',originalURL);
							    thisHREF = originalURL + thisHREF.replace(baseHref, "");
							    //console.log('AFTER: base:',baseHref,'thisHREF:',thisHREF,'originalURL:',originalURL);
							  }
							  if ((thisHREF.indexOf(window.location.hostname) > -1 || thisHREF.indexOf('http') == -1) && document.links[i].className.indexOf("nomunge") < 0) {
							    munged = true;
							    thisHREF = thisHREF.replace(".md", "/").replace("/index/", "/");
							    document.links[i].setAttribute('href', thisHREF);
							  }
							}
							</script>
							
						  <div id="ratings-div" style="color:#b9c2cc; text-align: center; margin-top: 150px; visibility: hidden">
								<div id="pd_rating_holder_8453675"></div>
								<script type="text/javascript">
									PDRTJS_settings_8453675 = {
										"id": "8453675",
										"unique_id": "storage/storagedriver/select-storage-driver.md",
										"title": "Docker storage drivers",
										"permalink": "https://github.com/docker/docker.github.io/blob/master/storage/storagedriver/select-storage-driver.md"
									};
									(function(d, c, j) {
										if (!document.getElementById(j)) {
											var pd = d.createElement(c),
												s;
											pd.id = j;
											pd.src = ('https:' == document.location.protocol) ? 'https://polldaddy.com/js/rating/rating.js' : 'http://i0.poll.fm/js/rating/rating.js';
											s = document.getElementsByTagName(c)[0];
											s.parentNode.insertBefore(pd, s);
										}
									}(document, 'script', 'pd-rating-js'));
								</script>
							</div>
							
						</section>
					</main>
					<nav class="col-nav">
						<div id="sidebar-nav" class="sidebar hidden-sm hidden-xs">
						<div id="navbar" class="nav-sidebar">
    <ul class="nav" id="jsTOCLeftNav">
    </ul>
</div>

						</div>
					</nav>
					<div class="col-toc">
							<div class="sidebar hidden-xs hidden-sm">
							<div class="toc-nav">
								<div class="feedback-links">
									<ul>
										
										<li style="visibility: hidden"><a href="https://github.com/matsuand/docs.docker.jp/edit/v18.09.local/storage/storagedriver/select-storage-driver.md"><i class="fa fa-pencil-square-o" aria-hidden="true"></i> このページの編集</a></li>
										<li><a href="https://github.com/matsuand/docs.docker.jp.onthefly/issues/new?body=File: [storage/storagedriver/select-storage-driver.md](https://matsuand.github.io/docs.docker.jp.onthefly/storage/storagedriver/select-storage-driver/)"
															class="nomunge"><i class="fa fa-check" aria-hidden="true"></i> 文書変更のリクエスト</a></li>
										<li><a href="https://success.docker.com/support"><i class="fa fa-question" aria-hidden="true"></i> サポート依頼</a></li>
										<!-- toggle mode -->
										<li>
											<div class="toggle-mode">
												<div class="icon">
													<i class="fa fa-sun-o" aria-hidden="true"></i>
												</div>
												<div class="toggle-switch">
													<label class="switch">
														<input type="checkbox" id="switch-style">
														<div class="slider round"></div>
												</label>
												</div>
												<div class="icon">
													<i class="fa fa-moon-o" aria-hidden="true"></i>
												</div>
											</div>
										</li>
									</ul>
								</div>
								   
									<div id="side-toc-title">本ページ内</div>
									
<ul id="my_toc" class="inline_toc">
  <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/storage/storagedriver/select-storage-driver/#supported-storage-drivers-per-linux-distribution" class="nomunge">Supported storage drivers per Linux distribution</a>
    <ul>
      <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/storage/storagedriver/select-storage-driver/#docker-engine---enterprise-and-docker-enterprise" class="nomunge">Docker Engine - Enterprise and Docker Enterprise</a></li>
      <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/storage/storagedriver/select-storage-driver/#docker-engine---community" class="nomunge">Docker Engine - Community</a></li>
      <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/storage/storagedriver/select-storage-driver/#docker-desktop-for-mac-and-docker-desktop-for-windows" class="nomunge">Docker Desktop for Mac and Docker Desktop for Windows</a></li>
    </ul>
  </li>
  <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/storage/storagedriver/select-storage-driver/#supported-backing-filesystems" class="nomunge">Supported backing filesystems</a></li>
  <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/storage/storagedriver/select-storage-driver/#other-considerations" class="nomunge">Other considerations</a>
    <ul>
      <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/storage/storagedriver/select-storage-driver/#suitability-for-your-workload" class="nomunge">Suitability for your workload</a></li>
      <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/storage/storagedriver/select-storage-driver/#shared-storage-systems-and-the-storage-driver" class="nomunge">Shared storage systems and the storage driver</a></li>
      <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/storage/storagedriver/select-storage-driver/#stability" class="nomunge">Stability</a></li>
      <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/storage/storagedriver/select-storage-driver/#test-with-your-own-workloads" class="nomunge">Test with your own workloads</a></li>
    </ul>
  </li>
  <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/storage/storagedriver/select-storage-driver/#check-your-current-storage-driver" class="nomunge">Check your current storage driver</a></li>
  <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/storage/storagedriver/select-storage-driver/#related-information" class="nomunge">Related information</a></li>
</ul>


								</div>
								
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	
	<footer class="footer">
		  
    <div class="container">
        <div class="top_footer">
            <div class="row">
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><a href="https://www.docker.com/what-docker">What is Docker</a></li>
                        <li><a href="https://www.docker.com/what-container">What is a Container</a></li>
                        <li><a href="https://www.docker.com/use-cases">Use Cases</a></li>
                        <li><a href="https://www.docker.com/customers">Customers</a></li>
                        <li><a href="https://www.docker.com/partners/partner-program">Partners</a></li>
                        <li class="break"><a href="https://www.docker.com/industry-government">For Government</a></li>
                        <li><a href="https://www.docker.com/company">About Docker</a></li>
                        <li><a href="https://www.docker.com/company/management">Management</a></li>
                        <li><a href="https://www.docker.com/company/news-and-press">Press &amp; News</a></li>
                        <li><a href="https://www.docker.com/careers">Careers</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><a href="https://www.docker.com/products/overview">Product</a></li>
                        <li><a href="https://www.docker.com/pricing">Pricing</a></li>
                        <li><a href="https://www.docker.com/docker-community">Community Edition</a></li>
                        <li class="break"><a href="https://www.docker.com/enterprise">Enterprise Edition </a></li>
                        <li><a href="https://www.docker.com/products/docker-datacenter">Docker Datacenter</a></li>
                        <li><a href="https://hub.docker.com/">Docker Hub</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/">Documentation</a></li>
                        <li><a href="https://www.docker.com/docker">Learn</a></li>
                        <li><a href="https://blog.docker.com" target="_blank">Blog</a></li>
                        <li><a href="https://engineering.docker.com" target="_blank">Engineering Blog</a></li>
                        <li><a href="https://training.docker.com/" target="_blank">Training</a></li>
                        <li><a href="https://success.docker.com/support">Support</a></li>
                        <li><a href="https://success.docker.com/kbase">Knowledge Base</a></li>
                        <li><a href="https://www.docker.com/products/resources">Resources</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><a href="https://www.docker.com/docker-community">Community</a></li>
                        <li><a href="https://www.docker.com/technologies/overview">Open Source</a></li>
                        <li><a href="https://www.docker.com/community/events">Events</a></li>
                        <li><a href="https://forums.docker.com/" target="_blank">Forums</a></li>
                        <li><a href="https://www.docker.com/community/docker-captains">Docker Captains</a></li>
                        <li><a href="https://www.docker.com/docker-community/scholarships">Scholarships</a></li>
                        <li><a href="https://blog.docker.com/curated/">Community News</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-nav">
                <nav class="footer_sub_nav">
                    <ul class="menu">
                        <li><a href="http://status.docker.com/">Status</a></li>
                        <li><a href="https://www.docker.com/docker-security">Security</a></li>
                        <li><a href="https://www.docker.com/legal">Legal</a></li>
                        <li><a href="https://www.docker.com/company/contact">Contact</a></li>
                    </ul>
                </nav>
            </div>
        </div>
        <div class="bottom_footer">
            <div class="footer-copyright col-xs-12 col-md-8">
                <p class="copyright">
                    Copyright &copy; 2019 Docker Inc. All rights reserved. </p>
            </div>
            <div class="footer_social_nav">
                <ul class="nav-social">
                    <li class="fa fa-twitter"><a href="http://twitter.com/docker">Twitter</a></li>
                    <li class="fa fa-youtube"><a href="http://www.youtube.com/user/dockerrun">Youtube</a></li>
                    <li class="fa fa-github"><a href="https://github.com/docker">GitHub</a></li>
                    <li class="fa fa-linkedin"><a href="https://www.linkedin.com/company/docker">Linkedin</a></li>
                    <li class="fa fa-facebook"><a href="https://www.facebook.com/docker.run">Facebook</a></li>
                    <li class="fa fa-reddit"><a href="http://www.reddit.com/r/docker">Reddit</a></li>
                    <li class="fa fa-slideshare"><a href="http://www.slideshare.net/docker">Slideshare</a></li>
                </ul>
            </div>
        </div>
    </div>

	</footer>
	<link rel="stylesheet" href="https://matsuand.github.io/docs.docker.jp.onthefly/css/github.css">
	
	<!-- <script src="https://matsuand.github.io/docs.docker.jp.onthefly/js/anchorlinks.js"></script> -->
	<script defer src="https://matsuand.github.io/docs.docker.jp.onthefly/js/menu.js"></script>
	<script src="https://matsuand.github.io/docs.docker.jp.onthefly/js/jquery.js"></script>
	<script src="https://matsuand.github.io/docs.docker.jp.onthefly/js/bootstrap.min.js"></script>
	<!-- Always include the archive.js, but it doesn't do much unless we are an archive -->
	<script language="javascript">
	// Default to assuming this is an archive and hiding some stuff
	// See js/archive.js and js/docs.js for logic relating to this
	var isArchive = true;
	var dockerVersion = 'v18.09';
	// In archives, we need to know the page root and we get it from JEKYLL_ENV in the jekyll build command
	var jekyllEnv = 'development';
	// If unset (in non-archive branches), defaults to "development". In that case, reset it to empty
	if (jekyllEnv == 'development') {
		jekyllEnv = '';
	}
	var pageURL = jekyllEnv + '/storage/storagedriver/select-storage-driver/';
	</script>
	<script src="https://matsuand.github.io/docs.docker.jp.onthefly/js/archive.js"></script>
	<script src="https://matsuand.github.io/docs.docker.jp.onthefly/js/stickyfill.min.js"></script>
	<script defer src="https://matsuand.github.io/docs.docker.jp.onthefly/js/metadata.js"></script>
	<script src="https://matsuand.github.io/docs.docker.jp.onthefly/js/glossary.js"></script>
	<script src="https://matsuand.github.io/docs.docker.jp.onthefly/js/collections_tocs.js"></script>
	<script defer src="https://matsuand.github.io/docs.docker.jp.onthefly/js/docs.js"></script>
	<script defer src="https://matsuand.github.io/docs.docker.jp.onthefly/js/toc.js"></script>
	<script language="javascript">
	jQuery(document).ready(function(){
				hookupTOCEvents();
			});
	</script>
</body>

</html>
