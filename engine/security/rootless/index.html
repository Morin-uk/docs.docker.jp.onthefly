<!-- Page generated 2020-06-17 13:51:19 +0900 -->
<!-- Logic for 'edit this button'


    

    

    

    

    

    

    

    

-->
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <style type="text/css">
      @charset "UTF-8";
      [ng\:cloak],
      [ng-cloak],
      [data-ng-cloak],
      [x-ng-cloak],
      .ng-cloak,
      .x-ng-cloak,
      .ng-hide:not(.ng-hide-animate) {
          display: none !important;
      }

      ng\:form {
          display: block;
      }
  </style>
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-WL2QLG5');</script>

  
  <!-- favicon -->
  <link rel="icon" type="image/x-icon" href="/docs.docker.jp.onthefly/favicons/docs@2x.ico" sizes="129x128">
  <meta name="msapplication-TileImage" content="/docs.docker.jp.onthefly/favicons/docs@2x.ico">
  <link rel="apple-touch-icon" type="image/x-icon" href="/docs.docker.jp.onthefly/favicons/docs@2x.ico" sizes="129x128">
  <meta property="og:image" content="/docs.docker.jp.onthefly/favicons/docs@2x.ico"/>
  <!-- metadata -->
  <meta property="og:type" content="website"/>
  <meta property="og:updated_time" itemprop="dateUpdated" content="2020-06-17T13:51:19+09:00"/>
  <meta property="og:image" itemprop="image primaryImageOfPage" content="/docs.docker.jp.onthefly/images/docs@2x.png"/>
  <meta name="twitter:card" content="summary"/>
  <meta name="twitter:domain" content="docs.docker.com"/>
  <meta name="twitter:site" content="@docker_docs"/>
  <meta name="twitter:url" content="https://twitter.com/docker_docs"/>
  <meta name="twitter:title" itemprop="title name" content="Run the Docker daemon as a non-root user (Rootless mode)"/>
  <meta name="twitter:description" property="og:description" itemprop="description" content="Rootless mode allows running the Docker daemon and containers as a non-root user, for the sake of mitigating potential vulnerabilities in the daemon and the container runtime. Rootless mode does..." />
  <meta name="twitter:image:src" content="/docs.docker.jp.onthefly/images/docs@2x.png"/>
  <meta name="twitter:image:alt" content="Docker ドキュメント"/>
  <meta property="article:published_time" itemprop="datePublished" content="2020-06-17T13:51:19+09:00"/>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="keywords" content="security, namespaces, rootless">
  <link rel="stylesheet" href="/docs.docker.jp.onthefly/css/font-awesome.min.css">
  <link rel="stylesheet" href="/docs.docker.jp.onthefly/css/bootstrap.min.css">
  <link id="pygments" rel="stylesheet" href="/docs.docker.jp.onthefly/css/pygments/perldoc.css">
  <link id="pagestyle" rel="stylesheet" href="/docs.docker.jp.onthefly/css/style.css">

  <!-- Go get "Open Sans" font from Google -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
  <!-- SEO stuff -->
  <title>Run the Docker daemon as a non-root user (Rootless mode) | Docker ドキュメント</title>
  <meta property="og:title" content="Run the Docker daemon as a non-root user (Rootless mode)" />
  <meta property="og:locale" content="ja_JP" />
  <meta name="description" content="Run the Docker daemon as a non-root user (Rootless mode)" />
  <meta property="og:description" content="Run the Docker daemon as a non-root user (Rootless mode)" />
  <link rel="canonical" href="/engine/security/rootless/" />
  <meta property="og:url" content="https://docs.docker.com/engine/security/rootless/" />
  <meta property="og:site_name" content="Docker ドキュメント" />
  <script type="application/ld+json">{"@context":"http://schema.org","@type":"WebPage","headline":"Run the Docker daemon as a non-root user (Rootless mode)","description":"Run the Docker daemon as a non-root user (Rootless mode)","url":"https://docs.docker.com/engine/security/rootless/"}</script>
  <!-- END SEO STUFF -->
  
  <script>
  // Default to assuming this is an archive and hiding some stuff
  // See js/archive.js and js/docs.js for logic relating to this
  var dockerVersion = 'v19.03';
  </script>
</head>


    <body ng-app="Docker" ng-controller="DockerController" class="colums">
    <header>
        <nav class="nav-secondary navbar navbar-fixed-top">
    <!-- <div class="fan"></div> -->
    <div class="container-fluid">
        <div class="navbar-header">
            <a href="/docs.docker.jp.onthefly/">
                <img class="logo" src="/docs.docker.jp.onthefly/images/docker-docs-logo.svg" alt="Docker Docs" title="Docker Docs">
            </a>
        </div>
        <div class="navbar-collapse" aria-expanded="false" style="height: 1px;">
            <div class="logo-mobile">
    <a href="/docs.docker.jp.onthefly/">
        <img src="/docs.docker.jp.onthefly/images/docker-icon.svg" alt="Docker Docs" title="Docker Docs">
    </a>
</div>
<div class="search-form" id="search-div">
    <form class="search-form form-inline ng-pristine ng-valid" id="searchForm" action="/docs.docker.jp.onthefly/search/">
        <input class="search-field form-control ds-input" id="st-search-input" value="" name="q" placeholder="文書内検索" type="search" autocomplete="off" spellcheck="false" dir="auto" style="position: relative; vertical-align: top;">
        <div id="autocompleteContainer">
            <div id="autocompleteResults"></div>
        </div>
        <!-- <button type="submit" class="search-submit btn btn-default">検索</button> -->
    </form>
</div>
<div class="sidebar-toggle">
    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
    </button>
</div>
<div class="nav-container hidden-sm hidden-xs">
    <div id="tabs">
        <ul class="tabs jsTOCHorizontal">

        </ul>
    </div>
    <div class="ctrl-right">
        <a href="javascript:void(0)" id="menu-toggle"><i class="fa fa-indent" aria-hidden="true"></i></a>
        <div class="btn-group">
  <button type="button" class="btn btn-default dropdown-btn dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    Docker v19.03 (最新)     <span class="caret"></span>
  </button>
  <ul class="dropdown-menu">
    <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/v18.09/">Docker v18.09</a></li><li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/v18.03/">Docker v18.03</a></li><li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/v17.06/">Docker v17.06</a></li>
  </ul>
</div>

    </div>
</div>

        </div>
    </div>
</nav>

    </header>
    <div class="wrapper right-open">
        <div class="container-fluid">
            <div class="row">
                <div class="col-body">
                    <main class="col-content content">
                        <section class="section">
                            
                            
                            <h1>Run the Docker daemon as a non-root user (Rootless mode)</h1> 
                            <span class="reading-time" title="Estimated reading time">
  <span class="reading-time-label">読む時間の目安: </span>
  
  
    14 分
  
</span>

                            
                            <p>Rootless mode allows running the Docker daemon and containers as a non-root
user, for the sake of mitigating potential vulnerabilities in the daemon and
the container runtime.</p>

<p>Rootless mode does not require root privileges even for installation of the
Docker daemon, as long as <a href="#prerequisites">the prerequisites</a> are satisfied.</p>

<p>Rootless mode was introduced in Docker Engine 19.03.</p>

<blockquote>
  <p><strong>Note</strong>:
Rootless mode is an experimental feature and has <a href="#known-limitations">limitations</a>.</p>
</blockquote>

<h2 id="how-it-works">How it works</h2>
<p>Rootless mode executes the Docker daemon and containers inside a user namespace.
This is very similar to <a href="/docs.docker.jp.onthefly/engine/security/userns-remap/"><code class="highlighter-rouge">userns-remap</code> mode</a>, except that
with <code class="highlighter-rouge">userns-remap</code> mode, the daemon itself is running with root privileges, whereas in
rootless mode, both the daemon and the container are running without root privileges.</p>

<p>Rootless mode does not use binaries with SETUID bits or file capabilities,
except <code class="highlighter-rouge">newuidmap</code> and <code class="highlighter-rouge">newgidmap</code>, which are needed to allow multiple
UIDs/GIDs to be used in the user namespace.</p>

<h2 id="prerequisites">Prerequisites</h2>

<ul>
  <li>
    <p><code class="highlighter-rouge">newuidmap</code> and <code class="highlighter-rouge">newgidmap</code> need to be installed on the host. These commands
are provided by the <code class="highlighter-rouge">uidmap</code> package on most distros.</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">/etc/subuid</code> and <code class="highlighter-rouge">/etc/subgid</code> should contain at least 65,536 subordinate
UIDs/GIDs for the user. In the following example, the user <code class="highlighter-rouge">testuser</code> has
65,536 subordinate UIDs/GIDs (231072-296607).</p>
  </li>
</ul>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> id <span class="nt">-u</span>
<span class="go">1001
</span><span class="gp">$</span> whoami
<span class="go">testuser
</span><span class="gp">$</span> <span class="nb">grep</span> ^<span class="k">$(</span>whoami<span class="k">)</span>: /etc/subuid
<span class="go">testuser:231072:65536
</span><span class="gp">$</span> <span class="nb">grep</span> ^<span class="k">$(</span>whoami<span class="k">)</span>: /etc/subgid
<span class="go">testuser::231072:65536
</span></code></pre></div></div>

<h3 id="distribution-specific-hint">Distribution-specific hint</h3>

<blockquote>
  <p>Note: Using Ubuntu kernel is recommended.</p>
</blockquote>

<h4 id="ubuntu">Ubuntu</h4>
<ul>
  <li>
    <p>No preparation is needed.</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">overlay2</code> storage driver  is enabled by default
(<a href="https://kernel.ubuntu.com/git/ubuntu/ubuntu-bionic.git/commit/fs/overlayfs?id=3b7da90f28fe1ed4b79ef2d994c81efbc58f1144">Ubuntu-specific kernel patch</a>).</p>
  </li>
  <li>
    <p>Known to work on Ubuntu 16.04, 18.04, and 20.04.</p>
  </li>
</ul>

<h4 id="debian-gnulinux">Debian GNU/Linux</h4>
<ul>
  <li>
    <p>Add <code class="highlighter-rouge">kernel.unprivileged_userns_clone=1</code> to <code class="highlighter-rouge">/etc/sysctl.conf</code> (or
<code class="highlighter-rouge">/etc/sysctl.d</code>) and run <code class="highlighter-rouge">sudo sysctl --system</code>.</p>
  </li>
  <li>
    <p>To use the <code class="highlighter-rouge">overlay2</code> storage driver (recommended), run
<code class="highlighter-rouge">sudo modprobe overlay permit_mounts_in_userns=1</code>
 (<a href="https://salsa.debian.org/kernel-team/linux/blob/283390e7feb21b47779b48e0c8eb0cc409d2c815/debian/patches/debian/overlayfs-permit-mounts-in-userns.patch">Debian-specific kernel patch, introduced in Debian 10</a>).
 Put the configuration to <code class="highlighter-rouge">/etc/modprobe.d</code> for persistence.</p>
  </li>
  <li>
    <p>Known to work on Debian 9 and 10.
<code class="highlighter-rouge">overlay2</code> is only supported since Debian 10 and needs <code class="highlighter-rouge">modprobe</code>
configuration described above.</p>
  </li>
</ul>

<h4 id="arch-linux">Arch Linux</h4>
<ul>
  <li>Add <code class="highlighter-rouge">kernel.unprivileged_userns_clone=1</code> to <code class="highlighter-rouge">/etc/sysctl.conf</code> (or
<code class="highlighter-rouge">/etc/sysctl.d</code>) and run <code class="highlighter-rouge">sudo sysctl --system</code></li>
</ul>

<h4 id="opensuse">openSUSE</h4>
<ul>
  <li>
    <p><code class="highlighter-rouge">sudo modprobe ip_tables iptable_mangle iptable_nat iptable_filter</code> is required.
This might be required on other distros as well depending on the configuration.</p>
  </li>
  <li>
    <p>Known to work on openSUSE 15.</p>
  </li>
</ul>

<h4 id="fedora-31-and-later">Fedora 31 and later</h4>
<ul>
  <li>Fedora 31 uses cgroup v2 by default, which is not yet supported by the containerd runtime.
Run <code class="highlighter-rouge">sudo grubby --update-kernel=ALL --args="systemd.unified_cgroup_hierarchy=0"</code>
to use cgroup v1.</li>
  <li><code class="highlighter-rouge">sudo dnf install -y iptables</code> might be needed.</li>
</ul>

<h4 id="centos-8">CentOS 8</h4>
<ul>
  <li><code class="highlighter-rouge">sudo dnf install -y iptables</code> might be needed.</li>
</ul>

<h4 id="centos-7">CentOS 7</h4>
<ul>
  <li>
    <p>Add <code class="highlighter-rouge">user.max_user_namespaces=28633</code> to <code class="highlighter-rouge">/etc/sysctl.conf</code> (or
<code class="highlighter-rouge">/etc/sysctl.d</code>) and run <code class="highlighter-rouge">sudo sysctl --system</code>.</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">systemctl --user</code> does not work by default.
Run the daemon directly without systemd:
<code class="highlighter-rouge">dockerd-rootless.sh --experimental --storage-driver vfs</code></p>
  </li>
  <li>
    <p>Known to work on CentOS 7.7. Older releases require extra configuration
steps.</p>
  </li>
  <li>
    <p>CentOS 7.6 and older releases require <a href="https://copr.fedorainfracloud.org/coprs/vbatts/shadow-utils-newxidmap/">COPR package <code class="highlighter-rouge">vbatts/shadow-utils-newxidmap</code></a> to be installed.</p>
  </li>
  <li>
    <p>CentOS 7.5 and older releases require running
<code class="highlighter-rouge">sudo grubby --update-kernel=ALL --args="user_namespace.enable=1"</code> and reboot.</p>
  </li>
</ul>

<h2 id="known-limitations">Known limitations</h2>

<ul>
  <li>Only <code class="highlighter-rouge">vfs</code> graphdriver is supported. However, on Ubuntu and Debian 10,
<code class="highlighter-rouge">overlay2</code> and <code class="highlighter-rouge">overlay</code> are also supported.</li>
  <li>Following features are not supported:
    <ul>
      <li>Cgroups (including <code class="highlighter-rouge">docker top</code>, which depends on the cgroups)</li>
      <li>AppArmor</li>
      <li>Checkpoint</li>
      <li>Overlay network</li>
      <li>Exposing SCTP ports</li>
    </ul>
  </li>
  <li>To use <code class="highlighter-rouge">ping</code> command, see <a href="#routing-ping-packets">Routing ping packets</a></li>
  <li>To expose privileged TCP/UDP ports (&lt; 1024), see <a href="#exposing-privileged-ports">Exposing privileged ports</a></li>
  <li><code class="highlighter-rouge">IPAddress</code> shown in <code class="highlighter-rouge">docker inspect</code> and is namespaced inside RootlessKit’s network namespace.
This means the IP address is not reachable from the host without <code class="highlighter-rouge">nsenter</code>-ing into the network namespace.</li>
  <li>Host network (<code class="highlighter-rouge">docker run --net=host</code>) is namespaced inside RootlessKit as well.</li>
</ul>

<h2 id="install">Install</h2>

<p>The installation script is available at <a href="https://get.docker.com/rootless" target="_blank" class="_">https://get.docker.com/rootless</a>.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> curl <span class="nt">-fsSL</span> https://get.docker.com/rootless | sh
</code></pre></div></div>

<p>Make sure to run the script as a non-root user.
To install Rootless Docker as the root user, see <a href="#manual-installation">Manual installation</a> steps.</p>

<p>The script will show the environment variables that are needed to be set:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> curl <span class="nt">-fsSL</span> https://get.docker.com/rootless | sh
<span class="c">...
</span><span class="gp">#</span> Docker binaries are installed <span class="k">in</span> /home/testuser/bin
<span class="gp">#</span> WARN: dockerd is not <span class="k">in </span>your current PATH or pointing to /home/testuser/bin/dockerd
<span class="gp">#</span> Make sure the following environment variables are <span class="nb">set</span> <span class="o">(</span>or add them to ~/.bashrc<span class="o">)</span>:
<span class="go">
</span><span class="gp">export PATH=/home/testuser/bin:$</span>PATH
<span class="gp">export PATH=$</span>PATH:/sbin
<span class="go">export DOCKER_HOST=unix:///run/user/1001/docker.sock

</span><span class="gp">#</span>
<span class="gp">#</span> To control docker service run:
<span class="gp">#</span> systemctl <span class="nt">--user</span> <span class="o">(</span>start|stop|restart<span class="o">)</span> docker
<span class="gp">#</span>
</code></pre></div></div>

<h3 id="manual-installation">Manual installation</h3>
<p>To install the binaries manually without using the installer, extract
<code class="highlighter-rouge">docker-rootless-extras-&lt;version&gt;.tar.gz</code> along with <code class="highlighter-rouge">docker-&lt;version&gt;.tar.gz</code>:
from [https://download.docker.com/linux/static/stable/x86<em>64/](https://download.docker.com/linux/static/stable/x86_64/){: target=”_blank” class=”</em>” }</p>

<p>If you already have Docker daemon running as the root, you only need to extract <code class="highlighter-rouge">docker-rootless-extras-&lt;version&gt;.tar.gz</code>.
The archive can be extracted under an arbitrary directory listed in the <code class="highlighter-rouge">$PATH</code>. e.g. <code class="highlighter-rouge">/usr/local/bin</code>, or <code class="highlighter-rouge">$HOME/bin</code>.</p>

<h3 id="nightly-channel">Nightly channel</h3>

<p>To install a nightly version of Rootless Docker, execute the installation script with <code class="highlighter-rouge">CHANNEL="nightly"</code>:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> curl <span class="nt">-fsSL</span> https://get.docker.com/rootless | <span class="nv">CHANNEL</span><span class="o">=</span><span class="s2">"nightly"</span> sh
</code></pre></div></div>

<p>The raw binary archives are available at:</p>
<ul>
  <li>https://master.dockerproject.org/linux/x86_64/docker-rootless-extras.tgz</li>
  <li>https://master.dockerproject.org/linux/x86_64/docker.tgz</li>
</ul>

<h2 id="usage">Usage</h2>

<h3 id="daemon">Daemon</h3>

<p>Use <code class="highlighter-rouge">systemctl --user</code> to manage the lifecycle of the daemon:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> systemctl <span class="nt">--user</span> start docker
</code></pre></div></div>

<p>To launch the daemon on system startup, enable the systemd service and lingering:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> systemctl <span class="nt">--user</span> <span class="nb">enable </span>docker
<span class="gp">$</span> <span class="nb">sudo </span>loginctl enable-linger <span class="k">$(</span>whoami<span class="k">)</span>
</code></pre></div></div>

<p>To run the daemon directly without systemd, you need to run
<code class="highlighter-rouge">dockerd-rootless.sh</code> instead of <code class="highlighter-rouge">dockerd</code>:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> dockerd-rootless.sh <span class="nt">--experimental</span> <span class="nt">--storage-driver</span> vfs
</code></pre></div></div>

<p>As Rootless mode is experimental, you need to run
<code class="highlighter-rouge">dockerd-rootless.sh</code> with <code class="highlighter-rouge">--experimental</code>.
You also need <code class="highlighter-rouge">--storage-driver vfs</code> unless using Ubuntu or Debian 10 kernel.
You don’t need to care about these flags if you manage the daemon using systemd, as
these flags are automatically added to the systemd unit file.</p>

<p>Remarks about directory paths:</p>
<ul>
  <li>The socket path is set to <code class="highlighter-rouge">$XDG_RUNTIME_DIR/docker.sock</code> by default.
<code class="highlighter-rouge">$XDG_RUNTIME_DIR</code> is typically set to <code class="highlighter-rouge">/run/user/$UID</code>.</li>
  <li>The data dir is set to <code class="highlighter-rouge">~/.local/share/docker</code> by default.</li>
  <li>The exec dir is set to <code class="highlighter-rouge">$XDG_RUNTIME_DIR/docker</code> by default.</li>
  <li>The daemon config dir is set to <code class="highlighter-rouge">~/.config/docker</code> (not <code class="highlighter-rouge">~/.docker</code>, which is
used by the client) by default.</li>
</ul>

<p>Other remarks:</p>
<ul>
  <li>The <code class="highlighter-rouge">dockerd-rootless.sh</code> script executes <code class="highlighter-rouge">dockerd</code> in its own user, mount,
and network namespaces. You can enter the namespaces by running
<code class="highlighter-rouge">nsenter -U --preserve-credentials -n -m -t $(cat $XDG_RUNTIME_DIR/docker.pid)</code>.</li>
  <li><code class="highlighter-rouge">docker info</code> shows <code class="highlighter-rouge">rootless</code> in <code class="highlighter-rouge">SecurityOptions</code></li>
  <li><code class="highlighter-rouge">docker info</code> shows <code class="highlighter-rouge">none</code> as <code class="highlighter-rouge">Cgroup Driver</code></li>
</ul>

<h3 id="client">Client</h3>

<p>You need to specify the socket path explicitly.</p>

<p>To specify the socket path via <code class="highlighter-rouge">$DOCKER_HOST</code>:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> <span class="nb">export </span><span class="nv">DOCKER_HOST</span><span class="o">=</span>unix://<span class="nv">$XDG_RUNTIME_DIR</span>/docker.sock
<span class="gp">$</span> docker run <span class="nt">-d</span> <span class="nt">-p</span> 8080:80 nginx
</code></pre></div></div>

<p>To specify the socket path via <code class="highlighter-rouge">docker context</code>:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker context create rootless <span class="nt">--description</span> <span class="s2">"for rootless mode"</span> <span class="nt">--docker</span> <span class="s2">"host=unix://</span><span class="nv">$XDG_RUNTIME_DIR</span><span class="s2">/docker.sock"</span>
<span class="go">rootless
Successfully created context "rootless"
</span><span class="gp">$</span> docker context use rootless
<span class="go">rootless
Current context is now "rootless"
</span><span class="gp">$</span> docker run <span class="nt">-d</span> <span class="nt">-p</span> 8080:80 nginx
</code></pre></div></div>

<h2 id="tips">Tips</h2>

<h3 id="rootless-docker-in-docker">Rootless Docker in Docker</h3>

<p>To run Rootless Docker inside “rootful” Docker, use <code class="highlighter-rouge">docker:&lt;version&gt;-dind-rootless</code>
image instead of <code class="highlighter-rouge">docker:&lt;version&gt;-dind</code> image.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker run <span class="nt">-d</span> <span class="nt">--name</span> dind-rootless <span class="nt">--privileged</span> docker:19.03-dind-rootless <span class="nt">--experimental</span>
</code></pre></div></div>

<p><code class="highlighter-rouge">docker:&lt;version&gt;-dind-rootless</code> image runs as a non-root user (UID 1000).
However, <code class="highlighter-rouge">--privileged</code> is required for disabling seccomp, AppArmor, and mount
masks.</p>

<h3 id="expose-docker-api-socket-via-tcp">Expose Docker API socket via TCP</h3>

<p>To expose the Docker API socket via TCP, you need to launch <code class="highlighter-rouge">dockerd-rootless.sh</code>
with <code class="highlighter-rouge">DOCKERD_ROOTLESS_ROOTLESSKIT_FLAGS="-p 0.0.0.0:2376:2376/tcp"</code>.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> <span class="nv">DOCKERD_ROOTLESS_ROOTLESSKIT_FLAGS</span><span class="o">=</span><span class="s2">"-p 0.0.0.0:2376:2376/tcp"</span> <span class="se">\</span>
  dockerd-rootless.sh <span class="nt">--experimental</span> <span class="se">\</span>
  <span class="nt">-H</span> tcp://0.0.0.0:2376 <span class="se">\</span>
  <span class="nt">--tlsverify</span> <span class="nt">--tlscacert</span><span class="o">=</span>ca.pem <span class="nt">--tlscert</span><span class="o">=</span>cert.pem <span class="nt">--tlskey</span><span class="o">=</span>key.pem
</code></pre></div></div>

<h3 id="expose-docker-api-socket-via-ssh">Expose Docker API socket via SSH</h3>

<p>To expose the Docker API socket via SSH, you need to make sure <code class="highlighter-rouge">$DOCKER_HOST</code>
is set on the remote host.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> ssh <span class="nt">-l</span> &lt;REMOTEUSER&gt; &lt;REMOTEHOST&gt; <span class="s1">'echo $DOCKER_HOST'</span>
<span class="go">unix:///run/user/1001/docker.sock
</span><span class="gp">$</span> docker <span class="nt">-H</span> ssh://&lt;REMOTEUSER&gt;@&lt;REMOTEHOST&gt; run ...
</code></pre></div></div>

<h3 id="routing-ping-packets">Routing ping packets</h3>

<p>On some distributions, <code class="highlighter-rouge">ping</code> does not work by default.</p>

<p>Add <code class="highlighter-rouge">net.ipv4.ping_group_range = 0   2147483647</code> to <code class="highlighter-rouge">/etc/sysctl.conf</code> (or
<code class="highlighter-rouge">/etc/sysctl.d</code>) and run <code class="highlighter-rouge">sudo sysctl --system</code> to allow using <code class="highlighter-rouge">ping</code>.</p>

<h3 id="exposing-privileged-ports">Exposing privileged ports</h3>

<p>To expose privileged ports (&lt; 1024), set <code class="highlighter-rouge">CAP_NET_BIND_SERVICE</code> on <code class="highlighter-rouge">rootlesskit</code> binary.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> <span class="nb">sudo </span>setcap <span class="nv">cap_net_bind_service</span><span class="o">=</span>ep <span class="nv">$HOME</span>/bin/rootlesskit
</code></pre></div></div>

<p>Or add <code class="highlighter-rouge">net.ipv4.ip_unprivileged_port_start=0</code> to <code class="highlighter-rouge">/etc/sysctl.conf</code> (or
<code class="highlighter-rouge">/etc/sysctl.d</code>) and run <code class="highlighter-rouge">sudo sysctl --system</code>.</p>

<h3 id="limiting-resources">Limiting resources</h3>

<p>In Docker 19.03, rootless mode ignores cgroup-related <code class="highlighter-rouge">docker run</code> flags such as
<code class="highlighter-rouge">--cpus</code>, <code class="highlighter-rouge">--memory</code>, --pids-limit`.</p>

<p>However, traditional <code class="highlighter-rouge">ulimit</code> and <a href="https://github.com/opsengine/cpulimit"><code class="highlighter-rouge">cpulimit</code></a>
can be still used, though they work in process-granularity rather than in container-granularity,
and can be arbitrary disabled by the container process.</p>

<p>e.g.</p>
<ul>
  <li>
    <p>To limit CPU usage to 0.5 cores (akin to <code class="highlighter-rouge">docker run --cpus 0.5):
</code>docker run       <IMAGE> cpulimit --limit=50 --include-children <command />`</IMAGE>
</p>
  </li>
  <li>
    <p>To limit max VSZ to 64MiB (akin to <code class="highlighter-rouge">docker run --memory 64m</code>):
<code class="highlighter-rouge">docker run &lt;IMAGE&gt; sh -c "ulimit -v 65536; &lt;COMMAND&gt;"</code></p>
  </li>
  <li>
    <p>To limit max number of processes to 100 per namespaced UID 2000
(akin to <code class="highlighter-rouge">docker run --pids-limit=100):
</code>docker run --user 2000 --ulimit nproc=100       <IMAGE> <command />`</IMAGE>
</p>
  </li>
</ul>

<h3 id="changing-network-stack">Changing network stack</h3>

<p><code class="highlighter-rouge">dockerd-rootless.sh</code> uses <a href="https://github.com/rootless-containers/slirp4netns">slirp4netns</a>
(if installed) or <a href="https://github.com/moby/vpnkit">VPNKit</a> as the network stack
by default.</p>

<p>These network stacks run in userspace and might have performance overhead.
See <a href="https://github.com/rootless-containers/rootlesskit/tree/v0.9.5#network-drivers">RootlessKit documentation</a> for further information.</p>

<p>Optionally, you can use <code class="highlighter-rouge">lxc-user-nic</code> instead for the best performance.
To use <code class="highlighter-rouge">lxc-user-nic</code>, you need to edit <a href="https://github.com/rootless-containers/rootlesskit/tree/v0.9.5#--netlxc-user-nic-experimental"><code class="highlighter-rouge">/etc/lxc/lxc-usernet</code></a>
and set <code class="highlighter-rouge">$DOCKERD_ROOTLESS_ROOTLESSKIT_NET=lxc-user-nic</code>.</p>

<h2 id="troubleshooting">Troubleshooting</h2>

<h3 id="troubles-during-starting-the-daemon">Troubles during starting the daemon</h3>
<h4 id="rootlesskitparent-error-failed-to-start-the-child-forkexec-procselfexe-operation-not-permitted"><code class="highlighter-rouge">[rootlesskit:parent] error: failed to start the child: fork/exec /proc/self/exe: operation not permitted</code></h4>

<p>This error happens mostly when the value of <code class="highlighter-rouge">/proc/sys/kernel/unprivileged_userns_clone </code> is set to 0:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> <span class="nb">cat</span> /proc/sys/kernel/unprivileged_userns_clone
<span class="go">0
</span></code></pre></div></div>

<p>To fix the issue, add  <code class="highlighter-rouge">kernel.unprivileged_userns_clone=1</code> to
<code class="highlighter-rouge">/etc/sysctl.conf</code> (or <code class="highlighter-rouge">/etc/sysctl.d</code>) and run <code class="highlighter-rouge">sudo sysctl --system</code>.</p>

<h4 id="rootlesskitparent-error-failed-to-start-the-child-forkexec-procselfexe-no-space-left-on-device"><code class="highlighter-rouge">[rootlesskit:parent] error: failed to start the child: fork/exec /proc/self/exe: no space left on device</code></h4>

<p>This error happens mostly when the value of <code class="highlighter-rouge">/proc/sys/user/max_user_namespaces</code> is too small:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> <span class="nb">cat</span> /proc/sys/user/max_user_namespaces
<span class="go">0
</span></code></pre></div></div>

<p>To fix the issue, add  <code class="highlighter-rouge">user.max_user_namespaces=28633</code> to
<code class="highlighter-rouge">/etc/sysctl.conf</code> (or <code class="highlighter-rouge">/etc/sysctl.d</code>) and run <code class="highlighter-rouge">sudo sysctl --system</code>.</p>

<h4 id="rootlesskitparent-error-failed-to-setup-uidgid-map-failed-to-compute-uidgid-map-no-subuid-ranges-found-for-user-1001-testuser"><code class="highlighter-rouge">[rootlesskit:parent] error: failed to setup UID/GID map: failed to compute uid/gid map: No subuid ranges found for user 1001 ("testuser")</code></h4>

<p>This error happens when <code class="highlighter-rouge">/etc/subuid</code> and <code class="highlighter-rouge">/etc/subgid</code> are not configured.</p>

<p>See <a href="#prerequisites">Prerequisites</a>.</p>

<h4 id="could-not-get-xdg_runtime_dir"><code class="highlighter-rouge">could not get XDG_RUNTIME_DIR</code></h4>
<p>This error happens when <code class="highlighter-rouge">$XDG_RUNTIME_DIR</code> is not set.</p>

<p>On a non-systemd host, you need to create a directory and set the path by yourself:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> <span class="nb">export </span><span class="nv">XDG_RUNTIME_DIR</span><span class="o">=</span><span class="nv">$HOME</span>/.docker/xrd
<span class="gp">$</span> rm <span class="nt">-rf</span> <span class="nv">$XDG_RUNTIME_DIR</span>
<span class="gp">$</span> mkdir <span class="nt">-p</span> <span class="nv">$XDG_RUNTIME_DIR</span>
<span class="gp">$</span> dockerd-rootless.sh <span class="nt">--experimental</span>
</code></pre></div></div>

<blockquote>
  <p><strong>Note</strong>:
You have to remove the directory on every logout.</p>
</blockquote>

<p>On a systemd host, login to the host via <code class="highlighter-rouge">pam_systemd</code> (see below).
The value is automatically set to <code class="highlighter-rouge">/run/user/$UID</code> and cleaned up on every logout.</p>

<h4 id="systemctl---user-fails-with-failed-to-connect-to-bus-no-such-file-or-directory"><code class="highlighter-rouge">systemctl --user</code> fails with <code class="highlighter-rouge">Failed to connect to bus: No such file or directory</code></h4>

<p>This error happens mostly when you switched from the root user to an non-root user with <code class="highlighter-rouge">sudo</code>:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">#</span> <span class="nb">sudo</span> <span class="nt">-iu</span> testuser
<span class="gp">$</span> systemctl <span class="nt">--user</span> start docker
<span class="go">Failed to connect to bus: No such file or directory
</span></code></pre></div></div>

<p>Instead of <code class="highlighter-rouge">sudo -iu &lt;USERNAME&gt;</code>, you need to login via <code class="highlighter-rouge">pam_systemd</code>, e.g.</p>
<ul>
  <li>Login via the graphic console</li>
  <li><code class="highlighter-rouge">ssh &lt;USERNAME&gt;@localhost</code></li>
  <li><code class="highlighter-rouge">machinectl shell &lt;USERNAME&gt;@</code></li>
</ul>

<h4 id="the-daemon-does-not-start-up-automatically">The daemon does not start up automatically</h4>

<p>You need <code class="highlighter-rouge">sudo loginctl enable-linger $(whoami)</code> to enable the daemon to start
up automatically. See <a href="#usage">Usage</a>.</p>

<h4 id="rootless-mode-is-supported-only-when-running-in-experimental-mode"><code class="highlighter-rouge">rootless mode is supported only when running in experimental mode</code></h4>

<p>This error happens when the daemon was launched without <code class="highlighter-rouge">--experimental</code>.
See <a href="#usage">Usage</a>.</p>

<h3 id="troubles-during-docker-pull">Troubles during <code class="highlighter-rouge">docker pull</code></h3>
<h4 id="docker-failed-to-register-layer-error-processing-tar-fileexit-status-1-lchown-file-invalid-argument"><code class="highlighter-rouge">docker: failed to register layer: Error processing tar file(exit status 1): lchown &lt;FILE&gt;: invalid argument</code></h4>

<p>This error happens when the number of available entries in <code class="highlighter-rouge">/etc/subuid</code> or <code class="highlighter-rouge">/etc/subgid</code> is not sufficient.
The number of required entries vary across images, but having 65,536 entries is enough for most images.</p>

<p>See <a href="#prerequisites">Prerequisites</a>.</p>

<h3 id="errors-during-docker-run">Errors during <code class="highlighter-rouge">docker run</code></h3>

<h4 id="--cpus---memory-and---pids-limit-are-ignored"><code class="highlighter-rouge">--cpus</code>, <code class="highlighter-rouge">--memory</code>, and <code class="highlighter-rouge">--pids-limit</code> are ignored</h4>

<p>Expected behavior in Docker 19.03.
See <a href="#limiting-resources">Limiting resources</a>.</p>

<h4 id="error-response-from-daemon-cgroups-cgroup-mountpoint-does-not-exist-unknown"><code class="highlighter-rouge">Error response from daemon: cgroups: cgroup mountpoint does not exist: unknown.</code></h4>

<p>This error happens mostly when the host is running with cgroup v2.
See <a href="#fedora-31-or-later">Fedora 31 or later</a> to switch the host to use cgroup v1.</p>

<h3 id="networking">Networking</h3>

<h4 id="docker-run--p-fails-with-cannot-expose-privileged-port-"><code class="highlighter-rouge">docker run -p</code> fails with <code class="highlighter-rouge">cannot expose privileged port ...</code></h4>

<p><code class="highlighter-rouge">docker run -p</code> fails with this error when an privileged port (&lt; 1024) is specified as the host port.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker run <span class="nt">-p</span> 80:80 nginx:alpine
<span class="gp">docker: Error response from daemon: driver failed programming external connectivity on endpoint focused_swanson (9e2e139a9d8fc92b37c36edfa6214a6e986fa2028c0cc359812f685173fa6df7): Error starting userland proxy: error while calling PortManager.AddPort(): cannot expose privileged port 80, you might need to add "net.ipv4.ip_unprivileged_port_start=0" (currently 1024) to /etc/sysctl.conf, or set CAP_NET_BIND_SERVICE on rootlesskit binary, or choose a larger port number (&gt;</span><span class="o">=</span> 1024<span class="o">)</span>: listen tcp 0.0.0.0:80: <span class="nb">bind</span>: permission denied.
</code></pre></div></div>

<p>When this error happened, consider using an unprivileged port instead, e.g. 8080 instead of 80.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker run <span class="nt">-p</span> 8080:80 nginx:alpine
</code></pre></div></div>

<p>To allow exposing privileged ports, see <a href="#exposing-privileged-ports">Exposing privileged ports</a>.</p>

<h4 id="ping-doesnt-work">ping doesn’t work</h4>

<p>Ping does not work when <code class="highlighter-rouge">/proc/sys/net/ipv4/ping_group_range</code> is set to <code class="highlighter-rouge">1 0</code>:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> <span class="nb">cat</span> /proc/sys/net/ipv4/ping_group_range
<span class="go">1       0
</span></code></pre></div></div>

<p>See <a href="#routing-ping-packets">Routing ping packets</a>.</p>

<h4 id="ipaddress-shown-in-docker-inspect-is-unreachable"><code class="highlighter-rouge">IPAddress</code> shown in <code class="highlighter-rouge">docker inspect</code> is unreachable</h4>

<p>Expected behavior, as the daemon is namespaced inside RootlessKit’s network namespace.
Use <code class="highlighter-rouge">docker run -p</code> instead.</p>

<h4 id="--nethost-doesnt-listen-ports-on-the-host-network-namespace"><code class="highlighter-rouge">--net=host</code> doesn’t listen ports on the host network namespace</h4>

<p>Expected behavior, as the daemon is namespaced inside RootlessKit’s network namespace.
Use <code class="highlighter-rouge">docker run -p</code> instead.</p>

                            <!-- tags -->
                            
                            <span class="glyphicon glyphicon-tags" style="padding-right: 10px"></span><span
                                style="vertical-align: 2px"><a
                                    href="https://docs.docker.com/search/?q=security">security</a>, <a
                                    href="https://docs.docker.com/search/?q=namespaces">namespaces</a>, <a
                                    href="https://docs.docker.com/search/?q=rootless">rootless</a></span>
                            
                            
                            <div id="ratings-div"
                                style="color:#b9c2cc; text-align: center; margin-top: 150px;">
                                <div id="pd_rating_holder_8453675"></div>
                                <script type="text/javascript">
                                    PDRTJS_settings_8453675 = {
                                        "id": "8453675",
                                        "unique_id": "engine/security/rootless.md",
                                        "title": "Run the Docker daemon as a non-root user (Rootless mode)",
                                        "permalink": "https://github.com/docker/docker.github.io/blob/master/engine/security/rootless.md"
                                    };
                                    (function (d, c, j) {
                                        if (!document.getElementById(j)) {
                                            var pd = d.createElement(c),
                                                s;
                                            pd.id = j;
                                            pd.src = ('https:' == document.location.protocol) ? 'https://polldaddy.com/js/rating/rating.js' : 'http://i0.poll.fm/js/rating/rating.js';
                                            s = document.getElementsByTagName(c)[0];
                                            s.parentNode.insertBefore(pd, s);
                                        }
                                    }(document, 'script', 'pd-rating-js'));
                                </script>
                            </div>
                            
                        </section>
                    </main>
                    <nav class="col-nav">
                        <div id="sidebar-nav" class="sidebar hidden-sm hidden-xs">
                            <div id="navbar" class="nav-sidebar">
    <ul class="nav jsTOCHorizontal hidden-md hidden-lg">
    </ul>
    <div class="divider hidden-md hidden-lg"></div>
    <ul class="nav" id="jsTOCLeftNav">
    </ul>
</div>

                        </div>
                    </nav>
                    <div class="col-toc">
                        <div class="sidebar hidden-xs hidden-sm">
                            <div class="toc-nav">
                                <div class="feedback-links">
                                    <ul>
                                        
                                        <li><a href="https://github.com/matsuand/docs.docker.jp/edit/v19.03.local/engine/security/rootless.md"><i
                                                    class="fa fa-pencil-square-o" aria-hidden="true"></i> このページの編集</a></li>
                                        <li><a href="https://github.com/matsuand/docs.docker.jp/issues/new?body=ファイル: [engine/security/rootless.md](https://matsuand.github.io/docs.docker.jp.onthefly/engine/security/rootless/)"
                                                class="nomunge"><i class="fa fa-check" aria-hidden="true"></i> 文書変更のリクエスト</a></li>
                                        <!-- toggle mode -->
                                        <li>
                                            <div class="toggle-mode">
                                                <div class="icon">
                                                    <i class="fa fa-sun-o" aria-hidden="true"></i>
                                                </div>
                                                <div class="toggle-switch">
                                                    <label class="switch">
                                                        <input type="checkbox" id="switch-style">
                                                        <div class="slider round"></div>
                                                    </label>
                                                </div>
                                                <div class="icon">
                                                    <i class="fa fa-moon-o" aria-hidden="true"></i>
                                                </div>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                                
                                
                                
                                
                                <div id="side-toc-title">本ページ内:</div>
                                
<ul id="my_toc" class="inline_toc">
  <li><a href="#how-it-works" class="nomunge">How it works</a></li>
  <li><a href="#prerequisites" class="nomunge">Prerequisites</a>
    <ul>
      <li><a href="#distribution-specific-hint" class="nomunge">Distribution-specific hint</a></li>
    </ul>
  </li>
  <li><a href="#known-limitations" class="nomunge">Known limitations</a></li>
  <li><a href="#install" class="nomunge">Install</a>
    <ul>
      <li><a href="#manual-installation" class="nomunge">Manual installation</a></li>
      <li><a href="#nightly-channel" class="nomunge">Nightly channel</a></li>
    </ul>
  </li>
  <li><a href="#usage" class="nomunge">Usage</a>
    <ul>
      <li><a href="#daemon" class="nomunge">Daemon</a></li>
      <li><a href="#client" class="nomunge">Client</a></li>
    </ul>
  </li>
  <li><a href="#tips" class="nomunge">Tips</a>
    <ul>
      <li><a href="#rootless-docker-in-docker" class="nomunge">Rootless Docker in Docker</a></li>
      <li><a href="#expose-docker-api-socket-via-tcp" class="nomunge">Expose Docker API socket via TCP</a></li>
      <li><a href="#expose-docker-api-socket-via-ssh" class="nomunge">Expose Docker API socket via SSH</a></li>
      <li><a href="#routing-ping-packets" class="nomunge">Routing ping packets</a></li>
      <li><a href="#exposing-privileged-ports" class="nomunge">Exposing privileged ports</a></li>
      <li><a href="#limiting-resources" class="nomunge">Limiting resources</a></li>
      <li><a href="#changing-network-stack" class="nomunge">Changing network stack</a></li>
    </ul>
  </li>
  <li><a href="#troubleshooting" class="nomunge">Troubleshooting</a>
    <ul>
      <li><a href="#troubles-during-starting-the-daemon" class="nomunge">Troubles during starting the daemon</a></li>
      <li><a href="#troubles-during-docker-pull" class="nomunge">Troubles during docker pull</a></li>
      <li><a href="#errors-during-docker-run" class="nomunge">Errors during docker run</a></li>
      <li><a href="#networking" class="nomunge">Networking</a></li>
    </ul>
  </li>
</ul>


                                
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    
    <footer class="footer">
          
    <div class="container">
        <div class="top_footer">
            <div class="row">
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/why-docker">Why Docker?</a></b></li>
                        <li><a href="https://www.docker.com/what-container">What is a Container?</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/products/overview">Products</a></b></li>
                        <li><a href="https://www.docker.com/products/docker-desktop">Docker Desktop</a></li>
                        <li><a href="https://www.docker.com/products/docker-hub">Docker Hub</a></li>
                        <li><b><a href="https://www.docker.com/products/docker-desktop">Features</a></b></li>
                        <li><a href="https://www.docker.com/products/container-runtime">Container Runtime</a></li>
                        <li><a href="https://www.docker.com/products/developer-tools">Developer Tools</a></li>
                        <li><a href="https://www.docker.com/products/kubernetes">Kubernetes</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/products/docker-desktop">Developers</a></b></li>
                        <li><a href="https://www.docker.com/use-cases">Use Cases</a></li>
                        <li><a href="https://www.docker.com/play-with-docker">Play with Docker</a></li>
                        <li><a href="https://www.docker.com/docker-community">Community</a></li>
                        <li><a href="https://www.docker.com/open-source">Open Source</a></li>
                        <li><a href="https://www.docker.com/community/docker-captains">Docker Captains</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/company" target="_blank">Company</a></b></li>
                        <li><a href="https://www.docker.com/company">About Us</a></li>
                        <li><a href="https://www.docker.com/blog/" target="_blank">Blog</a></li>
                        <li><a href="https://www.docker.com/customers">Customers</a></li>
                        <li><a href="https://www.docker.com/partners">Partners</a></li>
                        <li><a href="https://www.docker.com/company/newsroom">Newsroom</a></li>
                        <li><a href="https://www.docker.com/careers">Careers</a></li>
                        <li><a href="https://www.docker.com/company/contact">Contact Us</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-nav">
                <nav class="footer_sub_nav">
                    <ul class="menu">
                        <li><a href="http://status.docker.com/">Status</a></li>
                        <li><a href="https://www.docker.com/docker-security">Security</a></li>
                        <li><a href="https://www.docker.com/legal">Legal</a></li>
                        <li><a href="https://www.docker.com/company/contact">Contact</a></li>
                    </ul>
                </nav>
            </div>
        </div>
        <div class="bottom_footer">
            <div class="footer-copyright col-xs-12 col-md-8">
                <p class="copyright">
                    Copyright &copy; 2013-2020 Docker Inc. All rights reserved. </p>
            </div>
            <div class="footer_social_nav">
                <ul class="nav-social">
                    <li class="fa fa-twitter"><a href="http://twitter.com/docker">Twitter</a></li>
                    <li class="fa fa-youtube"><a href="http://www.youtube.com/user/dockerrun">Youtube</a></li>
                    <li class="fa fa-github"><a href="https://github.com/docker">GitHub</a></li>
                    <li class="fa fa-linkedin"><a href="https://www.linkedin.com/company/docker">Linkedin</a></li>
                    <li class="fa fa-facebook"><a href="https://www.facebook.com/docker.run">Facebook</a></li>
                    <li class="fa fa-slideshare"><a href="https://www.slideshare.net/docker">Slideshare</a></li>
                    <li class="fa fa-reddit"><a href="https://www.reddit.com/r/docker">Reddit</a></li>
                </ul>
            </div>
        </div>
    </div>

    </footer>
    <link rel="stylesheet" href="/docs.docker.jp.onthefly/css/github.css">
    
    <script defer src="/docs.docker.jp.onthefly/js/anchorlinks.js"></script>
    <script defer src="/docs.docker.jp.onthefly/js/menu.js"></script>
    <script src="/docs.docker.jp.onthefly/js/jquery.js"></script>
    <script src="/docs.docker.jp.onthefly/js/bootstrap.min.js"></script>
    <!-- Always include the archive.js, but it doesn't do much unless we are an archive -->
    <script>
        // Default to assuming this is an archive and hiding some stuff
        // See js/archive.js and js/docs.js for logic relating to this
        var dockerVersion = 'v19.03';
        // In archives, we need to know the page root and we get it from JEKYLL_ENV in the jekyll build command
        var jekyllEnv = 'development';
        // If unset (in non-archive branches), defaults to "development". In that case, reset it to empty
        if (jekyllEnv === 'development') {
            jekyllEnv = '';
        }
        var pageURL = jekyllEnv + '/engine/security/rootless/';
    </script>
    <script src="/docs.docker.jp.onthefly/js/archive.js"></script>
    <script src="/docs.docker.jp.onthefly/js/stickyfill.min.js"></script>
    <script defer src="/docs.docker.jp.onthefly/js/metadata.js"></script>
    <script src="/docs.docker.jp.onthefly/js/glossary.js"></script>
    <script defer src="/docs.docker.jp.onthefly/js/docs.js"></script>
    <script defer src="/docs.docker.jp.onthefly/js/toc.js"></script>
    <script defer src="/js/search.js"></script>
</body>


</html>
