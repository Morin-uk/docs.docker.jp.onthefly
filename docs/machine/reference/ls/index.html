<ul class="nav nav-tabs">
  <li class="active"><a data-toggle="tab" href="#origin">英語表記</a></li>
  <li><a data-toggle="tab" href="#japanese">日本語訳</a></li>
</ul>
<div class="tab-content">
  <div id="origin" class="tab-pane fade in active">
    <pre><code class="language-none">Usage: docker-machine ls [OPTIONS] [arg...]

List machines

Options:

   --quiet, -q                                  Enable quiet mode
   --filter [--filter option --filter option]   Filter output based on conditions provided
   --timeout, -t "10"                           Timeout in seconds, default to 10s
   --format, -f                                 Pretty-print machines using a Go template
</code></pre>
  </div>
  <div id="japanese" class="tab-pane fade">

    <pre><code class="language-none">利用方法: docker-machine ls [オプション] [arg...]

マシンを一覧表示します。

オプション:

   --quiet, -q                                  Quiet（省略）モードを有効にします。
   --filter [--filter option --filter option]   指定された条件によりフィルター(絞込み)出力します。
   --timeout, -t "10"                           タイムアウトを秒単位で指定します。。デフォルトは 10s
   --format, -f                                 Go言語テンプレートを使ってフォーマット出力します。
</code></pre>

  </div>
</div>

<h2 id="timeout">タイムアウト</h2>

<p><code class="language-plaintext highlighter-rouge">ls</code> コマンドは各ホストへのアクセスを同時並行的に行います。
指定されたホストからの応答が 10 秒以内にない場合、<code class="language-plaintext highlighter-rouge">ls</code> コマンドはそのホストを <code class="language-plaintext highlighter-rouge">Timeout</code> 状態として扱います。
特定の状況（接続状況が悪い、高負荷時、問題発生時など）において、その値を増減する必要が出てきます。
これを実現するには、-t フラグに秒単位の数値を指定します。</p>

<h3 id="example">利用例</h3>

<pre><code class="language-none">$ docker-machine ls -t 12
NAME      ACTIVE   DRIVER       STATE     URL                         SWARM   DOCKER   ERRORS
default   -        virtualbox   Running   tcp://192.168.99.100:2376           v1.9.1
</code></pre>

<h2 id="filtering">フィルター出力</h2>

<p>フィルター（絞込み）を行うフラグ（<code class="language-plaintext highlighter-rouge">--filter</code>）の書式は、<code class="language-plaintext highlighter-rouge">key=value</code> のペアです。
複数のフィルターが必要な場合は、このフラグを複数指定します。
たとえば <code class="language-plaintext highlighter-rouge">--filter "foo=bar" --filter "bif=baz"</code> などです。</p>

<p>現在サポートされているフィルターは以下のとおりです。</p>

<ul>
  <li>driver （ドライバー名）</li>
  <li>swarm  （Swarm マスター名）</li>
  <li>state  （<code class="language-plaintext highlighter-rouge">Running|Paused|Saved|Stopped|Stopping|Starting|Error</code>）</li>
  <li>name   （ドライバーによって返されるマシン名。<a href="https://github.com/google/re2/wiki/Syntax">golang スタイル</a> の正規表現をサポートします。）</li>
  <li>label  （<code class="language-plaintext highlighter-rouge">--engine-label</code> オプションを使って生成されたマシン。<code class="language-plaintext highlighter-rouge">label=&lt;key&gt;[=&lt;value&gt;]</code> という形式でのフィルター指定が可能。）</li>
</ul>

<h3 id="examples-2">利用例</h3>

<pre><code class="language-none">$ docker-machine ls
NAME   ACTIVE   DRIVER       STATE     URL                         SWARM   DOCKER   ERRORS
dev    -        virtualbox   Stopped
foo0   -        virtualbox   Running   tcp://192.168.99.105:2376           v1.9.1
foo1   -        virtualbox   Running   tcp://192.168.99.106:2376           v1.9.1
foo2   *        virtualbox   Running   tcp://192.168.99.107:2376           v1.9.1

$ docker-machine ls --filter name=foo0
NAME   ACTIVE   DRIVER       STATE     URL                         SWARM   DOCKER   ERRORS
foo0   -        virtualbox   Running   tcp://192.168.99.105:2376           v1.9.1

$ docker-machine ls --filter driver=virtualbox --filter state=Stopped
NAME   ACTIVE   DRIVER       STATE     URL   SWARM   DOCKER   ERRORS
dev    -        virtualbox   Stopped                 v1.9.1

$ docker-machine ls --filter label=com.class.app=foo1 --filter label=com.class.app=foo2
NAME   ACTIVE   DRIVER       STATE     URL                         SWARM   DOCKER   ERRORS
foo1   -        virtualbox   Running   tcp://192.168.99.105:2376           v1.9.1
foo2   *        virtualbox   Running   tcp://192.168.99.107:2376           v1.9.1
</code></pre>

<h2 id="formatting">フォーマット出力</h2>

<p>フォーマット出力を行うオプション（<code class="language-plaintext highlighter-rouge">--format</code>）は、Go 言語のテンプレートを使ってフォーマット出力を行います。</p>

<p>Go 言語のテンプレートとして正しいプレースホルダーは、以下の一覧に示すものです。</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">プレースホルダー</th>
      <th style="text-align: left">内容説明</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">.Name</td>
      <td style="text-align: left">マシン名</td>
    </tr>
    <tr>
      <td style="text-align: left">.Active</td>
      <td style="text-align: left">マシンがアクティブかどうか</td>
    </tr>
    <tr>
      <td style="text-align: left">.ActiveHost</td>
      <td style="text-align: left">マシンがアクティブな非Swarmホストか</td>
    </tr>
    <tr>
      <td style="text-align: left">.ActiveSwarm</td>
      <td style="text-align: left">マシンがアクティブなSwarmマスターか</td>
    </tr>
    <tr>
      <td style="text-align: left">.DriverName</td>
      <td style="text-align: left">ドライバー名</td>
    </tr>
    <tr>
      <td style="text-align: left">.State</td>
      <td style="text-align: left">マシン状態 (実行中, 停止...)</td>
    </tr>
    <tr>
      <td style="text-align: left">.URL</td>
      <td style="text-align: left">マシン URL</td>
    </tr>
    <tr>
      <td style="text-align: left">.Swarm</td>
      <td style="text-align: left">マシン Swarm 名</td>
    </tr>
    <tr>
      <td style="text-align: left">.Error</td>
      <td style="text-align: left">マシンエラー</td>
    </tr>
    <tr>
      <td style="text-align: left">.DockerVersion</td>
      <td style="text-align: left">Docker デーモンのバージョン</td>
    </tr>
    <tr>
      <td style="text-align: left">.ResponseTime</td>
      <td style="text-align: left">ホストのレスポンスにかかる時間</td>
    </tr>
  </tbody>
</table>

<p><code class="language-plaintext highlighter-rouge">--format</code> オプションを利用した際、<code class="language-plaintext highlighter-rouge">ls</code> コマンドはテンプレートが定めるデータ内容をそのまま出力します。
また table ディレクティブを指定した場合は、カラムヘッダーも出力します。</p>

<p>以下の例ではヘッダーの出力はせずに、1 つのテンプレートを使います。
これにより、実行中の全マシンについて <code class="language-plaintext highlighter-rouge">Name</code> と <code class="language-plaintext highlighter-rouge">Driver</code> をコロンで区切って出力します。</p>

<pre><code class="language-none">$ docker-machine ls --format "{{.Name}}: {{.DriverName}}"
default: virtualbox
ec2: amazonec2
</code></pre>

<p>全マシンの名前とドライバーを table 形式で一覧表示するには、以下を実行します。</p>

<pre><code class="language-none">$ docker-machine ls --format "table {{.Name}} {{.DriverName}}"
NAME     DRIVER
default  virtualbox
ec2      amazonec2
</code></pre>

