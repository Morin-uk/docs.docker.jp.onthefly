
<p>マシン（machine）を生成します。
このマシンをどのプロバイダー（VirtualBox、DigitalOcean、AWS など）のもとに生成するのかを、<code class="language-plaintext highlighter-rouge">--driver</code> フラグを使って指定する必要があります。
1 つだけ指定される引数は、生成されるマシン名を表わします。</p>

<blockquote class="important">
  <p>利用可能なドライバーの一覧を探していますか？</p>

  <p><code class="language-plaintext highlighter-rouge">docker-machine create</code> において指定可能なドライバーの全一覧およびその利用法については、<a href="/docs.docker.jp.onthefly/machine/drivers/">マシンドライバー</a> を参照してください。</p>
</blockquote>

<h2 id="example">利用例</h2>

<p>以下の例は <code class="language-plaintext highlighter-rouge">--driver virtualbox</code> を用いて <code class="language-plaintext highlighter-rouge">dev</code> という名前のマシンを生成するものです。</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker-machine create <span class="nt">--driver</span> virtualbox dev

Creating CA: /home/username/.docker/machine/certs/ca.pem
Creating client certificate: /home/username/.docker/machine/certs/cert.pem
Image cache does not exist, creating it at /home/username/.docker/machine/cache...
No default boot2docker iso found locally, downloading the latest release...
Downloading https://github.com/boot2docker/boot2docker/releases/download/v1.6.2/boot2docker.iso to /home/username/.docker/machine/cache/boot2docker.iso...
Creating VirtualBox VM...
Creating SSH key...
Starting VirtualBox VM...
Starting VM...
To see how to connect Docker to this machine, run: docker-machine <span class="nb">env </span>dev
</code></pre></div></div>

<h2 id="accessing-driver-specific-flags-in-the-help-text">ドライバー固有フラグのヘルプ表示</h2>

<p><code class="language-plaintext highlighter-rouge">docker-machine create</code> コマンドのフラグの中には、全ドライバーに共通して適用されるものがあります。
そのフラグは Docker Machine のプロビジョニング処理関連を、幅広く制御するものです。
（そこには Swarm コンテナーの生成も含みます。）
そういった機能は、カスタマイズ指定を行いたくなる部分です。</p>

<ul class="nav nav-tabs">
  <li class="active"><a data-toggle="tab" href="#origin">英語表記</a></li>
  <li><a data-toggle="tab" href="#japanese">日本語訳</a></li>
</ul>
<div class="tab-content">
  <div id="origin" class="tab-pane fade in active">
    <div class="language-bash highlighter-rouge">
      <div class="highlight">
        <div class="language-plaintext highlight highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ docker-machine create

Docker Machine Version: 0.5.0 (45e3688)
Usage: docker-machine create [OPTIONS] [arg...]

Create a machine.

Run 'docker-machine create --driver name' to include the create flags for that driver in the help text.

Options:

   --driver, -d "none"                                                                                  Driver to create machine with.
   --engine-install-url "https://get.docker.com"                                                        Custom URL to use for engine installation [$MACHINE_DOCKER_INSTALL_URL]
   --engine-opt [--engine-opt option --engine-opt option]                                               Specify arbitrary flags to include with the created engine in the form flag=value
   --engine-insecure-registry [--engine-insecure-registry option --engine-insecure-registry option]     Specify insecure registries to allow with the created engine
   --engine-registry-mirror [--engine-registry-mirror option --engine-registry-mirror option]           Specify registry mirrors to use [$ENGINE_REGISTRY_MIRROR]
   --engine-label [--engine-label option --engine-label option]                                         Specify labels for the created engine
   --engine-storage-driver                                                                              Specify a storage driver to use with the engine
   --engine-env [--engine-env option --engine-env option]                                               Specify environment variables to set in the engine
   --swarm                                                                                              Configure Machine with Swarm
   --swarm-image "swarm:latest"                                                                         Specify Docker image to use for Swarm [$MACHINE_SWARM_IMAGE]
   --swarm-master                                                                                       Configure Machine to be a Swarm master
   --swarm-discovery                                                                                    Discovery service to use with Swarm
   --swarm-strategy "spread"                                                                            Define a default scheduling strategy for Swarm
   --swarm-opt [--swarm-opt option --swarm-opt option]                                                  Define arbitrary flags for swarm
   --swarm-host "tcp://0.0.0.0:3376"                                                                    ip/socket to listen on for Swarm master
   --swarm-addr                                                                                         addr to advertise for Swarm (default: detect and use the machine IP)
   --swarm-experimental                                                                                 Enable Swarm experimental features
</code></pre></div>        </div>
      </div>
    </div>
  </div>
  <div id="japanese" class="tab-pane fade">

    <div class="language-bash highlighter-rouge">
      <div class="highlight">
        <div class="language-plaintext highlight highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ docker-machine create

Docker Machine Version: 0.5.0 (45e3688)
利用方法: docker-machine create [オプション] [arg...]

マシンを生成します。

'docker-machine create --driver ドライバー名' の実行により、そのドライバーの create フラグをヘルプ表示に含めます。

オプション:

   --driver, -d "none"                                                                                  マシン生成に用いるドライバー。
   --engine-install-url "https://get.docker.com"                                                        エンジンインストールにカスタム URL を指定します。[$MACHINE_DOCKER_INSTALL_URL]
   --engine-opt [--engine-opt option --engine-opt option]                                               生成済み Engine に対して フラグ=値 の形式で任意のフラグを含めて指定します。
   --engine-insecure-registry [--engine-insecure-registry option --engine-insecure-registry option]     生成済み Engine において安全でない Registry の利用を可能にします。
   --engine-registry-mirror [--engine-registry-mirror option --engine-registry-mirror option]           利用する Registry ミラーを設定します。[$ENGINE_REGISTRY_MIRROR]
   --engine-label [--engine-label option --engine-label option]                                         生成済み Engine に対してラベルを設定します。
   --engine-storage-driver                                                                              Engine において利用するストレージドライバーを指定します。
   --engine-env [--engine-env option --engine-env option]                                               Engine に対して設定する環境変数を指定します。
   --swarm                                                                                              Docker Machine において Swarm を設定します。
   --swarm-image "swarm:latest"                                                                         Swarm において用いる Docker イメージを指定します。[$MACHINE_SWARM_IMAGE]
   --swarm-master                                                                                       Docker Machine を Swarm マスターとして設定します。
   --swarm-discovery                                                                                    Swarm において利用するディスカバリーサービス。
   --swarm-strategy "spread"                                                                            Swarm におけるデフォルトのスケジューリングストラテジーを定義します。
   --swarm-opt [--swarm-opt option --swarm-opt option]                                                  Swarm に対して任意のフラグを定義します。
   --swarm-host "tcp://0.0.0.0:3376"                                                                    Swarm マスターにおいて待ち受ける IP/ソケット。
   --swarm-addr                                                                                         Swarm におけるアドバタイズアドレス。(デフォルト： マシンIPを検出して利用)
   --swarm-experimental                                                                                 Swarm の試験的機能を有効にします。
</code></pre></div>        </div>
      </div>
    </div>

  </div>
</div>

<p>上に加えて、Docker Machine がプラグインコードの一部として受け付けるフラグを指定できます。
生成したマシンに対して、プロバイダー固有のパラメーターをカスタマイズできるものです。
たとえばサイズ変更（<code class="language-plaintext highlighter-rouge">--amazonec2-instance-type m1.medium</code>）やリージョン指定（<code class="language-plaintext highlighter-rouge">--amazonec2-region us-west-1</code>）などです。</p>

<p>プロバイダー固有のフラグを確認するには、<code class="language-plaintext highlighter-rouge">create</code> のヘルプを表示する際に、単に <code class="language-plaintext highlighter-rouge">--driver</code> にドライバーを指定するだけです。</p>

<ul class="nav nav-tabs">
  <li class="active"><a data-toggle="tab" href="#origin2">英語表記</a></li>
  <li><a data-toggle="tab" href="#japanese2">日本語訳</a></li>
</ul>
<div class="tab-content">
  <div id="origin2" class="tab-pane fade in active">
    <div class="language-bash highlighter-rouge">
      <div class="highlight">
        <div class="language-plaintext highlight highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ docker-machine create --driver virtualbox --help
Usage: docker-machine create [OPTIONS] [arg...]

Create a machine.

Run 'docker-machine create --driver name' to include the create flags for that driver in the help text.

Options:

   --driver, -d "none"                                                                                  Driver to create machine with.
   --engine-env [--engine-env option --engine-env option]                                               Specify environment variables to set in the engine
   --engine-insecure-registry [--engine-insecure-registry option --engine-insecure-registry option]     Specify insecure registries to allow with the created engine
   --engine-install-url "https://get.docker.com"                                                        Custom URL to use for engine installation [$MACHINE_DOCKER_INSTALL_URL]
   --engine-label [--engine-label option --engine-label option]                                         Specify labels for the created engine
   --engine-opt [--engine-opt option --engine-opt option]                                               Specify arbitrary flags to include with the created engine in the form flag=value
   --engine-registry-mirror [--engine-registry-mirror option --engine-registry-mirror option]           Specify registry mirrors to use [$ENGINE_REGISTRY_MIRROR]
   --engine-storage-driver                                                                              Specify a storage driver to use with the engine
   --swarm                                                                                              Configure Machine with Swarm
   --swarm-addr                                                                                         addr to advertise for Swarm (default: detect and use the machine IP)
   --swarm-discovery                                                                                    Discovery service to use with Swarm
   --swarm-experimental                                                                                 Enable Swarm experimental features
   --swarm-host "tcp://0.0.0.0:3376"                                                                    ip/socket to listen on for Swarm master
   --swarm-image "swarm:latest"                                                                         Specify Docker image to use for Swarm [$MACHINE_SWARM_IMAGE]
   --swarm-master                                                                                       Configure Machine to be a Swarm master
   --swarm-opt [--swarm-opt option --swarm-opt option]                                                  Define arbitrary flags for swarm
   --swarm-strategy "spread"                                                                            Define a default scheduling strategy for Swarm
   --virtualbox-boot2docker-url                                                                         The URL of the boot2docker image. Defaults to the latest available version [$VIRTUALBOX_BOOT2DOCKER_URL]
   --virtualbox-cpu-count "1"                                                                           number of CPUs for the machine (-1 to use the number of CPUs available) [$VIRTUALBOX_CPU_COUNT]
   --virtualbox-disk-size "20000"                                                                       Size of disk for host in MB [$VIRTUALBOX_DISK_SIZE]
   --virtualbox-host-dns-resolver                                                                       Use the host DNS resolver [$VIRTUALBOX_HOST_DNS_RESOLVER]
   --virtualbox-dns-proxy                                                                               Proxy all DNS requests to the host [$VIRTUALBOX_DNS_PROXY]
   --virtualbox-hostonly-cidr "192.168.99.1/24"                                                         Specify the Host Only CIDR [$VIRTUALBOX_HOSTONLY_CIDR]
   --virtualbox-hostonly-nicpromisc "deny"                                                              Specify the Host Only Network Adapter Promiscuous Mode [$VIRTUALBOX_HOSTONLY_NIC_PROMISC]
   --virtualbox-hostonly-nictype "82540EM"                                                              Specify the Host Only Network Adapter Type [$VIRTUALBOX_HOSTONLY_NIC_TYPE]
   --virtualbox-import-boot2docker-vm                                                                   The name of a Boot2Docker VM to import
   --virtualbox-memory "1024"                                                                           Size of memory for host in MB [$VIRTUALBOX_MEMORY_SIZE]
   --virtualbox-no-share                                                                                Disable the mount of your home directory
</code></pre></div>        </div>
      </div>
    </div>
  </div>
  <div id="japanese2" class="tab-pane fade">

    <div class="language-bash highlighter-rouge">
      <div class="highlight">
        <div class="language-plaintext highlight highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ docker-machine create --driver virtualbox --help
利用方法: docker-machine create [オプション] [arg...]

マシンを生成します。

'docker-machine create --driver ドライバー名' の実行により、そのドライバーの create フラグをヘルプ表示に含めます。

オプション:

   --driver, -d "none"                                                                                  マシン生成に用いるドライバー。
   --engine-env [--engine-env option --engine-env option]                                               Engine に対して設定する環境変数を指定します。
   --engine-insecure-registry [--engine-insecure-registry option --engine-insecure-registry option]     生成済み Engine において安全でない Registry の利用を可能にします。
   --engine-install-url "https://get.docker.com"                                                        エンジンインストールにカスタム URL を指定します。[$MACHINE_DOCKER_INSTALL_URL]
   --engine-label [--engine-label option --engine-label option]                                         生成済み Engine に対してラベルを設定します。
   --engine-opt [--engine-opt option --engine-opt option]                                               生成済み Engine に対して フラグ=値 の形式で任意のフラグを含めて指定します。
   --engine-registry-mirror [--engine-registry-mirror option --engine-registry-mirror option]           利用する Registry ミラーを設定します。[$ENGINE_REGISTRY_MIRROR]
   --engine-storage-driver                                                                              Engine において利用するストレージドライバーを指定します。
   --swarm                                                                                              Docker Machine において Swarm を設定します。
   --swarm-addr                                                                                         Swarm におけるアドバタイズアドレス。(デフォルト： マシンIPを検出して利用)
   --swarm-discovery                                                                                    Swarm において利用するディスカバリーサービス。
   --swarm-experimental                                                                                 Swarm の試験的機能を有効にします。
   --swarm-host "tcp://0.0.0.0:3376"                                                                    ip/socket to listen on for Swarm master
   --swarm-image "swarm:latest"                                                                         Swarm において用いる Docker イメージを指定します。[$MACHINE_SWARM_IMAGE]
   --swarm-master                                                                                       Docker Machine を Swarm マスターとして設定します。
   --swarm-opt [--swarm-opt option --swarm-opt option]                                                  Swarm に対して任意のフラグを定義します。
   --swarm-strategy "spread"                                                                            Swarm におけるデフォルトのスケジューリングストラテジーを定義します。
   --virtualbox-boot2docker-url                                                                         boot2dockerイメージへのURL。デフォルトは最新入手可能バージョン。 [$VIRTUALBOX_BOOT2DOCKER_URL]
   --virtualbox-cpu-count "1"                                                                           マシンに割り当てるCPU数。(-1 により利用可能なCPU数) [$VIRTUALBOX_CPU_COUNT]
   --virtualbox-disk-size "20000"                                                                       ホストに割り当てるディスク容量、MB単位。[$VIRTUALBOX_DISK_SIZE]
   --virtualbox-host-dns-resolver                                                                       ホストの DNS リゾルバーを利用する。[$VIRTUALBOX_HOST_DNS_RESOLVER]
   --virtualbox-dns-proxy                                                                               DNS要求をすべてホストにプロキシーします。[$VIRTUALBOX_DNS_PROXY]
   --virtualbox-hostonly-cidr "192.168.99.1/24"                                                         ホストオンリーの CIDR を設定します。[$VIRTUALBOX_HOSTONLY_CIDR]
   --virtualbox-hostonly-nicpromisc "deny"                                                              ホストオンリーネットワークにてプロミスキャスモードを設定します。[$VIRTUALBOX_HOSTONLY_NIC_PROMISC]
   --virtualbox-hostonly-nictype "82540EM"                                                              ホストオンリーネットワークのアダプタータイプを設定します。[$VIRTUALBOX_HOSTONLY_NIC_TYPE]
   --virtualbox-import-boot2docker-vm                                                                   インポートする Boot2Docker VM イメージ名。
   --virtualbox-memory "1024"                                                                           ホストのメモリーサイズ、MB 単位。[$VIRTUALBOX_MEMORY_SIZE]
   --virtualbox-no-share                                                                                ホームディレクトリのマウントを無効化します。
</code></pre></div>        </div>
      </div>
    </div>

  </div>
</div>

<p>上をよく見れば、環境変数に関連づいているフラグがあるのがわかります。
（一番右に表記されています。）
<code class="language-plaintext highlighter-rouge">docker-machine create</code> の実行時に、その環境変数が設定されている場合、Docker Machine は対応するフラグのデフォルト値として、その設定値を利用します。</p>

<h2 id="specifying-configuration-options-for-the-created-docker-engine">生成マシンに対する設定オプションの指定</h2>

<p>Docker Machine の生成処理において、Docker Machine はマシンをインストールし、実用的なデフォルト値をいくつか利用して設定を行います。
たとえば、ネットワークにおいては TCP を介して外部との接続を可能とし、TLS ベースの暗号化を利用します。
また <a href="/engine/reference/commandline/dockerd/#daemon-storage-driver-option">ストレージドライバー</a> として AUFS が利用可能であれば、これをデフォルト設定します。</p>

<p>設定済みの Docker Engine（Docker <strong>デーモン</strong> とも呼ぶ）に対して、設定を行いたいケースがいくつかあります。
たとえばデーモンに対する <code class="language-plaintext highlighter-rouge">--insecure-registry</code> フラグ指定を使って、<a href="/docs.docker.jp.onthefly/registry/">Registry</a> への接続可能とするような場合です。
Docker Machine では、構築済みの Engine に対しての設定オプションを <code class="language-plaintext highlighter-rouge">create</code> コマンドのフラグから指定することを可能としており、そのフラグは、先頭に <code class="language-plaintext highlighter-rouge">--engine</code> がつきます。</p>

<p>Docker Machine がデーモン向けに設定するのは、指定されたパラメーター内容だけです。
つまりそこに「依存する内容」までは設定しません。
たとえばデーモンに対して、ストレージドライバーとして <code class="language-plaintext highlighter-rouge">btrfs</code> の利用を設定したとしても、そこに依存する内容、つまり BTRFS の適切な生成などは、あらかじめ行っておかなければなりません。</p>

<p>以下がその利用例です。</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker-machine create <span class="nt">-d</span> virtualbox <span class="se">\</span>
    <span class="nt">--engine-label</span> <span class="nv">foo</span><span class="o">=</span>bar <span class="se">\</span>
    <span class="nt">--engine-label</span> <span class="nv">spam</span><span class="o">=</span>eggs <span class="se">\</span>
    <span class="nt">--engine-storage-driver</span> overlay <span class="se">\</span>
    <span class="nt">--engine-insecure-registry</span> registry.myco.com <span class="se">\</span>
    foobarmachine
</code></pre></div></div>

<p>上の例は VirtualBox 上にローカルで動作する仮想マシンを生成し、バックエンドとして <code class="language-plaintext highlighter-rouge">overlay</code> ストレージドライバーを利用します。
また Engine 上において、キーバリューペア <code class="language-plaintext highlighter-rouge">foo=bar</code>、<code class="language-plaintext highlighter-rouge">spam=eggs</code> によるラベルを保持します。
そして <code class="language-plaintext highlighter-rouge">registry.myco.com</code> という安全でない（insecure）レジストリとの間でプッシュ、プルを可能とします。
このような設定は <code class="language-plaintext highlighter-rouge">docker info</code> の出力から確認することができます。</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">eval</span> <span class="si">$(</span>docker-machine <span class="nb">env </span>foobarmachine<span class="si">)</span>
<span class="nv">$ </span>docker info

Containers: 0
Images: 0
Storage Driver: overlay
...
Name: foobarmachine
...
Labels:
 <span class="nv">foo</span><span class="o">=</span>bar
 <span class="nv">spam</span><span class="o">=</span>eggs
 <span class="nv">provider</span><span class="o">=</span>virtualbox
</code></pre></div></div>

<p>サポートされているフラグは以下のとおりです。</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">--engine-insecure-registry</code>:
Engine に対して <a href="/engine/reference/commandline/cli/#insecure-registries">安全ではない Registry</a> の利用を許可します。</li>
  <li><code class="language-plaintext highlighter-rouge">--engine-registry-mirror</code>:
利用する <a href="/docs.docker.jp.onthefly/registry/recipes/mirror/">Registry ミラー</a> を指定します。</li>
  <li><code class="language-plaintext highlighter-rouge">--engine-label</code>:
Engine に対して <a href="/docs.docker.jp.onthefly/config/labels-custom-metadata/">ラベル</a> を設定します。</li>
  <li><code class="language-plaintext highlighter-rouge">--engine-storage-driver</code>:
Engine において利用する <a href="/engine/reference/commandline/cli/#daemon-storage-driver-option">ストレージドライバー</a> を指定します。</li>
</ul>

<p>Engine に対してフラグの複数指定がサポートされている場合（たとえば <code class="language-plaintext highlighter-rouge">--label</code> など）、Docker Machine においてもサポートされます。</p>

<p>デーモンに対するフラグが直接サポートされていることに加えて、Docker Machine では、さらに追加のフラグがサポートされています。
それは <code class="language-plaintext highlighter-rouge">--engine-opt</code> というものであり、任意のデーモンオプションを <code class="language-plaintext highlighter-rouge">--engine-opt フラグ名=値</code> という文法により指定できるものです。
たとえば、デーモンが全コンテナーにおいて DNS サーバーとして <code class="language-plaintext highlighter-rouge">8.8.8.8</code> を利用する場合で、さらに<a href="/docs.docker.jp.onthefly/config/containers/logging/configure/">ログドライバー</a>として <code class="language-plaintext highlighter-rouge">syslog</code> を利用する場合には、create コマンドは以下のように実行することができます。</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker-machine create <span class="nt">-d</span> virtualbox <span class="se">\</span>
    <span class="nt">--engine-opt</span> <span class="nv">dns</span><span class="o">=</span>8.8.8.8 <span class="se">\</span>
    <span class="nt">--engine-opt</span> log-driver<span class="o">=</span>syslog <span class="se">\</span>
    gdns
</code></pre></div></div>

<p>さらに Docker Machine では <code class="language-plaintext highlighter-rouge">--engine-env</code> フラグがサポートされます。
これは任意の環境変数を Engine において設定するもので、<code class="language-plaintext highlighter-rouge">--engine-env 変数名=値</code> という文法により指定します。
たとえば Engine がプロキシーサーバーとして <code class="language-plaintext highlighter-rouge">example.com</code> を利用する場合、create コマンドの実行は以下のようになります。</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker-machine create <span class="nt">-d</span> virtualbox <span class="se">\</span>
    <span class="nt">--engine-env</span> <span class="nv">HTTP_PROXY</span><span class="o">=</span>http://example.com:8080 <span class="se">\</span>
    <span class="nt">--engine-env</span> <span class="nv">HTTPS_PROXY</span><span class="o">=</span>https://example.com:8080 <span class="se">\</span>
    <span class="nt">--engine-env</span> <span class="nv">NO_PROXY</span><span class="o">=</span>example2.com <span class="se">\</span>
    proxbox
</code></pre></div></div>

<h2 id="specifying-docker-swarm-options-for-the-created-machine">生成マシンに対する Docker Swarm オプションの指定</h2>

<p>上で示した Docker Engine のオプション設定に加えて、Swarm マネージャーを生成する際のオプションを指定することもできます。
<code class="language-plaintext highlighter-rouge">--swarm-strategy</code> フラグがあり、これによって <a href="../../swarm/scheduler/strategy.md">スケジュールストラテジー</a>（scheduling strategy）を指定することができます。
Docker Swarm においては、この指定が必要になります（Docker Machine は <code class="language-plaintext highlighter-rouge">spread</code> ストラテジーをデフォルトとしています）。
もう一つ、汎用目的で <code class="language-plaintext highlighter-rouge">--swarm-opt</code> オプションがあり、前述した <code class="language-plaintext highlighter-rouge">--engine-opt</code> オプションと同様に動作しますが、ただしこれは、ベースコマンドに対してではなく、<code class="language-plaintext highlighter-rouge">swarm manage</code> コマンドに対するオプションを指定するものです（マスターノードの起動の際によく用います）。
パワーユーザーであれば、これを利用して必要な設定を行うことができます。
たとえばハートビート間隔の設定や、リソースに対するオーバーコミットを積極的に行うような設定などが可能になります。
<code class="language-plaintext highlighter-rouge">--swarm-experimental</code> というフラグもあります。
これは Docker Swarm において <a href="https://github.com/docker/swarm/tree/master/experimental">試験的機能</a> にアクセスできるようにするものです。</p>

<p>こういったオプションをどのように設定してよいかわからない場合、一番なのは何も指定しないことです。
Docker Machine が適切なデフォルト値を選定するので、心配には及びません。</p>

<p>以下は create の利用例です。</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker-machine create <span class="nt">-d</span> virtualbox <span class="se">\</span>
    <span class="nt">--swarm</span> <span class="se">\</span>
    <span class="nt">--swarm-master</span> <span class="se">\</span>
    <span class="nt">--swarm-discovery</span> token://&lt;token&gt; <span class="se">\</span>
    <span class="nt">--swarm-strategy</span> binpack <span class="se">\</span>
    <span class="nt">--swarm-opt</span> <span class="nv">heartbeat</span><span class="o">=</span>5s <span class="se">\</span>
    upbeat
</code></pre></div></div>

<p>上の例では Swarm のスケジューリングストラテジーを「binpack」に設定しています。
（コンテナーの割り振りを全体に広く行うのでなく、各ホストごとにできるだけ詰めるようにします。）
そして「ハートビート」間隔を 5 秒に設定しています。</p>

<h2 id="pre-create-check">生成時の事前チェック</h2>

<p>マシンを生成するにあたっては、多くのドライバーが一定の条件を満たしておく必要があります。
たとえば <code class="language-plaintext highlighter-rouge">virtualbox</code> ドライバーの利用にあたっては、あらかじめ VirtualBox をインストールしておくことが必要です。
この理由から Docker Machine には「生成時の事前チェック」があり、ドライバーレベルで指定されています。</p>

<p>事前チェックが成功すると、Docker Machine は通常どおり生成処理に進みます。
事前チェックに失敗した場合、Docker Machine はステータスコード 3 を返して終了します。
ゼロ以外による終了は、事前チェックに失敗したことを示しています。</p>
