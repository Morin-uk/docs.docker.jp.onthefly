
<p>SSH を使ってマシンにログインしたりコマンドを実行したりします。</p>

<p>ログインするには単に <code class="language-plaintext highlighter-rouge">docker-machine ssh マシン名</code> を実行します。</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker-machine ssh dev

                        <span class="c">##        .</span>
                  <span class="c">## ## ##       ==</span>
               <span class="c">## ## ## ##      ===</span>
           /<span class="s2">""""""""""""""""</span><span class="se">\_</span>__/ <span class="o">===</span>
      ~~~ <span class="o">{</span>~~ ~~~~ ~~~ ~~~~ ~~ ~ /  <span class="o">===</span>- ~~~
           <span class="se">\_</span>_____ o          __/
             <span class="se">\ </span>   <span class="se">\ </span>       __/
              <span class="se">\_</span>___<span class="se">\_</span>_____/
 _                 _   ____     _            _
| |__   ___   ___ | |_|___ <span class="se">\ </span>__| | ___   ___| | _____ _ __
| <span class="s1">'_ \ / _ \ / _ \| __| __) / _` |/ _ \ / __| |/ / _ \ '</span>__|
| |_<span class="o">)</span> | <span class="o">(</span>_<span class="o">)</span> | <span class="o">(</span>_<span class="o">)</span> | |_ / __/ <span class="o">(</span>_| | <span class="o">(</span>_<span class="o">)</span> | <span class="o">(</span>__|   &lt;  __/ |
|_.__/ <span class="se">\_</span>__/ <span class="se">\_</span>__/ <span class="se">\_</span>_|_____<span class="se">\_</span>_,_|<span class="se">\_</span>__/ <span class="se">\_</span>__|_|<span class="se">\_\_</span>__|_|
Boot2Docker version 1.4.0, build master : 69cf398 - Fri Dec 12 01:39:42 UTC 2014
docker@boot2docker:~<span class="nv">$ </span><span class="nb">ls</span> /
Users/   dev/     home/    lib/     mnt/     proc/    run/     sys/     usr/
bin/     etc/     init     linuxrc  opt/     root/    sbin/    tmp      var/
</code></pre></div></div>

<p>コマンドを指定してリモートから実行することが可能であり、その場合は <code class="language-plaintext highlighter-rouge">docker-machine ssh</code> コマンドに直接、コマンドをつけ加えて実行します。
通常の <code class="language-plaintext highlighter-rouge">ssh</code> プログラムが、そのようにして動作する様子と同じです。</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker-machine ssh dev free

total         used         free       shared      buffers
Mem:       1023556       183136       840420            0        30920
-/+ buffers:             152216       871340
Swap:      1212036            0      1212036
</code></pre></div></div>

<p>同様に、フラグをつけたコマンド実行も動作します。</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker-machine ssh dev <span class="nb">df</span> <span class="nt">-h</span>

Filesystem                Size      Used Available Use% Mounted on
rootfs                  899.6M     85.9M    813.7M  10% /
tmpfs                   899.6M     85.9M    813.7M  10% /
tmpfs                   499.8M         0    499.8M   0% /dev/shm
/dev/sda1                18.2G     58.2M     17.2G   0% /mnt/sda1
cgroup                  499.8M         0    499.8M   0% /sys/fs/cgroup
/dev/sda1                18.2G     58.2M     17.2G   0%
/mnt/sda1/var/lib/docker/aufs
</code></pre></div></div>

<p>If you are using the “external” SSH type as detailed in the next section, you
can include additional arguments to pass through to the <code class="language-plaintext highlighter-rouge">ssh</code> binary in the
generated command (unless they conflict with any of the default arguments for
the command generated by Docker Machine).  For instance, the following command
forwards port 8080 from the <code class="language-plaintext highlighter-rouge">default</code> machine to <code class="language-plaintext highlighter-rouge">localhost</code> on your host
computer:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker-machine ssh default <span class="nt">-L</span> 8080:localhost:8080
</code></pre></div></div>

<h2 id="different-types-of-ssh">Different types of SSH</h2>

<p>When Docker Machine is invoked, it checks to see if you have the venerable
<code class="language-plaintext highlighter-rouge">ssh</code> binary around locally and attempts to use that for the SSH commands it
needs to run, whether they are a part of an operation such as creation or have
been requested by the user directly. If it does not find an external <code class="language-plaintext highlighter-rouge">ssh</code>
binary locally, it defaults to using a native Go implementation from
<a href="https://godoc.org/golang.org/x/crypto/ssh">crypto/ssh</a>. This is useful in
situations where you may not have access to traditional UNIX tools, such as if
you are using Docker Machine on Windows without having msysgit installed
alongside of it.</p>

<p>In most situations, you do not need to worry about this implementation detail
and Docker Machine acts sensibly out of the box. However, if you
deliberately want to use the Go native version, you can do so with a global
command line flag / environment variable like so:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker-machine <span class="nt">--native-ssh</span> ssh dev
</code></pre></div></div>

<p>There are some variations in behavior between the two methods, so report
any issues or inconsistencies if you come across them.</p>
