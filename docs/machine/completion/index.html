
<p>Docker Machine には bash と zsh 向けの <a href="https://en.wikipedia.org/wiki/Command-line_completion">コマンド補完</a> が用意されています。</p>

<h2 id="installing-command-completion">コマンド補完のインストール</h2>

<h3 id="bash">Bash</h3>

<p>bash 補完がインストールされているかどうかを確認します。
最新の Linux をインストールしていて、それが最小版でない限りは、bash 補完が利用可能なはずです。</p>

<p>Mac 上では <code class="language-plaintext highlighter-rouge">brew install bash-completion</code> によりインストールします。</p>

<p>補完スクリプトを、以下のようにして <code class="language-plaintext highlighter-rouge">/etc/bash_completion.d/</code> を移動させます。</p>

<ul>
  <li>
    <p>Mac 上では以下のようにします。</p>

    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>curl <span class="nt">-L</span> https://raw.githubusercontent.com/docker/machine/v0.16.0/contrib/completion/bash/docker-machine.bash <span class="nt">-o</span> <span class="sb">`</span>brew <span class="nt">--prefix</span><span class="sb">`</span>/etc/bash_completion.d/docker-machine
</code></pre></div>    </div>
  </li>
  <li>
    <p>標準的な Linux ディストリビューションでは以下のようにします。</p>

    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>curl <span class="nt">-L</span> https://raw.githubusercontent.com/docker/machine/v0.16.0/contrib/completion/bash/docker-machine.bash <span class="nt">-o</span> /etc/bash_completion.d/docker-machine
</code></pre></div>    </div>
  </li>
</ul>

<p>コマンド補完は、次のログイン以降に有効となります。</p>

<h3 id="zsh">Zsh</h3>

<p>ZSH 設定ディレクトリ内の <code class="language-plaintext highlighter-rouge">completion</code> ファイルに補完スクリプトを置きます。
たとえば <code class="language-plaintext highlighter-rouge">~/.zsh/completion/</code> などです。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">mkdir</span> <span class="nt">-p</span> ~/.zsh/completion
curl <span class="nt">-L</span> https://raw.githubusercontent.com/docker/machine/v0.16.0/contrib/completion/zsh/_docker-machine <span class="o">&gt;</span> ~/.zsh/completion/_docker-machine
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">$fpath</code> にそのディレクトリを含めます。
たとえば以下の記述を <code class="language-plaintext highlighter-rouge">~/.zshrc</code> 設定ファイルに追加します。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">fpath</span><span class="o">=(</span>~/.zsh/completion <span class="nv">$fpath</span><span class="o">)</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">compinit</code> をロードしているか、あるいは <code class="language-plaintext highlighter-rouge">~/.zshrc</code> 内にて実行していることを確認します。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>autoload <span class="nt">-Uz</span> compinit <span class="o">&amp;&amp;</span> compinit <span class="nt">-i</span>
</code></pre></div></div>

<p>そしてシェルをリロードします。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">exec</span> <span class="nv">$SHELL</span> <span class="nt">-l</span>
</code></pre></div></div>

<h2 id="available-completions">補完入力でできること</h2>

<p>コマンドラインにどこまで入力したかによって、以下のような補完入力が可能です。</p>

<ul>
  <li>コマンドとそのオプション。</li>
  <li>コンテナー ID とコンテナー名。</li>
  <li>イメージリポジトリとイメージタグ。</li>
  <li>ファイルパス。</li>
</ul>

<h2 id="where-to-go-next">次に読むものは</h2>

<ul>
  <li><a href="/docs.docker.jp.onthefly/machine/get-started/">Docker Machine をローカル VM ではじめよう</a></li>
  <li><a href="/docs.docker.jp.onthefly/machine/reference/">Machine コマンドラインリファレンス</a></li>
  <li><a href="/docs.docker.jp.onthefly/machine/drivers/">Machine ドライバー</a></li>
  <li><a href="/docs.docker.jp.onthefly/machine/concepts/">Machine の考え方とヘルプ</a></li>
</ul>
