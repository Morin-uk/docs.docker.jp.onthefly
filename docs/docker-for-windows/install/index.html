
<p>Docker Desktop for Windows は Microsoft Windows 向け Docker の <a href="https://www.docker.com/community-edition">コミュニティ</a> 版です。
Docker Desktop for Windows は Docker Hub からダウンロードすることができます。</p>

<p>このページでは Windows 10 Pro、Enterprise、Education に Docker Desktop をインストールする方法を示します。
Windows 10 Home に Docker Desktop をインストールする方法については、<a href="/docs.docker.jp.onthefly/docker-for-windows/install-windows-home/">Windows Home への Docker Desktop のインストール</a> を参照してください。</p>

<p><a href="https://hub.docker.com/editions/community/docker-ce-desktop-windows/" class="button outline-btn">Docker Hub からダウンロード</a></p>

<p>Docker Desktop をダウンロードすると、<a href="https://www.docker.com/legal/docker-software-end-user-license-agreement" target="_blank" rel="noopener" class="_">Docker Software End User License Agreement</a> と <a href="https://www.docker.com/legal/data-processing-agreement" target="_blank" rel="noopener" class="_">Docker Data Processing Agreement</a> の各規約に同意したものとなります。</p>

<h2 id="what-to-know-before-you-install">インストール前に確認すべきこと</h2>

<h3 id="system-requirements">システム要件</h3>

<ul>
  <li>
    <p>Windows 10 64 ビット: Pro、Enterprise、Education (Build 16299 またはそれ以降)</p>

    <p>Windows 10 Home については <a href="/docs.docker.jp.onthefly/docker-for-windows/install-windows-home/">Windows Home への Docker Desktop のインストール</a> を参照してください。</p>
  </li>
  <li>Hyper-V とコンテナー機能を有効にしていることが必要です。</li>
  <li>
    <p>Windows 10 上においてクライアント Hyper-V を正常に実行するには、以下のハードウェア要件を満たす必要があります。</p>

    <ul>
      <li><a href="https://en.wikipedia.org/wiki/Second_Level_Address_Translation">第 2 レベルのアドレス変換（Second Level Address Translation; SLAT）</a> に対応した 64 ビットプロセッサー。</li>
      <li>4 GB のシステム RAM</li>
      <li>BIOS 設定において BIOS レベルのハードウェア仮想化サポートが有効であること。
<a href="/docs.docker.jp.onthefly/docker-for-windows/troubleshoot/#virtualization-must-be-enabled">仮想化</a> を参照してください。</li>
    </ul>
  </li>
</ul>

<blockquote>
  <p><strong>メモ</strong> Docker における Windows 上の Docker Desktop は、Windows 10 オペレーティングシステムに対するマイクロソフトのサポートライフサイクルに対応づいて、サポートが行われます。
詳しくは <a href="https://support.microsoft.com/en-us/help/13853/windows-lifecycle-fact-sheet">Windows ライフサイクルのファクトシート</a> を参照してください。</p>
</blockquote>

<h3 id="whats-included-in-the-installer">インストーラーに含まれるもの</h3>

<p>Docker Desktop のインストールにより以下のものが利用できます。<a href="/docs.docker.jp.onthefly/engine/">Docker Engine</a>、Docker CLI クライアント、<a href="/docs.docker.jp.onthefly/compose/">Docker Compose</a>、<a href="/docs.docker.jp.onthefly/notary/getting_started/">Notary</a>、<a href="https://github.com/kubernetes/kubernetes/">Kubernetes</a>、<a href="https://github.com/docker/docker-credential-helpers/">Credential Helper</a>。</p>

<p>Docker Desktop を使って生成されたコンテナーやイメージは、Docker Desktop がインストールされているマシン上であれば、全ユーザーアカウントが共有できます。
これは Windows アカウントが同一の VM を使って、コンテナーのビルドや実行を行うからです。
ただし Docker Desktop WSL 2 バックエンドを利用している場合は、ユーザーアカウント間でコンテナーやイメージは共有できません。</p>

<p>仮想環境をネスト化するような利用方法、たとえば VMWare や Parallels 上に Docker Desktop を起動させた場合、Docker Desktop は動くかもしれませんが、動作は保証されません。
詳しくは <a href="/docs.docker.jp.onthefly/docker-for-windows/troubleshoot/#running-docker-desktop-for-windows-in-nested-virtualization-scenarios">ネスト化した仮想環境での Docker Desktop の実行</a> を参照してください。</p>

<h3 id="about-windows-containers">Windows コンテナーについて</h3>

<p>Windows コンテナーの利用方法についてお探しの方は以下です。</p>

<ul>
  <li><a href="/docs.docker.jp.onthefly/docker-for-windows/#switch-between-windows-and-linux-containers">Windows と Linux の各コンテナー間の切り替え</a> では、Docker Desktop 上において Linux と Windows のコンテナー間を切り替える方法を説明しています。
そして上で説明したチュートリアルをお勧めしています。</li>
  <li><a href="https://github.com/docker/labs/blob/master/windows/windows-containers/README.md">Windows コンテナーをはじめよう（ラボ）</a> では、Windows 10、Windows Server 2016、Windows Server 2019 の各 OS 上において Windows コンテナーを設定して実行するチュートリアルを提供しています。
そこでは、Windows コンテナーを使った MusicStore アプリケーションの利用方法を示しています。</li>
  <li>Docker ウェブサイト上に Docker Container Platform for Windows に関する <a href="https://www.docker.com/microsoft/">記事とブログ投稿</a> があります。</li>
</ul>

<h2 id="install-docker-desktop-on-windows">Windows への Docker Desktop のインストール</h2>

<ol>
  <li>
    <p><strong>Docker Desktop Installer.exe</strong> をダブルクリックしてインストーラーを起動します。</p>

    <p>インストーラー（<code class="language-plaintext highlighter-rouge">Docker Desktop Installer.exe</code>）をまだダウンロードしていない場合は <a href="https://hub.docker.com/editions/community/docker-ce-desktop-windows/"><strong>Docker Hub</strong></a> からダウンロードしてください。
 通常は <code class="language-plaintext highlighter-rouge">Downloads</code> フォルダーにダウンロードされます。
 あるいはウェブブラウザーの下段に表示される、最新のダウンロードバーから直接起動することもできます。</p>
  </li>
  <li>
    <p>Configuration ページにおいてプロンプト画面が表示されたら、<strong>Enable Hyper-V Windows Features</strong> オプションが設定されていることを確認してください。</p>
  </li>
  <li>
    <p>インストールウィザードの手順に従ってインストーラーを承認して、インストールを完了させます。</p>
  </li>
  <li>
    <p>インストールが正常に行われたら <strong>Close</strong> をクリックして作業を終了します。</p>
  </li>
  <li>
    <p>管理アカウントが利用しているアカウントと異なる場合、そのアカウントを <strong>docker-users</strong> グループに追加する必要があります。
管理者として <strong>コンピューターの管理</strong> を実行し、<strong>ローカルユーザーとグループ</strong> &gt; <strong>グループ</strong> &gt; <strong>docker-users</strong> を選びます。
このグループに対して、右クリックメニューからユーザーを追加します。
変更を有効にするため、いったんログアウトしてからログインし直します。</p>
  </li>
</ol>

<h2 id="start-docker-desktop">Docker Desktop の起動</h2>

<p>インストール直後の Docker Desktop は、自動的には起動されません。
Docker Desktop を起動するには、Docker を検索して、その結果から <strong>Docker Desktop</strong> を実行します。</p>

<p><img src="/docs.docker.jp.onthefly/docker-for-windows/images/docker-app-search.png" alt="Docker アプリの検索" width="300px" /></p>

<p>クジラアイコンがステータスバーに常時表示されていれば、Docker Desktop は実行しており、どのターミナル画面からでもアクセス可能です。</p>

<p><img src="/docs.docker.jp.onthefly/docker-for-windows/images/whale-icon-systray.png" alt="タスクバー上のクジラアイコン" /></p>

<p>通知エリアにクジラアイコンが表示されていない場合は、タスクバー上の上矢印ボタンをクリックして、アイコンを表示します。
詳しくは <a href="/docs.docker.jp.onthefly/docker-for-windows/#docker-settings-dialog">Docker の設定</a> を参照してください。</p>

<p>初期設定が完了すると Docker Desktop はシステム内のチュートリアルを起動します。
このチュートリアルには、Docker イメージを試しにビルドし、コンテナーとしての実行、Docker Hub へのイメージのプッシュと保存、といった簡単な練習問題があります。</p>

<p><img src="/docs.docker.jp.onthefly/docker-for-windows/images/docker-tutorial-win.png" alt="Docker クイックスタートチュートリアル" width="450px" /></p>

<p>おめでとうございます。
Windows 上に Docker Desktop が正常に起動できるようになりました。</p>

<p>チュートリアルに戻る場合は、Docker Desktop メニューから <strong>Learn</strong> を実行します。</p>

<h2 id="uninstall-docker-desktop">Docker Desktop のアンインストール</h2>

<p>Windows から Docker Desktop をアンインストールするには、以下を行います。</p>

<ol>
  <li>Windows の <strong>スタート</strong> メニューから、<strong>設定</strong> &gt; <strong>アプリケーション</strong> &gt; <strong>アプリケーションと機能</strong> を選びます。</li>
  <li><strong>アプリケーションと機能</strong> の一覧から <strong>Docker Desktop</strong> を選んで <strong>アンインストール</strong> を実行します。</li>
  <li>間違いないことを確認し <strong>アンインストール</strong> をクリックします。</li>
</ol>

<blockquote>
  <p><strong>メモ:</strong> Docker Desktop をアンインストールすると、ローカルにある Docker コンテナーやイメージは破棄され、アプリケーションが生成したファイルは削除されます。</p>
</blockquote>

<h2 id="switch-between-stable-and-edge-versions">安定版と最新版の切り替え</h2>

<p>Docker Desktop では安定版（stable）と最新版（edge）の切り替えができるようになっています。
ただし <strong>一度にインストールできるのは、どちらか一つの Docker Desktop バージョンです</strong>。
安定版と最新版の切り替えを行うと、手元の開発環境が不安定になることがあります。
特により最新に近いバージョンから、古い安定版に切り替えた場合に、起こることがあります。</p>

<p>たとえば Docker Desktop 最新版を使って生成したコンテナーは、古い安定版に切り替えたら、動作しなくなるかもしれません。
そのコンテナーが最新版の機能を使って生成されていたとすると、それが古い安定版には存在しないことになるからです。
最新版を使ってコンテナーを生成して実行するときには、このことを十分に理解しておいてください。
いってみれば遊び感覚で操作するつもりで、なにかあっても自分で解決するか、初めからやり直す覚悟を持っておいてください。</p>

<p>最新版では試験的（experimental）機能がデフォルトで有効になっています。
ただし安定版から最新版への切り替えを行った場合、試験的機能を利用するには設定フラグを有効にしなければなりません。
Docker Desktop メニューから <strong>Settings</strong> &gt; <strong>Command Line</strong> をクリックして、トグルスイッチ <strong>Enable experimental features</strong> をオンにしてください。<strong>Apply &amp; Restart</strong> をクリックすれば変更が反映されます。</p>

<p>最新版と安定版の間で安全に切り替えを行うためには、必要なイメージの保存、コンテナーのエクスポートを行っておいてください。
そして切り替えるバージョンをインストールする前に、それまでのバージョンはアンインストールしてください。
詳しくは、以下の「データの保存と復元」を参照してください。</p>

<h3 id="save-and-restore-data">データの保存と復元</h3>

<p>以下の手順に従うと、イメージやコンテナーのデータを保存し復元することができます。
たとえば安定版と最新版を切り替える場合や、VM ディスクを初期化するような場合には、以下を行います。</p>

<ol>
  <li>
    <p><code class="language-plaintext highlighter-rouge">docker save -o images.tar image1 [image2 ...]</code> を実行して、保存しておきたいイメージを保存します。
 Docker Engine のコマンドラインリファレンスにある <a href="../../engine/reference/commandline/save">save</a> を参照してください。</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">docker export -o myContainner1.tar container1</code> を実行して、保存しておきたいコンテナーをエクスポートします。
 Docker Engine のコマンドラインリファレンスにある <a href="../../engine/reference/commandline/export">export</a> を参照してください。</p>
  </li>
  <li>
    <p>現在の Docker Desktop をアンインストールし、別のバージョン（安定版または最新版）をインストールします。
あるいは VM ディスクを初期化します。</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">docker load -i images.tar</code> を実行して、上で保存したイメージをリロードします。
Docker Engine の <a href="../../engine/reference/commandline/load">load</a> を参照してください。</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">docker import -i myContainer1.tar</code> を実行して、上でエクスポートしたコンテナーに対応するファイルシステムイメージを生成します。
 Docker Engine の <a href="../../engine/reference/commandline/import">import</a> を参照してください。</p>
  </li>
</ol>

<p>データボリュームの保存と復元に関しては <a href="../../storage/volumes/#backup-restore-or-migrate-data-volumes">データボリュームのバックアップ、復元、移行</a> を参照してください。</p>

<h2 id="where-to-go-next">次に読むものは</h2>

<ul>
  <li><a href="/docs.docker.jp.onthefly/docker-for-windows/">はじめよう</a> では Docker Desktop for Windows を紹介しています。</li>
  <li><a href="../../get-started/">Docker をはじめよう</a> はマルチサービススタックのデプロイ方法を説明するチュートリアルです。</li>
  <li><a href="/docs.docker.jp.onthefly/docker-for-windows/troubleshoot/">トラブルシューティング</a> では、一般的な問題、回避策、サポートの受け方などについて説明しています。</li>
  <li><a href="/docs.docker.jp.onthefly/docker-for-windows/faqs/">FAQ</a> ではよく尋ねられる質問を示しています。</li>
  <li><a href="/docs.docker.jp.onthefly/docker-for-windows/release-notes/">安定版リリースノード</a> または <a href="/docs.docker.jp.onthefly/docker-for-windows/edge-release-notes/">最新版リリースノート</a>。</li>
</ul>
