<!-- This file is maintained within the docker/cli GitHub
     repository at https://github.com/docker/cli/. Make all
     pull requests against that repo. If you see this file in
     another repository, consider it read-only there, as it will
     periodically be overwritten by the definitive file. Pull
     requests which include edits to this file in other repositories
     will be rejected.
-->

<h1 id="docker-network-driver-plugins">Docker ネットワークドライバープラグイン</h1>

<p>ここでは Docker Engine において、一般的に利用可能な Docker Engine ネットワークドライバープラグインについて説明します。
Docker Engine が管理するプラグインに関する情報は <a href="/docs.docker.jp.onthefly/engine/extend/">Docker Engine プラグインシステム</a> を参照してください。</p>

<p>Docker Engine ネットワークプラグインは、Engineによるデプロイメントを拡張して、非常に多くのネットワーク技術へのサポートを可能とします。
対応するネットワーク技術としてたとえば VXLAN, IPVLAN, MACVLAN などがあり、これ以外にも全く異なる技術にも対応可能です。
ネットワークドライバープラグインは LibNetwork プロジェクトを通じてサポートされています。
各プラグインは LibNetwork における「リモートドライバー」として実装されており、Engine におけるプラグイン基盤を共有しています。
実際にネットワークドライバープラグインは、他のプラグインと同様の方法で取り入れることができるものであり、同じようなプロトコルを利用しています。</p>

<h2 id="network-plugins-and-swarm-mode">ネットワークプラグインとスウォームモード</h2>

<p><a href="/docs.docker.jp.onthefly/engine/extend/legacy_plugins/">旧来のプラグイン</a> はスウォームモードでは動作しません。
一方 <a href="/docs.docker.jp.onthefly/engine/extend/">v2 プラグインシステム</a> は、スウォーム上の各ワーカーノードにインストールしていれば、スウォームモードでも動作します。</p>

<h2 id="use-network-driver-plugins">ネットワークドライバープラグインの利用</h2>

<p>ネットワークドライバープラグインのインストール方法や実行方法は、個々のプラグインにより異なります。
そこでプラグインをインストールする際には、プラグイン開発者が示す説明に従ってください。</p>

<p>ネットワークドライバープラグインを実行することができれば、後はビルトインのネットワークドライバーと変わらずに利用していきます。
つまりネットワーク関連の Docker コマンドにおいて、ドライバーを取り扱うコマンドを用いていきます。
たとえば以下のとおりです。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ docker network create --driver weave mynet
</code></pre></div></div>

<p>ネットワークドライバープラグインの一覧が <a href="/docs.docker.jp.onthefly/engine/extend/legacy_plugins/">プラグイン</a> にあります。</p>

<p><code class="language-plaintext highlighter-rouge">mynet</code> ネットワークは <code class="language-plaintext highlighter-rouge">weave</code> により所有されたので、これ以降にネットワークを参照するコマンドは、プラグインに送信され実行されることになります。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ docker run --network=mynet busybox top
</code></pre></div></div>

<h2 id="find-network-plugins">ネットワークプラグインの検索</h2>

<p>ネットワークプラグインはサードパーティにより開発され公開されています。
<a href="https://store.docker.com/search?category=network&amp;q=&amp;type=plugin">Docker Store</a> またはそのサードパーティのサイトから入手できます。</p>

<h2 id="write-a-network-plugin">ネットワークプラグインの開発</h2>

<p>ネットワークプラグインは、<a href="/docs.docker.jp.onthefly/engine/extend/plugin_api/">Docker プラグイン API</a> とネットワークプラグインプロトコルにより実装されます。</p>

<h2 id="network-plugin-protocol">ネットワークプラグインプロトコル</h2>

<p>ネットワークドライバープロトコル、およびプラグインアクティベーションコール（plugin activation call）については、libnetwork の一部 <a href="https://github.com/docker/libnetwork/blob/master/docs/remote.md">https://github.com/docker/libnetwork/blob/master/docs/remote.md</a> としてドキュメント化されています。</p>

<h2 id="related-information">関連情報</h2>

<p>Docker メンテナーや関心を寄せているユーザーと会話をしてみたい方は、IRC チャネル <code class="language-plaintext highlighter-rouge">#docker-network</code> にアクセスしてください。</p>

<ul>
  <li><a href="https://docs.docker.com/engine/userguide/networking/">Docker ネットワーク機能の概要</a></li>
  <li><a href="https://github.com/docker/libnetwork">LibNetwork</a> プロジェクト</li>
</ul>
