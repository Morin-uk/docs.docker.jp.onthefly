<!-- This file is maintained within the docker/cli GitHub
     repository at https://github.com/docker/cli/. Make all
     pull requests against that repo. If you see this file in
     another repository, consider it read-only there, as it will
     periodically be overwritten by the definitive file. Pull
     requests which include edits to this file in other repositories
     will be rejected.
-->

<h1 id="plugin-config-version-1-of-plugin-v2">Plugin Config Version 1 of Plugin V2</h1>

<p>This document outlines the format of the V0 plugin configuration. The plugin
config described herein was introduced in the Docker daemon in the <a href="https://github.com/docker/docker/commit/f37117045c5398fd3dca8016ea8ca0cb47e7312b">v1.12.0
release</a>.</p>

<p>Plugin configs describe the various constituents of a docker plugin. Plugin
configs can be serialized to JSON format with the following media types:</p>

<table>
  <thead>
    <tr>
      <th>Config Type</th>
      <th>Media Type</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>config</td>
      <td>“application/vnd.docker.plugin.v1+json”</td>
    </tr>
  </tbody>
</table>

<h2 id="config-field-descriptions"><em>Config</em> Field Descriptions</h2>

<p>Config provides the base accessible fields for working with V0 plugin format
 in the registry.</p>

<ul>
  <li>
    <p><strong><code class="language-plaintext highlighter-rouge">description</code></strong> <em>string</em></p>

    <p>description of the plugin</p>
  </li>
  <li>
    <p><strong><code class="language-plaintext highlighter-rouge">documentation</code></strong> <em>string</em></p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>link to the documentation about the plugin
</code></pre></div>    </div>
  </li>
  <li>
    <p><strong><code class="language-plaintext highlighter-rouge">interface</code></strong> <em>PluginInterface</em></p>

    <p>interface implemented by the plugins, struct consisting of the following fields</p>

    <ul>
      <li>
        <p><strong><code class="language-plaintext highlighter-rouge">types</code></strong> <em>string array</em></p>

        <p>types indicate what interface(s) the plugin currently implements.</p>

        <p>currently supported:</p>

        <ul>
          <li>
            <p><strong>docker.volumedriver/1.0</strong></p>
          </li>
          <li>
            <p><strong>docker.networkdriver/1.0</strong></p>
          </li>
          <li>
            <p><strong>docker.ipamdriver/1.0</strong></p>
          </li>
          <li>
            <p><strong>docker.authz/1.0</strong></p>
          </li>
          <li>
            <p><strong>docker.logdriver/1.0</strong></p>
          </li>
          <li>
            <p><strong>docker.metricscollector/1.0</strong></p>
          </li>
        </ul>
      </li>
      <li>
        <p><strong><code class="language-plaintext highlighter-rouge">socket</code></strong> <em>string</em></p>

        <p>socket is the name of the socket the engine should use to communicate with the plugins.
the socket will be created in <code class="language-plaintext highlighter-rouge">/run/docker/plugins</code>.</p>
      </li>
    </ul>
  </li>
  <li>
    <p><strong><code class="language-plaintext highlighter-rouge">entrypoint</code></strong> <em>string array</em></p>

    <p>entrypoint of the plugin, see <a href="/docs.docker.jp.onthefly/engine/reference/builder/#entrypoint"><code class="language-plaintext highlighter-rouge">ENTRYPOINT</code></a></p>
  </li>
  <li>
    <p><strong><code class="language-plaintext highlighter-rouge">workdir</code></strong> <em>string</em></p>

    <p>workdir of the plugin, see <a href="/docs.docker.jp.onthefly/engine/reference/builder/#workdir"><code class="language-plaintext highlighter-rouge">WORKDIR</code></a></p>
  </li>
  <li>
    <p><strong><code class="language-plaintext highlighter-rouge">network</code></strong> <em>PluginNetwork</em></p>

    <p>network of the plugin, struct consisting of the following fields</p>

    <ul>
      <li>
        <p><strong><code class="language-plaintext highlighter-rouge">type</code></strong> <em>string</em></p>

        <p>network type.</p>

        <p>currently supported:</p>

        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>- **bridge**
- **host**
- **none**
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li>
    <p><strong><code class="language-plaintext highlighter-rouge">mounts</code></strong> <em>PluginMount array</em></p>

    <p>mount of the plugin, struct consisting of the following fields, see <a href="https://github.com/opencontainers/runtime-spec/blob/master/config.md#mounts"><code class="language-plaintext highlighter-rouge">MOUNTS</code></a></p>

    <ul>
      <li>
        <p><strong><code class="language-plaintext highlighter-rouge">name</code></strong> <em>string</em></p>

        <p>name of the mount.</p>
      </li>
      <li>
        <p><strong><code class="language-plaintext highlighter-rouge">description</code></strong> <em>string</em></p>

        <p>description of the mount.</p>
      </li>
      <li>
        <p><strong><code class="language-plaintext highlighter-rouge">source</code></strong> <em>string</em></p>

        <p>source of the mount.</p>
      </li>
      <li>
        <p><strong><code class="language-plaintext highlighter-rouge">destination</code></strong> <em>string</em></p>

        <p>destination of the mount.</p>
      </li>
      <li>
        <p><strong><code class="language-plaintext highlighter-rouge">type</code></strong> <em>string</em></p>

        <p>mount type.</p>
      </li>
      <li>
        <p><strong><code class="language-plaintext highlighter-rouge">options</code></strong> <em>string array</em></p>

        <p>options of the mount.</p>
      </li>
    </ul>
  </li>
  <li><strong><code class="language-plaintext highlighter-rouge">ipchost</code></strong> <em>boolean</em>
 Access to host ipc namespace.</li>
  <li>
    <p><strong><code class="language-plaintext highlighter-rouge">pidhost</code></strong> <em>boolean</em>
 Access to host pid namespace.</p>
  </li>
  <li>
    <p><strong><code class="language-plaintext highlighter-rouge">propagatedMount</code></strong> <em>string</em></p>

    <p>path to be mounted as rshared, so that mounts under that path are visible to docker. This is useful for volume plugins.
 This path will be bind-mounted outside of the plugin rootfs so it’s contents
 are preserved on upgrade.</p>
  </li>
  <li>
    <p><strong><code class="language-plaintext highlighter-rouge">env</code></strong> <em>PluginEnv array</em></p>

    <p>env of the plugin, struct consisting of the following fields</p>

    <ul>
      <li>
        <p><strong><code class="language-plaintext highlighter-rouge">name</code></strong> <em>string</em></p>

        <p>name of the env.</p>
      </li>
      <li>
        <p><strong><code class="language-plaintext highlighter-rouge">description</code></strong> <em>string</em></p>

        <p>description of the env.</p>
      </li>
      <li>
        <p><strong><code class="language-plaintext highlighter-rouge">value</code></strong> <em>string</em></p>

        <p>value of the env.</p>
      </li>
    </ul>
  </li>
  <li>
    <p><strong><code class="language-plaintext highlighter-rouge">args</code></strong> <em>PluginArgs</em></p>

    <p>args of the plugin, struct consisting of the following fields</p>

    <ul>
      <li>
        <p><strong><code class="language-plaintext highlighter-rouge">name</code></strong> <em>string</em></p>

        <p>name of the args.</p>
      </li>
      <li>
        <p><strong><code class="language-plaintext highlighter-rouge">description</code></strong> <em>string</em></p>

        <p>description of the args.</p>
      </li>
      <li>
        <p><strong><code class="language-plaintext highlighter-rouge">value</code></strong> <em>string array</em></p>

        <p>values of the args.</p>
      </li>
    </ul>
  </li>
  <li>
    <p><strong><code class="language-plaintext highlighter-rouge">linux</code></strong> <em>PluginLinux</em></p>

    <ul>
      <li>
        <p><strong><code class="language-plaintext highlighter-rouge">capabilities</code></strong> <em>string array</em></p>

        <p>capabilities of the plugin (<em>Linux only</em>), see list <a href="https://github.com/opencontainers/runc/blob/master/libcontainer/SPEC.md#security"><code class="language-plaintext highlighter-rouge">here</code></a></p>
      </li>
      <li>
        <p><strong><code class="language-plaintext highlighter-rouge">allowAllDevices</code></strong> <em>boolean</em></p>

        <p>If <code class="language-plaintext highlighter-rouge">/dev</code> is bind mounted from the host, and allowAllDevices is set to true, the plugin will have <code class="language-plaintext highlighter-rouge">rwm</code> access to all devices on the host.</p>
      </li>
      <li>
        <p><strong><code class="language-plaintext highlighter-rouge">devices</code></strong> <em>PluginDevice array</em></p>

        <p>device of the plugin, (<em>Linux only</em>), struct consisting of the following fields, see <a href="https://github.com/opencontainers/runtime-spec/blob/master/config-linux.md#devices"><code class="language-plaintext highlighter-rouge">DEVICES</code></a></p>

        <ul>
          <li>
            <p><strong><code class="language-plaintext highlighter-rouge">name</code></strong> <em>string</em></p>

            <p>name of the device.</p>
          </li>
          <li>
            <p><strong><code class="language-plaintext highlighter-rouge">description</code></strong> <em>string</em></p>

            <p>description of the device.</p>
          </li>
          <li>
            <p><strong><code class="language-plaintext highlighter-rouge">path</code></strong> <em>string</em></p>

            <p>path of the device.</p>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h2 id="example-config">Example Config</h2>

<p><em>Example showing the ‘tiborvass/sample-volume-plugin’ plugin config.</em></p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
            </span><span class="nl">"Args"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"Description"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                </span><span class="nl">"Name"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                </span><span class="nl">"Settable"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                </span><span class="nl">"Value"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"Description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"A sample volume plugin for Docker"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"Documentation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://docs.docker.com/engine/extend/plugins/"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"Entrypoint"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"/usr/bin/sample-volume-plugin"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"/data"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nl">"Env"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"Description"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"Name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEBUG"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"Settable"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                        </span><span class="s2">"value"</span><span class="w">
                    </span><span class="p">],</span><span class="w">
                    </span><span class="nl">"Value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nl">"Interface"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"Socket"</span><span class="p">:</span><span class="w"> </span><span class="s2">"plugin.sock"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"Types"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"docker.volumedriver/1.0"</span><span class="w">
                </span><span class="p">]</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"Linux"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"Capabilities"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                </span><span class="nl">"AllowAllDevices"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="nl">"Devices"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"Mounts"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"Network"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"Type"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"PropagatedMount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/data"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"User"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
            </span><span class="nl">"Workdir"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
