
<p>マネージャーノードにおいて <a href="/docs.docker.jp.onthefly/engine/swarm/swarm-tutorial/create-swarm/">Swarm の生成</a> を行ったら、次はワーカーノードの追加です。</p>

<ol>
  <li>
    <p>ターミナル画面を開き、ワーカーノードを起動させたいマシンに SSH 接続します。
このチュートリアルでは <code class="language-plaintext highlighter-rouge">worker1</code> というマシン名にします。</p>
  </li>
  <li>
    <p><a href="/docs.docker.jp.onthefly/engine/swarm/swarm-tutorial/create-swarm/">Swarm の生成</a> において <code class="language-plaintext highlighter-rouge">docker swarm init</code> を実行した際に出力されたコマンドを実行します。
これにより、すでに生成済の Swarm に参加するワーカーノードを生成します。</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker swarm <span class="nb">join</span> <span class="se">\</span>
  <span class="nt">--token</span>  SWMTKN-1-49nj1cmql0jkz5s954yi3oex3nedyz0fb0xx14ie39trti4wxv-8vxv8rssmk743ojnwacrr2e7c <span class="se">\</span>
  192.168.99.100:2377

This node joined a swarm as a worker.
</code></pre></div>    </div>

    <p>上のコマンドが実行できない場合は、マネージャーノード上で以下のコマンドを実行して、ワーカーノードを参加させるためのコマンドを確認してください。</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker swarm join-token worker

To add a worker to this swarm, run the following <span class="nb">command</span>:

    docker swarm <span class="nb">join</span> <span class="se">\</span>
    <span class="nt">--token</span> SWMTKN-1-49nj1cmql0jkz5s954yi3oex3nedyz0fb0xx14ie39trti4wxv-8vxv8rssmk743ojnwacrr2e7c <span class="se">\</span>
    192.168.99.100:2377
</code></pre></div>    </div>
  </li>
  <li>
    <p>ターミナル画面を開き、2 つめのワーカーノードを起動させたいマシンに SSH 接続します。
このチュートリアルでは <code class="language-plaintext highlighter-rouge">worker2</code> というマシン名にします。</p>
  </li>
  <li>
    <p><a href="/docs.docker.jp.onthefly/engine/swarm/swarm-tutorial/create-swarm/">Swarm の生成</a> において <code class="language-plaintext highlighter-rouge">docker swarm init</code> を実行した際に出力されたコマンドを実行します。
これにより、すでに生成済の Swarm に参加する 2 つめのワーカーノードを生成します。</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker swarm <span class="nb">join</span> <span class="se">\</span>
  <span class="nt">--token</span> SWMTKN-1-49nj1cmql0jkz5s954yi3oex3nedyz0fb0xx14ie39trti4wxv-8vxv8rssmk743ojnwacrr2e7c <span class="se">\</span>
  192.168.99.100:2377

This node joined a swarm as a worker.
</code></pre></div>    </div>
  </li>
  <li>
    <p>ターミナル画面を開き、マネージャーノードが起動しているマシンに SSH 接続します。
そして <code class="language-plaintext highlighter-rouge">docker node ls</code> コマンドを実行して、ワーカーノードを確認します。</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ID                           HOSTNAME  STATUS  AVAILABILITY  MANAGER STATUS
03g1y59jwfg7cf99w4lt0f662    worker2   Ready   Active
9j68exjopxe7wfl6yuxml7a7j    worker1   Ready   Active
dxn1zf6l61qsb1josjja83ngz <span class="k">*</span>  manager1  Ready   Active        Leader
</code></pre></div>    </div>

    <p><code class="language-plaintext highlighter-rouge">MANAGER</code> カラムは、Swarm 内のマネージャーノードがどれであるかを示しています。
このカラムが <code class="language-plaintext highlighter-rouge">worker1</code> と <code class="language-plaintext highlighter-rouge">worker2</code> では空になっています。
つまりこれらはワーカーノードであることがわかります。</p>

    <p><code class="language-plaintext highlighter-rouge">docker node ls</code> のような Swarm 管理コマンドは、マネージャーノード上でのみ実行可能です。</p>
  </li>
</ol>

<h2 id="whats-next">次にすることは</h2>

<p>ここまでに Swarm は、1 つのマネージャーと 2 つのワーカーノードにより構成されることになりました。
本チュートリアルの次のステップでは、Swarm に対して <a href="/docs.docker.jp.onthefly/engine/swarm/swarm-tutorial/deploy-service/">サービスのデプロイ</a> を行います。</p>
