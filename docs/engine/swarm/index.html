
<p>Docker の Swarm モードを利用するには、各種のオペレーティングシステムやプラットフォーム向けの <a href="/docs.docker.jp.onthefly/get-docker/">インストール手順</a> に従って Docker をインストールしてください。</p>

<p>最新版の Docker には <strong>Swarm モード</strong> が含まれています。
これは <strong>Swarm</strong> と呼ばれる Docker Engine のクラスターをネイティブに管理するものです。
Docker CLI を使って、Swarm の生成、アプリケーションサービスの Swarm へのデプロイ、Swarm の制御管理を行います。</p>

<h2 id="feature-highlights">特徴的な機能</h2>

<ul>
  <li>
    <p><strong>Docker Engine に統合されたクラスター管理:</strong>
Docker Engine CLI を利用して Docker Engine の Swarm を生成します。
これに対してアプリケーションサービスをデプロイすることができます。
Swarm の生成や管理にあたって、オーケストレーションソフトウェアを別途必要としません。</p>
  </li>
  <li>
    <p><strong>分散型設計:</strong>
Docker Engine は、デプロイの際にはノードの役割別に異なった処理を行わず、実行時に特殊な処理を行います。
Docker Engine において、デプロイできるノードの種類はマネージャーとワーカーです。
Swarm 全体は、単一のディスクイメージから構築できることを意味します。</p>
  </li>
  <li>
    <p><strong>宣言型サービスモデル:</strong>
Docker Engine は宣言的なアプローチを採用しており、アプリケーション層の各サービスに対して、必要となる状態を定義するということを行います。
たとえばアプリケーションの記述として、ウェブフロントエンドサービスがあり、メッセージキューサービスとデータベースバックエンドから構成されるという記述を行うことがあります。</p>
  </li>
  <li>
    <p><strong>スケーリング:</strong>
各サービスに対しては、起動させたいタスク数を指定することができます。
スケールアップやスケールダウンの際に Swarm マネージャー、はタスクの追加または削除を行ない、定義された状態を維持するために自動的な対応を行います。</p>
  </li>
  <li>
    <p><strong>定義状態への調整:</strong>
Swarm マネージャーノードはクラスターの状態を常時監視しています。
そして実際の状態と定義された状態との間に差異があれば調整を行います。
たとえばコンテナーのレプリカを 10 にしてサービス設定を行っていて、そのレプリカ 2 つを受け持つワーカーマシンがクラッシュしたとします。
マネージャーは新たなレプリカ 2 つを生成し直して、クラッシュしたレプリカを置き換えます。
Swarm マネージャーは、利用可能な起動中のワーカーに対して、新たなレプリカを割り当てるものです。</p>
  </li>
  <li>
    <p><strong>マルチホストネットワーク:</strong>
サービスに対してオーバーレイネットワークを設定することができます。
Swarm マネージャーは、アプリケーションの初期化や更新を行う際に、オーバーレイネットワーク上のコンテナーに対して、アドレスを自動的に割り当てます。</p>
  </li>
  <li>
    <p><strong>サービス検出:</strong>
Swarm マネージャーノードは、Swarm 内の各サービスに対して固有の DNS 名を割り当てます。
そして実行コンテナーの負荷分散を行います。
Swarm 内で稼動するコンテナーはすべて、Swarm 内に埋め込まれている DNS サーバーを通じて問い合わせることが可能です。</p>
  </li>
  <li>
    <p><strong>負荷分散:</strong>
各サービスのポートを外部のロードバランサーへ公開することができます。
内部的に言えば Swarm は、ノード間においてサービスコンテナーをどのように分散するかを指定できるものです。</p>
  </li>
  <li>
    <p><strong>デフォルトで安全:</strong>
Swarm 内の各ノードでは TLS 相互認証や暗号化が行われるものになっていて、そのノードそのものを含めた全ノード間でのセキュアな通信が行われます。
自己署名ルート証明書や、カスタムルート CA に基づいた証明書を利用することもできます。</p>
  </li>
  <li>
    <p><strong>ローリングアップデート:</strong>
運用開始時には、ノードに対するサービスアップデートを追加的に適用していくことができます。
さまざまなノードグループにおいてサービスデプロイのタイミングに差異があっても、Swarm マネージャーが管理してくれます。
仮に何か問題が発生したときには、サービスバージョンを元に戻すことができます。</p>
  </li>
</ul>

<h2 id="whats-next">次にすることは</h2>

<h3 id="swarm-mode-key-concepts-and-tutorial">Swarm モードの重要な考え方とチュートリアル</h3>

<ul>
  <li>
    <p>Swarm モードの <a href="/docs.docker.jp.onthefly/engine/swarm/key-concepts/">重要な考え方</a> について学ぶ。</p>
  </li>
  <li>
    <p><a href="/docs.docker.jp.onthefly/engine/swarm/swarm-tutorial/">Swarm モードチュートリアル</a> をはじめる。</p>
  </li>
</ul>

<h3 id="swarm-mode-cli-commands">Swarm モード CLI コマンド</h3>

<p>Swarm モード CLI コマンドを見てみます。</p>

<ul>
  <li><a href="/docs.docker.jp.onthefly/engine/reference/commandline/swarm_init/">swarm init</a></li>
  <li><a href="/docs.docker.jp.onthefly/engine/reference/commandline/swarm_join/">swarm join</a></li>
  <li><a href="/docs.docker.jp.onthefly/engine/reference/commandline/service_create/">service create</a></li>
  <li><a href="/docs.docker.jp.onthefly/engine/reference/commandline/service_inspect/">service inspect</a></li>
  <li><a href="/docs.docker.jp.onthefly/engine/reference/commandline/service_ls/">service ls</a></li>
  <li><a href="/docs.docker.jp.onthefly/engine/reference/commandline/service_rm/">service rm</a></li>
  <li><a href="/docs.docker.jp.onthefly/engine/reference/commandline/service_scale/">service scale</a></li>
  <li><a href="/docs.docker.jp.onthefly/engine/reference/commandline/service_ps/">service ps</a></li>
  <li><a href="/docs.docker.jp.onthefly/engine/reference/commandline/service_update/">service update</a></li>
</ul>
