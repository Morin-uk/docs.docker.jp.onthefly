<!-- This file is maintained within the docker/cli GitHub
     repository at https://github.com/docker/cli/. Make all
     pull requests against that repo. If you see this file in
     another repository, consider it read-only there, as it will
     periodically be overwritten by the definitive file. Pull
     requests which include edits to this file in other repositories
     will be rejected.
-->

<p>以下に示す機能一覧は Engine において廃止決定されたものです。
Docker Engine における廃止決定ポリシーについては <a href="/docs.docker.jp.onthefly/engine/#feature-deprecation-policy">廃止決定に関するポリシー</a> を参照してください。</p>

<h3 id="pushing-and-pulling-with-image-manifest-v2-schema-1">イメージプッシュとプルに関するマニフェスト v2 スキーム 1</h3>

<p><strong>廃止決定されたリリース: v19.03.0</strong></p>

<p><strong>削除対象とされたリリース: v19.09.0</strong></p>

<p>イメージマニフェスト <a href="https://github.com/docker/distribution/blob/fda42e5ef908bdba722d435ff1f330d40dfcd56c/docs/spec/manifest-v2-1.md">v2 スキーム 1</a> フォーマットは廃止決定され、<a href="https://github.com/docker/distribution/blob/fda42e5ef908bdba722d435ff1f330d40dfcd56c/docs/spec/manifest-v2-2.md">v2 スキーム 2</a> フォーマットに変わります。</p>

<p>利用中のレジストリが v2 スキーマ 1 対応の場合は、v2 スキーマ 2 への移行を管理者へ伝えてください。</p>

<h3 id="legacy-overlay-storage-driver">古い「overlay」ストレージドライバー</h3>

<p><strong>廃止決定されたリリース: v18.09.0</strong></p>

<p><code class="language-plaintext highlighter-rouge">overlay</code> ストレージドライバーは廃止決定され、<code class="language-plaintext highlighter-rouge">overlay2</code> に変わりました。
<code class="language-plaintext highlighter-rouge">overlay2</code> は <code class="language-plaintext highlighter-rouge">overlay</code> の機能をすべて引き継いだ上で、その制約（過剰な inode 消費に関する制約）が取り除かれています。
この古い <code class="language-plaintext highlighter-rouge">overlay</code> ストレージドライバーは、将来のリリースにおいて削除される予定です。
<code class="language-plaintext highlighter-rouge">overlay</code> ストレージドライバーの利用者は、<code class="language-plaintext highlighter-rouge">overlay2</code> ストレージドライバーに移行するようにしてください。</p>

<p>古い <code class="language-plaintext highlighter-rouge">overlay</code> ストレージドライバーでは、それまでの 4.x カーネル上において overlayFS をベースとしたファイルシステムを用いていました。
現在はサポートされているディストリビューションは、すべてにおいて <code class="language-plaintext highlighter-rouge">overlay2</code> が利用できるようになっています。
（たとえカーネルが 4.x の場合や、下層側ディレクトリを複数可能とするサポートがある場合でも利用可能です。）
<code class="language-plaintext highlighter-rouge">overlay</code> ストレージドライバーの保守を続ける理由は、もはやなくなりました。</p>

<h3 id="device-mapper-storage-driver">device mapper ストレージドライバー</h3>

<p><strong>廃止決定されたリリース: v18.09.0</strong></p>

<p><code class="language-plaintext highlighter-rouge">devicemapper</code> ストレージドライバーは廃止決定され、<code class="language-plaintext highlighter-rouge">overlay2</code> に変わりました。
そして将来のリリースにおいて削除される予定です。
<code class="language-plaintext highlighter-rouge">devicemapper</code> ストレージドライバーの利用者は、現在デフォルトのストレージドライバーとなっている <code class="language-plaintext highlighter-rouge">overlay2</code> などの、別のストレージドライバーへの移行が求められます。</p>

<p><code class="language-plaintext highlighter-rouge">devicemapper</code> ストレージドライバーは、かつての 3.x カーネル上において Docker を稼動させることを勧めていましたが、そのカーネルでは、他のストレージドライバー（overlay2 や AUFS など）はサポートされません。</p>

<p>今では <code class="language-plaintext highlighter-rouge">overlay2</code> への対応が、サポートされているディストリビューションに追加されたため、（たとえカーネルが 4.x の場合や、下層側ディレクトリを複数可能とするサポートがある場合であっても）<code class="language-plaintext highlighter-rouge">devicemapper</code> ストレージドライバーの保守を続ける理由は、もはやなくなりました。</p>

<h3 id="aufs-storage-driver">AuFS ストレージドライバー</h3>

<p><strong>廃止決定されたリリース: v19.03.0</strong></p>

<p><code class="language-plaintext highlighter-rouge">aufs</code> ストレージドライバーは廃止決定され <code class="language-plaintext highlighter-rouge">overlay2</code> に変わりました。
将来リリースにおいて削除される予定です。
<code class="language-plaintext highlighter-rouge">aufs</code> ストレージドライバーの利用者は、現在デフォルトのストレージドライバーとなっている <code class="language-plaintext highlighter-rouge">overlay2</code> などの、別のストレージドライバーへの移行が求められます。</p>

<p><code class="language-plaintext highlighter-rouge">aufs</code> ストレージドライバーは、OverlayFS をサポートしていない、たとえば Ubuntu 14.04 LTS などのディストリビューションにおいて Docker を稼動させる際にその利用を勧めていましたが、もともとは 3.14 カーネルにおいて提供されたものでした。</p>

<p>現在 Ubuntu 14.04 は Docker においてサポートされるディストリビューションではなくなりました。
また <code class="language-plaintext highlighter-rouge">overlay2</code> への対応が、サポートされているディストリビューションに追加されたため、（たとえカーネルが 4.x の場合や、下層側ディレクトリを複数可能とするサポートがある場合であっても）<code class="language-plaintext highlighter-rouge">aufs</code> ストレージドライバーの保守を続ける理由は、もはやなくなりました。</p>

<h3 id="reserved-namespaces-in-engine-labels">Engine ラベルでの予約されている名前空間</h3>

<p><strong>廃止決定されたリリース: v18.06.0</strong></p>

<p>Engine ラベルにおいて用いられる名前空間 <code class="language-plaintext highlighter-rouge">com.docker.*</code>、<code class="language-plaintext highlighter-rouge">io.docker.*</code>、<code class="language-plaintext highlighter-rouge">org.dockerproject.*</code> は、予約されたものとして常々説明されてきましたが、強制されるものではありませんでした。</p>

<p>今後はこの名前空間を利用した際に、これを利用しないよう、Engine のログに警告が出力されます。
これは 18.12 またはそれ以降においてはエラーとなります。</p>

<h3 id="service-create-と-service-update-の非同期実行"><code class="language-plaintext highlighter-rouge">service create</code> と <code class="language-plaintext highlighter-rouge">service update</code> の非同期実行</h3>

<p><strong>廃止決定されたリリース: v17.05.0</strong></p>

<p><strong>デフォルトで無効となったリリース: <a href="https://github.com/docker/docker-ce/releases/tag/v17.10.0-ce">v17.10</a></strong></p>

<p>17.05.0 では、任意のオプション <code class="language-plaintext highlighter-rouge">--detach=false</code> が追加され、<code class="language-plaintext highlighter-rouge">docker service create</code> と <code class="language-plaintext highlighter-rouge">docker service update</code> を同期して動作させることができるようになりました。
Docker 17.10 において、このオプションのデフォルト値は enable となります。
その場合 <code class="language-plaintext highlighter-rouge">--detach</code> フラグは、以前の（非同期の）動作を行うために利用するものとなります。</p>

<p>このオプションのデフォルトは Docker 17.10 における <code class="language-plaintext highlighter-rouge">docker service rollback</code>、<code class="language-plaintext highlighter-rouge">docker service scale</code> においても変更されます。</p>

<h3 id="dockerd-における--g-フラグと---graph-フラグ"><code class="language-plaintext highlighter-rouge">dockerd</code> における <code class="language-plaintext highlighter-rouge">-g</code> フラグと <code class="language-plaintext highlighter-rouge">--graph</code> フラグ</h3>

<p><strong>廃止決定されたリリース: v17.05.0</strong></p>

<p><code class="language-plaintext highlighter-rouge">dockerd</code> または <code class="language-plaintext highlighter-rouge">docker daemon</code> コマンドにおける <code class="language-plaintext highlighter-rouge">-g</code> または <code class="language-plaintext highlighter-rouge">--graph</code> フラグは、恒常的なデータやリソース設定の保存場所とするディレクトリを指定するものでした。
これは、よりわかりやすい <code class="language-plaintext highlighter-rouge">--data-root</code> というものに変わります。
flag.</p>

<p>このフラグが追加されたのは Docker 1.0 以前であるため、<strong>削除</strong> はされず <strong>隠された</strong> フラグとなり、その利用は勧められないものとなりました。</p>

<h3 id="top-level-network-properties-in-networksettings">NetworkSettings 配下のトップレベルのネットワークプロパティ</h3>

<p><strong>廃止決定されたリリース: <a href="https://github.com/docker/docker/releases/tag/v1.13.0">v1.13.0</a></strong></p>

<p><strong>削除対象とされたリリース: v17.12</strong></p>

<p>コンテナー定義の <code class="language-plaintext highlighter-rouge">NetworkSettings</code> 配下に、デフォルトの「bridge」ネットワークに関する情報がトップベレルにおいて設定されます。</p>

<p><code class="language-plaintext highlighter-rouge">EndpointID</code>, <code class="language-plaintext highlighter-rouge">Gateway</code>, <code class="language-plaintext highlighter-rouge">GlobalIPv6Address</code>, <code class="language-plaintext highlighter-rouge">GlobalIPv6PrefixLen</code>, <code class="language-plaintext highlighter-rouge">IPAddress</code>,
<code class="language-plaintext highlighter-rouge">IPPrefixLen</code>, <code class="language-plaintext highlighter-rouge">IPv6Gateway</code>, <code class="language-plaintext highlighter-rouge">MacAddress</code> です。</p>

<p>このプロパティは廃止決定され、<code class="language-plaintext highlighter-rouge">NetworkSettings.Networks</code> 内での各ネットワークごとのプロパティに変わります。
このプロパティは、すでに Docker 1.9 において「廃止決定」されていましたが、下位互換のために残されていました。</p>

<p>詳細については <a href="https://github.com/docker/docker/pull/17538">#17538</a> を参照してください。</p>

<h3 id="filter-param-for-imagesjson-endpoint">エンドポイント <code class="language-plaintext highlighter-rouge">/images/json</code> の <code class="language-plaintext highlighter-rouge">filter</code> パラメーター</h3>

<p><strong>廃止決定されたリリース: <a href="https://github.com/docker/docker/releases/tag/v1.13.0">v1.13.0</a></strong></p>

<p><strong>削除対象とされたリリース: v17.12</strong></p>

<p><code class="language-plaintext highlighter-rouge">filter</code> パラメーターは、（イメージ名やイメージ名：タグの形で）イメージを一覧表示する際のフィルターですが、現在は通常のフィルター <code class="language-plaintext highlighter-rouge">reference</code> として実装されました。</p>

<h3 id="repositoryshortid-image-references"><code class="language-plaintext highlighter-rouge">repository:shortid</code> によるイメージ参照</h3>

<p><strong>廃止決定されたリリース: <a href="https://github.com/docker/docker/releases/tag/v1.13.0">v1.13.0</a></strong></p>

<p><strong>削除されたリリース: v17.12</strong></p>

<p>イメージを参照するための構文 <code class="language-plaintext highlighter-rouge">repository:shortid</code> は利用されることが少なく、タグ参照とまぎらわしく、さらにダイジェスト参照とも混同されます。</p>

<p><code class="language-plaintext highlighter-rouge">repository:shortid</code> によってイメージ参照を行うこの記述方法は、Docker 17.12 において削除されました。</p>

<h3 id="docker-daemon-subcommand"><code class="language-plaintext highlighter-rouge">docker daemon</code> サブコマンド</h3>

<p><strong>廃止決定されたリリース: <a href="https://github.com/docker/docker/releases/tag/v1.13.0">v1.13.0</a></strong></p>

<p><strong>削除されたリリース: v17.12</strong></p>

<p>デーモンは個別のバイナリ（<code class="language-plaintext highlighter-rouge">dockerd</code>）として分離されたため、こちらを用いることになります。</p>

<h3 id="duplicate-keys-with-conflicting-values-in-engine-labels">Engine ラベルでのキー重複による値の衝突</h3>

<p><strong>廃止決定されたリリース: <a href="https://github.com/docker/docker/releases/tag/v1.13.0">v1.13.0</a></strong></p>

<p><strong>削除されたリリース: v17.12</strong></p>

<p>重複したキーが設定されその値が衝突した場合、エラーが発生することになります。
この場合、デーモンは起動されなくなります。</p>

<h3 id="maintainer-in-dockerfile">Dockerfile における <code class="language-plaintext highlighter-rouge">MAINTAINER</code></h3>

<p><strong>廃止決定されたリリース: <a href="https://github.com/docker/docker/releases/tag/v1.13.0">v1.13.0</a></strong></p>

<p><code class="language-plaintext highlighter-rouge">MAINTAINER</code> は <code class="language-plaintext highlighter-rouge">LABEL</code> の限定利用の形で当初利用されていましたが、代わりに <code class="language-plaintext highlighter-rouge">LABEL</code> を利用すべきものです。</p>

<h3 id="api-calls-without-a-version">バージョンを含まない API コール</h3>

<p><strong>廃止決定されたリリース: <a href="https://github.com/docker/docker/releases/tag/v1.13.0">v1.13.0</a></strong></p>

<p><strong>削除対象とされたリリース: v17.12</strong></p>

<p>API 呼び出しにおいては、API バージョンを指定することが必要です。
これによって、将来の Engine バージョンとの互換性を保つためです。
URL において、たとえば単に <code class="language-plaintext highlighter-rouge">/containers/json</code> とするのではなく、<code class="language-plaintext highlighter-rouge">/v1.25/containers/json</code> とすることが今後必要になります。</p>

<h3 id="backing-filesystem-without-d_type-support-for-overlayoverlay2">overlay/overlay2 での <code class="language-plaintext highlighter-rouge">d_type</code> 未設定時のファイルシステム</h3>

<p><strong>廃止決定されたリリース: <a href="https://github.com/docker/docker/releases/tag/v1.13.0">v1.13.0</a></strong></p>

<p><strong>削除されたリリース: v17.12</strong></p>

<p>ストレージドライバー overlay と overlay2 は、これが基づいているファイルシステムが <code class="language-plaintext highlighter-rouge">d_type</code> に対応していない場合、期待されるような動作をしません。
たとえば XFS は <code class="language-plaintext highlighter-rouge">ftype=0</code> を使ってフォーマットされている場合には <code class="language-plaintext highlighter-rouge">d_type</code> をサポートしません。</p>

<p>Docker 17.12 以降、<code class="language-plaintext highlighter-rouge">d_type</code> 未対応のファイルシステムへのサポートは、今後の overlay2 の開発において行われません。
17.12 までにアップグレードした既存バージョンでは、警告が出力されます。</p>

<p>詳細は <a href="https://github.com/docker/docker/issues/27358">#27358</a> を参照してください。</p>

<h3 id="three-arguments-form-in-docker-import"><code class="language-plaintext highlighter-rouge">docker import</code> における 3 種類の引数形式</h3>

<p><strong>廃止決定されたリリース: <a href="https://github.com/docker/docker/releases/tag/v0.6.7">v0.6.7</a></strong></p>

<p><strong>削除されたリリース: <a href="https://github.com/docker/docker/releases/tag/v1.12.0">v1.12.0</a></strong></p>

<p><code class="language-plaintext highlighter-rouge">docker import</code> におけるコマンド形式 <code class="language-plaintext highlighter-rouge">file|URL|- [REPOSITORY [TAG]]</code> は 2013 年 11 月頃に廃止決定されました。
今後はサポートされません。</p>

<h3 id="--help-の短い形式--h"><code class="language-plaintext highlighter-rouge">--help</code> の短い形式 <code class="language-plaintext highlighter-rouge">-h</code></h3>

<p><strong>廃止決定されたリリース: <a href="https://github.com/docker/docker/releases/tag/v1.12.0">v1.12.0</a></strong></p>

<p><strong>削除対象とされたリリース: v17.09</strong></p>

<p>Linux において短い形式のオプション（<code class="language-plaintext highlighter-rouge">-h</code>）は、長い形式（<code class="language-plaintext highlighter-rouge">--help</code>）に比べて、あまり一般的ではありません。
そしてサブコマンドのすべてにおいて利用できるわけではありません。
（これは衝突が起きる場合があるためで、たとえば <code class="language-plaintext highlighter-rouge">docker create</code> には <code class="language-plaintext highlighter-rouge">-h</code> / <code class="language-plaintext highlighter-rouge">--hostname</code> があります。）
このようなわけで、短い形式の <code class="language-plaintext highlighter-rouge">-h</code> は、サブコマンドの利用方法の説明からなくし、ドキュメント化もしていません。
そして今後は「廃止決定」としてラベルづけします。</p>

<h3 id="docker-login-におけるフラグ--e--email"><code class="language-plaintext highlighter-rouge">docker login</code> におけるフラグ <code class="language-plaintext highlighter-rouge">-e</code>、<code class="language-plaintext highlighter-rouge">--email</code></h3>

<p><strong>廃止決定されたリリース: <a href="https://github.com/docker/docker/releases/tag/v1.11.0">v1.11.0</a></strong></p>

<p><strong>削除されたリリース: <a href="https://github.com/docker/docker-ce/releases/tag/v17.06.0-ce">v17.06</a></strong></p>

<p>docker login コマンドは、操作対象とするレジストリ上に、入力されたユーザー名が存在しなかった場合に、そのアカウントを自動的に登録していましたが、現在この機能は削除されています。
この変更により、email フラグは必要なくなったため、廃止決定となります。</p>

<h3 id="separator--of---security-opt-flag-on-docker-run"><code class="language-plaintext highlighter-rouge">docker run</code> における <code class="language-plaintext highlighter-rouge">--security-opt</code> のセパレーター（<code class="language-plaintext highlighter-rouge">:</code>）</h3>

<p><strong>廃止決定されたリリース: <a href="https://github.com/docker/docker/releases/tag/v1.11.0">v1.11.0</a></strong></p>

<p><strong>削除対象とされたリリース: v17.06</strong></p>

<p><code class="language-plaintext highlighter-rouge">--security-opt</code> フラグでは、キーと値を切り分けて指定するためのセパレーター（<code class="language-plaintext highlighter-rouge">:</code>）は、今後は利用しません。
これはたとえば <code class="language-plaintext highlighter-rouge">--storage-opt</code> のような同様のフラグと一貫性を持たせるために、イコール（<code class="language-plaintext highlighter-rouge">=</code>）を利用します。</p>

<h3 id="containersid-or-namecopy-endpoint">エンドポイント <code class="language-plaintext highlighter-rouge">/containers/(IDまたは名前)/copy</code></h3>

<p><strong>廃止決定されたリリース: <a href="https://github.com/docker/docker/releases/tag/v1.8.0">v1.8.0</a></strong></p>

<p><strong>削除されたリリース: <a href="https://github.com/docker/docker/releases/tag/v1.12.0">v1.12.0</a></strong></p>

<p>エンドポイント <code class="language-plaintext highlighter-rouge">/containers/(IDまたは名前)/copy</code> は廃止決定され、<code class="language-plaintext highlighter-rouge">/containers/(IDまたは名前)/archive</code> に変わります。</p>

<h3 id="ambiguous-event-fields-in-api">イベント API の不明瞭な項目</h3>

<p><strong>廃止決定されたリリース: <a href="https://github.com/docker/docker/releases/tag/v1.10.0">v1.10.0</a></strong></p>

<p>イベント API における以下の項目、<code class="language-plaintext highlighter-rouge">ID</code>、<code class="language-plaintext highlighter-rouge">Status</code>、<code class="language-plaintext highlighter-rouge">From</code> はすでに廃止決定されています。
これは、より表現が豊かな構造に変わります。
新たなフォーマットに関しては、イベント API のドキュメントを参照してください。</p>

<h3 id="docker-tag-における--f-フラグ"><code class="language-plaintext highlighter-rouge">docker tag</code> における <code class="language-plaintext highlighter-rouge">-f</code> フラグ</h3>

<p><strong>廃止決定されたリリース: <a href="https://github.com/docker/docker/releases/tag/v1.10.0">v1.10.0</a></strong></p>

<p><strong>削除されたリリース: <a href="https://github.com/docker/docker/releases/tag/v1.12.0">v1.12.0</a></strong></p>

<p>さまざまな <code class="language-plaintext highlighter-rouge">docker</code> コマンド間にてタグづけ機能に一貫性を持たせるために、<code class="language-plaintext highlighter-rouge">docker tag</code> コマンドの <code class="language-plaintext highlighter-rouge">-f</code> フラグは廃止決定されました。
1 つのイメージから別のイメージへタグを移動する際に、<code class="language-plaintext highlighter-rouge">-f</code> を指定する必要はなくなりました。
そして <code class="language-plaintext highlighter-rouge">-f</code> フラグの指定がなく、あるいは指定されたタグがすでに使用中であっても、<code class="language-plaintext highlighter-rouge">docker</code> ではエラーとなりません。</p>

<h3 id="hostconfig-at-api-container-start">API の container start における HostConfig</h3>

<p><strong>廃止決定されたリリース: <a href="https://github.com/docker/docker/releases/tag/v1.10.0">v1.10.0</a></strong></p>

<p><strong>削除されたリリース: <a href="https://github.com/docker/docker/releases/tag/v1.12.0">v1.12.0</a></strong></p>

<p><code class="language-plaintext highlighter-rouge">POST /containers/{name}/start</code> に対して <code class="language-plaintext highlighter-rouge">HostConfig</code> を設定することは廃止決定となりました。
代わりに、コンテナーの生成時（<code class="language-plaintext highlighter-rouge">POST /containers/create</code>）に定義するものとなります。</p>

<h3 id="docker-ps-におけるフラグ---before--since"><code class="language-plaintext highlighter-rouge">docker ps</code> におけるフラグ <code class="language-plaintext highlighter-rouge">--before</code>、<code class="language-plaintext highlighter-rouge">--since</code></h3>

<p><strong>廃止決定されたリリース: <a href="https://github.com/docker/docker/releases/tag/v1.10.0">v1.10.0</a></strong></p>

<p><strong>削除されたリリース: <a href="https://github.com/docker/docker/releases/tag/v1.12.0">v1.12.0</a></strong></p>

<p><code class="language-plaintext highlighter-rouge">docker ps --before</code> と <code class="language-plaintext highlighter-rouge">docker ps --since</code> というオプション指定は廃止決定されました。
代わりに <code class="language-plaintext highlighter-rouge">docker ps --filter=before=...</code> や <code class="language-plaintext highlighter-rouge">docker ps --filter=since=...</code> を利用するものとなります。</p>

<h3 id="docker-search-におけるフラグ---automated--stars"><code class="language-plaintext highlighter-rouge">docker search</code> におけるフラグ <code class="language-plaintext highlighter-rouge">--automated</code>、<code class="language-plaintext highlighter-rouge">--stars</code></h3>

<p><strong>廃止決定されたリリース: <a href="https://github.com/docker/docker/releases/tag/v1.12.0">v1.12.0</a></strong></p>

<p><strong>削除対象とされたリリース: v17.09</strong></p>

<p><code class="language-plaintext highlighter-rouge">docker search --automated</code> と <code class="language-plaintext highlighter-rouge">docker search --stars</code> というオプション指定は廃止決定されました。
代わりに <code class="language-plaintext highlighter-rouge">docker search --filter=is-automated=...</code> と <code class="language-plaintext highlighter-rouge">docker search --filter=stars=...</code> を利用するものとなります。</p>

<h3 id="driver-specific-log-tags">ドライバー固有ログのタグづけ</h3>

<p><strong>廃止決定されたリリース: <a href="https://github.com/docker/docker/releases/tag/v1.9.0">v1.9.0</a></strong></p>

<p><strong>削除されたリリース: <a href="https://github.com/docker/docker/releases/tag/v1.12.0">v1.12.0</a></strong></p>

<p>ログのタグは、多くのログドライバーにおいて標準的な方式で生成されています。
このため、ドライバー固有のタグづけを行うオプション <code class="language-plaintext highlighter-rouge">syslog-tag</code>、<code class="language-plaintext highlighter-rouge">gelf-tag</code>、<code class="language-plaintext highlighter-rouge">fluentd-tag</code> は廃止決定とされています。
代わりに汎用的な <code class="language-plaintext highlighter-rouge">tag</code> オプションを利用します。</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
docker <span class="nt">--log-driver</span><span class="o">=</span>syslog <span class="nt">--log-opt</span> <span class="nv">tag</span><span class="o">=</span><span class="s2">"{{.ImageName}}/{{.Name}}/{{.ID}}"</span>

</code></pre></div></div>

<h3 id="lxc-built-in-exec-driver">LXC ビルトインの実行ドライバー</h3>

<p><strong>廃止決定されたリリース: <a href="https://github.com/docker/docker/releases/tag/v1.8.0">v1.8.0</a></strong></p>

<p><strong>削除されたリリース: <a href="https://github.com/docker/docker/releases/tag/v1.10.0">v1.10.0</a></strong></p>

<p>LXC ビルトインの実行ドライバー、lxc-config フラグ、API 項目は削除されました。</p>

<h3 id="古くなったコマンドラインオプション">古くなったコマンドラインオプション</h3>

<p><strong>廃止決定されたリリース: <a href="https://github.com/docker/docker/releases/tag/v1.8.0">v1.8.0</a></strong></p>

<p><strong>削除されたリリース: <a href="https://github.com/docker/docker/releases/tag/v1.10.0">v1.10.0</a></strong></p>

<p>フラグ <code class="language-plaintext highlighter-rouge">-d</code> と <code class="language-plaintext highlighter-rouge">--daemon</code> は廃止決定となり、<code class="language-plaintext highlighter-rouge">daemon</code> サブコマンドになりました。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker daemon -H ...
</code></pre></div></div>

<p>以下のシングルダッシュ（<code class="language-plaintext highlighter-rouge">-opt</code> のような）形式のコマンドラインオプションは廃止決定となり、ダブルダッシュ（<code class="language-plaintext highlighter-rouge">--opt</code> のような）形式になりました。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker attach -nostdin
docker attach -sig-proxy
docker build -no-cache
docker build -rm
docker commit -author
docker commit -run
docker events -since
docker history -notrunc
docker images -notrunc
docker inspect -format
docker ps -beforeId
docker ps -notrunc
docker ps -sinceId
docker rm -link
docker run -cidfile
docker run -dns
docker run -entrypoint
docker run -expose
docker run -link
docker run -lxc-conf
docker run -n
docker run -privileged
docker run -volumes-from
docker search -notrunc
docker search -stars
docker search -t
docker search -trusted
docker tag -force
</code></pre></div></div>

<p>以下のダブルダッシュによるオプションは廃止決定され、これに代わるものはありません。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run --cpuset
docker run --networking
docker ps --since-id
docker ps --before-id
docker search --trusted
</code></pre></div></div>

<p><strong>廃止決定されたリリース: <a href="https://github.com/docker/docker/releases/tag/v1.5.0">v1.5.0</a></strong></p>

<p><strong>削除されたリリース: <a href="https://github.com/docker/docker/releases/tag/v1.12.0">v1.12.0</a></strong></p>

<p>シングルダッシュ（<code class="language-plaintext highlighter-rouge">-help</code>）は削除されたため、代わりにダブルダッシュの <code class="language-plaintext highlighter-rouge">--help</code> を利用します。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker -help
docker [COMMAND] -help
</code></pre></div></div>

<h3 id="docker-commit-における---run-フラグ"><code class="language-plaintext highlighter-rouge">docker commit</code> における <code class="language-plaintext highlighter-rouge">--run</code> フラグ</h3>

<p><strong>廃止決定されたリリース: <a href="https://github.com/docker/docker/releases/tag/v0.10.0">v0.10.0</a></strong></p>

<p><strong>削除されたリリース: <a href="https://github.com/docker/docker/releases/tag/v1.13.0">v1.13.0</a></strong></p>

<p>docker commit のフラグ <code class="language-plaintext highlighter-rouge">--run</code>（その短い版である <code class="language-plaintext highlighter-rouge">-run</code>）は廃止決定となっています。
代わりに <code class="language-plaintext highlighter-rouge">--changes</code> フラグを利用します。
これは <code class="language-plaintext highlighter-rouge">Dockerfile</code> コマンドに指定することも可能です。</p>

<h3 id="interacting-with-v1-registries">V1 レジストリとのやりとり</h3>

<p><strong>デフォルトで無効とされたリリース: v17.06</strong></p>

<p><strong>削除されたリリース: v17.12</strong></p>

<p>1.8.3 においてフラグ <code class="language-plaintext highlighter-rouge">--disable-legacy-registry=false</code> が追加されました。
これは Docker デーモンが V1 レジストリに対して <code class="language-plaintext highlighter-rouge">pull</code>、<code class="language-plaintext highlighter-rouge">push</code>、<code class="language-plaintext highlighter-rouge">login</code> ができないようにするものです。
デフォルトは有効になっていますが、ゆくゆくは v1 プロトコルを廃止とする意図を示しています。</p>

<p>公開レジストリに対する V1 プロトコルのサポートは、1.13 において削除されました。
V1 を利用したミラー設定は、すべて <a href="/docs.docker.jp.onthefly/registry/recipes/mirror/">v2 レジストリーミラー</a> を利用して更新する必要があります。</p>

<p>Docker 17.12 以降は、V1 レジストリに対するサポートが削除されました。
そして <code class="language-plaintext highlighter-rouge">--disable-legacy-registry</code> フラグは今後利用できません。
これが設定されている場合、<code class="language-plaintext highlighter-rouge">dockerd</code> は処理に失敗します。</p>

<h3 id="オーバーライドデーモンオプション---disable-legacy-registry">オーバーライドデーモンオプション <code class="language-plaintext highlighter-rouge">--disable-legacy-registry</code></h3>

<p><strong>無効化されたリリース: v17.12</strong></p>

<p><strong>削除対象とされたリリース: v18.03</strong></p>

<p><code class="language-plaintext highlighter-rouge">--disable-legacy-registry</code> フラグは Docker 17.12 において無効化されました。
これを用いた場合にはエラー表示されます。
このエラー表示を行うことから、フラグそのものはまだ存在していますが、隠されています。
このフラグは Docker 18.03 において削除される予定です。</p>

<h3 id="docker-content-trust-env-passphrase-variables-name-change">Docker コンテントトラストのパスフレーズ変数の名称変更</h3>

<p><strong>廃止決定されたリリース: <a href="https://github.com/docker/docker/releases/tag/v1.9.0">v1.9.0</a></strong></p>

<p><strong>削除されたリリース: <a href="https://github.com/docker/docker/releases/tag/v1.12.0">v1.12.0</a></strong></p>

<p>v1.9 以降、Docker コンテントトラストのオフライン鍵はルート鍵に、タギング鍵はリポジトリ鍵にそれぞれ名称変更されています。
この変更にともなって、対応する環境変数も変更されています。</p>

<ul>
  <li>DOCKER_CONTENT_TRUST_OFFLINE_PASSPHRASE は DOCKER_CONTENT_TRUST_ROOT_PASSPHRASE に名称変更されました。</li>
  <li>DOCKER_CONTENT_TRUST_TAGGING_PASSPHRASE は DOCKER_CONTENT_TRUST_REPOSITORY_PASSPHRASE に名称変更されました。</li>
</ul>

<h3 id="dockerd-の---api-enable-cors-フラグ">dockerd の <code class="language-plaintext highlighter-rouge">--api-enable-cors</code> フラグ</h3>

<p><strong>廃止決定されたリリース: <a href="https://github.com/docker/docker/releases/tag/v1.6.0">v1.6.0</a></strong></p>

<p><strong>削除リリース: <a href="https://github.com/docker/docker-ce/releases/tag/v17.09.0-ce">v17.09</a></strong></p>

<p>フラグ <code class="language-plaintext highlighter-rouge">--api-enable-cors</code> は v1.6.0 より廃止決定されていました。
これに代わって、フラグ <code class="language-plaintext highlighter-rouge">--api-cors-header</code> を利用してください。</p>
