<!-- Page generated 2021-02-26 13:55:31 +0900-->
<!DOCTYPE html>
<html lang="ja"><head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>ACI integration container features | Docker ドキュメント</title>
  <meta name="description" content="Reference list of container ACI features" />
  <meta name="keywords" content="Docker, Azure, Integration, ACI, container, cli, deploy, cloud">
  <link rel="canonical" href="https://localhost:4000{{ site.baseurl }}/cloud/aci-container-features/" />

  <!-- favicon -->
  <link rel="icon" type="image/x-icon" href="/docs.docker.jp.onthefly/favicons/docs@2x.ico" sizes="129x128">
  <link rel="apple-touch-icon" type="image/x-icon" href="/docs.docker.jp.onthefly/favicons/docs@2x.ico" sizes="129x128">
  <meta name="msapplication-TileImage" content="/docs.docker.jp.onthefly/favicons/docs@2x.ico">
  <meta property="og:image" content="/docs.docker.jp.onthefly/favicons/docs@2x.ico"/>
  <meta name="theme-color" content="#2496ed" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0"><script defer src="/docs.docker.jp.onthefly/js/theme-switcher.js"></script>
  <script defer src="/docs.docker.jp.onthefly/js/anchorlinks.js"></script>
  <script defer src="/docs.docker.jp.onthefly/js/jquery.js"></script>
  <script defer src="/docs.docker.jp.onthefly/js/bootstrap.min.js"></script>
  <script defer src="/docs.docker.jp.onthefly/js/docs.js"></script><script defer src="/docs.docker.jp.onthefly/js/search.js"></script><link rel="preload" as="font" href="https://fonts.gstatic.com/s/opensans/v18/mem8YaGs126MiZpBA-UFVZ0bf8pkAg.woff2" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" as="font" href="/docs.docker.jp.onthefly/fonts/geomanist/hinted-Geomanist-Book.woff2"    type="font/woff2" crossorigin="anonymous">
  <link rel="preload" as="font" href="/docs.docker.jp.onthefly/fonts/geomanist/hinted-Geomanist-Regular.woff2" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" as="font" href="/docs.docker.jp.onthefly/fonts/glyphicons-halflings-regular.woff2"       type="font/woff2" crossorigin="anonymous">
  <link rel="preload" as="font" href="/docs.docker.jp.onthefly/fonts/fontawesome-webfont.woff2?v=4.7.0"        type="font/woff2" crossorigin="anonymous">

  <link rel="stylesheet" href="/docs.docker.jp.onthefly/css/font-awesome.min.css">
  <link rel="stylesheet" href="/docs.docker.jp.onthefly/css/bootstrap.min.css">
  <link rel="stylesheet" href="/docs.docker.jp.onthefly/css/style.css" id="pagestyle">

  <!-- SEO stuff -->
  <meta name="twitter:title" itemprop="title name" content="ACI integration container features"/>
  <meta name="twitter:description" property="og:description" itemprop="description" content="" />
  <meta name="twitter:card" content="summary"/>
  <meta name="twitter:domain" content="matsuand.github.io"/>
  <meta name="twitter:site" content="@docker_docs"/>
  <meta name="twitter:url" content="https://twitter.com/docker_docs"/>
  <meta name="twitter:image:src" content="/docs.docker.jp.onthefly/images/docs@2x.png"/>
  <meta name="twitter:image:alt" content="Docker ドキュメント"/>
  <meta property="og:title" content="ACI integration container features" />
  <meta property="og:description" content="Reference list of container ACI features" />
  <meta property="og:type" content="website"/>
  <meta property="og:updated_time" itemprop="dateUpdated" content="2021-02-26T13:55:31+09:00"/>
  <meta property="og:image" itemprop="image primaryImageOfPage" content="/docs.docker.jp.onthefly/images/docs@2x.png"/>
  <meta property="og:locale" content="ja_JP" />
  <meta property="og:url" content="https://matsuand.github.io/docs.docker.jp.onthefly/cloud/aci-container-features/" />
  <meta property="og:site_name" content="Docker ドキュメント" />
  <meta property="article:published_time" itemprop="datePublished" content="2021-02-26T13:55:31+09:00"/>
  <script type="application/ld+json">{"@context":"http://schema.org","@type":"WebPage","headline":"ACI integration container features","description":"Reference list of container ACI features","url":"https://docs.docker.com/cloud/aci-container-features/"}</script>
  <!-- END SEO STUFF -->
</head>
<body class="colums">
    <header>
        <nav class="nav-secondary navbar navbar-fixed-top">
    <div class="container-fluid">
        <div class="navbar-header">
            <a href="/docs.docker.jp.onthefly/">
                <img class="logo" src="/docs.docker.jp.onthefly/images/docker-docs-logo.svg" alt="Docker Docs" title="Docker Docs" width="160" height="28" />
            </a>
        </div>
        <div class="navbar-collapse" aria-expanded="false" style="height: 1px;">
            <div class="logo-mobile">
    <a href="/docs.docker.jp.onthefly/">
        <img src="/docs.docker.jp.onthefly/images/docker-icon.svg" alt="Docker Docs" title="Docker Docs" width="30" height="30" />
    </a>
</div>
<div class="search-form" id="search-div">
    <form class="search-form form-inline" id="searchForm" action="/docs.docker.jp.onthefly/search/" method="get">
        <label for="st-search-input" class="sr-only">検索</label>
        <input class="search-field form-control ds-input" id="st-search-input" name="q" placeholder="文書内検索" type="search" autocomplete="off" spellcheck="false" dir="auto" style="position: relative; vertical-align: top;">
        <div id="autocompleteResults"></div>
        <!-- <button type="submit" class="search-submit btn btn-default">検索</button> -->
    </form>
</div>
<div class="sidebar-toggle">
    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
    </button>
</div>
<div class="nav-container hidden-sm hidden-xs">
    <div id="tabs">
        <ul class="tabs jsTOCHorizontal"><li><a href="/docs.docker.jp.onthefly/" id="home">ホーム</a></li><li><a href="/docs.docker.jp.onthefly/get-started/overview/" id="guides">ガイド</a></li><li><a href="/docs.docker.jp.onthefly/engine/" id="manuals">製品マニュアル</a></li><li><a href="/docs.docker.jp.onthefly/reference/" id="reference">リファレンス</a></li><li><a href="/docs.docker.jp.onthefly/samples/" id="samples">サンプル</a></li></ul>
    </div>
    <div class="ctrl-right">
        <a href="javascript:void(0)" id="menu-toggle" aria-label="現在ページのメニュートグル"><i class="fa fa-indent" aria-hidden="true"></i></a>
    </div>
</div>

        </div>
    </div>
</nav>

    </header>
    <div class="wrapper right-open">
        <div class="container-fluid">
            <div class="row">
                <div class="col-body">
                    <main class="col-content content">
                        <section class="section"><h1>ACI integration container features</h1><p><em class="reading-time">読む時間の目安: 4 分</em></p><h1 id="azure-container-instances-running-single-containerrs">Azure Container Instances: running single containerrs</h1>

<p>Single containers can be executed on ACI with the <code class="language-plaintext highlighter-rouge">docker run</code> command.
A single container is executed in its own ACI container group, that will container only one container.</p>

<p>Containers can be listed with the <code class="language-plaintext highlighter-rouge">docker ps</code> command, and stopped and removed with <code class="language-plaintext highlighter-rouge">docker stop &lt;CONTAINER&gt;</code> and <code class="language-plaintext highlighter-rouge">docker rm &lt;CONTAINER&gt;</code>.</p>

<h1 id="docker-run-options-for-aci-containers">Docker run options for ACI containers</h1>

<p>The table below lists supported <code class="language-plaintext highlighter-rouge">docker run</code> flags and their ACI counterparts.</p>

<p><strong>Legend:</strong></p>

<ul>
  <li><strong>✓:</strong> Implemented</li>
  <li><strong>n:</strong> Not yet implemented</li>
  <li><strong>x:</strong> Not applicable / no available conversion</li>
</ul>

<table>
  <thead>
    <tr>
      <th>Flag</th>
      <th>Map</th>
      <th>Notes</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>--cpus</td>
      <td>✓</td>
      <td>See <a href="#container-resources">Container Resources</a>.</td>
    </tr>
    <tr>
      <td>-d, --detach</td>
      <td>✓</td>
      <td>Detach from container logs when container starts. By default, the command line stays attached and follow container logs.</td>
    </tr>
    <tr>
      <td>--domainname</td>
      <td>✓</td>
      <td>See <a href="#exposing-ports">Exposing ports</a>.</td>
    </tr>
    <tr>
      <td>--e, --env</td>
      <td>✓</td>
      <td>Sets environment variable.</td>
    </tr>
    <tr>
      <td>--env-file</td>
      <td>✓</td>
      <td>Sets environment variable from and external file.</td>
    </tr>
    <tr>
      <td>--health-cmd</td>
      <td>✓</td>
      <td>Specify healthcheck command. See <a href="#healthchecks">Healthchecks</a>.</td>
    </tr>
    <tr>
      <td>--health-interval</td>
      <td>✓</td>
      <td>Specify healthcheck interval</td>
    </tr>
    <tr>
      <td>--health-retries</td>
      <td>✓</td>
      <td>Specify healthcheck number of retries</td>
    </tr>
    <tr>
      <td>--health-start-period</td>
      <td>✓</td>
      <td>Specify healthcheck initial delay</td>
    </tr>
    <tr>
      <td>--health-timeout</td>
      <td>✓</td>
      <td>Specify healthcheck timeout</td>
    </tr>
    <tr>
      <td>-l, --label</td>
      <td>x</td>
      <td>Unsupported in Docker ACI integration, due to limitations of ACI Tags.</td>
    </tr>
    <tr>
      <td>-m, --memory</td>
      <td>✓</td>
      <td>See <a href="#container-resources">Container Resources</a>.</td>
    </tr>
    <tr>
      <td>--name</td>
      <td>✓</td>
      <td>Provide a name for the container. Name must be unique withing the ACI resource group. a name is generated by default.</td>
    </tr>
    <tr>
      <td>-p, --publish</td>
      <td>✓</td>
      <td>See <a href="#exposing-ports">Exposing ports</a>. Only symetrical port mapping is supported in ACI.</td>
    </tr>
    <tr>
      <td>--restart</td>
      <td>✓</td>
      <td>Restart policy, must be one of: <code class="language-plaintext highlighter-rouge">always</code>, <code class="language-plaintext highlighter-rouge">no</code>, <code class="language-plaintext highlighter-rouge">on-failure</code>.</td>
    </tr>
    <tr>
      <td>--rm</td>
      <td>x</td>
      <td>Not supported as <a href="https://feedback.azure.com/forums/602224-azure-container-instances/suggestions/34066633-support-auto-delete-of-aci-when-container-exits-no">ACI does not support auto-delete containers</a>.</td>
    </tr>
    <tr>
      <td>-v, --volume</td>
      <td>✓</td>
      <td>See <a href="#persistent-volumes">Persistent Volumes</a>.</td>
    </tr>
  </tbody>
</table>

<h2 id="exposing-ports">Exposing ports</h2>

<p>You can expose one or more ports of a container with <code class="language-plaintext highlighter-rouge">docker run -p &lt;PORT&gt;:&lt;PORT&gt;</code>
If ports are exposed when running a container, the corresponding ACI container group will be exposed with a public IP allocated and the required port(s) accessible.</p>
<blockquote>
  <p>Note: <a href="https://feedback.azure.com/forums/602224-azure-container-instances/suggestions/34082284-support-for-port-mapping">ACI does not support port mapping</a>, so the same port number must be specified when using <code class="language-plaintext highlighter-rouge">-p &lt;PORT&gt;:&lt;PORT&gt;</code>.</p>
</blockquote>

<p>When exposing ports, a container can also specify the service <code class="language-plaintext highlighter-rouge">--domainname</code> flag to set a DNS hostname. <code class="language-plaintext highlighter-rouge">domainname</code> will be used to specify the ACI DNS Label Name, and the ACI container group will be reachable at <code class="language-plaintext highlighter-rouge">&lt;DOMAINNANE&gt;.&lt;REGION&gt;.azurecontainer.io</code>.
<code class="language-plaintext highlighter-rouge">domainname</code> must be unique globally in   <REGION>.azurecontainer.io</REGION>
</p>

<h2 id="persistent-volumes">Persistent volumes</h2>

<p>Docker volumes are mapped to Azure File shares, each file share is part of an Azure Storage Account.
One or more volumes can be specified with <code class="language-plaintext highlighter-rouge">docker run -v &lt;STORAGE-ACCOUNT&gt;/&lt;FILESHARE&gt;:&lt;TARGET-PATH&gt;</code>.</p>

<p>A run command can use the <code class="language-plaintext highlighter-rouge">--volume</code> or <code class="language-plaintext highlighter-rouge">-v</code> flag several times for different volumes. The volumes can use the same or different storage accounts. The target paths for different volume mounts must be different and not overlap.
There is no support for mounting a single file, or mounting a subfolder from an Azure File Share.</p>

<p>Credentials for storage accounts will be automatically fetched at deployment time using the Azure login to retrieve the storage account key for each storage account used.</p>

<h2 id="container-resources">Container Resources</h2>

<p>CPU and memory reservations can be set when running containers with <code class="language-plaintext highlighter-rouge">docker run --cpus 1.5 --memory 2G</code>.</p>

<p>It is not possible to set resource limits that differ from resource reservation on single containers.
ACI allows setting resource limits for containers in a container group but these limits must stay within the reserved resources for the entire group. In the case of a single container deployed in a container group, the resource limits must be equal to the resource reservation.</p>

<h2 id="logs">Logs</h2>

<p>You can view container logs with the command <code class="language-plaintext highlighter-rouge">docker logs &lt;CONTAINER-ID&gt;</code>.</p>

<p>You can follow logs with the <code class="language-plaintext highlighter-rouge">--follow</code> (<code class="language-plaintext highlighter-rouge">-f</code>) option.
When running a container with <code class="language-plaintext highlighter-rouge">docker run</code>, by default the command line stays attached to container logs when the container starts. Use <code class="language-plaintext highlighter-rouge">docker run --detach</code> to not follow logs once the container starts.</p>
<blockquote>
  <p>Note: Following ACI logs may have display issues especially when resizing a terminal that is following container logs. This is due to ACI providing raw log pulling but no streaming of logs. Logs are effectively pulled every 2 seconds when following logs.</p>
</blockquote>

<h2 id="healthchecks">Healthchecks</h2>

<p>A health check can be described using the flags prefixed by <code class="language-plaintext highlighter-rouge">--health-</code>. This is translated into <code class="language-plaintext highlighter-rouge">LivenessProbe</code> for ACI. If the health check fails then the container is considered unhealthy and terminated.
In order for the container to be restarted automatically, the container needs to be run with a restart policy (set by the <code class="language-plaintext highlighter-rouge">--restart</code> flag) other than <code class="language-plaintext highlighter-rouge">no</code>. Note that the default restart policy if one isn’t set is <code class="language-plaintext highlighter-rouge">no</code>.</p>

<p>In order to restart automatically, the container also need to have a restart policy set with <code class="language-plaintext highlighter-rouge">--restart</code> (<code class="language-plaintext highlighter-rouge">docker run</code> defaults to no restart policy)</p>
<span class="glyphicon glyphicon-tags" style="padding-right: 10px"></span><span style="vertical-align: 2px"><a href="/docs.docker.jp.onthefly/search/?q=Docker">Docker</a>, <a href="/docs.docker.jp.onthefly/search/?q=Azure">Azure</a>, <a href="/docs.docker.jp.onthefly/search/?q=Integration">Integration</a>, <a href="/docs.docker.jp.onthefly/search/?q=ACI">ACI</a>, <a href="/docs.docker.jp.onthefly/search/?q=container">container</a>, <a href="/docs.docker.jp.onthefly/search/?q=cli">cli</a>, <a href="/docs.docker.jp.onthefly/search/?q=deploy">deploy</a>, <a href="/docs.docker.jp.onthefly/search/?q=cloud">cloud</a></span><div class="ratings-div"><div id="pd_rating_holder_8453675"></div></div></section>
                    </main>
                    <nav class="col-nav">
                        <div id="sidebar-nav" class="sidebar hidden-sm hidden-xs">
                            <div id="navbar" class="nav-sidebar">
                                <ul class="nav jsTOCHorizontal hidden-md hidden-lg"></ul>
                                <ul class="nav" id="jsTOCLeftNav"></ul>
                            </div>
                        </div>
                    </nav>
                    <div class="col-toc">
                        <div class="sidebar hidden-xs hidden-sm">
                            <div class="toc-nav">
                                <div class="feedback-links">
                                    <ul><li><a href="https://github.com/matsuand/docs.docker.jp.onthefly/edit/master/src/cloud/aci-container-features.ch"><i class="fa fa-pencil-square-o" aria-hidden="true"></i> 本ページの編集</a></li><li><a href="https://github.com/matsuand/docs.docker.jp.onthefly/issues/new?body=File: [cloud/aci-container-features.ch](https://matsuand.github.io/docs.docker.jp.onthefly/cloud/aci-container-features/)" class="nomunge"><i class="fa fa-check" aria-hidden="true"></i> 変更リクエスト</a></li>
                                        <li><div class="toggle-mode">
  <div class="icon">
      <i class="fa fa-sun-o" aria-hidden="true"></i>
  </div>
  <div class="toggle-switch">
      <label class="switch">
          <input type="checkbox" id="switch-style">
          <span class="slider round"></span>
      </label>
  </div>
  <div class="icon">
      <i class="fa fa-moon-o" aria-hidden="true"></i>
  </div>
</div>
</li>
                                    </ul>
                                </div><div id="side-toc-title">本ページ内:</div>
<ul id="my_toc" class="inline_toc">
  <li><a href="#exposing-ports" class="nomunge">Exposing ports</a></li>
  <li><a href="#persistent-volumes" class="nomunge">Persistent volumes</a></li>
  <li><a href="#container-resources" class="nomunge">Container Resources</a></li>
  <li><a href="#logs" class="nomunge">Logs</a></li>
  <li><a href="#healthchecks" class="nomunge">Healthchecks</a></li>
</ul>

</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <footer class="footer">
          
    <div class="container">
        <div class="top_footer">
            <div class="row">
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/why-docker">なぜ Docker なのか？</a></b></li>
                        <li><a href="https://www.docker.com/what-container">コンテナーって何？</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/products/overview">製品</a></b></li>
                        <li><a href="https://www.docker.com/products/docker-desktop">Docker Desktop</a></li>
                        <li><a href="https://www.docker.com/products/docker-hub">Docker Hub</a></li>
                        <li><a href="https://www.docker.com/roadmap">Docker 製品ロードマップ</a></li>
                        <li><b><a href="https://www.docker.com/products/docker-desktop">機能</a></b></li>
                        <li><a href="https://www.docker.com/products/container-runtime">コンテナーランタイム</a></li>
                        <li><a href="https://www.docker.com/products/developer-tools">開発ツール</a></li>
                        <li><a href="https://www.docker.com/products/kubernetes">Kubernetes</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/products/docker-desktop">開発者</a></b></li>
                        <li><a href="https://www.docker.com/use-cases">利用例</a></li>
                        <li><a href="https://www.docker.com/play-with-docker">Docker で遊ぶ</a></li>
                        <li><a href="https://www.docker.com/docker-community">コミュニティ</a></li>
                        <li><a href="https://www.docker.com/open-source">オープンソース</a></li>
                        <li><a href="https://www.docker.com/community/docker-captains">Docker キャプテン</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/company" target="_blank" rel="noopener">会社</a></b></li>
                        <li><a href="https://www.docker.com/company">概要</a></li>
                        <li><a href="https://www.docker.com/blog/" target="_blank" rel="noopener">ブログ</a></li>
                        <li><a href="https://www.docker.com/customers">顧客</a></li>
                        <li><a href="https://www.docker.com/partners">パートナー</a></li>
                        <li><a href="https://www.docker.com/company/newsroom">ニュースルーム</a></li>
                        <li><a href="https://www.docker.com/careers">採用情報</a></li>
                        <li><a href="https://www.docker.com/company/contact">連絡先</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-nav">
                <nav class="footer_sub_nav">
                    <ul class="menu">
                        <li><a href="http://status.docker.com/">ステータス</a></li>
                        <li><a href="https://www.docker.com/docker-security">セキュリティ</a></li>
                        <li><a href="https://www.docker.com/legal">法的情報</a></li>
                        <li><a href="https://www.docker.com/company/contact">連絡</a></li>
                    </ul>
                </nav>
            </div>
        </div>
        <div class="bottom_footer">
            <div class="footer-copyright col-xs-12 col-md-8">
                <p class="copyright">
                    Copyright &copy; 2013-2021 Docker Inc. All rights reserved. </p>
            </div>
            <div class="footer_social_nav">
                <ul class="nav-social">
                    <li class="fa fa-twitter"><a href="http://twitter.com/docker">Twitter</a></li>
                    <li class="fa fa-youtube"><a href="http://www.youtube.com/user/dockerrun">Youtube</a></li>
                    <li class="fa fa-github"><a href="https://github.com/docker">GitHub</a></li>
                    <li class="fa fa-linkedin"><a href="https://www.linkedin.com/company/docker">Linkedin</a></li>
                    <li class="fa fa-facebook"><a href="https://www.facebook.com/docker.run">Facebook</a></li>
                    <li class="fa fa-slideshare"><a href="https://www.slideshare.net/docker">Slideshare</a></li>
                    <li class="fa fa-reddit"><a href="https://www.reddit.com/r/docker">Reddit</a></li>
                </ul>
            </div>
        </div>
    </div>

    </footer>
    <script>const pageURL = "/cloud/aci-container-features/";</script></body>
</html>
