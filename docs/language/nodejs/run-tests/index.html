<!-- Page generated 2021-01-20 16:43:13 +0900-->
<!DOCTYPE html>
<html lang="ja"><head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Run your Tests using Node.js and Mocha frameworks | Docker ドキュメント</title>
  <meta name="description" content="How to Build and Run your Tests using Node.js and Mocha frameworks" />
  <meta name="keywords" content="Node.js, build, Mocha, test">
  <link rel="canonical" href="https://localhost:4000{{ site.baseurl }}/language/nodejs/run-tests/" />

  <!-- favicon -->
  <link rel="icon" type="image/x-icon" href="/docs.docker.jp.onthefly/favicons/docs@2x.ico" sizes="129x128">
  <link rel="apple-touch-icon" type="image/x-icon" href="/docs.docker.jp.onthefly/favicons/docs@2x.ico" sizes="129x128">
  <meta name="msapplication-TileImage" content="/docs.docker.jp.onthefly/favicons/docs@2x.ico">
  <meta property="og:image" content="/docs.docker.jp.onthefly/favicons/docs@2x.ico"/>
  <meta name="theme-color" content="#2496ed" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0"><script defer src="/docs.docker.jp.onthefly/js/theme-switcher.js"></script>
  <script defer src="/docs.docker.jp.onthefly/js/anchorlinks.js"></script>
  <script defer src="/docs.docker.jp.onthefly/js/jquery.js"></script>
  <script defer src="/docs.docker.jp.onthefly/js/bootstrap.min.js"></script>
  <script defer src="/docs.docker.jp.onthefly/js/docs.js"></script><script defer src="/docs.docker.jp.onthefly/js/search.js"></script><link rel="preload" as="font" href="https://fonts.gstatic.com/s/opensans/v18/mem8YaGs126MiZpBA-UFVZ0bf8pkAg.woff2" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" as="font" href="/docs.docker.jp.onthefly/fonts/geomanist/hinted-Geomanist-Book.woff2"    type="font/woff2" crossorigin="anonymous">
  <link rel="preload" as="font" href="/docs.docker.jp.onthefly/fonts/geomanist/hinted-Geomanist-Regular.woff2" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" as="font" href="/docs.docker.jp.onthefly/fonts/glyphicons-halflings-regular.woff2"       type="font/woff2" crossorigin="anonymous">
  <link rel="preload" as="font" href="/docs.docker.jp.onthefly/fonts/fontawesome-webfont.woff2?v=4.7.0"        type="font/woff2" crossorigin="anonymous">

  <link rel="stylesheet" href="/docs.docker.jp.onthefly/css/font-awesome.min.css">
  <link rel="stylesheet" href="/docs.docker.jp.onthefly/css/bootstrap.min.css">
  <link rel="stylesheet" href="/docs.docker.jp.onthefly/css/style.css" id="pagestyle">

  <!-- SEO stuff -->
  <meta name="twitter:title" itemprop="title name" content="Run your Tests using Node.js and Mocha frameworks"/>
  <meta name="twitter:description" property="og:description" itemprop="description" content="" />
  <meta name="twitter:card" content="summary"/>
  <meta name="twitter:domain" content="matsuand.github.io"/>
  <meta name="twitter:site" content="@docker_docs"/>
  <meta name="twitter:url" content="https://twitter.com/docker_docs"/>
  <meta name="twitter:image:src" content="/docs.docker.jp.onthefly/images/docs@2x.png"/>
  <meta name="twitter:image:alt" content="Docker ドキュメント"/>
  <meta property="og:title" content="Run your Tests using Node.js and Mocha frameworks" />
  <meta property="og:description" content="How to Build and Run your Tests using Node.js and Mocha frameworks" />
  <meta property="og:type" content="website"/>
  <meta property="og:updated_time" itemprop="dateUpdated" content="2021-01-20T16:43:13+09:00"/>
  <meta property="og:image" itemprop="image primaryImageOfPage" content="/docs.docker.jp.onthefly/images/docs@2x.png"/>
  <meta property="og:locale" content="ja_JP" />
  <meta property="og:url" content="https://matsuand.github.io/docs.docker.jp.onthefly/language/nodejs/run-tests/" />
  <meta property="og:site_name" content="Docker ドキュメント" />
  <meta property="article:published_time" itemprop="datePublished" content="2021-01-20T16:43:13+09:00"/>
  <script type="application/ld+json">{"@context":"http://schema.org","@type":"WebPage","headline":"Run your Tests using Node.js and Mocha frameworks","description":"How to Build and Run your Tests using Node.js and Mocha frameworks","url":"https://docs.docker.com/language/nodejs/run-tests/"}</script>
  <!-- END SEO STUFF -->
</head>
<body class="colums">
    <header>
        <nav class="nav-secondary navbar navbar-fixed-top">
    <div class="container-fluid">
        <div class="navbar-header">
            <a href="/docs.docker.jp.onthefly/">
                <img class="logo" src="/docs.docker.jp.onthefly/images/docker-docs-logo.svg" alt="Docker Docs" title="Docker Docs" width="160" height="28" />
            </a>
        </div>
        <div class="navbar-collapse" aria-expanded="false" style="height: 1px;">
            <div class="logo-mobile">
    <a href="/docs.docker.jp.onthefly/">
        <img src="/docs.docker.jp.onthefly/images/docker-icon.svg" alt="Docker Docs" title="Docker Docs" width="30" height="30" />
    </a>
</div>
<div class="search-form" id="search-div">
    <form class="search-form form-inline" id="searchForm" action="/docs.docker.jp.onthefly/search/" method="get">
        <label for="st-search-input" class="sr-only">検索</label>
        <input class="search-field form-control ds-input" id="st-search-input" name="q" placeholder="文書内検索" type="search" autocomplete="off" spellcheck="false" dir="auto" style="position: relative; vertical-align: top;">
        <div id="autocompleteResults"></div>
        <!-- <button type="submit" class="search-submit btn btn-default">検索</button> -->
    </form>
</div>
<div class="sidebar-toggle">
    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
    </button>
</div>
<div class="nav-container hidden-sm hidden-xs">
    <div id="tabs">
        <ul class="tabs jsTOCHorizontal"><li><a href="/docs.docker.jp.onthefly/" id="home">ホーム</a></li><li><a href="/docs.docker.jp.onthefly/get-started/overview/" id="guides">ガイド</a></li><li><a href="/docs.docker.jp.onthefly/engine/" id="manuals">製品マニュアル</a></li><li><a href="/docs.docker.jp.onthefly/reference/" id="reference">リファレンス</a></li><li><a href="/docs.docker.jp.onthefly/samples/" id="samples">サンプル</a></li></ul>
    </div>
    <div class="ctrl-right">
        <a href="javascript:void(0)" id="menu-toggle" aria-label="現在ページのメニュートグル"><i class="fa fa-indent" aria-hidden="true"></i></a>
    </div>
</div>

        </div>
    </div>
</nav>

    </header>
    <div class="wrapper right-open">
        <div class="container-fluid">
            <div class="row">
                <div class="col-body">
                    <main class="col-content content">
                        <section class="section"><h1>Run your Tests using Node.js and Mocha frameworks</h1><p><em class="reading-time">読む時間の目安: 9 分</em></p><ul class="pagination">
  <li><a href="/language/nodejs/build-images/">Build images</a></li>
  <li><a href="/language/nodejs/run-containers/">Run your image as a container</a></li>
  <li><a href="/language/nodejs/develop/">Use containers for development</a></li>
  <li class="active"><a href="/language/nodejs/run-tests/">Run your tests</a></li>
  <li><a href="/language/nodejs/configure-ci-cd/">Configure CI/CD</a></li>
  <li><a href="/language/nodejs/deploy/">Deploy your app</a></li>
</ul>

<p>Testing is an essential part of modern software development. Testing can mean a lot of things to different development teams. There are unit tests, integration tests and end-to-end testing. In this guide we take a look at running your unit tests in Docker. Let’s assume we have defined Mocha tests in a <code class="language-plaintext highlighter-rouge">./test</code> folder within our application.</p>

<h3 id="running-locally-and-testing-the-application">Running locally and testing the application</h3>

<p>Now that we have our sample application locally, let’s build our Docker image and make sure everything is running properly. Run the following commands to build and then run your Docker image in a container.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker build <span class="nt">-t</span> node-docker <span class="nb">.</span>
<span class="nv">$ </span>docker run <span class="nt">-it</span> <span class="nt">--rm</span> <span class="nt">--name</span> app <span class="nt">-p</span> 8080:80 node-docker
</code></pre></div></div>

<p>Now let’s test our application by POSTing a JSON payload and then make an HTTP GET request to make sure our JSON was saved correctly.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>curl <span class="nt">--request</span> POST <span class="se">\</span>
  <span class="nt">--url</span> http://localhost:8080/services/test <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
	"msg": "testing"
}'</span>
</code></pre></div></div>

<p>Now, perform a GET request to the same endpoint to make sure our JSON payload was saved and retrieved correctly. The “id” and “createDate” will be different for you.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>curl http://localhost:8080/services/test

<span class="o">{</span><span class="s2">"code"</span>:<span class="s2">"success"</span>,<span class="s2">"payload"</span>:[<span class="o">{</span><span class="s2">"msg"</span>:<span class="s2">"testing"</span>,<span class="s2">"id"</span>:<span class="s2">"e88acedb-203d-4a7d-8269-1df6c1377512"</span>,<span class="s2">"createDate"</span>:<span class="s2">"2020-10-11T23:21:16.378Z"</span><span class="o">}]}</span>
</code></pre></div></div>

<h2 id="install-mocha">Install Mocha</h2>

<p>Run the following command to install Mocha and add it to the developer dependencies:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>npm <span class="nb">install</span> <span class="nt">--save-dev</span> mocha
</code></pre></div></div>

<h2 id="refactor-dockerfile-to-run-tests">Refactor Dockerfile to run tests</h2>

<p>Okay, now that we know our application is running properly, let’s try and run our tests inside of the container. We’ll use the same docker run command we used above but this time, we’ll override the CMD that is inside of our container with npm run test. This will invoke the command that is in the package.json file under the “script” section. See below.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">{</span>
...
  <span class="s2">"scripts"</span>: <span class="o">{</span>
    <span class="s2">"test"</span>: <span class="s2">"mocha ./**/*.js"</span>,
    <span class="s2">"start"</span>: <span class="s2">"nodemon server.js"</span>
  <span class="o">}</span>,
...
<span class="o">}</span>
</code></pre></div></div>

<p>Below is the Docker command to start the container and run tests:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker run <span class="nt">-it</span> <span class="nt">--rm</span> <span class="nt">--name</span> app <span class="nt">-p</span> 8080:80 node-docker npm run <span class="nb">test</span>
<span class="o">&gt;</span> node-docker@0.1.0 <span class="nb">test</span> /code
<span class="o">&gt;</span> mocha ./<span class="k">**</span>/<span class="k">*</span>.js

sh: 1: mocha: not found
</code></pre></div></div>

<p>As you can see, we received an error. This error is telling us that the Mocha executable could not be found. Let’s take a look at the Dockerfile.</p>

<div class="language-dockerfile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">FROM</span><span class="s"> node:14.15.4</span>

<span class="k">WORKDIR</span><span class="s"> /code</span>

<span class="k">COPY</span><span class="s"> package.json package.json</span>
<span class="k">COPY</span><span class="s"> package-lock.json package-lock.json</span>

<span class="k">RUN </span>npm ci <span class="nt">--production</span>
<span class="k">COPY</span><span class="s"> . .</span>

<span class="k">CMD</span><span class="s"> [ "node", "server.js" ]</span>
</code></pre></div></div>

<p>The error is occurring because we are passing the <code class="language-plaintext highlighter-rouge">--production</code> flag to the npm ci command when it installs our dependencies. This tells npm to not install packages that are located under the “devDependencies” section in the package.json file. Therefore, Mocha will not be installed inside the image and will not be found when we try to run it.</p>

<p>Since we want to follow best practices and not include anything inside the container that we do not need to run our application we can’t just remove the <code class="language-plaintext highlighter-rouge">--production</code> flag. We have a couple of options to fix this. One option is to create a second Dockerfile that would only be used to run tests. This has a couple of problems. The primary being keeping two Dockerfiles up-to-date. The second option is to use multi-stage builds. We can create a stage for production and one for testing. This is our preferred solution.</p>

<h3 id="multi-stage-dockerfile-for-testing">Multi-stage Dockerfile for testing</h3>

<p>Below is a multi-stage Dockerfile tha we will use to build our production image and our test image. Add the highlighted lines to your Dockerfile.</p>

<div class="language-dockerfile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">FROM</span><span class="s"> node:14.15.4 as base</span>

<span class="k">WORKDIR</span><span class="s"> /code</span>

<span class="k">COPY</span><span class="s"> package.json package.json</span>
<span class="k">COPY</span><span class="s"> package-lock.json package-lock.json</span>

<span class="k">FROM</span><span class="s"> base as test</span>
<span class="k">RUN </span>npm ci
<span class="k">COPY</span><span class="s"> . .</span>
<span class="k">CMD</span><span class="s"> [ "npm", "run", "test" ]</span>

<span class="k">FROM</span><span class="s"> base as prod</span>
<span class="k">RUN </span>npm ci <span class="nt">--production</span>
<span class="k">COPY</span><span class="s"> . .</span>
<span class="k">CMD</span><span class="s"> [ "node", "server.js" ]</span>
</code></pre></div></div>

<p>We first add a label to the <code class="language-plaintext highlighter-rouge">FROM node:14.15.4</code> statement. This allows us to refer to this build stage in other build stages. Next we add a new build stage labeled test. We will use this stage for running our tests.</p>

<p>Now let’s rebuild our image and run our tests. We will run the same docker build command as above but this time we will add the <code class="language-plaintext highlighter-rouge">--target test</code> flag so that we specifically run the test build stage.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker build <span class="nt">-t</span> node-docker <span class="nt">--target</span> <span class="nb">test</span> <span class="nb">.</span>
<span class="o">[</span>+] Building 0.7s <span class="o">(</span>11/11<span class="o">)</span> FINISHED
...
 <span class="o">=&gt;</span> <span class="o">=&gt;</span> writing image sha256:049b37303e3355f...9b8a954f
 <span class="o">=&gt;</span> <span class="o">=&gt;</span> naming to docker.io/library/node-docker
</code></pre></div></div>

<p>Now that our test image is built, we can run it in a container and see if our tests pass.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker run <span class="nt">-it</span> <span class="nt">--rm</span> <span class="nt">--name</span> app <span class="nt">-p</span> 8080:80 node-docker
<span class="o">&gt;</span> node-docker@0.1.0 <span class="nb">test</span> /code
<span class="o">&gt;</span> mocha ./<span class="k">**</span>/<span class="k">*</span>.js

  Calculator
    adding
      ✓ should <span class="k">return </span>4 when adding 2 + 2
      ✓ should <span class="k">return </span>0 when adding zeros
    subtracting
      ✓ should <span class="k">return </span>4 when subtracting 4 from 8
      ✓ should <span class="k">return </span>0 when subtracting 8 from 8

  4 passing <span class="o">(</span>11ms<span class="o">)</span>
</code></pre></div></div>

<p>I’ve truncated the build output but you can see that the Mocha test runner completed and all our tests passed.</p>

<p>This is great but at the moment we have to run two docker commands to build and run our tests. We can improve this slightly by using a RUN statement instead of the CMD statement in the test stage. The CMD statement is not executed during the building of the image but is executed when you run the image in a container. While with the RUN statement, our tests will be run during the building of the image and stop the build when they fail.</p>

<p>Update your Dockerfile with the highlighted line below.</p>

<div class="language-dockerfile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">FROM</span><span class="s"> node:14.15.4 as base</span>

<span class="k">WORKDIR</span><span class="s"> /code</span>

<span class="k">COPY</span><span class="s"> package.json package.json</span>
<span class="k">COPY</span><span class="s"> package-lock.json package-lock.json</span>

<span class="k">FROM</span><span class="s"> base as test</span>
<span class="k">RUN </span>npm ci
<span class="k">COPY</span><span class="s"> . .</span>
<span class="k">RUN </span>npm run <span class="nb">test</span>

<span class="k">FROM</span><span class="s"> base as prod</span>
<span class="k">RUN </span>npm ci <span class="nt">--production</span>
<span class="k">COPY</span><span class="s"> . .</span>
<span class="k">CMD</span><span class="s"> [ "node", "server.js" ]</span>
</code></pre></div></div>

<p>Now to run our tests, we just need to run the docker build command as above.</p>

<div class="language-dockerfile highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ docker build -t node-docker --target test .
[+] Building 1.2s (13/13) FINISHED
...
 =&gt; CACHED [base 2/4] WORKDIR /code
 =&gt; CACHED [base 3/4] COPY package.json package.json
 =&gt; CACHED [base 4/4] COPY package-lock.json package-lock.json
 =&gt; CACHED [test 1/3] RUN npm ci
 =&gt; CACHED [test 2/3] COPY . .
 =&gt; CACHED [test 3/3] RUN npm run test
 =&gt; exporting to image
 =&gt; =&gt; exporting layers
 =&gt; =&gt; writing image sha256:bcedeeb7d9dd13d...18ca0a05034ed4dd4
</code></pre></div></div>

<p>I’ve truncated the output again for simplicity but you can see that our tests are run and passed. Let’s break one of the tests and observe the output when our tests fail.</p>

<p>Open the util/math.js file and change line 12 to the following.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>11 <span class="k">function </span>subtract<span class="o">(</span> num1, num2 <span class="o">)</span> <span class="o">{</span>
12   <span class="k">return </span>num2 - num1
13 <span class="o">}</span>
</code></pre></div></div>

<p>Now, run the same docker build command from above and observe that the build fails and the failing testing information is printed to the console.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker build <span class="nt">-t</span> node-docker <span class="nt">--target</span> <span class="nb">test</span> <span class="nb">.</span>
 <span class="o">&gt;</span> <span class="o">[</span><span class="nb">test </span>3/3] RUN npm run <span class="nb">test</span>:
<span class="c">#11 0.509</span>
<span class="c">#11 0.509 &gt; node-docker@0.1.0 test /code</span>
<span class="c">#11 0.509 &gt; mocha ./**/*.js</span>
<span class="c">#11 0.509</span>
<span class="c">#11 0.811</span>
<span class="c">#11 0.813</span>
<span class="c">#11 0.815   Calculator</span>
<span class="c">#11 0.815     adding</span>
<span class="c">#11 0.817       ✓ should return 4 when adding 2 + 2</span>
<span class="c">#11 0.818       ✓ should return 0 when adding zeros</span>
<span class="c">#11 0.818     subtracting</span>
<span class="c">#11 0.822       1) should return 4 when subtracting 4 from 8</span>
<span class="c">#11 0.823       ✓ should return 0 when subtracting 8 from 8</span>
<span class="c">#11 0.823</span>
<span class="c">#11 0.824</span>
<span class="c">#11 0.824   3 passing (14ms)</span>
<span class="c">#11 0.824   1 failing</span>
<span class="c">#11 0.824</span>
<span class="c">#11 0.827   1) Calculator</span>
<span class="c">#11 0.827        subtracting</span>
<span class="c">#11 0.827          should return 4 when subtracting 4 from 8:</span>
<span class="c">#11 0.827</span>
<span class="c">#11 0.827       AssertionError [ERR_ASSERTION]: Expected values to be strictly equal:</span>
<span class="c">#11 0.827</span>
<span class="c">#11 0.827 -4 !== 4</span>
<span class="c">#11 0.827</span>
<span class="c">#11 0.827       + expected - actual</span>
<span class="c">#11 0.827</span>
<span class="c">#11 0.827       --4</span>
<span class="c">#11 0.827       +4</span>
<span class="c">#11 0.827</span>
<span class="c">#11 0.827       at Context.&lt;anonymous&gt; (util/math.test.js:18:14)</span>
<span class="c">#11 0.827       at processImmediate (internal/timers.js:461:21)</span>
...
executor failed running <span class="o">[</span>/bin/sh <span class="nt">-c</span> npm run <span class="nb">test</span><span class="o">]</span>: <span class="nb">exit </span>code: 1
</code></pre></div></div>

<h2 id="next-steps">Next steps</h2>

<p>In this module, we took a look at creating a general development image that we can use pretty much like our normal command line. We also set up our Compose file to map our source code into the running container and exposed the debugging port.</p>

<p>In the next module, we’ll take a look at how to set up a CI/CD pipeline using GitHub Actions. See:</p>

<p><a href="/docs.docker.jp.onthefly/language/nodejs/configure-ci-cd/" class="button outline-btn">Configure CI/CD</a></p>

<h2 id="feedback">Feedback</h2>

<p>Help us improve this topic by providing your feedback. Let us know what you think by creating an issue in the <a href="https://github.com/docker/docker.github.io/issues/new?title=[Node.js%20docs%20feedback]" target="_blank" rel="noopener" class="_">Docker Docs </a> GitHub repository. Alternatively, <a href="https://github.com/docker/docker.github.io/pulls" target="_blank" rel="noopener" class="_">create a PR</a> to suggest updates.</p>

<p><br /></p>
<span class="glyphicon glyphicon-tags" style="padding-right: 10px"></span><span style="vertical-align: 2px"><a href="/docs.docker.jp.onthefly/search/?q=Node.js">Node.js</a>, <a href="/docs.docker.jp.onthefly/search/?q=build">build</a>, <a href="/docs.docker.jp.onthefly/search/?q=Mocha">Mocha</a>, <a href="/docs.docker.jp.onthefly/search/?q=test">test</a></span><div class="ratings-div"><div id="pd_rating_holder_8453675"></div></div></section>
                    </main>
                    <nav class="col-nav">
                        <div id="sidebar-nav" class="sidebar hidden-sm hidden-xs">
                            <div id="navbar" class="nav-sidebar">
                                <ul class="nav jsTOCHorizontal hidden-md hidden-lg"></ul>
                                <ul class="nav" id="jsTOCLeftNav"></ul>
                            </div>
                        </div>
                    </nav>
                    <div class="col-toc">
                        <div class="sidebar hidden-xs hidden-sm">
                            <div class="toc-nav">
                                <div class="feedback-links">
                                    <ul><li><a href="https://github.com/matsuand/docs.docker.jp.onthefly/edit/master/src/language/nodejs/run-tests.ch"><i class="fa fa-pencil-square-o" aria-hidden="true"></i> 本ページの編集</a></li><li><a href="https://github.com/matsuand/docs.docker.jp.onthefly/issues/new?body=File: [language/nodejs/run-tests.ch](https://matsuand.github.io/docs.docker.jp.onthefly/language/nodejs/run-tests/)" class="nomunge"><i class="fa fa-check" aria-hidden="true"></i> 変更リクエスト</a></li>
                                        <li><div class="toggle-mode">
  <div class="icon">
      <i class="fa fa-sun-o" aria-hidden="true"></i>
  </div>
  <div class="toggle-switch">
      <label class="switch">
          <input type="checkbox" id="switch-style">
          <span class="slider round"></span>
      </label>
  </div>
  <div class="icon">
      <i class="fa fa-moon-o" aria-hidden="true"></i>
  </div>
</div>
</li>
                                    </ul>
                                </div><div id="side-toc-title">本ページ内:</div>
<ul id="my_toc" class="inline_toc">
  <li><a href="#running-locally-and-testing-the-application" class="nomunge">Running locally and testing the application</a></li>
  <li><a href="#install-mocha" class="nomunge">Install Mocha</a></li>
  <li><a href="#refactor-dockerfile-to-run-tests" class="nomunge">Refactor Dockerfile to run tests</a>
    <ul>
      <li><a href="#multi-stage-dockerfile-for-testing" class="nomunge">Multi-stage Dockerfile for testing</a></li>
    </ul>
  </li>
  <li><a href="#next-steps" class="nomunge">Next steps</a></li>
  <li><a href="#feedback" class="nomunge">Feedback</a></li>
</ul>

</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <footer class="footer">
          
    <div class="container">
        <div class="top_footer">
            <div class="row">
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/why-docker">なぜ Docker なのか？</a></b></li>
                        <li><a href="https://www.docker.com/what-container">コンテナーって何？</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/products/overview">製品</a></b></li>
                        <li><a href="https://www.docker.com/products/docker-desktop">Docker Desktop</a></li>
                        <li><a href="https://www.docker.com/products/docker-hub">Docker Hub</a></li>
                        <li><b><a href="https://www.docker.com/products/docker-desktop">機能</a></b></li>
                        <li><a href="https://www.docker.com/products/container-runtime">コンテナーランタイム</a></li>
                        <li><a href="https://www.docker.com/products/developer-tools">開発ツール</a></li>
                        <li><a href="https://www.docker.com/products/kubernetes">Kubernetes</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/products/docker-desktop">開発者</a></b></li>
                        <li><a href="https://www.docker.com/use-cases">利用例</a></li>
                        <li><a href="https://www.docker.com/play-with-docker">Docker で遊ぶ</a></li>
                        <li><a href="https://www.docker.com/docker-community">コミュニティ</a></li>
                        <li><a href="https://www.docker.com/open-source">オープンソース</a></li>
                        <li><a href="https://www.docker.com/community/docker-captains">Docker キャプテン</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/company" target="_blank" rel="noopener">会社</a></b></li>
                        <li><a href="https://www.docker.com/company">概要</a></li>
                        <li><a href="https://www.docker.com/blog/" target="_blank" rel="noopener">ブログ</a></li>
                        <li><a href="https://www.docker.com/customers">顧客</a></li>
                        <li><a href="https://www.docker.com/partners">パートナー</a></li>
                        <li><a href="https://www.docker.com/company/newsroom">ニュースルーム</a></li>
                        <li><a href="https://www.docker.com/careers">採用情報</a></li>
                        <li><a href="https://www.docker.com/company/contact">連絡先</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-nav">
                <nav class="footer_sub_nav">
                    <ul class="menu">
                        <li><a href="http://status.docker.com/">ステータス</a></li>
                        <li><a href="https://www.docker.com/docker-security">セキュリティ</a></li>
                        <li><a href="https://www.docker.com/legal">法的情報</a></li>
                        <li><a href="https://www.docker.com/company/contact">連絡</a></li>
                    </ul>
                </nav>
            </div>
        </div>
        <div class="bottom_footer">
            <div class="footer-copyright col-xs-12 col-md-8">
                <p class="copyright">
                    Copyright &copy; 2013-2020 Docker Inc. All rights reserved. </p>
            </div>
            <div class="footer_social_nav">
                <ul class="nav-social">
                    <li class="fa fa-twitter"><a href="http://twitter.com/docker">Twitter</a></li>
                    <li class="fa fa-youtube"><a href="http://www.youtube.com/user/dockerrun">Youtube</a></li>
                    <li class="fa fa-github"><a href="https://github.com/docker">GitHub</a></li>
                    <li class="fa fa-linkedin"><a href="https://www.linkedin.com/company/docker">Linkedin</a></li>
                    <li class="fa fa-facebook"><a href="https://www.facebook.com/docker.run">Facebook</a></li>
                    <li class="fa fa-slideshare"><a href="https://www.slideshare.net/docker">Slideshare</a></li>
                    <li class="fa fa-reddit"><a href="https://www.reddit.com/r/docker">Reddit</a></li>
                </ul>
            </div>
        </div>
    </div>

    </footer>
    <script>const pageURL = "/language/nodejs/run-tests/";</script></body>
</html>
