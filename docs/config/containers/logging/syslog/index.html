<p>The <code class="language-plaintext highlighter-rouge">syslog</code> logging driver routes logs to a <code class="language-plaintext highlighter-rouge">syslog</code> server. The <code class="language-plaintext highlighter-rouge">syslog</code> protocol uses
a raw string as the log message and supports a limited set of metadata. The syslog
message must be formatted in a specific way to be valid. From a valid message, the
receiver can extract the following information:</p>

<ul>
  <li><strong>priority</strong>: the logging level, such as <code class="language-plaintext highlighter-rouge">debug</code>, <code class="language-plaintext highlighter-rouge">warning</code>, <code class="language-plaintext highlighter-rouge">error</code>, <code class="language-plaintext highlighter-rouge">info</code>.</li>
  <li><strong>timestamp</strong>: when the event occurred.</li>
  <li><strong>hostname</strong>: where the event happened.</li>
  <li><strong>facility</strong>: which subsystem logged the message, such as <code class="language-plaintext highlighter-rouge">mail</code> or <code class="language-plaintext highlighter-rouge">kernel</code>.</li>
  <li><strong>process name</strong> and <strong>process ID (PID)</strong>: The name and ID of the process that generated the log.</li>
</ul>

<p>The format is defined in <a href="https://tools.ietf.org/html/rfc5424">RFC 5424</a> and Dockerâ€™s syslog driver implements the
<a href="https://tools.ietf.org/html/rfc5424#section-6">ABNF reference</a> in the following way:</p>

<pre><code class="language-none">                TIMESTAMP SP HOSTNAME SP APP-NAME SP PROCID SP MSGID
                    +          +             +           |        +
                    |          |             |           |        |
                    |          |             |           |        |
       +------------+          +----+        |           +----+   +---------+
       v                            v        v                v             v
2017-04-01T17:41:05.616647+08:00 a.vm {taskid:aa,version:} 1787791 {taskid:aa,version:}
</code></pre>

<h2 id="usage">Usage</h2>

<p>To use the <code class="language-plaintext highlighter-rouge">syslog</code> driver as the default logging driver, set the <code class="language-plaintext highlighter-rouge">log-driver</code>
and <code class="language-plaintext highlighter-rouge">log-opt</code> keys to appropriate values in the <code class="language-plaintext highlighter-rouge">daemon.json</code> file, which is
located in <code class="language-plaintext highlighter-rouge">/etc/docker/</code> on Linux hosts or
<code class="language-plaintext highlighter-rouge">C:\ProgramData\docker\config\daemon.json</code> on Windows Server. For more about
configuring Docker using <code class="language-plaintext highlighter-rouge">daemon.json</code>, see
<a href="/docs.docker.jp.onthefly/engine/reference/commandline/dockerd/#daemon-configuration-file">daemon.json</a>.</p>

<p>The following example sets the log driver to <code class="language-plaintext highlighter-rouge">syslog</code> and sets the
<code class="language-plaintext highlighter-rouge">syslog-address</code> option. The <code class="language-plaintext highlighter-rouge">syslog-address</code> options supports both UDP and TCP;
this example uses UDP.</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"log-driver"</span><span class="p">:</span><span class="w"> </span><span class="s2">"syslog"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"log-opts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"syslog-address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"udp://1.2.3.4:1111"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>Restart Docker for the changes to take effect.</p>

<blockquote>
  <p><strong>Note</strong></p>

  <p><code class="language-plaintext highlighter-rouge">log-opts</code> configuration options in the <code class="language-plaintext highlighter-rouge">daemon.json</code> configuration file must
be provided as strings. Numeric and boolean values (such as the value for
<code class="language-plaintext highlighter-rouge">syslog-tls-skip-verify</code>) must therefore be enclosed in quotes (<code class="language-plaintext highlighter-rouge">"</code>).</p>
</blockquote>

<p>You can set the logging driver for a specific container by using the
<code class="language-plaintext highlighter-rouge">--log-driver</code> flag to <code class="language-plaintext highlighter-rouge">docker container create</code> or <code class="language-plaintext highlighter-rouge">docker run</code>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run <span class="se">\</span>
      <span class="nt">--log-driver</span> syslog <span class="nt">--log-opt</span> syslog-address<span class="o">=</span>udp://1.2.3.4:1111 <span class="se">\</span>
      alpine <span class="nb">echo </span>hello world
</code></pre></div></div>

<h2 id="options">Options</h2>

<p>The following logging options are supported as options for the <code class="language-plaintext highlighter-rouge">syslog</code> logging
driver. They can be set as defaults in the <code class="language-plaintext highlighter-rouge">daemon.json</code>, by adding them as
key-value pairs to the <code class="language-plaintext highlighter-rouge">log-opts</code> JSON array. They can also be set on a given
container by adding a <code class="language-plaintext highlighter-rouge">--log-opt &lt;key&gt;=&lt;value&gt;</code> flag for each option when
starting the container.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Option</th>
      <th style="text-align: left">Description</th>
      <th style="text-align: left">Example value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">syslog-address</code></td>
      <td style="text-align: left">The address of an external <code class="language-plaintext highlighter-rouge">syslog</code> server. The URI specifier may be <code class="language-plaintext highlighter-rouge">[tcp|udp|tcp+tls]://host:port</code>, <code class="language-plaintext highlighter-rouge">unix://path</code>, or <code class="language-plaintext highlighter-rouge">unixgram://path</code>. If the transport is <code class="language-plaintext highlighter-rouge">tcp</code>, <code class="language-plaintext highlighter-rouge">udp</code>, or <code class="language-plaintext highlighter-rouge">tcp+tls</code>, the default port is <code class="language-plaintext highlighter-rouge">514</code>.</td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">--log-opt syslog-address=tcp+tls://192.168.1.3:514</code>, <code class="language-plaintext highlighter-rouge">--log-opt syslog-address=unix:///tmp/syslog.sock</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">syslog-facility</code></td>
      <td style="text-align: left">The <code class="language-plaintext highlighter-rouge">syslog</code> facility to use. Can be the number or name for any valid <code class="language-plaintext highlighter-rouge">syslog</code> facility. See the <a href="https://tools.ietf.org/html/rfc5424#section-6.2.1">syslog documentation</a>.</td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">--log-opt syslog-facility=daemon</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">syslog-tls-ca-cert</code></td>
      <td style="text-align: left">The absolute path to the trust certificates signed by the CA. <strong>Ignored if the address protocol is not <code class="language-plaintext highlighter-rouge">tcp+tls</code>.</strong></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">--log-opt syslog-tls-ca-cert=/etc/ca-certificates/custom/ca.pem</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">syslog-tls-cert</code></td>
      <td style="text-align: left">The absolute path to the TLS certificate file. <strong>Ignored if the address protocol is not <code class="language-plaintext highlighter-rouge">tcp+tls</code></strong>.</td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">--log-opt syslog-tls-cert=/etc/ca-certificates/custom/cert.pem</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">syslog-tls-key</code></td>
      <td style="text-align: left">The absolute path to the TLS key file. <strong>Ignored if the address protocol is not <code class="language-plaintext highlighter-rouge">tcp+tls</code>.</strong></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">--log-opt syslog-tls-key=/etc/ca-certificates/custom/key.pem</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">syslog-tls-skip-verify</code></td>
      <td style="text-align: left">If set to <code class="language-plaintext highlighter-rouge">true</code>, TLS verification is skipped when connecting to the <code class="language-plaintext highlighter-rouge">syslog</code> daemon. Defaults to <code class="language-plaintext highlighter-rouge">false</code>. <strong>Ignored if the address protocol is not <code class="language-plaintext highlighter-rouge">tcp+tls</code>.</strong></td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">--log-opt syslog-tls-skip-verify=true</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">tag</code></td>
      <td style="text-align: left">A string that is appended to the <code class="language-plaintext highlighter-rouge">APP-NAME</code> in the <code class="language-plaintext highlighter-rouge">syslog</code> message. By default, Docker uses the first 12 characters of the container ID to tag log messages. Refer to the <a href="/docs.docker.jp.onthefly/config/containers/logging/log_tags/">log tag option documentation</a> for customizing the log tag format.</td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">--log-opt tag=mailer</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">syslog-format</code></td>
      <td style="text-align: left">The <code class="language-plaintext highlighter-rouge">syslog</code> message format to use. If not specified the local UNIX syslog format is used, without a specified hostname. Specify <code class="language-plaintext highlighter-rouge">rfc3164</code> for the RFC-3164 compatible format, <code class="language-plaintext highlighter-rouge">rfc5424</code> for RFC-5424 compatible format, or <code class="language-plaintext highlighter-rouge">rfc5424micro</code> for RFC-5424 compatible format with microsecond timestamp resolution.</td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">--log-opt syslog-format=rfc5424micro</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">labels</code></td>
      <td style="text-align: left">Applies when starting the Docker daemon. A comma-separated list of logging-related labels this daemon accepts. Used for advanced <a href="/docs.docker.jp.onthefly/config/containers/logging/log_tags/">log tag options</a>.</td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">--log-opt labels=production_status,geo</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">env</code></td>
      <td style="text-align: left">Applies when starting the Docker daemon. A comma-separated list of logging-related environment variables this daemon accepts. Used for advanced <a href="/docs.docker.jp.onthefly/config/containers/logging/log_tags/">log tag options</a>.</td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">--log-opt env=os,customer</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">env-regex</code></td>
      <td style="text-align: left">Applies when starting the Docker daemon. Similar to and compatible with <code class="language-plaintext highlighter-rouge">env</code>. A regular expression to match logging-related environment variables. Used for advanced <a href="/docs.docker.jp.onthefly/config/containers/logging/log_tags/">log tag options</a>.</td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">--log-opt env-regex=^(os\|customer)</code></td>
    </tr>
  </tbody>
</table>
