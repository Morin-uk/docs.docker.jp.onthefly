<p>By default, Docker captures the standard output (and standard error) of all your containers,
and writes them in files using the JSON format. The JSON format annotates each line with its
origin (<code class="language-plaintext highlighter-rouge">stdout</code> or <code class="language-plaintext highlighter-rouge">stderr</code>) and its timestamp. Each log file contains information about
only one container.</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="nl">"log"</span><span class="p">:</span><span class="s2">"Log line is here</span><span class="se">\n</span><span class="s2">"</span><span class="p">,</span><span class="nl">"stream"</span><span class="p">:</span><span class="s2">"stdout"</span><span class="p">,</span><span class="nl">"time"</span><span class="p">:</span><span class="s2">"2019-01-01T11:11:11.111111111Z"</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h2 id="usage">Usage</h2>

<p>To use the <code class="language-plaintext highlighter-rouge">json-file</code> driver as the default logging driver, set the <code class="language-plaintext highlighter-rouge">log-driver</code>
and <code class="language-plaintext highlighter-rouge">log-opts</code> keys to appropriate values in the <code class="language-plaintext highlighter-rouge">daemon.json</code> file, which is
located in <code class="language-plaintext highlighter-rouge">/etc/docker/</code> on Linux hosts or
<code class="language-plaintext highlighter-rouge">C:\ProgramData\docker\config\</code> on Windows Server. For more information about
configuring Docker using <code class="language-plaintext highlighter-rouge">daemon.json</code>, see
<a href="/docs.docker.jp.onthefly/engine/reference/commandline/dockerd/#daemon-configuration-file">daemon.json</a>.</p>

<p>The following example sets the log driver to <code class="language-plaintext highlighter-rouge">json-file</code> and sets the <code class="language-plaintext highlighter-rouge">max-size</code> and <code class="language-plaintext highlighter-rouge">max-file</code> options.</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"log-driver"</span><span class="p">:</span><span class="w"> </span><span class="s2">"json-file"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"log-opts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"max-size"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10m"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"max-file"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<blockquote>
  <p><strong>Note</strong></p>

  <p><code class="language-plaintext highlighter-rouge">log-opts</code> configuration options in the <code class="language-plaintext highlighter-rouge">daemon.json</code> configuration file must
be provided as strings. Boolean and numeric values (such as the value for
<code class="language-plaintext highlighter-rouge">max-file</code> in the example above) must therefore be enclosed in quotes (<code class="language-plaintext highlighter-rouge">"</code>).</p>
</blockquote>

<p>Restart Docker for the changes to take effect for newly created containers.
Existing containers do not use the new logging configuration.</p>

<p>You can set the logging driver for a specific container by using the
<code class="language-plaintext highlighter-rouge">--log-driver</code> flag to <code class="language-plaintext highlighter-rouge">docker container create</code> or <code class="language-plaintext highlighter-rouge">docker run</code>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker run <span class="se">\</span>
      <span class="nt">--log-driver</span> json-file <span class="nt">--log-opt</span> max-size<span class="o">=</span>10m <span class="se">\</span>
      alpine <span class="nb">echo </span>hello world
</code></pre></div></div>

<h3 id="options">Options</h3>

<p>The <code class="language-plaintext highlighter-rouge">json-file</code> logging driver supports the following logging options:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Option</th>
      <th style="text-align: left">Description</th>
      <th style="text-align: left">Example  value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">max-size</code></td>
      <td style="text-align: left">The maximum size of the log before it is rolled. A positive integer plus a modifier representing the unit of measure (<code class="language-plaintext highlighter-rouge">k</code>, <code class="language-plaintext highlighter-rouge">m</code>, or <code class="language-plaintext highlighter-rouge">g</code>). Defaults to -1 (unlimited).</td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">--log-opt max-size=10m</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">max-file</code></td>
      <td style="text-align: left">The maximum number of log files that can be present. If rolling the logs creates excess files, the oldest file is removed. <strong>Only effective when <code class="language-plaintext highlighter-rouge">max-size</code> is also set.</strong> A positive integer. Defaults to 1.</td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">--log-opt max-file=3</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">labels</code></td>
      <td style="text-align: left">Applies when starting the Docker daemon. A comma-separated list of logging-related labels this daemon accepts. Used for advanced <a href="/docs.docker.jp.onthefly/config/containers/logging/log_tags/">log tag options</a>.</td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">--log-opt labels=production_status,geo</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">env</code></td>
      <td style="text-align: left">Applies when starting the Docker daemon. A comma-separated list of logging-related environment variables this daemon accepts. Used for advanced <a href="/docs.docker.jp.onthefly/config/containers/logging/log_tags/">log tag options</a>.</td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">--log-opt env=os,customer</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">env-regex</code></td>
      <td style="text-align: left">Similar to and compatible with <code class="language-plaintext highlighter-rouge">env</code>. A regular expression to match logging-related environment variables. Used for advanced <a href="/docs.docker.jp.onthefly/config/containers/logging/log_tags/">log tag options</a>.</td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">--log-opt env-regex=^(os|customer).</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">compress</code></td>
      <td style="text-align: left">Toggles compression for rotated logs. Default is <code class="language-plaintext highlighter-rouge">disabled</code>.</td>
      <td style="text-align: left"><code class="language-plaintext highlighter-rouge">--log-opt compress=true</code></td>
    </tr>
  </tbody>
</table>

<h3 id="examples">Examples</h3>

<p>This example starts an <code class="language-plaintext highlighter-rouge">alpine</code> container which can have a maximum of 3 log
files no larger than 10 megabytes each.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker run <span class="nt">-it</span> <span class="nt">--log-opt</span> max-size<span class="o">=</span>10m <span class="nt">--log-opt</span> max-file<span class="o">=</span>3 alpine ash
</code></pre></div></div>
