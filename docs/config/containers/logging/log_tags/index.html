
<p>ログオプションの <code class="language-plaintext highlighter-rouge">tag</code> は、コンテナーのログ出力を識別するためのタグを、どのような書式で出力するかを指定します。
デフォルトでは、コンテナー ID の先頭 12 文字を用います。
この動作を上書きするには <code class="language-plaintext highlighter-rouge">tag</code> オプションを使います。</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker run <span class="nt">--log-driver</span><span class="o">=</span>fluentd <span class="nt">--log-opt</span> fluentd-address<span class="o">=</span>myhost.local:24224 <span class="nt">--log-opt</span> <span class="nv">tag</span><span class="o">=</span><span class="s2">"mailer"</span>
</code></pre></div></div>

<p>タグの値を指定する際には、特別なテンプレートマークアップの指定がサポートされています。</p>

<table>
  <thead>
    <tr>
      <th>マークアップ</th>
      <th>内容説明</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">{{.ID}}</code></td>
      <td>コンテナーIDの先頭12文字。</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">{{.FullID}}</code></td>
      <td>コンテナーIDの全文字。</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">{{.Name}}</code></td>
      <td>コンテナー名。</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">{{.ImageID}}</code></td>
      <td>コンテナーのイメージIDの先頭12文字。</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">{{.ImageFullID}}</code></td>
      <td>コンテナーのイメージIDの全文字。</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">{{.ImageName}}</code></td>
      <td>コンテナーで用いられているイメージ名。</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">{{.DaemonName}}</code></td>
      <td>Dockerプログラム名 (<code class="language-plaintext highlighter-rouge">docker</code>)</td>
    </tr>
  </tbody>
</table>

<p>たとえば <code class="language-plaintext highlighter-rouge">--log-opt tag="{{.ImageName}}/{{.Name}}/{{.ID}}"</code> と指定すると、<code class="language-plaintext highlighter-rouge">syslog</code> のようなログ出力になります。</p>

<pre><code class="language-none">Aug  7 18:33:19 HOSTNAME hello-world/foobar/5790672ab6a0[9103]: Hello from Docker.
</code></pre>

<p>システム起動時にタグ内の <code class="language-plaintext highlighter-rouge">container_name</code> と <code class="language-plaintext highlighter-rouge">{{.Name}}</code> が設定されます。
<code class="language-plaintext highlighter-rouge">docker rename</code> によってコンテナー名を変更した場合、ログ出力に新たな名前は反映されません。
ログでは、元々のコンテナー名を用いた出力が行われます。</p>

