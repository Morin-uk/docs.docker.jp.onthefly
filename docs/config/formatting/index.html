
<p>Docker は <a href="https://golang.org/pkg/text/template/">Go 言語の templates パッケージ</a> を利用して、所定のコマンドやログドライバーの出力フォーマットを操作できるようにしています。</p>

<p>Docker では、テンプレート項目を操作する基本機能を提供します。
以下では、すべて<code class="language-plaintext highlighter-rouge">docker inspect</code>コマンドを使った例を示します。
ただしこれ以外の CLI コマンドにも <code class="language-plaintext highlighter-rouge">--format</code> フラグは用意されています。
また多くの CLI コマンドリファレンスにて、出力フォーマットをカスタマイズする例を示しています。</p>

<blockquote class="important">
  <p><strong>メモ</strong></p>

  <p><code class="language-plaintext highlighter-rouge">--format</code>フラグを用いる際には、利用しているシェル環境を考慮する必要があります。
Posix シェルの場合、以下のようなコマンド実行では、シングルクォートで囲むことが必要です。</p>

  <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker inspect <span class="nt">--format</span> <span class="s1">'{{join .Args " , "}}'</span>
</code></pre></div>  </div>

  <p>逆に Windows シェル（たとえば PowerShell）の場合、シングルクォートの利用は必要ですが、パラメーター内部ではダブルクォートをエスケープする必要があります。
たとえば以下のとおりです。</p>

  <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker inspect <span class="nt">--format</span> <span class="s1">'{{join .Args \" , \"}}'</span>
</code></pre></div>  </div>

</blockquote>

<h2 id="join">join</h2>

<p><code class="language-plaintext highlighter-rouge">join</code>は文字列のリストを連結して、１つの文字列を生成します。
リスト内では、各項目はセパレーターで区切ります。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker inspect --format '{{join .Args " , "}}' container
</code></pre></div></div>

<h2 id="table">table</h2>

<p><code class="language-plaintext highlighter-rouge">table</code>は出力したい項目を指定します。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker image list --format "table {{.ID}}\t{{.Repository}}\t{{.Tag}}\t{{.Size}}"
</code></pre></div></div>

<h2 id="json">json</h2>

<p><code class="language-plaintext highlighter-rouge">json</code>は項目を json 文字列としてエンコードします。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker inspect --format '{{json .Mounts}}' container
</code></pre></div></div>

<h2 id="lower">lower</h2>

<p><code class="language-plaintext highlighter-rouge">lower</code>は文字列を小文字化します。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker inspect --format "{{lower .Name}}" container
</code></pre></div></div>

<h2 id="split">split</h2>

<p><code class="language-plaintext highlighter-rouge">split</code>は、文字列を分割して、セパレーターによって区切られた文字列リストにします。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker inspect --format '{{split .Image ":"}}'
</code></pre></div></div>

<h2 id="title">title</h2>

<p><code class="language-plaintext highlighter-rouge">title</code>は文字列の先頭文字を大文字にします。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker inspect --format "{{title .Name}}" container
</code></pre></div></div>

<h2 id="upper">upper</h2>

<p><code class="language-plaintext highlighter-rouge">upper</code>は文字列を大文字化します。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker inspect --format "{{upper .Name}}" container
</code></pre></div></div>

<h2 id="println">println</h2>

<p><code class="language-plaintext highlighter-rouge">println</code>は各項目を一行ずつ出力します。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker inspect --format='{{range .NetworkSettings.Networks}}{{println .IPAddress}}{{end}}' container
</code></pre></div></div>

<h1 id="hint">ヒント</h1>

<p>どの項目を出力できるかを知るには、以下を実行すれば全項目を JSON 形式で表示できます。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker container ls --format='{{json .}}'
</code></pre></div></div>

