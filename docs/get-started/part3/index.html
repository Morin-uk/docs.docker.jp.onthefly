<ul class="pagination">
  <li><a href="/docs.docker.jp.onthefly/get-started/part1/">概要と準備</a></li>
  <li><a href="/docs.docker.jp.onthefly/get-started/part2/">イメージの構築と実行</a></li>
  <li class="active"><a href="/docs.docker.jp.onthefly/get-started/part3/">Docker Hub におけるイメージ共有</a></li>
</ul>

<h2 id="prerequisites">前提条件</h2>

<p><a href="/docs.docker.jp.onthefly/get-started/part2/">2 部</a> にてイメージをビルドし、コンテナー化アプリケーションとして実行できていること。</p>

<h2 id="introduction">はじめに</h2>

<p>ここでは <a href="/docs.docker.jp.onthefly/get-started/part2/">2 部</a> に示した作業を通じて、ローカル開発マシン上にコンテナー化されたアプリケーションが構築できているものとします。</p>

<p>最後の作業として、開発しているコンテナー化アプリケーションを、<a href="https://hub.docker.com/" target="_blank" rel="noopener">Docker Hub</a> のようなレジストリ上にてイメージを共有していきます。
こうすればイメージを簡単にダウンロードすることができ、目的とするマシンのいずれにおいても動作させることができます。</p>

<h2 id="set-up-your-docker-hub-account">Docker Hub アカウントの設定</h2>

<p>Docker ID を持っていない場合は、以下の手順により取得します。
これを行っておくことで Docker Hub 上でのイメージの共有ができるようになります。</p>

<ol>
  <li>
    <p><a href="https://hub.docker.com/signup" target="_blank" rel="noopener">Docker Hub のサインアップページ</a> にアクセスします。</p>
  </li>
  <li>
    <p>入力欄への入力を行って submit ボタンをクリックし Docker ID を生成します。</p>
  </li>
  <li>
    <p>電子メールアドレスを確認し、登録手順を終了します。</p>
  </li>
  <li>
    <p>ツールバーあるいはシステムトレイにある Docker アイコンをクリックして <strong>Sign in / Create Docker ID</strong> を実行します。</p>
  </li>
  <li>
    <p>Docker ID とパスワードを入力します。
認証が正しく行われると、先ほど実行した Docker Desktop メニューの ‘Sign in’ のところに Docker ID が表示されます。</p>

    <p>Docker Hub へのサインインは、コマンドラインから <code class="language-plaintext highlighter-rouge">docker login</code> を入力して行うこともできます。</p>
  </li>
</ol>

<h2 id="create-a-docker-hub-repository-and-push-your-image">Docker Hub リポジトリの生成とイメージプッシュ</h2>

<blockquote>

  <p>リポジトリを生成する前に、Docker Hub のアカウントが取得済であり、Docker Desktop から接続できていることを確認してください。</p>
</blockquote>

<p>それでは初めてのリポジトリを生成し、掲示板アプリのイメージをプッシュしましょう。</p>

<ol>
  <li>
    <p>メニューバー上の Docker アイコンをクリックして <strong>Repositories &gt; Create</strong> を実行します。
Docker Hub の <strong>Create Repository</strong> というページにリダイレクトされます。</p>
  </li>
  <li>
    <p>リポジトリ名に <code class="language-plaintext highlighter-rouge">bulletinboard</code> と入力して、下段にある <strong>Create</strong> をクリックします。
リポジトリ以外の欄は、とりあえずここでは何も入力しないことにします。</p>

    <p><img src="/docs.docker.jp.onthefly/get-started/images/newrepo.png" alt="リポジトリの生成" width="100%" /></p>
  </li>
  <li>
    <p>Docker Hub 上においてイメージを共有できる状態になりました。
ただし共有する前に、まずやっておくべきことがあります。
Docker Hub 上にイメージを共有するには、イメージの名前空間を適切に設定しておかなければなりません。
具体的には、イメージ名を <code class="language-plaintext highlighter-rouge">&lt;Docker ID&gt;/&lt;リポジトリ名&gt;:&lt;タグ&gt;</code> とする必要があります。</p>

    <p>そこで端末画面か PowerShell 上において、<code class="language-plaintext highlighter-rouge">node-bulletin-board/bulletin-board-app</code> ディレクトリにいることを確認して、以下を実行します。</p>

    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker tag bulletinboard:1.0 &lt;あなたの Docker ID&gt;/bulletinboard:1.0
</code></pre></div>    </div>
  </li>
  <li>
    <p>最後にイメージを Docker Hub にプッシュします。</p>

    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker push &lt;あなたの Docker ID&gt;/bulletinboard:1.0
</code></pre></div>    </div>

    <p><a href="https://hub.docker.com/repositories" target="_blank" rel="noopener">Docker Hub</a> においてこのリポジトリにアクセスしてみると、新たなイメージがそこに表示されています。
Docker Hub リポジトリは、デフォルトで公開されている（public となっている）ことに注意してください。</p>

    <blockquote>
      <p><strong>プッシュに失敗した場合</strong> Docker Hub へは Docker Desktop から、あるいはコマンドラインからサインインしていることが必要です。
また上記の手順にて示したように、イメージは適切な名称としていなければなりません。
プッシュを行っても Docker Hub 上に表示されていない場合は、数分待ってからブラウザーを再表示して確認してください。</p>
    </blockquote>
  </li>
</ol>

<h2 id="conclusion">まとめ</h2>

<p>こうして Docker Hub 上でのイメージ共有ができるようになりました。
これからはどのような環境上でもこれを実行できることになります。
このイメージをまだ入手していない新たなマシンを使って、このイメージを利用しようとすると、Docker が自動的に Docker Hub からイメージを入手、ダウンロードします。
このようにしてイメージをあちこちに移動して利用します。
つまりソフトウェアを実行しようとしているマシン上には、Docker 以外に依存パッケージをインストールしておく必要がありません。
コンテナー化アプリケーションにとっての依存パッケージは、完全にイメージ内部にカプセル化され切り離されます。
こうしてそのイメージは、上で説明した Docker Hub を利用して共有できることになります。</p>

<p>もう一つ意識しておくことがあります。
この時点では Docker Hub にイメージをプッシュしただけです。
さて対応する Dockerfile はどうしますか？
重要なベストプラクティスとして、こういったファイルはバージョン管理システムを使い、おそらくはアプリケーションソースコードとともに管理すべきです。
Docker Hub リポジトリにおいては、それらファイルがどこにあるかをメモやリンクにより説明することができます。
そこでは単にイメージのビルド方法を示すだけではなく、アプリケーションを完全に動作させるための方法を示すことが必要になります。</p>

<h2 id="where-to-go-next">次に読むものは</h2>

<p>以下のトピック <a href="/docs.docker.jp.onthefly/develop/">Docker を用いた開発</a> の一読をおすすめします。
Docker を用いた独自アプリケーションの開発方法を学んでください。</p>
