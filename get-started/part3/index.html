<!-- Page generated 2019-04-14 12:50:29 +0900 -->
<!-- relative link basehrefs -->

	
	
	
		
			
		
	
		
			
			


<!-- Logic for 'edit this button' -->


	

	

	

	

	

	

	

	

	


<!-- End of logic for 'edit this button' -->


<!DOCTYPE html>
<html lang="ja">

<head>
	<base href="https://matsuand.github.io/docs.docker.jp.onthefly/get-started/" />
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<style type="text/css">
		@charset "UTF-8";
		[ng\:cloak],
		[ng-cloak],
		[data-ng-cloak],
		[x-ng-cloak],
		.ng-cloak,
		.x-ng-cloak,
		.ng-hide:not(.ng-hide-animate) {
			display: none !important;
		}

		ng\:form {
			display: block;
		}
	</style>
	<script type="text/javascript">
	  !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="4.0.0";
	  analytics.load("IWj9D0UpZHZdZUZX9jl98PcpBFWBnBMy");
	  analytics.page();
	  }}();
	</script>
	
	<!-- favicon -->
	<link rel="icon" type="image/x-icon" href="https://matsuand.github.io/docs.docker.jp.onthefly/favicons/docs@2x.ico" sizes="129x128">
	<meta name="msapplication-TileImage" content="/favicons/docs@2x.ico">
	<link rel="apple-touch-icon" type="image/x-icon" href="https://matsuand.github.io/docs.docker.jp.onthefly/favicons/docs@2x.ico" sizes="129x128">
	<meta property="og:image" content="/favicons/docs@2x.ico"/>
	<!-- metadata -->
	<meta property="og:type" content="website"/>
	<meta property="og:updated_time" itemprop="dateUpdated" content="2019-04-14T12:50:29+09:00"/>
	<meta property="og:image" itemprop="image primaryImageOfPage" content="/images/docs@2x.png"/>
	<meta name="twitter:card" content="summary"/>
	<meta name="twitter:domain" content="docs.docker.jp"/>
	<meta name="twitter:site" content="@docker_docs"/>
	<meta name="twitter:url" content="https://twitter.com/docker_docs"/>
	<meta name="twitter:title" itemprop="title name" content="はじめよう 3部: サービス"/>
	<meta name="twitter:description" property="og:description" itemprop="description" content="1: 概要 2: コンテナー 3: サービス 4: スウォーム 5: スタック 6: アプリのデプロイ 前提条件 Install Docker version 1.13 or higher. Get Docker Compose. On Docker Desktop for Mac and Docker Desktop..." />
	<meta name="twitter:image:src" content="/images/docs@2x.png"/>
	<meta name="twitter:image:alt" content="Docker Documentation"/>
	<meta property="article:published_time" itemprop="datePublished" content="2019-04-14T12:50:29+09:00"/>

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="keywords" content="services, replicas, scale, ports, compose, compose file, stack, networking">
	<link rel="stylesheet" href="https://matsuand.github.io/docs.docker.jp.onthefly/css/font-awesome.min.css">
	<link rel="stylesheet" href="https://matsuand.github.io/docs.docker.jp.onthefly/css/bootstrap.min.css">
	<link id="pygments" rel="stylesheet" href="https://matsuand.github.io/docs.docker.jp.onthefly/css/pygments/perldoc.css">
	<link id="pagestyle" rel="stylesheet" href="https://matsuand.github.io/docs.docker.jp.onthefly/css/style.css">

	<!-- Go get "Open Sans" font from Google -->
	<link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
	<!-- SEO stuff -->
	<title>はじめよう 3部: サービス | Docker Documentation</title>
<meta property="og:title" content="はじめよう 3部: サービス" />
<meta property="og:locale" content="ja_JP" />
<meta name="description" content="Learn how to define load-balanced and scalable service that runs containers." />
<meta property="og:description" content="Learn how to define load-balanced and scalable service that runs containers." />
<link rel="canonical" href="https://matsuand.github.io/docs.docker.jp.onthefly/get-started/part3/" />
<meta property="og:url" content="https://matsuand.github.io/docs.docker.jp.onthefly/get-started/part3/" />
<meta property="og:site_name" content="Docker Documentation" />
<script type="application/ld+json">
{"@context":"http://schema.org","@type":"WebPage","headline":"はじめよう 3部: サービス","description":"Learn how to define load-balanced and scalable service that runs containers.","url":"https://matsuand.github.io/docs.docker.jp.onthefly/get-started/part3/"}</script>
	<!-- END SEO STUFF -->
	
	<script language="javascript">
	// Default to assuming this is an archive and hiding some stuff
	// See js/archive.js and js/docs.js for logic relating to this
	var isArchive = true;
	var dockerVersion = 'v18.09';
	</script>
</head>
<body ng-app="Docker" ng-controller="DockerController" class="colums">
	<header>
		 <nav class="nav-secondary navbar navbar-fixed-top">
    <!-- <div class="fan"></div> -->
    <div class="container-fluid">
        <div class="navbar-header">
            <a href="https://matsuand.github.io/docs.docker.jp.onthefly/"><img class="logo" src="/images/docker-docs-logo.svg" alt="Docker Docs" title="Docker Docs"></a>
        </div>
        <div class="navbar-collapse" aria-expanded="false" style="height: 1px;">
            <div class="search-form" id="search-div" style="visibility: hidden">
    <form class="search-form form-inline ng-pristine ng-valid" id="searchForm" action="/search/">
        <input class="search-field form-control ds-input" id="st-search-input" value="" name="q" placeholder="文書内検索" type="search" autocomplete="off" spellcheck="false" dir="auto" style="position: relative; vertical-align: top;">
        <div id="autocompleteContainer">
            <div id="autocompleteResults"></div>
        </div>
        <!-- <button type="submit" class="search-submit btn btn-default">検索</button> -->
    </form>
</div>
<div class="sidebar-toggle">
    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
    </button>
</div>
<div class="nav-container">
    <div id="tabs">
        <ul class="tabs" id="jsTOCHorizontal">

        </ul>
    </div>
    <div class="ctrl-right hidden-xs hidden-sm">
        <a href="javascript:void(0)" id="menu-toggle"><i class="fa fa-indent" aria-hidden="true"></i></a>
        <div class="btn-group" style="visibility: hidden">
  <button type="button" class="btn btn-default dropdown-btn dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    Docker v18.09 (current)        <span class="caret"></span>
  </button>
  <ul class="dropdown-menu">
    <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/edge/">Docker edge</a></li><li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/v18.03/">Docker v18.03</a></li><li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/v17.12/">Docker v17.12</a></li><li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/v17.09/">Docker v17.09</a></li><li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/v17.06/">Docker v17.06</a></li><li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/v17.03/">Docker v17.03</a></li>
  </ul>
</div>

    </div>
</div>

        </div>
    </div>
</nav>

	</header>

	<div class="wrapper right-open">
		<div class="container-fluid">
			<div class="row">
				<div class="col-body">
					<main class="col-content content">
						<section class="section">
							
								
							<h1>はじめよう 3部: サービス</h1>  <span class="reading-time" title="Estimated reading time">
  <span class="reading-time-label">読む時間の目安: </span>
  
  
    9 分
  
</span>

							
							
							<ul class="pagination">
  <li><a href="part1">1: 概要</a></li>
  <li><a href="part2">2: コンテナー</a></li>
  <li class="active"><a href="part3">3: サービス</a></li>
  <li><a href="part4">4: スウォーム</a></li>
  <li><a href="part5">5: スタック</a></li>
  <li><a href="part6">6: アプリのデプロイ</a></li>
</ul>

<h2 id="前提条件">前提条件</h2>

<ul>
  <li>
    <p><a href="https://matsuand.github.io/docs.docker.jp.onthefly/engine/installation/index.md">Install Docker version 1.13 or higher</a>.</p>
  </li>
  <li>
    <p>Get <a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/overview.md">Docker Compose</a>. On <a href="https://matsuand.github.io/docs.docker.jp.onthefly/docker-for-mac/index.md">Docker Desktop for
Mac</a> and <a href="https://matsuand.github.io/docs.docker.jp.onthefly/docker-for-windows/index.md">Docker Desktop for
Windows</a> it’s pre-installed, so you’re good-to-go.
On Linux systems you need to <a href="https://github.com/docker/compose/releases">install it
directly</a>. On pre Windows 10 systems
<em>without Hyper-V</em>, use <a href="https://matsuand.github.io/docs.docker.jp.onthefly/toolbox/overview.md">Docker
Toolbox</a>.</p>
  </li>
  <li>
    <p>Read the orientation in <a href="https://matsuand.github.io/docs.docker.jp.onthefly/get-started/">Part 1</a>.</p>
  </li>
  <li>
    <p>Learn how to create containers in <a href="https://matsuand.github.io/docs.docker.jp.onthefly/get-started/part2/">Part 2</a>.</p>
  </li>
  <li>
    <p>Make sure you have published the <code class="highlighter-rouge">friendlyhello</code> image you created by
<a href="https://matsuand.github.io/docs.docker.jp.onthefly/get-started/part2.md#share-your-image">pushing it to a registry</a>. We use that
shared image here.</p>
  </li>
  <li>
    <p>Be sure your image works as a deployed container. Run this command,
slotting in your info for <code class="highlighter-rouge">username</code>, <code class="highlighter-rouge">repo</code>, and <code class="highlighter-rouge">tag</code>: <code class="highlighter-rouge">docker run -p 4000:80
username/repo:tag</code>, then visit <code class="highlighter-rouge">http://localhost:4000/</code>.</p>
  </li>
</ul>

<h2 id="はじめに">はじめに</h2>

<p>In part 3, we scale our application and enable load-balancing. To do this, we
must go one level up in the hierarchy of a distributed application: the
<strong>service</strong>.</p>

<ul>
  <li>Stack</li>
  <li><strong>Services</strong> (you are here)</li>
  <li>Container (covered in <a href="https://matsuand.github.io/docs.docker.jp.onthefly/get-started/part2/">part 2</a>)</li>
</ul>

<h2 id="サービスについて">サービスについて</h2>

<p>In a distributed application, different pieces of the app are called “services”.
For example, if you imagine a video sharing site, it probably includes a service
for storing application data in a database, a service for video transcoding in
the background after a user uploads something, a service for the front-end, and
so on.</p>

<p>Services are really just “containers in production.” A service only runs one
image, but it codifies the way that image runs—what ports it should use,
how many replicas of the container should run so the service has the capacity it
needs, and so on. Scaling a service changes the number of container instances
running that piece of software, assigning more computing resources to the
service in the process.</p>

<p>Luckily it’s very easy to define, run, and scale services with the Docker
platform -- just write a <code class="highlighter-rouge">docker-compose.yml</code> file.</p>

<h2 id="your-first-docker-composeyml-file">Your first <code class="highlighter-rouge">docker-compose.yml</code> file</h2>

<p>A <code class="highlighter-rouge">docker-compose.yml</code> file is a YAML file that defines how Docker containers
should behave in production.</p>

<h3 id="docker-composeyml"><code class="highlighter-rouge">docker-compose.yml</code></h3>

<p>Save this file as <code class="highlighter-rouge">docker-compose.yml</code> wherever you want. Be sure you have
<a href="https://matsuand.github.io/docs.docker.jp.onthefly/get-started/part2.md#share-your-image">pushed the image</a> you created in <a href="https://matsuand.github.io/docs.docker.jp.onthefly/get-started/part2/">Part
2</a> to a registry, and update this <code class="highlighter-rouge">.yml</code> by replacing
<code class="highlighter-rouge">username/repo:tag</code> with your image details.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">version</span><span class="pi">:</span> <span class="s2">"</span><span class="s">3"</span>
<span class="na">services</span><span class="pi">:</span>
  <span class="na">web</span><span class="pi">:</span>
    <span class="c1"># replace username/repo:tag with your name and image details</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">username/repo:tag</span>
    <span class="na">deploy</span><span class="pi">:</span>
      <span class="na">replicas</span><span class="pi">:</span> <span class="s">5</span>
      <span class="na">resources</span><span class="pi">:</span>
        <span class="na">limits</span><span class="pi">:</span>
          <span class="na">cpus</span><span class="pi">:</span> <span class="s2">"</span><span class="s">0.1"</span>
          <span class="na">memory</span><span class="pi">:</span> <span class="s">50M</span>
      <span class="na">restart_policy</span><span class="pi">:</span>
        <span class="na">condition</span><span class="pi">:</span> <span class="s">on-failure</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s2">"</span><span class="s">4000:80"</span>
    <span class="na">networks</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">webnet</span>
<span class="na">networks</span><span class="pi">:</span>
  <span class="na">webnet</span><span class="pi">:</span>
</code></pre></div></div>

<p>This <code class="highlighter-rouge">docker-compose.yml</code> file tells Docker to do the following:</p>

<ul>
  <li>
    <p>Pull <a href="https://matsuand.github.io/docs.docker.jp.onthefly/get-started/part2/">the image we uploaded in step 2</a> from the registry.</p>
  </li>
  <li>
    <p>Run 5 instances of that image as a service
called <code class="highlighter-rouge">web</code>, limiting each one to use, at most, 10% of a single core of
CPU time (this could also be e.g. “1.5” to mean 1 and half core for each),
and 50MB of RAM.</p>
  </li>
  <li>
    <p>Immediately restart containers if one fails.</p>
  </li>
  <li>
    <p>Map port 4000 on the host to <code class="highlighter-rouge">web</code>’s port 80.</p>
  </li>
  <li>
    <p>Instruct <code class="highlighter-rouge">web</code>’s containers to share port 80 via a load-balanced network
called <code class="highlighter-rouge">webnet</code>. (Internally, the containers themselves publish to
<code class="highlighter-rouge">web</code>’s port 80 at an ephemeral port.)</p>
  </li>
  <li>
    <p>Define the <code class="highlighter-rouge">webnet</code> network with the default settings (which is a
load-balanced overlay network).</p>
  </li>
</ul>

<h2 id="run-your-new-load-balanced-app">Run your new load-balanced app</h2>

<p>Before we can use the <code class="highlighter-rouge">docker stack deploy</code> command we first run:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker swarm init
</code></pre></div></div>

<blockquote>
  <p><strong>Note</strong>: We get into the meaning of that command in <a href="https://matsuand.github.io/docs.docker.jp.onthefly/get-started/part4/">part 4</a>.
If you don’t run <code class="highlighter-rouge">docker swarm init</code> you get an error that “this node is not a swarm manager.”</p>
</blockquote>

<p>Now let’s run it. You need to give your app a name. Here, it is set to
<code class="highlighter-rouge">getstartedlab</code>:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker stack deploy <span class="nt">-c</span> docker-compose.yml getstartedlab
</code></pre></div></div>

<p>Our single service stack is running 5 container instances of our deployed image
on one host. Let’s investigate.</p>

<p>Get the service ID for the one service in our application:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker service <span class="nb">ls</span>
</code></pre></div></div>

<p>Look for output for the <code class="highlighter-rouge">web</code> service, prepended with your app name. If you
named it the same as shown in this example, the name is
<code class="highlighter-rouge">getstartedlab_web</code>. The service ID is listed as well, along with the number of
replicas, image name, and exposed ports.</p>

<p>Alternatively, you can run <code class="highlighter-rouge">docker stack services</code>, followed by the name of
your stack. The following example command lets you view all services associated with the
<code class="highlighter-rouge">getstartedlab</code> stack:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker stack services getstartedlab
ID                  NAME                MODE                REPLICAS            IMAGE               PORTS
bqpve1djnk0x        getstartedlab_web   replicated          5/5                 username/repo:tag   <span class="k">*</span>:4000-&gt;80/tcp
</code></pre></div></div>

<p>A single container running in a service is called a <strong>task</strong>. Tasks are given unique
IDs that numerically increment, up to the number of <code class="highlighter-rouge">replicas</code> you defined in
<code class="highlighter-rouge">docker-compose.yml</code>. List the tasks for your service:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker service ps getstartedlab_web
</code></pre></div></div>

<p>Tasks also show up if you just list all the containers on your system, though that
is not filtered by service:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker container <span class="nb">ls</span> <span class="nt">-q</span>
</code></pre></div></div>

<p>You can run <code class="highlighter-rouge">curl -4 http://localhost:4000</code> several times in a row, or go to that URL in
your browser and hit refresh a few times.</p>

<p><img src="images/app80-in-browser.png" alt="Hello World in browser" /></p>

<p>Either way, the container ID changes, demonstrating the
load-balancing; with each request, one of the 5 tasks is chosen, in a
round-robin fashion, to respond. The container IDs match your output from
the previous command (<code class="highlighter-rouge">docker container ls -q</code>).</p>

<p>To view all tasks of a stack, you can run <code class="highlighter-rouge">docker stack ps</code> followed by your app name, as shown in the following example:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker stack ps getstartedlab
ID                  NAME                  IMAGE               NODE                DESIRED STATE       CURRENT STATE           ERROR               PORTS
uwiaw67sc0eh        getstartedlab_web.1   username/repo:tag   docker-desktop      Running             Running 9 minutes ago
sk50xbhmcae7        getstartedlab_web.2   username/repo:tag   docker-desktop      Running             Running 9 minutes ago
c4uuw5i6h02j        getstartedlab_web.3   username/repo:tag   docker-desktop      Running             Running 9 minutes ago
0dyb70ixu25s        getstartedlab_web.4   username/repo:tag   docker-desktop      Running             Running 9 minutes ago
aocrb88ap8b0        getstartedlab_web.5   username/repo:tag   docker-desktop      Running             Running 9 minutes ago
</code></pre></div></div>

<blockquote>
  <p>Running Windows 10?</p>

  <p>Windows 10 PowerShell should already have <code class="highlighter-rouge">curl</code> available, but if not you can
grab a Linux terminal emulator like
<a href="https://git-for-windows.github.io/" target="_blank" class="_">Git BASH</a>,
or download
<a href="http://gnuwin32.sourceforge.net/packages/wget.htm">wget for Windows</a>
which is very similar.</p>
</blockquote>

<blockquote>
  <p>Slow response times?</p>

  <p>Depending on your environment’s networking configuration, it may take up to 30
seconds for the containers
to respond to HTTP requests. This is not indicative of Docker or
swarm performance, but rather an unmet Redis dependency that we
address later in the tutorial. For now, the visitor counter isn’t working
for the same reason; we haven’t yet added a service to persist data.</p>
</blockquote>

<h2 id="scale-the-app">Scale the app</h2>

<p>You can scale the app by changing the <code class="highlighter-rouge">replicas</code> value in <code class="highlighter-rouge">docker-compose.yml</code>,
saving the change, and re-running the <code class="highlighter-rouge">docker stack deploy</code> command:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker stack deploy <span class="nt">-c</span> docker-compose.yml getstartedlab
</code></pre></div></div>

<p>Docker performs an in-place update, no need to tear the stack down first or kill
any containers.</p>

<p>Now, re-run <code class="highlighter-rouge">docker container ls -q</code> to see the deployed instances reconfigured.
If you scaled up the replicas, more tasks, and hence, more containers, are
started.</p>

<h3 id="take-down-the-app-and-the-swarm">Take down the app and the swarm</h3>

<ul>
  <li>
    <p>Take the app down with <code class="highlighter-rouge">docker stack rm</code>:</p>

    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker stack rm getstartedlab
</code></pre></div>    </div>
  </li>
  <li>
    <p>Take down the swarm.</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker swarm leave --force
</code></pre></div>    </div>
  </li>
</ul>

<p>It’s as easy as that to stand up and scale your app with Docker. You’ve taken a
huge step towards learning how to run containers in production. Up next, you
learn how to run this app as a bonafide swarm on a cluster of Docker
machines.</p>

<blockquote>
  <p><strong>Note</strong>: Compose files like this are used to define applications with Docker, and can be uploaded to cloud providers using <a href="https://matsuand.github.io/docs.docker.jp.onthefly/docker-cloud/">Docker
Cloud</a>, or on any hardware or cloud provider you choose with
<a href="https://www.docker.com/enterprise-edition">Docker Enterprise Edition</a>.</p>
</blockquote>

<p><a href="https://matsuand.github.io/docs.docker.jp.onthefly/get-started/part4/" class="button outline-btn">On to “Part 4” &gt;&gt;</a></p>

<h2 id="recap-and-cheat-sheet-optional">Recap and cheat sheet (optional)</h2>

<p>Here’s <a href="https://asciinema.org/a/b5gai4rnflh7r0kie01fx6lip">a terminal recording of what was covered on this page</a>:</p>

<script type="text/javascript" src="https://asciinema.org/a/b5gai4rnflh7r0kie01fx6lip.js" id="asciicast-b5gai4rnflh7r0kie01fx6lip" speed="2" async=""></script>

<p>To recap, while typing <code class="highlighter-rouge">docker run</code> is simple enough, the true implementation
of a container in production is running it as a service. Services codify a
container’s behavior in a Compose file, and this file can be used to scale,
limit, and redeploy our app. Changes to the service can be applied in place, as
it runs, using the same command that launched the service:
<code class="highlighter-rouge">docker stack deploy</code>.</p>

<p>Some commands to explore at this stage:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker stack <span class="nb">ls</span>                                            <span class="c"># List stacks or apps</span>
docker stack deploy <span class="nt">-c</span> &lt;composefile&gt; &lt;appname&gt;  <span class="c"># Run the specified Compose file</span>
docker service <span class="nb">ls</span>                 <span class="c"># List running services associated with an app</span>
docker service ps &lt;service&gt;                  <span class="c"># List tasks associated with an app</span>
docker inspect &lt;task or container&gt;                   <span class="c"># Inspect task or container</span>
docker container <span class="nb">ls</span> <span class="nt">-q</span>                                      <span class="c"># List container IDs</span>
docker stack rm &lt;appname&gt;                             <span class="c"># Tear down an application</span>
docker swarm leave <span class="nt">--force</span>      <span class="c"># Take down a single node swarm from the manager</span>
</code></pre></div></div>

							<!-- tags -->
							
							
							
							<span class="glyphicon glyphicon-tags" style="padding-right: 10px"></span><span style="vertical-align: 2px"><a href="https://matsuand.github.io/docs.docker.jp.onthefly/glossary/?term=services">services</a>, <a href="https://matsuand.github.io/docs.docker.jp.onthefly/glossary/?term=replicas">replicas</a>, <a href="https://matsuand.github.io/docs.docker.jp.onthefly/glossary/?term=scale">scale</a>, <a href="https://matsuand.github.io/docs.docker.jp.onthefly/glossary/?term=ports">ports</a>, <a href="https://matsuand.github.io/docs.docker.jp.onthefly/glossary/?term=compose">compose</a>, <a href="https://matsuand.github.io/docs.docker.jp.onthefly/glossary/?term=compose file">compose file</a>, <a href="https://matsuand.github.io/docs.docker.jp.onthefly/glossary/?term=stack">stack</a>, <a href="https://matsuand.github.io/docs.docker.jp.onthefly/glossary/?term=networking">networking</a></span>
							
							<!-- link corrections -->
              <script language="JavaScript">
							var x = document.links.length;
							var baseHref = document.getElementsByTagName('base')[0].href
							for (i = 0; i < x; i++) {
							  var munged = false;
							  var thisHREF = document.links[i].href;
							  var originalURL = "/get-started/part3/";
							  if (thisHREF.indexOf(baseHref + "#") > -1) {
							    // hash fix
							    //console.log('BEFORE: base:',baseHref,'thisHREF:',thisHREF,'originalURL:',originalURL);
							    thisHREF = originalURL + thisHREF.replace(baseHref, "");
							    //console.log('AFTER: base:',baseHref,'thisHREF:',thisHREF,'originalURL:',originalURL);
							  }
							  if ((thisHREF.indexOf(window.location.hostname) > -1 || thisHREF.indexOf('http') == -1) && document.links[i].className.indexOf("nomunge") < 0) {
							    munged = true;
							    thisHREF = thisHREF.replace(".md", "/").replace("/index/", "/");
							    document.links[i].setAttribute('href', thisHREF);
							  }
							}
							</script>
							
						  <div id="ratings-div" style="color:#b9c2cc; text-align: center; margin-top: 150px; visibility: hidden">
								<div id="pd_rating_holder_8453675"></div>
								<script type="text/javascript">
									PDRTJS_settings_8453675 = {
										"id": "8453675",
										"unique_id": "get-started/part3.md",
										"title": "はじめよう 3部: サービス",
										"permalink": "https://github.com/docker/docker.github.io/blob/master/get-started/part3.md"
									};
									(function(d, c, j) {
										if (!document.getElementById(j)) {
											var pd = d.createElement(c),
												s;
											pd.id = j;
											pd.src = ('https:' == document.location.protocol) ? 'https://polldaddy.com/js/rating/rating.js' : 'http://i0.poll.fm/js/rating/rating.js';
											s = document.getElementsByTagName(c)[0];
											s.parentNode.insertBefore(pd, s);
										}
									}(document, 'script', 'pd-rating-js'));
								</script>
							</div>
							
						</section>
					</main>
					<nav class="col-nav">
						<div id="sidebar-nav" class="sidebar hidden-sm hidden-xs">
						<div id="navbar" class="nav-sidebar">
    <ul class="nav" id="jsTOCLeftNav">
    </ul>
</div>

						</div>
					</nav>
					<div class="col-toc">
							<div class="sidebar hidden-xs hidden-sm">
							<div class="toc-nav">
								<div class="feedback-links">
									<ul>
										
										<li style="visibility: hidden"><a href="https://github.com/zembutsu/docs.docker.jp/edit/master/get-started/part3.md"><i class="fa fa-pencil-square-o" aria-hidden="true"></i> このページの編集</a></li>
										<li><a href="https://github.com/zembutsu/docs.docker.jp/issues/new?body=File: [get-started/part3.md](https://matsuand.github.io/docs.docker.jp.onthefly/get-started/part3/)"
															class="nomunge"><i class="fa fa-check" aria-hidden="true"></i> 文書変更のリクエスト</a></li>
										<li><a href="https://success.docker.com/support"><i class="fa fa-question" aria-hidden="true"></i> サポート依頼</a></li>
										<!-- toggle mode -->
										<li>
											<div class="toggle-mode">
												<div class="icon">
													<i class="fa fa-sun-o" aria-hidden="true"></i>
												</div>
												<div class="toggle-switch">
													<label class="switch">
														<input type="checkbox" id="switch-style">
														<div class="slider round"></div>
												</label>
												</div>
												<div class="icon">
													<i class="fa fa-moon-o" aria-hidden="true"></i>
												</div>
											</div>
										</li>
									</ul>
								</div>
								   
									<div id="side-toc-title">本ページ内</div>
									
<ul id="my_toc" class="inline_toc">
  <li><a href="#前提条件" class="nomunge">前提条件</a></li>
  <li><a href="#はじめに" class="nomunge">はじめに</a></li>
  <li><a href="#サービスについて" class="nomunge">サービスについて</a></li>
  <li><a href="#your-first-docker-composeyml-file" class="nomunge">Your first docker-compose.yml file</a>
    <ul>
      <li><a href="#docker-composeyml" class="nomunge">docker-compose.yml</a></li>
    </ul>
  </li>
  <li><a href="#run-your-new-load-balanced-app" class="nomunge">Run your new load-balanced app</a></li>
  <li><a href="#scale-the-app" class="nomunge">Scale the app</a>
    <ul>
      <li><a href="#take-down-the-app-and-the-swarm" class="nomunge">Take down the app and the swarm</a></li>
    </ul>
  </li>
  <li><a href="#recap-and-cheat-sheet-optional" class="nomunge">Recap and cheat sheet (optional)</a></li>
</ul>


								</div>
								
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	
	<footer class="footer">
		  
    <div class="container">
        <div class="top_footer">
            <div class="row">
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><a href="https://www.docker.com/what-docker">What is Docker</a></li>
                        <li><a href="https://www.docker.com/what-container">What is a Container</a></li>
                        <li><a href="https://www.docker.com/use-cases">Use Cases</a></li>
                        <li><a href="https://www.docker.com/customers">Customers</a></li>
                        <li><a href="https://www.docker.com/partners/partner-program">Partners</a></li>
                        <li class="break"><a href="https://www.docker.com/industry-government">For Government</a></li>
                        <li><a href="https://www.docker.com/company">About Docker</a></li>
                        <li><a href="https://www.docker.com/company/management">Management</a></li>
                        <li><a href="https://www.docker.com/company/news-and-press">Press &amp; News</a></li>
                        <li><a href="https://www.docker.com/careers">Careers</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><a href="https://www.docker.com/products/overview">Product</a></li>
                        <li><a href="https://www.docker.com/pricing">Pricing</a></li>
                        <li><a href="https://www.docker.com/docker-community">Community Edition</a></li>
                        <li class="break"><a href="https://www.docker.com/enterprise">Enterprise Edition </a></li>
                        <li><a href="https://www.docker.com/products/docker-datacenter">Docker Datacenter</a></li>
                        <li><a href="https://hub.docker.com/">Docker Hub</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/">Documentation</a></li>
                        <li><a href="https://www.docker.com/docker">Learn</a></li>
                        <li><a href="https://blog.docker.com" target="_blank">Blog</a></li>
                        <li><a href="https://engineering.docker.com" target="_blank">Engineering Blog</a></li>
                        <li><a href="https://training.docker.com/" target="_blank">Training</a></li>
                        <li><a href="https://success.docker.com/support">Support</a></li>
                        <li><a href="https://success.docker.com/kbase">Knowledge Base</a></li>
                        <li><a href="https://www.docker.com/products/resources">Resources</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><a href="https://www.docker.com/docker-community">Community</a></li>
                        <li><a href="https://www.docker.com/technologies/overview">Open Source</a></li>
                        <li><a href="https://www.docker.com/community/events">Events</a></li>
                        <li><a href="https://forums.docker.com/" target="_blank">Forums</a></li>
                        <li><a href="https://www.docker.com/community/docker-captains">Docker Captains</a></li>
                        <li><a href="https://www.docker.com/docker-community/scholarships">Scholarships</a></li>
                        <li><a href="https://blog.docker.com/curated/">Community News</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-nav">
                <nav class="footer_sub_nav">
                    <ul class="menu">
                        <li><a href="http://status.docker.com/">Status</a></li>
                        <li><a href="https://www.docker.com/docker-security">Security</a></li>
                        <li><a href="https://www.docker.com/legal">Legal</a></li>
                        <li><a href="https://www.docker.com/company/contact">Contact</a></li>
                    </ul>
                </nav>
            </div>
        </div>
        <div class="bottom_footer">
            <div class="footer-copyright col-xs-12 col-md-8">
                <p class="copyright">
                    Copyright &copy; 2019 Docker Inc. All rights reserved. </p>
            </div>
            <div class="footer_social_nav">
                <ul class="nav-social">
                    <li class="fa fa-twitter"><a href="http://twitter.com/docker">Twitter</a></li>
                    <li class="fa fa-youtube"><a href="http://www.youtube.com/user/dockerrun">Youtube</a></li>
                    <li class="fa fa-google-plus"><a href="https://plus.google.com/u/0/communities/108146856671494713993">Google</a></li>
                    <li class="fa fa-github"><a href="https://github.com/docker/docker">Github</a></li>
                    <li class="fa fa-linkedin"><a href="https://www.linkedin.com/company/docker">Linkedin</a></li>
                    <li class="fa fa-facebook"><a href="https://www.facebook.com/docker.run">Facebook</a></li>
                    <li class="fa fa-reddit"><a href="http://www.reddit.com/r/docker">Reddit</a></li>
                    <li class="fa fa-slideshare"><a href="http://www.slideshare.net/docker">Slideshare</a></li>
                </ul>
            </div>
        </div>
    </div>

	</footer>
	<link rel="stylesheet" href="https://matsuand.github.io/docs.docker.jp.onthefly/css/github.css">
	
	<!-- <script src="/js/anchorlinks.js"></script> -->
	<script defer src="/js/menu.js"></script>
	<script src="/js/jquery.js"></script>
	<script src="/js/bootstrap.min.js"></script>
	<!-- Always include the archive.js, but it doesn't do much unless we are an archive -->
	<script language="javascript">
	// Default to assuming this is an archive and hiding some stuff
	// See js/archive.js and js/docs.js for logic relating to this
	var isArchive = true;
	var dockerVersion = 'v18.09';
	// In archives, we need to know the page root and we get it from JEKYLL_ENV in the jekyll build command
	var jekyllEnv = 'development';
	// If unset (in non-archive branches), defaults to "development". In that case, reset it to empty
	if (jekyllEnv == 'development') {
		jekyllEnv = '';
	}
	var pageURL = jekyllEnv + '/get-started/part3/';
	</script>
	<script src="/js/archive.js"></script>
	<script src="/js/stickyfill.min.js"></script>
	<script defer src="/js/metadata.js"></script>
	<script src="/js/glossary.js"></script>
	<script src="/js/collections_tocs.js"></script>
	<script defer src="/js/docs.js"></script>
	<script defer src="/js/toc.js"></script>
	<script language="javascript">
	jQuery(document).ready(function(){
				hookupTOCEvents();
			});
	</script>
</body>

</html>
