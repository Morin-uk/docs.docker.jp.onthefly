<!-- Page generated 2019-04-30 08:10:32 +0000 -->
<!-- relative link basehrefs -->

	
	
	
		
			
		
	
		
			
			


<!-- Logic for 'edit this button' -->


	

	

	

	

	

	

	

	

	


<!-- End of logic for 'edit this button' -->


<!DOCTYPE html>
<html lang="ja">

<head>
	<base href="https://matsuand.github.io/docs.docker.jp.onthefly/get-started/" />
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<style type="text/css">
		@charset "UTF-8";
		[ng\:cloak],
		[ng-cloak],
		[data-ng-cloak],
		[x-ng-cloak],
		.ng-cloak,
		.x-ng-cloak,
		.ng-hide:not(.ng-hide-animate) {
			display: none !important;
		}

		ng\:form {
			display: block;
		}
	</style>
	<script type="text/javascript">
	  !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="4.0.0";
	  analytics.load("IWj9D0UpZHZdZUZX9jl98PcpBFWBnBMy");
	  analytics.page();
	  }}();
	</script>
	
	<!-- favicon -->
	<link rel="icon" type="image/x-icon" href="https://matsuand.github.io/docs.docker.jp.onthefly/favicons/docs@2x.ico" sizes="129x128">
	<meta name="msapplication-TileImage" content="https://matsuand.github.io/docs.docker.jp.onthefly/favicons/docs@2x.ico">
	<link rel="apple-touch-icon" type="image/x-icon" href="https://matsuand.github.io/docs.docker.jp.onthefly/favicons/docs@2x.ico" sizes="129x128">
	<meta property="og:image" content="https://matsuand.github.io/docs.docker.jp.onthefly/favicons/docs@2x.ico"/>
	<!-- metadata -->
	<meta property="og:type" content="website"/>
	<meta property="og:updated_time" itemprop="dateUpdated" content="2019-04-30T08:10:32+00:00"/>
	<meta property="og:image" itemprop="image primaryImageOfPage" content="https://matsuand.github.io/docs.docker.jp.onthefly/images/docs@2x.png"/>
	<meta name="twitter:card" content="summary"/>
	<meta name="twitter:domain" content="docs.docker.jp"/>
	<meta name="twitter:site" content="@docker_docs"/>
	<meta name="twitter:url" content="https://twitter.com/docker_docs"/>
	<meta name="twitter:title" itemprop="title name" content="はじめよう 2 部: コンテナー"/>
	<meta name="twitter:description" property="og:description" itemprop="description" content="1: 概要 2: コンテナー 3: サービス 4: スウォーム 5: スタック 6: アプリのデプロイ 前提条件 Docker バージョン 1.13 またはそれ以上をインストールしていること。 1 部 の概要を読んでいること。 以下のような簡単なコマンドを通じて、環境のセットアップ確認ができていること。 docker run hello-world はじめに Docker におけるアプリケーション構築を始めましょう。 アプリケーション階層の最下部となるところから始めることにします。 これがコンテナーであり、このページにて取り扱います。 このレベルの上位にあるのがサービスです。..." />
	<meta name="twitter:image:src" content="https://matsuand.github.io/docs.docker.jp.onthefly/images/docs@2x.png"/>
	<meta name="twitter:image:alt" content="Docker Documentation"/>
	<meta property="article:published_time" itemprop="datePublished" content="2019-04-30T08:10:32+00:00"/>

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="keywords" content="containers, python, code, coding, build, push, run">
	<link rel="stylesheet" href="https://matsuand.github.io/docs.docker.jp.onthefly/css/font-awesome.min.css">
	<link rel="stylesheet" href="https://matsuand.github.io/docs.docker.jp.onthefly/css/bootstrap.min.css">
	<link id="pygments" rel="stylesheet" href="https://matsuand.github.io/docs.docker.jp.onthefly/css/pygments/perldoc.css">
	<link id="pagestyle" rel="stylesheet" href="https://matsuand.github.io/docs.docker.jp.onthefly/css/style.css">

	<!-- Go get "Open Sans" font from Google -->
	<link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
	<!-- SEO stuff -->
	<title>はじめよう 2 部: コンテナー | Docker Documentation</title>
<meta property="og:title" content="はじめよう 2 部: コンテナー" />
<meta property="og:locale" content="ja_JP" />
<meta name="description" content="Docker 風に簡単なアプリを書き、ビルドし実行する方法を学びます。" />
<meta property="og:description" content="Docker 風に簡単なアプリを書き、ビルドし実行する方法を学びます。" />
<link rel="canonical" href="https://matsuand.github.io/docs.docker.jp.onthefly/get-started/part2/" />
<meta property="og:url" content="https://matsuand.github.io/docs.docker.jp.onthefly/get-started/part2/" />
<meta property="og:site_name" content="Docker Documentation" />
<script type="application/ld+json">
{"@context":"http://schema.org","@type":"WebPage","headline":"はじめよう 2 部: コンテナー","description":"Docker 風に簡単なアプリを書き、ビルドし実行する方法を学びます。","url":"https://matsuand.github.io/docs.docker.jp.onthefly/get-started/part2/"}</script>
	<!-- END SEO STUFF -->
	
	<script language="javascript">
	// Default to assuming this is an archive and hiding some stuff
	// See js/archive.js and js/docs.js for logic relating to this
	var isArchive = true;
	var dockerVersion = 'v18.09';
	</script>
</head>
<body ng-app="Docker" ng-controller="DockerController" class="colums">
	<header>
		 <nav class="nav-secondary navbar navbar-fixed-top">
    <!-- <div class="fan"></div> -->
    <div class="container-fluid">
        <div class="navbar-header">
            <a href="https://matsuand.github.io/docs.docker.jp.onthefly/"><img class="logo" src="https://matsuand.github.io/docs.docker.jp.onthefly/images/docker-docs-logo.svg" alt="Docker Docs" title="Docker Docs"></a>
        </div>
        <div class="navbar-collapse" aria-expanded="false" style="height: 1px;">
            <div class="search-form" id="search-div" style="visibility: hidden">
    <form class="search-form form-inline ng-pristine ng-valid" /id="searchForm" action="/docs.docker.jp.onthefly/search/">
        <input class="search-field form-control ds-input" id="st-search-input" value="" name="q" placeholder="文書内検索" type="search" autocomplete="off" spellcheck="false" dir="auto" style="position: relative; vertical-align: top;">
        <div id="autocompleteContainer">
            <div id="autocompleteResults"></div>
        </div>
        <!-- <button type="submit" class="search-submit btn btn-default">検索</button> -->
    </form>
</div>
<div class="sidebar-toggle">
    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
    </button>
</div>
<div class="nav-container">
    <div id="tabs">
        <ul class="tabs" id="jsTOCHorizontal">

        </ul>
    </div>
    <div class="ctrl-right hidden-xs hidden-sm">
        <a href="javascript:void(0)" id="menu-toggle"><i class="fa fa-indent" aria-hidden="true"></i></a>
        <div class="btn-group" style="visibility: hidden">
  <button type="button" class="btn btn-default dropdown-btn dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    Docker v18.09 (current)        <span class="caret"></span>
  </button>
  <ul class="dropdown-menu">
    <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/edge/">Docker edge</a></li><li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/v18.03/">Docker v18.03</a></li><li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/v17.12/">Docker v17.12</a></li><li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/v17.09/">Docker v17.09</a></li><li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/v17.06/">Docker v17.06</a></li><li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/v17.03/">Docker v17.03</a></li>
  </ul>
</div>

    </div>
</div>

        </div>
    </div>
</nav>

	</header>

	<div class="wrapper right-open">
		<div class="container-fluid">
			<div class="row">
				<div class="col-body">
					<main class="col-content content">
						<section class="section">
							
								
							<h1>はじめよう 2 部: コンテナー</h1>  <span class="reading-time" title="Estimated reading time">
  <span class="reading-time-label">読む時間の目安: </span>
  
  
    17 分
  
</span>

							
							
							<ul class="pagination">
  <li><a href="part1">1: 概要</a></li>
  <li class="active"><a href="part2">2: コンテナー</a></li>
  <li><a href="part3">3: サービス</a></li>
  <li><a href="part4">4: スウォーム</a></li>
  <li><a href="part5">5: スタック</a></li>
  <li><a href="part6">6: アプリのデプロイ</a></li>
</ul>

<h2 id="prerequisites">前提条件</h2>

<!--
- [Install Docker version 1.13 or higher](/engine/installation/).
- Read the orientation in [Part 1](/get-started/).
- Give your environment a quick test run to make sure you're all set up:
-->
<ul>
  <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/engine/installation/">Docker バージョン 1.13 またはそれ以上をインストールしていること</a>。</li>
  <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/get-started/">1 部</a> の概要を読んでいること。</li>
  <li>
    <p>以下のような簡単なコマンドを通じて、環境のセットアップ確認ができていること。</p>

    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run hello-world
</code></pre></div>    </div>
  </li>
</ul>

<h2 id="introduction">はじめに</h2>

<!--
It's time to begin building an app the Docker way. We start at the bottom of the hierarchy of such app, a container, which this page covers. Above this level is a service, which defines how containers behave in
production, covered in [Part 3](/get-started/part3/). Finally, at the top level is the
stack, defining the interactions of all the services, covered in
[Part 5](/get-started/part5/).
-->
<p>Docker におけるアプリケーション構築を始めましょう。
アプリケーション階層の最下部となるところから始めることにします。
これがコンテナーであり、このページにて取り扱います。
このレベルの上位にあるのがサービスです。
サービスは、アプリケーション実行中のコンテナーの動きを定義します。
このことは <a href="https://matsuand.github.io/docs.docker.jp.onthefly/get-started/part3/">3 部</a> で扱います。
最後に、最上位にあるのがスタックです。
サービス間の対話方法を定義します。
これは <a href="https://matsuand.github.io/docs.docker.jp.onthefly/get-started/part5/">5 部</a> で扱います。</p>

<!--
- Stack
- Services
- **Container** (you are here)
-->
<ul>
  <li>スタック</li>
  <li>サービス</li>
  <li><strong>コンテナー</strong> (いまここにいます)</li>
</ul>

<!--
## Your new development environment
-->
<h2 id="your-new-development-environment">新しい開発環境</h2>

<!--
In the past, if you were to start writing a Python app, your first
order of business was to install a Python runtime onto your machine. But,
that creates a situation where the environment on your machine needs to be
perfect for your app to run as expected, and also needs to match your production
environment.
-->
<p>Python アプリケーションを書き始めるにあたり、自分のマシン上に Python ランタイムをインストールするのが、これまでは一番初めの仕事でした。しかし、サーバー上でもアプリケーションが期待するとおりに問題なく動作するには、マシンと同じ環境を作成しなくてはいけません。</p>

<!--
With Docker, you can just grab a portable Python runtime as an image, no
installation necessary. Then, your build can include the base Python image
right alongside your app code, ensuring that your app, its dependencies, and the
runtime, all travel together.
-->
<p>Docker であれば、移動可能な Python ランタイムをイメージ内に収容しているため、インストールは不要です。
そして、ベース Python イメージにはアプリのコードも一緒に構築できますし、アプリを確実に動かすための依存関係やランタイムもすべて運べます。</p>

<!--
These portable images are defined by something called a `Dockerfile`.
-->
<p>移動可能なイメージは <code class="highlighter-rouge">Dockerfile</code> と呼ばれるファイルにより定義します。</p>

<!--
## Define a container with `Dockerfile`
-->
<h2 id="define-a-container-with-Dockerfile"><code class="highlighter-rouge">Dockerfile</code> によるコンテナー定義</h2>

<!--
`Dockerfile` defines what goes on in the environment inside your
container. Access to resources like networking interfaces and disk drives is
virtualized inside this environment, which is isolated from the rest of your
system, so you need to map ports to the outside world, and
be specific about what files you want to "copy in" to that environment. However,
after doing that, you can expect that the build of your app defined in this
`Dockerfile` behaves exactly the same wherever it runs.
-->
<p><code class="highlighter-rouge">Dockerfile</code> では、コンテナー内の環境で何をするかを定義します。
ネットワークインターフェースとディスクドライバーのようなリソースは、システム上の他の環境からは隔離された環境内に仮想化されています。
このようなリソースに接続するには、ポートを外の世界にマッピング（割り当て）する必要がありますし、どのファイルを環境に「複製」（copy in）するか指定する必要もあります。
しかしながら、これらの作業を <code class="highlighter-rouge">Dockerfile</code> における構築時の定義で済ませておけば、どこで実行しても同じ挙動となります。</p>

<h3 id="dockerfile"><code class="highlighter-rouge">Dockerfile</code></h3>

<!--
Create an empty directory on your local machine. Change directories (`cd`) into the new directory,
create a file called `Dockerfile`, copy-and-paste the following content into
that file, and save it. Take note of the comments that explain each statement in
your new Dockerfile.
-->
<p>空ディレクトリを作成します。
新しいディレクトリ内にディレクトリを変更（<code class="highlighter-rouge">cd</code>）し、<code class="highlighter-rouge">Dockerfile</code> という名前のファイルを作成し、以降の内容をファイルにコピー＆ペーストし、保存します。
なお、Dockerfile のコメントは、各命令文に対する説明です。</p>

<div class="language-dockerfile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 公式 Python ランタイムを親イメージとして使用</span>
<span class="k">FROM</span><span class="s"> python:2.7-slim</span>

<span class="c"># 作業ディレクトリを /app に設定</span>
<span class="k">WORKDIR</span><span class="s"> /app</span>

<span class="c"># 現在のディレクトリの内容を、コンテナー内の /app にコピー</span>
<span class="k">COPY</span><span class="s"> . /app</span>

<span class="c"># requirements.txt で指定された必要なパッケージをすべてインストール</span>
<span class="k">RUN </span>pip install <span class="nt">--trusted-host</span> pypi.python.org <span class="nt">-r</span> requirements.txt

<span class="c"># ポート 80 番をコンテナーの外の世界でも利用可能に</span>
<span class="k">EXPOSE</span><span class="s"> 80</span>

<span class="c"># 環境変数の定義</span>
<span class="k">ENV</span><span class="s"> NAME World</span>

<span class="c"># コンテナー起動時に app.py を実行</span>
<span class="k">CMD</span><span class="s"> ["python", "app.py"]</span>
</code></pre></div></div>

<!--
This `Dockerfile` refers to a couple of files we haven't created yet, namely
`app.py` and `requirements.txt`. Let's create those next.
-->
<p>この <code class="highlighter-rouge">Dockerfile</code> は、<code class="highlighter-rouge">app.py</code> と <code class="highlighter-rouge">requirements.txt</code> といった、まだ作成していないファイルを参照しています。
次はこれらを作りましょう。</p>

<!--
## The app itself
-->
<h2 id="the-app-itself">アプリそのもの</h2>

<!--
Create two more files, `requirements.txt` and `app.py`, and put them in the same
folder with the `Dockerfile`. This completes our app, which as you can see is
quite simple. When the above `Dockerfile` is built into an image, `app.py` and
`requirements.txt` is present because of that `Dockerfile`'s `COPY` command,
and the output from `app.py` is accessible over HTTP thanks to the `EXPOSE`
command.
-->
<p>さらに２つのファイルを作成します。
<code class="highlighter-rouge">requirements.txt</code> と <code class="highlighter-rouge">app.py</code> です。
これらを <code class="highlighter-rouge">Dockerfile</code> と同じフォルダに入れます。
アプリは見てのとおり、極めて単純になります。
先ほどの <code class="highlighter-rouge">Dockerfile</code> でイメージの構築時、 <code class="highlighter-rouge">Dockerfile</code> の <code class="highlighter-rouge">COPY</code> 命令で <code class="highlighter-rouge">app.py</code> と <code class="highlighter-rouge">requirements.txt</code> をイメージの中に組み込みます。</p>

<h3 id="requirementstxt"><code class="highlighter-rouge">requirements.txt</code></h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Flask
Redis
</code></pre></div></div>

<h3 id="apppy"><code class="highlighter-rouge">app.py</code></h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">redis</span> <span class="kn">import</span> <span class="n">Redis</span><span class="p">,</span> <span class="n">RedisError</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">socket</span>

<span class="c"># Redis に接続</span>
<span class="n">redis</span> <span class="o">=</span> <span class="n">Redis</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s">"redis"</span><span class="p">,</span> <span class="n">db</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">socket_connect_timeout</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">socket_timeout</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>

<span class="nd">@app.route</span><span class="p">(</span><span class="s">"/"</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">hello</span><span class="p">():</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">visits</span> <span class="o">=</span> <span class="n">redis</span><span class="o">.</span><span class="n">incr</span><span class="p">(</span><span class="s">"counter"</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">RedisError</span><span class="p">:</span>
        <span class="n">visits</span> <span class="o">=</span> <span class="s">"&lt;i&gt;cannot connect to Redis, counter disabled&lt;/i&gt;"</span>

    <span class="n">html</span> <span class="o">=</span> <span class="s">"&lt;h3&gt;Hello {name}!&lt;/h3&gt;"</span> \
           <span class="s">"&lt;b&gt;Hostname:&lt;/b&gt; {hostname}&lt;br/&gt;"</span> \
           <span class="s">"&lt;b&gt;Visits:&lt;/b&gt; {visits}"</span>
    <span class="k">return</span> <span class="n">html</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s">"NAME"</span><span class="p">,</span> <span class="s">"world"</span><span class="p">),</span> <span class="n">hostname</span><span class="o">=</span><span class="n">socket</span><span class="o">.</span><span class="n">gethostname</span><span class="p">(),</span> <span class="n">visits</span><span class="o">=</span><span class="n">visits</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s">'0.0.0.0'</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">80</span><span class="p">)</span>
</code></pre></div></div>

<!--
Now we see that `pip install -r requirements.txt` installs the Flask and Redis
libraries for Python, and the app prints the environment variable `NAME`, as
well as the output of a call to `socket.gethostname()`. Finally, because Redis
isn't running (as we've only installed the Python library, and not Redis
itself), we should expect that the attempt to use it here fails and produces
the error message.
-->
<p>先ほどの <code class="highlighter-rouge">pip install -r requirements.txt</code> で Python 用の Flask と Redis ライブラリをインストールします。
そして、アプリは環境変数 <code class="highlighter-rouge">NAME</code> を表示し、また <code class="highlighter-rouge">socket.gethostname()</code> を呼び出した結果も出力します。
しかしながら、 Redis は実行できないため（Python ライブラリをインストールしただけであり、 Redis 自身は入っていません）、実行を試みても失敗し、エラーメッセージを表示するでしょう。</p>

<!--
> **Note**: Accessing the name of the host when inside a container retrieves the
container ID, which is like the process ID for a running executable.
-->
<blockquote>
  <p><strong>メモ</strong>: コンテナー内でホスト名の取得を試みると、コンテナー ID を返します。
コンテナー ID は実行バイナリにおけるプロセス ID のようなものです。</p>
</blockquote>

<!--
That's it! You don't need Python or anything in `requirements.txt` on your
system, nor does building or running this image install them on your system. It
doesn't seem like you've really set up an environment with Python and Flask, but
you have.
-->
<p>以上です！
システム上に Python や <code class="highlighter-rouge">requirements.txt</code> に書かれているどれもが不要であり、それどころか、システム上にイメージの構築や実行も不要なのです。
一見しますと環境に Python と Flask をインストールしていませんが、すでに持っているのです。</p>

<!--
## Build the app
-->
<h2 id="build-the-app">アプリの構築</h2>

<!--
We are ready to build the app. Make sure you are still at the top level of your
new directory. Here's what `ls` should show:
-->
<p>アプリを構築する準備が整いました。
まだ、新しく作成したディレクトリのトップレベルにいるのを確認します。
ここでは <code class="highlighter-rouge">ls</code> は次のようになるでしょう。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">ls
</span>Dockerfile		app.py			requirements.txt
</code></pre></div></div>

<!--
Now run the build command. This creates a Docker image, which we're going to
name using the `--tag` option. Use `-t` if you want to use the shorter option.
-->
<p>次は構築コマンドを実行します。
これは Docker イメージを作成します。
イメージには分かりやすい名前として <code class="highlighter-rouge">--tag</code> オプションによりタグを指定します。
短いオプションとして <code class="highlighter-rouge">-t</code> を使っても構いません。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker build <span class="nt">--tag</span><span class="o">=</span>friendlyhello <span class="nb">.</span>
</code></pre></div></div>

<!--
Where is your built image? It's in your machine's local Docker image registry:
-->
<p>構築したイメージはどこにあるのでしょうか？
マシン上のローカルにある Docker イメージレジストリの中です。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker image <span class="nb">ls

</span>REPOSITORY            TAG                 IMAGE ID
friendlyhello         latest              326387cea398

</code></pre></div></div>

<!--
Note how the tag defaulted to `latest`. The full syntax for the tag option would
be something like `--tag=friendlyhello:v0.0.1`.
-->
<p>タグ名がデフォルトの <code class="highlighter-rouge">latest</code> となったことに注意してください。
タグオプションの適切な文法は <code class="highlighter-rouge">--tag=friendlyhello:v0.0.1</code> というものです。</p>

<!--
>  Troubleshooting for Linux users
>
> _Proxy server settings_
>
> Proxy servers can block connections to your web app once it's up and running.
> If you are behind a proxy server, add the following lines to your
> Dockerfile, using the `ENV` command to specify the host and port for your
> proxy servers:
>
> ```conf
> # Set proxy server, replace host:port with values for your servers
> ENV http_proxy host:port
> ENV https_proxy host:port
> ```
>
> _DNS settings_
>
> DNS misconfigurations can generate problems with `pip`. You need to set your
> own DNS server address to make `pip` work properly. You might want
> to change the DNS settings of the Docker daemon. You can edit (or create) the
> configuration file at `/etc/docker/daemon.json` with the `dns` key, as following:
>
> ```json
>{
>   "dns": ["your_dns_address", "8.8.8.8"]
>}
> ```
>
> In the example above, the first element of the list is the address of your DNS
> server. The second item is Google's DNS which can be used when the first one is
> not available.
>
> Before proceeding, save `daemon.json` and restart the docker service.
>
> `sudo service docker restart`
>
> Once fixed, retry to run the `build` command.
-->
<blockquote>
  <p>Linux ユーザー向けのトラブルシューティング</p>

  <p><em>Proxy サーバー設定</em></p>

  <p>プロキシーサーバーが稼動していると、ウェブアプリへの接続がブロックされることがあります。
プロキシーサーバーを動かしているなら、Dockerfile に以下の記述を追加してください。
これは <code class="highlighter-rouge">ENV</code> コマンドを使って、プロキシーサーバーのホストとポートを指定するものです。</p>

  <div class="language-conf highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># プロキシーサーバー設定、host:port 部分は各自のサーバー向けに置き換える
</span><span class="n">ENV</span> <span class="n">http_proxy</span> <span class="n">host</span>:<span class="n">port</span>
<span class="n">ENV</span> <span class="n">https_proxy</span> <span class="n">host</span>:<span class="n">port</span>
</code></pre></div>  </div>

  <p><em>DNS セッティング</em></p>

  <p>DNS 設定に誤りがあると <code class="highlighter-rouge">pip</code> において問題が発生することがあります。
<code class="highlighter-rouge">pip</code> を正しく動作させるためには、DNS サーバーアドレスを正しく設定する必要があります。
Docker デーモンの DNS 設定を変更することになります。
設定ファイル <code class="highlighter-rouge">/etc/docker/daemon.json</code> を編集（または新規生成）し、以下のように <code class="highlighter-rouge">dns</code> キーを加えます。</p>

  <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"dns"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"your_dns_address"</span><span class="p">,</span><span class="w"> </span><span class="s2">"8.8.8.8"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>  </div>

  <p>上の例においてリストの 1 つめは DNS サーバーのアドレスです。
また 2 つめは Google の DNS サーバーのアドレスであり、1 つめが利用できないときに利用されます。</p>

  <p>設定を有効にするには <code class="highlighter-rouge">daemon.json</code> を保存し、docker サービスを再起動します。</p>

  <p><code class="highlighter-rouge">sudo service docker restart</code></p>

  <p>設定ができたら、再度 <code class="highlighter-rouge">build</code> コマンドを実行します。</p>
</blockquote>

<!--
## Run the app
-->
<h2 id="run-the-app">アプリの実行</h2>

<!--
Run the app, mapping your machine's port 4000 to the container's published port
80 using `-p`:
-->
<p>アプリの実行にあたり、マシン側のポート 4000 をコンテナーの公開ポート 80 に割り当てるには <code class="highlighter-rouge">-p</code> を使います。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run <span class="nt">-p</span> 4000:80 friendlyhello
</code></pre></div></div>

<!--
You should see a message that Python is serving your app at `http://0.0.0.0:80`.
But that message is coming from inside the container, which doesn't know you
mapped port 80 of that container to 4000, making the correct URL
`http://localhost:4000`.
-->
<p>Python がアプリに提供するのは <code class="highlighter-rouge">http://0.0.0.0:80</code> であることに注意して下さい。
しかしこれはコンテナー内で表示されるメッセージであり、コンテナー内からはコンテナーのポート 80 番からポート 4000 への割り当ては分かりません。
適切な URL は <code class="highlighter-rouge">http://localhost:4000</code> です。</p>

<!--
Go to that URL in a web browser to see the display content served up on a
web page.
-->
<p>ウェブブラウザーで URL を開いて、出力内容がウェブページに表示されていることを確認してください。</p>

<p><img src="https://matsuand.github.io/docs.docker.jp.onthefly/get-started/images/app-in-browser.png" alt="Hello World in browser" /></p>

<!--
> **Note**: If you are using Docker Toolbox on Windows 7, use the Docker Machine IP
> instead of `localhost`. For example, http://192.168.99.100:4000/. To find the IP
> address, use the command `docker-machine ip`.
-->
<blockquote>
  <p><strong>メモ</strong>: Windows 7 上でDocker Toolbox を利用している場合は、<code class="highlighter-rouge">localhost</code> ではなく Docker Machine の IP アドレスを利用してください。
たとえば http://192.168.99.100:4000/ といった具合です。
IP アドレスを調べるには <code class="highlighter-rouge">docker-machine ip</code> コマンドを実行します。</p>
</blockquote>

<!--
You can also use the `curl` command in a shell to view the same content.
-->
<p>シェル上で <code class="highlighter-rouge">curl</code> コマンドを実行しても、同じ内容を表示します。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>curl http://localhost:4000

&lt;h3&gt;Hello World!&lt;/h3&gt;&lt;b&gt;Hostname:&lt;/b&gt; 8fc990912a14&lt;br/&gt;&lt;b&gt;Visits:&lt;/b&gt; &lt;i&gt;cannot connect to Redis, counter disabled&lt;/i&gt;
</code></pre></div></div>

<!--
This port remapping of `4000:80` demonstrates the difference
between `EXPOSE` within the `Dockerfile` and what the `publish` value is set to when running
`docker run -p`. In later steps, map port 4000 on the host to port 80
in the container and use `http://localhost`.
-->
<p>このポート <code class="highlighter-rouge">4000:80</code> の再割り当ては、<code class="highlighter-rouge">Dockerfile</code>の <code class="highlighter-rouge">EXPOSE</code> での指定とは異なるポートを指定できるデモです。
ここでは、<code class="highlighter-rouge">docker run -p</code> で何を公開（<code class="highlighter-rouge">publish</code>）するかを指定しました。
後の手順では、ホストのポート 80 をコンテナー内のポート 80 に割り当て、<code class="highlighter-rouge">http://localhost</code> で接続します。</p>

<!--
Hit `CTRL+C` in your terminal to quit.
-->
<p>ターミナル上で <code class="highlighter-rouge">CTRL+C</code> を実行し、終了します。</p>

<!--
 > On Windows, explicitly stop the container
 >
 > On Windows systems, `CTRL+C` does not stop the container. So, first
 type `CTRL+C` to get the prompt back (or open another shell), then type
 `docker container ls` to list the running containers, followed by
 `docker container stop <Container NAME or ID>` to stop the
 container. Otherwise, you get an error response from the daemon
 when you try to re-run the container in the next step.
-->
<blockquote>
  <p>Windows においてはコンテナーを明示的に停止</p>

  <p>Windows システムでは <code class="highlighter-rouge">CTRL+C</code> を入力してもコンテナーを止めることはできません。
このため、まず <code class="highlighter-rouge">CTRL+C</code> を入力してプロンプトに戻り（あるいは別のシェルを起動して）、
<code class="highlighter-rouge">docker container ls</code> を入力して実行中のコンテナーを確認します。
そして <code class="highlighter-rouge">docker container stop &lt;コンテナー名 または コンテナー ID&gt;</code> を入力してコンテナーを停止させます。
こうしておかないと、次にコンテナーを再起動しようとしたときに、デーモンがエラーを出力することになります。</p>
</blockquote>

<!--
Now let's run the app in the background, in detached mode:
-->
<p>次はアプリをバックグラウンドで起動するため、デタッチモード（detached mode）で実行します。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run <span class="nt">-d</span> <span class="nt">-p</span> 4000:80 friendlyhello
</code></pre></div></div>

<!--
You get the long container ID for your app and then are kicked back to your
terminal. Your container is running in the background. You can also see the
abbreviated container ID with `docker container ls` (and both work interchangeably when
running commands):
-->
<p>コマンドを実行しますと、アプリの長いコンテナー ID を表示し、ターミナルに戻ります。
コンテナーはバックグラウンドで実行中です。
なお、<code class="highlighter-rouge">docker container ls</code> で短縮コンテナー ID を確認できます（コマンド実行時は、長いコンテナー ID と短縮 ID のどちらも利用できます）。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker container <span class="nb">ls
</span>CONTAINER ID        IMAGE               COMMAND             CREATED
1fa4ab2cf395        friendlyhello       <span class="s2">"python app.py"</span>     28 seconds ago
</code></pre></div></div>

<!--
Notice that `CONTAINER ID` matches what's on `http://localhost:4000`.
-->
<p>このように <code class="highlighter-rouge">http://localhost:4000</code> で表示したものと同じコンテナー ID （<code class="highlighter-rouge">CONTAINER ID</code>）が表示されます。</p>

<!--
Now use `docker container stop` to end the process, using the `CONTAINER ID`, like so:
-->
<p>あとは、プロセスを停止するために <code class="highlighter-rouge">docker stop</code> コマンドでコンテナー ID を次のように指定します。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker container stop 1fa4ab2cf395
</code></pre></div></div>

<!--
## Share your image
-->
<h2 id="share-your-image">イメージの共有</h2>

<!--
To demonstrate the portability of what we just created, let's upload our built
image and run it somewhere else. After all, you need to know how to push to
registries when you want to deploy containers to production.
-->
<p>生成したばかりのイメージの可搬性を示すため、このイメージを別のところにアップロードしてみます。
なお、コンテナーを本番環境へデプロイするには、レジストリへ送信する方法を知っておく必要があります。</p>

<!--
A registry is a collection of repositories, and a repository is a collection of
images&#8212;sort of like a GitHub repository, except the code is already built.
An account on a registry can create many repositories. The `docker` CLI uses
Docker's public registry by default.
-->
<p>レジストリというものはレポジトリの集まりのことです。
そのレポジトリとはイメージの集まりです。
GitHub リポジトリのようなものです。
ただしコードのビルドがすでに済んでいるというところが GitHub とは違います。
レジストリのアカウントからはレポジトリをたくさん作ることができます。
<code class="highlighter-rouge">docker</code> CLI はデフォルトとして Docker 公開リポジトリを利用します。</p>

<!--
> **Note**: We use Docker's public registry here just because it's free
and pre-configured, but there are many public ones to choose from, and you can
even set up your own private registry using [Docker Trusted
Registry](/datacenter/dtr/2.2/guides/).
-->
<blockquote>
  <p><strong>メモ</strong>: Docker 公開リポジトリをここで利用するのは、これが無償であり事前に設定されているものだからです。
ただし公開リポジトリは他にもあるので自由に選んでください。
あるいは <a href="https://matsuand.github.io/docs.docker.jp.onthefly/datacenter/dtr/2.2/guides/">Docker Trusted Registry</a> を利用すれば、独自のプライベートレジストリを設定することもできます。</p>
</blockquote>

<!--
### Log in with your Docker ID
-->
<h3 id="log-in-with-your-docker-id">Docker ID でログイン</h3>

<!--
If you don't have a Docker account, sign up for one at
[hub.docker.com](https://hub.docker.com){: target="_blank" class="_" }.
Make note of your username.
-->
<p>Docker アカウントを持っていない方は、<a href="https://hub.docker.com" target="_blank" class="_">hub.docker.com</a>
にサインアップして取得してください。
ユーザー名は控えておいてください。</p>

<!--
Log in to the Docker public registry on your local machine.
-->
<p>ローカルマシンから Docker の公開レジストリへログインします。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker login
</code></pre></div></div>

<!--
### Tag the image
-->
<h3 id="tag-the-image">イメージへのタグづけ</h3>

<!--
The notation for associating a local image with a repository on a registry is
`username/repository:tag`. The tag is optional, but recommended, since it is
the mechanism that registries use to give Docker images a version. Give the
repository and tag meaningful names for the context, such as
`get-started:part2`. This puts the image in the `get-started` repository and
tag it as `part2`.
-->
<p>レジストリ内のレポジトリをローカルイメージに関連づけるには <code class="highlighter-rouge">username/repository:tag</code> という書き方をします。
タグ（tag）はオプションですが、指定することが推奨されます。
というのも、これによってレジストリが Docker イメージに対してバージョンを与える方法となるからです。
状況に合わせてレポジトリとタグには、たとえば <code class="highlighter-rouge">get-started:part2</code> といったように意味を持つ名前をつけてください。
これによりそのイメージが <code class="highlighter-rouge">get-started</code> レポジトリ内に <code class="highlighter-rouge">part2</code> というタグがつけられた上で保存されます。</p>

<!--
Now, put it all together to tag the image. Run `docker tag image` with your
username, repository, and tag names so that the image uploads to your
desired destination. The syntax of the command is:
-->
<p>そこでイメージにタグをつけます。
<code class="highlighter-rouge">docker tag image</code> の実行時にユーザー名、リポジトリ名、タグ名を指定します。
イメージは指定した名前でアップロードされます。
このコマンドの文法は以下のとおりです。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker tag image username/repository:tag
</code></pre></div></div>

<!--
For example:
-->
<p>例：</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker tag friendlyhello gordon/get-started:part2
</code></pre></div></div>

<!--
Run [docker image ls](/engine/reference/commandline/image_ls/) to see your newly
tagged image.
-->
<p><a href="https://matsuand.github.io/docs.docker.jp.onthefly/engine/reference/commandline/image_ls/">docker image ls</a> を実行して、タグづけした新しいイメージを確認してみます。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker image <span class="nb">ls

</span>REPOSITORY               TAG                 IMAGE ID            CREATED             SIZE
friendlyhello            latest              d9e555c53008        3 minutes ago       195MB
gordon/get-started         part2               d9e555c53008        3 minutes ago       195MB
python                   2.7-slim            1c7128a655f6        5 days ago          183MB
...
</code></pre></div></div>

<!--
### Publish the image
-->
<h3 id="publish-the-image">イメージの公開</h3>

<!--
Upload your tagged image to the repository:
-->
<p>タグづけされたイメージをリポジトリにアップロードします。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker push username/repository:tag
</code></pre></div></div>

<!--
Once complete, the results of this upload are publicly available. If you log in
to [Docker Hub](https://hub.docker.com/), you see the new image there, with
its pull command.
-->
<p>上のコマンドが成功すれば、アップロードした結果が公開され利用可能となります。
<a href="https://hub.docker.com/">Docker Hub</a> にログインすれば、新しいイメージがアップロードされているのを確認できます。
これは pull コマンドで取得可能です。</p>

<!--
### Pull and run the image from the remote repository
-->
<h3 id="pull-and-run-the-image-from-the-remote-repository">リモートリポジトリからのイメージの取得と実行</h3>

<!--
From now on, you can use `docker run` and run your app on any machine with this
command:
-->
<p>ここからは <code class="highlighter-rouge">docker run</code> を利用していきます。
どのマシン上であっても、アプリの実行にはこのコマンドを使います。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run <span class="nt">-p</span> 4000:80 username/repository:tag
</code></pre></div></div>

<!--
If the image isn't available locally on the machine, Docker pulls it from
the repository.
-->
<p>ローカルマシン上にそのイメージがない場合、Docker はリポジトリからイメージを取得します。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>docker run <span class="nt">-p</span> 4000:80 gordon/get-started:part2
Unable to find image <span class="s1">'gordon/get-started:part2'</span> locally
part2: Pulling from gordon/get-started
10a267c67f42: Already exists
f68a39a6a5e4: Already exists
9beaffc0cf19: Already exists
3c1fe835fb6b: Already exists
4c9f1fa8fcb8: Already exists
ee7d8f576a14: Already exists
fbccdcced46e: Already exists
Digest: sha256:0601c866aab2adcc6498200efd0f754037e909e5fd42069adeff72d1e2439068
Status: Downloaded newer image <span class="k">for </span>gordon/get-started:part2
 <span class="k">*</span> Running on http://0.0.0.0:80/ <span class="o">(</span>Press CTRL+C to quit<span class="o">)</span>
</code></pre></div></div>

<!--
No matter where `docker run` executes, it pulls your image, along with Python
and all the dependencies from `requirements.txt`, and runs your code. It all
travels together in a neat little package, and you don't need to install
anything on the host machine for Docker to run it.
-->
<p><code class="highlighter-rouge">docker run</code> をどこで実行してもイメージが取得できます。
しかも <code class="highlighter-rouge">requirements.txt</code> に書かれた Python や依存パッケージもすべて含まれていて、アプリコードも実行できます。
すっきりとまとまったこのパッケージはどこにでも持ち運びできて、
Docker を実行するからといって、ホストマシンには何もインストールする必要がないのです。</p>

<!--
## Conclusion of part two
-->
<h2 id="conclusion-of-part-two">2 部のまとめ</h2>

<!--
That's all for this page. In the next section, we learn how to scale our
application by running this container in a **service**.
-->
<p>このページの内容はここまでです。
次はアプリケーションをスケールアップして、コンテナーを<strong>サービス</strong>として起動することを学びます。</p>

<!--
[Continue to Part 3 >>](/get-started/part3/){: class="button outline-btn"}
-->
<p><a href="https://matsuand.github.io/docs.docker.jp.onthefly/get-started/part3/" class="button outline-btn">3 部へ &gt;&gt;</a></p>

<!--
Or, learn how to [launch your container on your own machine using Digital Ocean](https://matsuand.github.io/docs.docker.jp.onthefly/machine/examples/ocean/){: target="_blank" class="_" }.
-->
<p>あるいは <a href="https://matsuand.github.io/docs.docker.jp.onthefly/machine/examples/ocean/" target="_blank" class="_">Digital Ocean を使って自マシン内でコンテナーを起動する</a> 方法もあります。</p>

<!--
## Recap and cheat sheet (optional)
-->
<h2 id="recap-and-cheat-sheet-optional">まとめと早見表（おまけ）</h2>

<!--
Here's [a terminal recording of what was covered on this
page](https://asciinema.org/a/blkah0l4ds33tbe06y4vkme6g):
-->
<p><a href="https://asciinema.org/a/blkah0l4ds33tbe06y4vkme6g">このページで扱った端末操作の録画</a> がこちらです。</p>

<script type="text/javascript" src="https://asciinema.org/a/blkah0l4ds33tbe06y4vkme6g.js" id="asciicast-blkah0l4ds33tbe06y4vkme6g" speed="2" async=""></script>

<!--
Here is a list of the basic Docker commands from this page, and some related
ones if you'd like to explore a bit before moving on.
-->
<p>このページで扱った基本的な Docker コマンドの一覧を示します。
またこの先に進むにあたって必要となりそうな関連コマンドも示します。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker build <span class="nt">-t</span> friendlyhello <span class="nb">.</span>                 <span class="c"># Dockerfileのディレクトリにてイメージ生成</span>
docker run <span class="nt">-p</span> 4000:80 friendlyhello  <span class="c"># "friendlyname" の実行; ポート 4000 を 80 に割り当て</span>
docker run <span class="nt">-d</span> <span class="nt">-p</span> 4000:80 friendlyhello                        <span class="c"># 同上、ただしデタッチモード</span>
docker container <span class="nb">ls</span>                                         <span class="c"># 実行中のコンテナー一覧の表示</span>
docker container <span class="nb">ls</span> <span class="nt">-a</span>                      <span class="c"># 実行していないものを含めコンテナー一覧の表示</span>
docker container stop &lt;<span class="nb">hash</span><span class="o">&gt;</span>                                  <span class="c"># 指定コンテナーを適切に停止</span>
docker container <span class="nb">kill</span> &lt;<span class="nb">hash</span><span class="o">&gt;</span>                          <span class="c"># 指定コンテナーを強制シャットダウン</span>
docker container rm &lt;<span class="nb">hash</span><span class="o">&gt;</span>                                <span class="c"># マシンから指定コンテナーを削除</span>
docker container rm <span class="k">$(</span>docker container <span class="nb">ls</span> <span class="nt">-a</span> <span class="nt">-q</span><span class="k">)</span>                  <span class="c"># コンテナーをすべて削除</span>
docker image <span class="nb">ls</span> <span class="nt">-a</span>                                    <span class="c"># マシン上のイメージすべての一覧表示</span>
docker image rm &lt;image id&gt;                                  <span class="c"># マシン上の指定イメージを削除</span>
docker image rm <span class="k">$(</span>docker image <span class="nb">ls</span> <span class="nt">-a</span> <span class="nt">-q</span><span class="k">)</span>                <span class="c"># マシン上からイメージすべてを削除</span>
docker login                                         <span class="c"># CLIセッションによりDockerへログイン</span>
docker tag &lt;image&gt; username/repository:tag   <span class="c"># レジストリアップロードにて&lt;image&gt;にタグづけ</span>
docker push username/repository:tag             <span class="c"># タグつきイメージをレジストリアップロード</span>
docker run username/repository:tag                            <span class="c"># レジストリからイメージ実行</span>
</code></pre></div></div>

							<!-- tags -->
							
							
							
							<span class="glyphicon glyphicon-tags" style="padding-right: 10px"></span><span style="vertical-align: 2px"><a href="https://matsuand.github.io/docs.docker.jp.onthefly/glossary/?term=containers">containers</a>, <a href="https://matsuand.github.io/docs.docker.jp.onthefly/glossary/?term=python">python</a>, <a href="https://matsuand.github.io/docs.docker.jp.onthefly/glossary/?term=code">code</a>, <a href="https://matsuand.github.io/docs.docker.jp.onthefly/glossary/?term=coding">coding</a>, <a href="https://matsuand.github.io/docs.docker.jp.onthefly/glossary/?term=build">build</a>, <a href="https://matsuand.github.io/docs.docker.jp.onthefly/glossary/?term=push">push</a>, <a href="https://matsuand.github.io/docs.docker.jp.onthefly/glossary/?term=run">run</a></span>
							
							<!-- link corrections -->
              <script language="JavaScript">
							var x = document.links.length;
							var baseHref = document.getElementsByTagName('base')[0].href
							for (i = 0; i < x; i++) {
							  var munged = false;
							  var thisHREF = document.links[i].href;
							  var originalURL = "/get-started/part2/";
							  if (thisHREF.indexOf(baseHref + "#") > -1) {
							    // hash fix
							    //console.log('BEFORE: base:',baseHref,'thisHREF:',thisHREF,'originalURL:',originalURL);
							    thisHREF = originalURL + thisHREF.replace(baseHref, "");
							    //console.log('AFTER: base:',baseHref,'thisHREF:',thisHREF,'originalURL:',originalURL);
							  }
							  if ((thisHREF.indexOf(window.location.hostname) > -1 || thisHREF.indexOf('http') == -1) && document.links[i].className.indexOf("nomunge") < 0) {
							    munged = true;
							    thisHREF = thisHREF.replace(".md", "/").replace("/index/", "/");
							    document.links[i].setAttribute('href', thisHREF);
							  }
							}
							</script>
							
						  <div id="ratings-div" style="color:#b9c2cc; text-align: center; margin-top: 150px; visibility: hidden">
								<div id="pd_rating_holder_8453675"></div>
								<script type="text/javascript">
									PDRTJS_settings_8453675 = {
										"id": "8453675",
										"unique_id": "get-started/part2.md",
										"title": "はじめよう 2 部: コンテナー",
										"permalink": "https://github.com/docker/docker.github.io/blob/master/get-started/part2.md"
									};
									(function(d, c, j) {
										if (!document.getElementById(j)) {
											var pd = d.createElement(c),
												s;
											pd.id = j;
											pd.src = ('https:' == document.location.protocol) ? 'https://polldaddy.com/js/rating/rating.js' : 'http://i0.poll.fm/js/rating/rating.js';
											s = document.getElementsByTagName(c)[0];
											s.parentNode.insertBefore(pd, s);
										}
									}(document, 'script', 'pd-rating-js'));
								</script>
							</div>
							
						</section>
					</main>
					<nav class="col-nav">
						<div id="sidebar-nav" class="sidebar hidden-sm hidden-xs">
						<div id="navbar" class="nav-sidebar">
    <ul class="nav" id="jsTOCLeftNav">
    </ul>
</div>

						</div>
					</nav>
					<div class="col-toc">
							<div class="sidebar hidden-xs hidden-sm">
							<div class="toc-nav">
								<div class="feedback-links">
									<ul>
										
										<li style="visibility: hidden"><a href="https://github.com/matsuand/docs.docker.jp/edit/v18.09.local/get-started/part2.md"><i class="fa fa-pencil-square-o" aria-hidden="true"></i> このページの編集</a></li>
										<li><a href="https://github.com/matsuand/docs.docker.jp.onthefly/issues/new?body=File: [get-started/part2.md](https://matsuand.github.io/docs.docker.jp.onthefly/get-started/part2/)"
															class="nomunge"><i class="fa fa-check" aria-hidden="true"></i> 文書変更のリクエスト</a></li>
										<li><a href="https://success.docker.com/support"><i class="fa fa-question" aria-hidden="true"></i> サポート依頼</a></li>
										<!-- toggle mode -->
										<li>
											<div class="toggle-mode">
												<div class="icon">
													<i class="fa fa-sun-o" aria-hidden="true"></i>
												</div>
												<div class="toggle-switch">
													<label class="switch">
														<input type="checkbox" id="switch-style">
														<div class="slider round"></div>
												</label>
												</div>
												<div class="icon">
													<i class="fa fa-moon-o" aria-hidden="true"></i>
												</div>
											</div>
										</li>
									</ul>
								</div>
								   
									<div id="side-toc-title">本ページ内</div>
									
<ul id="my_toc" class="inline_toc">
  <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/get-started/part2/#prerequisites" class="nomunge">前提条件</a></li>
  <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/get-started/part2/#introduction" class="nomunge">はじめに</a></li>
  <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/get-started/part2/#your-new-development-environment" class="nomunge">新しい開発環境</a></li>
  <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/get-started/part2/#define-a-container-with-Dockerfile" class="nomunge">Dockerfile によるコンテナー定義</a>
    <ul>
      <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/get-started/part2/#dockerfile" class="nomunge">Dockerfile</a></li>
    </ul>
  </li>
  <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/get-started/part2/#the-app-itself" class="nomunge">アプリそのもの</a>
    <ul>
      <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/get-started/part2/#requirementstxt" class="nomunge">requirements.txt</a></li>
      <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/get-started/part2/#apppy" class="nomunge">app.py</a></li>
    </ul>
  </li>
  <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/get-started/part2/#build-the-app" class="nomunge">アプリの構築</a></li>
  <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/get-started/part2/#run-the-app" class="nomunge">アプリの実行</a></li>
  <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/get-started/part2/#share-your-image" class="nomunge">イメージの共有</a>
    <ul>
      <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/get-started/part2/#log-in-with-your-docker-id" class="nomunge">Docker ID でログイン</a></li>
      <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/get-started/part2/#tag-the-image" class="nomunge">イメージへのタグづけ</a></li>
      <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/get-started/part2/#publish-the-image" class="nomunge">イメージの公開</a></li>
      <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/get-started/part2/#pull-and-run-the-image-from-the-remote-repository" class="nomunge">リモートリポジトリからのイメージの取得と実行</a></li>
    </ul>
  </li>
  <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/get-started/part2/#conclusion-of-part-two" class="nomunge">2 部のまとめ</a></li>
  <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/get-started/part2/#recap-and-cheat-sheet-optional" class="nomunge">まとめと早見表（おまけ）</a></li>
</ul>


								</div>
								
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	
	<footer class="footer">
		  
    <div class="container">
        <div class="top_footer">
            <div class="row">
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><a href="https://www.docker.com/what-docker">What is Docker</a></li>
                        <li><a href="https://www.docker.com/what-container">What is a Container</a></li>
                        <li><a href="https://www.docker.com/use-cases">Use Cases</a></li>
                        <li><a href="https://www.docker.com/customers">Customers</a></li>
                        <li><a href="https://www.docker.com/partners/partner-program">Partners</a></li>
                        <li class="break"><a href="https://www.docker.com/industry-government">For Government</a></li>
                        <li><a href="https://www.docker.com/company">About Docker</a></li>
                        <li><a href="https://www.docker.com/company/management">Management</a></li>
                        <li><a href="https://www.docker.com/company/news-and-press">Press &amp; News</a></li>
                        <li><a href="https://www.docker.com/careers">Careers</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><a href="https://www.docker.com/products/overview">Product</a></li>
                        <li><a href="https://www.docker.com/pricing">Pricing</a></li>
                        <li><a href="https://www.docker.com/docker-community">Community Edition</a></li>
                        <li class="break"><a href="https://www.docker.com/enterprise">Enterprise Edition </a></li>
                        <li><a href="https://www.docker.com/products/docker-datacenter">Docker Datacenter</a></li>
                        <li><a href="https://hub.docker.com/">Docker Hub</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/">Documentation</a></li>
                        <li><a href="https://www.docker.com/docker">Learn</a></li>
                        <li><a href="https://blog.docker.com" target="_blank">Blog</a></li>
                        <li><a href="https://engineering.docker.com" target="_blank">Engineering Blog</a></li>
                        <li><a href="https://training.docker.com/" target="_blank">Training</a></li>
                        <li><a href="https://success.docker.com/support">Support</a></li>
                        <li><a href="https://success.docker.com/kbase">Knowledge Base</a></li>
                        <li><a href="https://www.docker.com/products/resources">Resources</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><a href="https://www.docker.com/docker-community">Community</a></li>
                        <li><a href="https://www.docker.com/technologies/overview">Open Source</a></li>
                        <li><a href="https://www.docker.com/community/events">Events</a></li>
                        <li><a href="https://forums.docker.com/" target="_blank">Forums</a></li>
                        <li><a href="https://www.docker.com/community/docker-captains">Docker Captains</a></li>
                        <li><a href="https://www.docker.com/docker-community/scholarships">Scholarships</a></li>
                        <li><a href="https://blog.docker.com/curated/">Community News</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-nav">
                <nav class="footer_sub_nav">
                    <ul class="menu">
                        <li><a href="http://status.docker.com/">Status</a></li>
                        <li><a href="https://www.docker.com/docker-security">Security</a></li>
                        <li><a href="https://www.docker.com/legal">Legal</a></li>
                        <li><a href="https://www.docker.com/company/contact">Contact</a></li>
                    </ul>
                </nav>
            </div>
        </div>
        <div class="bottom_footer">
            <div class="footer-copyright col-xs-12 col-md-8">
                <p class="copyright">
                    Copyright &copy; 2019 Docker Inc. All rights reserved. </p>
            </div>
            <div class="footer_social_nav">
                <ul class="nav-social">
                    <li class="fa fa-twitter"><a href="http://twitter.com/docker">Twitter</a></li>
                    <li class="fa fa-youtube"><a href="http://www.youtube.com/user/dockerrun">Youtube</a></li>
                    <li class="fa fa-google-plus"><a href="https://plus.google.com/u/0/communities/108146856671494713993">Google</a></li>
                    <li class="fa fa-github"><a href="https://github.com/docker/docker">Github</a></li>
                    <li class="fa fa-linkedin"><a href="https://www.linkedin.com/company/docker">Linkedin</a></li>
                    <li class="fa fa-facebook"><a href="https://www.facebook.com/docker.run">Facebook</a></li>
                    <li class="fa fa-reddit"><a href="http://www.reddit.com/r/docker">Reddit</a></li>
                    <li class="fa fa-slideshare"><a href="http://www.slideshare.net/docker">Slideshare</a></li>
                </ul>
            </div>
        </div>
    </div>

	</footer>
	<link rel="stylesheet" href="https://matsuand.github.io/docs.docker.jp.onthefly/css/github.css">
	
	<!-- <script src="https://matsuand.github.io/docs.docker.jp.onthefly/js/anchorlinks.js"></script> -->
	<script defer src="https://matsuand.github.io/docs.docker.jp.onthefly/js/menu.js"></script>
	<script src="https://matsuand.github.io/docs.docker.jp.onthefly/js/jquery.js"></script>
	<script src="https://matsuand.github.io/docs.docker.jp.onthefly/js/bootstrap.min.js"></script>
	<!-- Always include the archive.js, but it doesn't do much unless we are an archive -->
	<script language="javascript">
	// Default to assuming this is an archive and hiding some stuff
	// See js/archive.js and js/docs.js for logic relating to this
	var isArchive = true;
	var dockerVersion = 'v18.09';
	// In archives, we need to know the page root and we get it from JEKYLL_ENV in the jekyll build command
	var jekyllEnv = 'development';
	// If unset (in non-archive branches), defaults to "development". In that case, reset it to empty
	if (jekyllEnv == 'development') {
		jekyllEnv = '';
	}
	var pageURL = jekyllEnv + '/get-started/part2/';
	</script>
	<script src="https://matsuand.github.io/docs.docker.jp.onthefly/js/archive.js"></script>
	<script src="https://matsuand.github.io/docs.docker.jp.onthefly/js/stickyfill.min.js"></script>
	<script defer src="https://matsuand.github.io/docs.docker.jp.onthefly/js/metadata.js"></script>
	<script src="https://matsuand.github.io/docs.docker.jp.onthefly/js/glossary.js"></script>
	<script src="https://matsuand.github.io/docs.docker.jp.onthefly/js/collections_tocs.js"></script>
	<script defer src="https://matsuand.github.io/docs.docker.jp.onthefly/js/docs.js"></script>
	<script defer src="https://matsuand.github.io/docs.docker.jp.onthefly/js/toc.js"></script>
	<script language="javascript">
	jQuery(document).ready(function(){
				hookupTOCEvents();
			});
	</script>
</body>

</html>
