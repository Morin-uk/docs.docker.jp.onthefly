<!-- Page generated 2020-03-27 18:38:29 +0900 -->
<!-- relative link basehrefs -->

	
	
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
			


<!-- Logic for 'edit this button' -->


	

	

	

	

	

	

	

	

	


<!-- End of logic for 'edit this button' -->


<!DOCTYPE html>
<html lang="ja">

<head>
	<base href="docs.docker.jp.onthefly/ee/ucp/kubernetes/storage/" />
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<style type="text/css">
		@charset "UTF-8";
		[ng\:cloak],
		[ng-cloak],
		[data-ng-cloak],
		[x-ng-cloak],
		.ng-cloak,
		.x-ng-cloak,
		.ng-hide:not(.ng-hide-animate) {
			display: none !important;
		}

		ng\:form {
			display: block;
		}
	</style>
	<!-- Google Tag Manager -->
	<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
	new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
	j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
	'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-WL2QLG5');</script>
	<!-- End Google Tag Manager -->
	
	<!-- favicon -->
	<link rel="icon" type="image/x-icon" href="docs.docker.jp.onthefly/favicons/docs@2x.ico" sizes="129x128">
	<meta name="msapplication-TileImage" content="docs.docker.jp.onthefly/favicons/docs@2x.ico">
	<link rel="apple-touch-icon" type="image/x-icon" href="docs.docker.jp.onthefly/favicons/docs@2x.ico" sizes="129x128">
	<meta property="og:image" content="docs.docker.jp.onthefly/favicons/docs@2x.ico"/>
	<!-- metadata -->
	<meta property="og:type" content="website"/>
	<meta property="og:updated_time" itemprop="dateUpdated" content="2020-03-27T18:38:29+09:00"/>
	<meta property="og:image" itemprop="image primaryImageOfPage" content="docs.docker.jp.onthefly/images/docs@2x.png"/>
	<meta name="twitter:card" content="summary"/>
	<meta name="twitter:domain" content="docs.docker.jp"/>
	<meta name="twitter:site" content="@docker_docs"/>
	<meta name="twitter:url" content="https://twitter.com/docker_docs"/>
	<meta name="twitter:title" itemprop="title name" content="Configuring Azure Files Storage for Kubernetes"/>
	<meta name="twitter:description" property="og:description" itemprop="description" content="This topic applies to Docker Enterprise. The Docker Enterprise platform business, including products, customers, and employees, has been acquired by Mirantis, inc., effective 13-November-2019. For more information on the acquisition..." />
	<meta name="twitter:image:src" content="docs.docker.jp.onthefly/images/docs@2x.png"/>
	<meta name="twitter:image:alt" content="Docker ドキュメント"/>
	<meta property="article:published_time" itemprop="datePublished" content="2020-03-27T18:38:29+09:00"/>

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="keywords" content="Universal Control Plane, UCP, Docker EE, Kubernetes, storage, volume">
	<link rel="stylesheet" href="docs.docker.jp.onthefly/css/font-awesome.min.css">
	<link rel="stylesheet" href="docs.docker.jp.onthefly/css/bootstrap.min.css">
	<link id="pygments" rel="stylesheet" href="docs.docker.jp.onthefly/css/pygments/perldoc.css">
	<link id="pagestyle" rel="stylesheet" href="docs.docker.jp.onthefly/css/style.css">

	<!-- Go get "Open Sans" font from Google -->
	<link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
	<!-- SEO stuff -->
	<title>Configuring Azure Files Storage for Kubernetes | Docker ドキュメント</title>
<meta property="og:title" content="Configuring Azure Files Storage for Kubernetes" />
<meta property="og:locale" content="ja_JP" />
<meta name="description" content="Learn how to add persistent storage to your Docker Enterprise clusters running on Azure with Azure Files." />
<meta property="og:description" content="Learn how to add persistent storage to your Docker Enterprise clusters running on Azure with Azure Files." />
<link rel="canonical" href="docs.docker.jp.onthefly/ee/ucp/kubernetes/storage/use-azure-files/" />
<meta property="og:url" content="https://matsuand.github.io/docs.docker.jp.onthefly/ee/ucp/kubernetes/storage/use-azure-files/" />
<meta property="og:site_name" content="Docker ドキュメント" />
<script type="application/ld+json">
{"@context":"http://schema.org","@type":"WebPage","headline":"Configuring Azure Files Storage for Kubernetes","description":"Learn how to add persistent storage to your Docker Enterprise clusters running on Azure with Azure Files.","url":"https://matsuand.github.io/docs.docker.jp.onthefly/ee/ucp/kubernetes/storage/use-azure-files/"}</script>
	<!-- END SEO STUFF -->
	
	<script language="javascript">
	// Default to assuming this is an archive and hiding some stuff
	// See js/archive.js and js/docs.js for logic relating to this
	var isArchive = true;
	var dockerVersion = 'v19.03';
	</script>
</head>
<body ng-app="Docker" ng-controller="DockerController" class="colums">
	<header>
		 <nav class="nav-secondary navbar navbar-fixed-top">
    <!-- <div class="fan"></div> -->
    <div class="container-fluid">
        <div class="navbar-header">
            <a href="docs.docker.jp.onthefly/"><img class="logo" src="docs.docker.jp.onthefly/images/docker-docs-logo.svg" alt="Docker Docs" title="Docker Docs"></a>
        </div>
        <div class="navbar-collapse" aria-expanded="false" style="height: 1px;">
            <div class="search-form" id="search-div" style="visibility: hidden">
    <form class="search-form form-inline ng-pristine ng-valid" id="searchForm" action="/docs.docker.jp.onthefly/search/">
        <input class="search-field form-control ds-input" id="st-search-input" value="" name="q" placeholder="文書内検索" type="search" autocomplete="off" spellcheck="false" dir="auto" style="position: relative; vertical-align: top;">
        <div id="autocompleteContainer">
            <div id="autocompleteResults"></div>
        </div>
        <!-- <button type="submit" class="search-submit btn btn-default">検索</button> -->
    </form>
</div>
<div class="sidebar-toggle">
    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
    </button>
</div>
<div class="nav-container">
    <div id="tabs">
        <ul class="tabs" id="jsTOCHorizontal">

        </ul>
    </div>
    <div class="ctrl-right hidden-xs hidden-sm">
        <a href="javascript:void(0)" id="menu-toggle"><i class="fa fa-indent" aria-hidden="true"></i></a>
        <div class="btn-group" style="visibility: hidden">
  <button type="button" class="btn btn-default dropdown-btn dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    Docker v19.03 (current)     <span class="caret"></span>
  </button>
  <ul class="dropdown-menu">
    <li><a href="docs.docker.jp.onthefly/v18.09/">Docker v18.09</a></li><li><a href="docs.docker.jp.onthefly/v18.03/">Docker v18.03</a></li><li><a href="docs.docker.jp.onthefly/v17.06/">Docker v17.06</a></li>
  </ul>
</div>

    </div>
</div>

        </div>
    </div>
</nav>

	</header>

	<div class="wrapper right-open">
		<div class="container-fluid">
			<div class="row">
				<div class="col-body">
					<main class="col-content content">
						<section class="section">
							
								
							<h1>Configuring Azure Files Storage for Kubernetes</h1>  <span class="reading-time" title="Estimated reading time">
  <span class="reading-time-label">読む時間の目安: </span>
  
  
    7 分
  
</span>

							
							
							<blockquote>
  <!-- This text will be included on all Docker pages that document Enterprise products, features, and technologies that are transitioning to Mirantis. -->
  <p>This topic applies to Docker Enterprise.</p>

  <p>The Docker Enterprise platform business, including products, customers, and employees, has been acquired by Mirantis, inc., effective 13-November-2019. For more information on the acquisition and how it may affect you and your business, refer to the <a href="https://www.docker.com/faq-for-docker-enterprise-customers-and-partners">Docker Enterprise Customer FAQ</a>.</p>
</blockquote>

<p>Platform operators can provide persistent storage for workloads running on
Docker Enterprise and Microsoft Azure by using Azure Files. You can either
pre-provision Azure Files Shares to be consumed by
Kubernetes Pods or can you use the Azure Kubernetes integration to dynamically
provision Azure Files Shares on demand.</p>

<h2 id="prerequisites">Prerequisites</h2>

<p>This guide assumes you have already provisioned a UCP environment on
Microsoft Azure. The cluster must be provisioned after meeting all
prerequisites listed in <a href="docs.docker.jp.onthefly/ee/ucp/admin/install/install-on-azure.md">Install UCP on
Azure</a>.</p>

<p>Additionally, this guide uses the Kubernetes Command Line tool <code class="highlighter-rouge">$
kubectl</code> to provision Kubernetes objects within a UCP cluster. Therefore, you must download
this tool along with a UCP client bundle. For more
information on configuring CLI access to UCP, see <a href="docs.docker.jp.onthefly/ee/ucp/user-access/cli/">CLI Based
Access</a>.</p>

<h2 id="manually-provisioning-azure-files">Manually Provisioning Azure Files</h2>

<p>You can use existing Azure Files Shares or manually provision new ones to
provide persistent storage for Kubernetes Pods. Azure Files Shares can be
manually provisioned in the Azure Portal using ARM Templates or using the Azure
CLI. The following example uses the Azure CLI to manually provision
Azure Files Shares.</p>

<h3 id="creating-an-azure-storage-account">Creating an Azure Storage Account</h3>

<p>When manually creating an Azure Files Share, first create an Azure
Storage Account for the file shares. If you have already provisioned
a Storage Account, you can skip to <a href="docs.docker.jp.onthefly/use-azure-files.md#creating-an-azure-file-share">Creating an Azure Files
Share</a>.</p>

<blockquote>
  <p><strong>Note</strong>: the Azure Kubernetes Driver does not support Azure Storage Accounts
created using Azure Premium Storage.</p>
</blockquote>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ REGION</span><span class="o">=</span>ukwest
<span class="nv">$ SA</span><span class="o">=</span>mystorageaccount
<span class="nv">$ RG</span><span class="o">=</span>myresourcegroup

<span class="nv">$ </span>az storage account create <span class="se">\</span>
 <span class="nt">--name</span> <span class="nv">$SA</span> <span class="se">\</span>
 <span class="nt">--resource-group</span> <span class="nv">$RG</span> <span class="se">\</span>
 <span class="nt">--location</span> <span class="nv">$REGION</span> <span class="se">\</span>
 <span class="nt">--sku</span> Standard_LRS
</code></pre></div></div>

<h3 id="creating-an-azure-files-share">Creating an Azure Files Share</h3>

<p>Next, provision an Azure Files Share. The size of this share can be
adjusted to fit the end user’s requirements. If you have already created an
Azure Files Share, you can skip to <a href="docs.docker.jp.onthefly/use-azure-files.md#configuring-a-kubernetes-secret">Configuring a Kubernetes
Secret</a>.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ SA</span><span class="o">=</span>mystorageaccount
<span class="nv">$ RG</span><span class="o">=</span>myresourcegroup
<span class="nv">$ FS</span><span class="o">=</span>myfileshare
<span class="nv">$ SIZE</span><span class="o">=</span>5

<span class="c"># This Azure Collection String can also be found in the Azure Portal</span>
<span class="nv">$ </span><span class="nb">export </span><span class="nv">AZURE_STORAGE_CONNECTION_STRING</span><span class="o">=</span><span class="sb">`</span>az storage account show-connection-string <span class="nt">--name</span> <span class="nv">$SA</span> <span class="nt">--resource-group</span> <span class="nv">$RG</span> <span class="nt">-o</span> tsv<span class="sb">`</span>

<span class="nv">$ </span>az storage share create <span class="se">\</span>
  <span class="nt">--name</span> <span class="nv">$FS</span> <span class="se">\</span>
  <span class="nt">--quota</span> <span class="nv">$SIZE</span> <span class="se">\</span>
  <span class="nt">--connection-string</span> <span class="nv">$AZURE_STORAGE_CONNECTION_STRING</span>
</code></pre></div></div>

<h3 id="configuring-a-kubernetes-secret">Configuring a Kubernetes Secret</h3>

<p>After a File Share has been created, you must load the Azure Storage
Account Access key as a Kubernetes Secret into UCP. This provides access to
the file share when Kubernetes attempts to mount the share into a pod. This key
can be found in the Azure Portal or retrieved as shown in the following example by the Azure CLI:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ SA</span><span class="o">=</span>mystorageaccount
<span class="nv">$ RG</span><span class="o">=</span>myresourcegroup
<span class="nv">$ FS</span><span class="o">=</span>myfileshare

<span class="c"># The Azure Storage Account Access Key can also be found in the Azure Portal</span>
<span class="nv">$ STORAGE_KEY</span><span class="o">=</span><span class="k">$(</span>az storage account keys list <span class="nt">--resource-group</span> <span class="nv">$RG</span> <span class="nt">--account-name</span> <span class="nv">$SA</span> <span class="nt">--query</span> <span class="s2">"[0].value"</span> <span class="nt">-o</span> tsv<span class="k">)</span>

<span class="nv">$ </span>kubectl create secret generic azure-secret <span class="se">\</span>
  <span class="nt">--from-literal</span><span class="o">=</span><span class="nv">azurestorageaccountname</span><span class="o">=</span><span class="nv">$SA</span> <span class="se">\</span>
  <span class="nt">--from-literal</span><span class="o">=</span><span class="nv">azurestorageaccountkey</span><span class="o">=</span><span class="nv">$STORAGE_KEY</span>
</code></pre></div></div>

<h3 id="mount-the-azure-files-share-into-a-kubernetes-pod">Mount the Azure Files Share into a Kubernetes Pod</h3>

<p>The final step is to mount the Azure Files Share, using the Kubernetes Secret, into
a Kubernetes Pod. The following code creates a standalone Kubernetes pod, but you
can also use alternative Kubernetes Objects such as Deployments, DaemonSets, or
StatefulSets, with the existing Azure Files Share.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ FS</span><span class="o">=</span>myfileshare

<span class="nv">$ </span><span class="nb">cat</span> <span class="o">&lt;&lt;</span><span class="no">EOF</span><span class="sh"> | kubectl create -f -
apiVersion: v1
kind: Pod
metadata:
  name: mypod-azurefile
spec:
  containers:
  - image: nginx
    name: mypod
    volumeMounts:
      - name: mystorage
        mountPath: /data
  volumes:
  - name: mystorage
    azureFile:
      secretName: azure-secret
      shareName: </span><span class="nv">$FS</span><span class="sh">
      readOnly: false
</span><span class="no">EOF
</span></code></pre></div></div>

<h2 id="dynamically-provisioning-azure-files-shares">Dynamically Provisioning Azure Files Shares</h2>

<h3 id="defining-the-azure-disk-storage-class">Defining the Azure Disk Storage Class</h3>

<p>Kubernetes can dynamically provision Azure Files Shares using the Azure
Kubernetes integration, which was configured when UCP was installed. For
Kubernetes to know which APIs to use when provisioning storage, you must
create Kubernetes Storage Classes specific to each storage
backend. For more information on Kubernetes Storage Classes, see <a href="https://kubernetes.io/docs/concepts/storage/storage-classes/">Storage
Classes</a>.</p>

<blockquote>
  <p>Today, only the Standard Storage Class is supported when using the Azure
Kubernetes Plugin. File shares using the Premium Storage Class will fail to
mount.</p>
</blockquote>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">cat</span> <span class="o">&lt;&lt;</span><span class="no">EOF</span><span class="sh"> | kubectl create -f -
kind: StorageClass
apiVersion: storage.k8s.io/v1
metadata:
  name: standard
provisioner: kubernetes.io/azure-file
mountOptions:
  - dir_mode=0777
  - file_mode=0777
  - uid=1000
  - gid=1000
parameters:
  skuName: Standard_LRS
  storageAccount: &lt;existingstorageaccount&gt; # Optional
  location: &lt;existingstorageaccountlocation&gt; # Optional
</span><span class="no">EOF
</span></code></pre></div></div>

<p>To see which Storage Classes have been provisioned:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl get storageclasses
NAME       PROVISIONER                AGE
azurefile  kubernetes.io/azure-file   1m
</code></pre></div></div>

<h3 id="creating-an-azure-files-share-using-a-persistent-volume-claim">Creating an Azure Files Share using a Persistent Volume Claim</h3>

<p>After you create a Storage Class, you can use Kubernetes
Objects to dynamically provision Azure Files Shares. This is done using
Kubernetes <a href="https://kubernetes.io/docs/concepts/storage/persistent-volumes/#introduction">Persistent Volumes Claims</a>.
Kubernetes uses an existing Azure Storage Account if one exists inside of the
Azure Resource Group. If an Azure Storage Account does not exist,
Kubernetes creates one.</p>

<p>The following example uses the standard storage class and creates a 5 GB Azure
File Share. Alter these values to fit your use case.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">cat</span> <span class="o">&lt;&lt;</span><span class="no">EOF</span><span class="sh"> | kubectl create -f -
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: azure-file-pvc
spec:
  accessModes:
    - ReadWriteMany
  storageClassName: standard
  resources:
    requests:
      storage: 5Gi
</span><span class="no">EOF
</span></code></pre></div></div>

<p>At this point, you should see a newly created Persistent Volume Claim and Persistent Volume:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl get pvc
NAME             STATUS    VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS   AGE
azure-file-pvc   Bound     pvc-f7ccebf0-70e0-11e9-8d0a-0242ac110007   5Gi        RWX            standard       22s

<span class="nv">$ </span>kubectl get pv
NAME                                       CAPACITY   ACCESS MODES   RECLAIM POLICY   STATUS    CLAIM                    STORAGECLASS   REASON    AGE
pvc-f7ccebf0-70e0-11e9-8d0a-0242ac110007   5Gi        RWX            Delete           Bound     default/azure-file-pvc   standard                 2m
</code></pre></div></div>

<h3 id="attach-the-new-azure-files-share-to-a-kubernetes-pod">Attach the new Azure Files Share to a Kubernetes Pod</h3>

<p>Now that a Kubernetes Persistent Volume has been created, mount this into
a Kubernetes Pod. The file share can be consumed by any Kubernetes object type
such as a Deployment, DaemonSet, or StatefulSet. However, the following
example just mounts the persistent volume into a standalone pod.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">cat</span> <span class="o">&lt;&lt;</span><span class="no">EOF</span><span class="sh"> | kubectl create -f -
kind: Pod
apiVersion: v1
metadata:
  name: mypod
spec:
  containers:
    - name: task-pv-container
      image: nginx
      ports:
        - containerPort: 80
          name: "http-server"
      volumeMounts:
        - mountPath: "/usr/share/nginx/html"
          name: storage
  volumes:
    - name: storage
      persistentVolumeClaim:
       claimName: azure-file-pvc
</span><span class="no">EOF
</span></code></pre></div></div>

<h3 id="troubleshooting">Troubleshooting</h3>

<p>When creating Persistent Volume Claims, the volume may constantly stay in a
<code class="highlighter-rouge">Pending</code> state.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ kubectl get pvc
NAME             STATUS    VOLUME   CAPACITY   ACCESS MODES   STORAGECLASS   AGE
azure-file-pvc   Pending                                      standard       32s
</code></pre></div></div>

<p>If that is the case, the <code class="highlighter-rouge">persistent-volume-binder</code> service account does not
have the relevant Kubernetes RBAC permissions. The storage account creates a
Kubernetes secret to store the Azure Files Storage Account Key.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ kubectl describe pvc azure-file-pvc
...
Warning    ProvisioningFailed  7s (x3 over 37s)  persistentvolume-controller
Failed to provision volume with StorageClass "standard": Couldn't create secret
secrets is forbidden: User "system:serviceaccount:kube-system:persistent-volume-binder"
cannot create resource "secrets" in API group "" in the namespace "default": access denied
</code></pre></div></div>

<p>To grant the <code class="highlighter-rouge">persistent-volume-binder</code> service account the relevant the RBAC
permissions, create the following RBAC ClusterRole.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  labels:
    subjectName: kube-system-persistent-volume-binder
  name: kube-system-persistent-volume-binder:cluster-admin
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: cluster-admin
subjects:
- kind: ServiceAccount
  name: persistent-volume-binder
  namespace: kube-system
</code></pre></div></div>

<h2 id="where-to-go-next">Where to go next</h2>

<ul>
  <li><a href="docs.docker.jp.onthefly/ee/ucp/kubernetes/layer-7-routing/">Deploy an Ingress Controller on
Kubernetes</a></li>
  <li><a href="docs.docker.jp.onthefly/ee/ucp/kubernetes/kubernetes-network-encryption/">Discover Network Encryption on
Kubernetes</a></li>
</ul>

							<!-- tags -->
							
							
							
							<span class="glyphicon glyphicon-tags" style="padding-right: 10px"></span><span style="vertical-align: 2px"><a href="https://matsuand.github.io/docs.docker.jp.onthefly/search/?q=Universal Control Plane">Universal Control Plane</a>, <a href="https://matsuand.github.io/docs.docker.jp.onthefly/search/?q=UCP">UCP</a>, <a href="https://matsuand.github.io/docs.docker.jp.onthefly/search/?q=Docker EE">Docker EE</a>, <a href="https://matsuand.github.io/docs.docker.jp.onthefly/search/?q=Kubernetes">Kubernetes</a>, <a href="https://matsuand.github.io/docs.docker.jp.onthefly/search/?q=storage">storage</a>, <a href="https://matsuand.github.io/docs.docker.jp.onthefly/search/?q=volume">volume</a></span>
							
							<!-- link corrections -->
              <script language="JavaScript">
							var x = document.links.length;
							var baseHref = document.getElementsByTagName('base')[0].href
							for (i = 0; i < x; i++) {
							  var munged = false;
							  var thisHREF = document.links[i].href;
							  var originalURL = "/ee/ucp/kubernetes/storage/use-azure-files/";
							  if (thisHREF.indexOf(baseHref + "#") > -1) {
							    // hash fix
							    //console.log('BEFORE: base:',baseHref,'thisHREF:',thisHREF,'originalURL:',originalURL);
							    thisHREF = originalURL + thisHREF.replace(baseHref, "");
							    //console.log('AFTER: base:',baseHref,'thisHREF:',thisHREF,'originalURL:',originalURL);
							  }
							  if ((thisHREF.indexOf(window.location.hostname) > -1 || thisHREF.indexOf('http') == -1) && document.links[i].className.indexOf("nomunge") < 0) {
							    munged = true;
							    thisHREF = thisHREF.replace(".md", "/").replace("/index/", "/");
							    document.links[i].setAttribute('href', thisHREF);
							  }
							}
							</script>
							
						  <div id="ratings-div" style="color:#b9c2cc; text-align: center; margin-top: 150px; visibility: hidden">
								<div id="pd_rating_holder_8453675"></div>
								<script type="text/javascript">
									PDRTJS_settings_8453675 = {
										"id": "8453675",
										"unique_id": "ee/ucp/kubernetes/storage/use-azure-files.md",
										"title": "Configuring Azure Files Storage for Kubernetes",
										"permalink": "https://github.com/docker/docker.github.io/blob/master/ee/ucp/kubernetes/storage/use-azure-files.md"
									};
									(function(d, c, j) {
										if (!document.getElementById(j)) {
											var pd = d.createElement(c),
												s;
											pd.id = j;
											pd.src = ('https:' == document.location.protocol) ? 'https://polldaddy.com/js/rating/rating.js' : 'http://i0.poll.fm/js/rating/rating.js';
											s = document.getElementsByTagName(c)[0];
											s.parentNode.insertBefore(pd, s);
										}
									}(document, 'script', 'pd-rating-js'));
								</script>
							</div>
							
						</section>
					</main>
					<nav class="col-nav">
						<div id="sidebar-nav" class="sidebar hidden-sm hidden-xs">
						<div id="navbar" class="nav-sidebar">
    <ul class="nav" id="jsTOCLeftNav">
    </ul>
</div>

						</div>
					</nav>
					<div class="col-toc">
							<div class="sidebar hidden-xs hidden-sm">
							<div class="toc-nav">
								<div class="feedback-links">
									<ul>
										
										<li style="visibility: hidden"><a href="https://github.com/matsuand/docs.docker.jp/edit/v19.03.local/ee/ucp/kubernetes/storage/use-azure-files.md"><i class="fa fa-pencil-square-o" aria-hidden="true"></i> このページの編集</a></li>
										<li><a href="https://github.com/matsuand/docs.docker.jp.onthefly/issues/new?body=File: [ee/ucp/kubernetes/storage/use-azure-files.md](https://matsuand.github.io/docs.docker.jp.onthefly/ee/ucp/kubernetes/storage/use-azure-files/)"
															class="nomunge"><i class="fa fa-check" aria-hidden="true"></i> 文書変更のリクエスト</a></li>
										<li><a href="https://success.docker.com/support"><i class="fa fa-question" aria-hidden="true"></i> サポート依頼</a></li>
										<!-- toggle mode -->
										<li>
											<div class="toggle-mode">
												<div class="icon">
													<i class="fa fa-sun-o" aria-hidden="true"></i>
												</div>
												<div class="toggle-switch">
													<label class="switch">
														<input type="checkbox" id="switch-style">
														<div class="slider round"></div>
												</label>
												</div>
												<div class="icon">
													<i class="fa fa-moon-o" aria-hidden="true"></i>
												</div>
											</div>
										</li>
									</ul>
								</div>
								   
									<div id="side-toc-title">本ページ内</div>
									
<ul id="my_toc" class="inline_toc">
  <li><a href="docs.docker.jp.onthefly/use-azure-files.md#prerequisites" class="nomunge">Prerequisites</a></li>
  <li><a href="docs.docker.jp.onthefly/use-azure-files.md#manually-provisioning-azure-files" class="nomunge">Manually Provisioning Azure Files</a>
    <ul>
      <li><a href="docs.docker.jp.onthefly/use-azure-files.md#creating-an-azure-storage-account" class="nomunge">Creating an Azure Storage Account</a></li>
      <li><a href="docs.docker.jp.onthefly/use-azure-files.md#creating-an-azure-files-share" class="nomunge">Creating an Azure Files Share</a></li>
      <li><a href="docs.docker.jp.onthefly/use-azure-files.md#configuring-a-kubernetes-secret" class="nomunge">Configuring a Kubernetes Secret</a></li>
      <li><a href="docs.docker.jp.onthefly/use-azure-files.md#mount-the-azure-files-share-into-a-kubernetes-pod" class="nomunge">Mount the Azure Files Share into a Kubernetes Pod</a></li>
    </ul>
  </li>
  <li><a href="docs.docker.jp.onthefly/use-azure-files.md#dynamically-provisioning-azure-files-shares" class="nomunge">Dynamically Provisioning Azure Files Shares</a>
    <ul>
      <li><a href="docs.docker.jp.onthefly/use-azure-files.md#defining-the-azure-disk-storage-class" class="nomunge">Defining the Azure Disk Storage Class</a></li>
      <li><a href="docs.docker.jp.onthefly/use-azure-files.md#creating-an-azure-files-share-using-a-persistent-volume-claim" class="nomunge">Creating an Azure Files Share using a Persistent Volume Claim</a></li>
      <li><a href="docs.docker.jp.onthefly/use-azure-files.md#attach-the-new-azure-files-share-to-a-kubernetes-pod" class="nomunge">Attach the new Azure Files Share to a Kubernetes Pod</a></li>
      <li><a href="docs.docker.jp.onthefly/use-azure-files.md#troubleshooting" class="nomunge">Troubleshooting</a></li>
    </ul>
  </li>
  <li><a href="docs.docker.jp.onthefly/use-azure-files.md#where-to-go-next" class="nomunge">Where to go next</a></li>
</ul>


								</div>
								
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	
	<footer class="footer">
		  
    <div class="container">
        <div class="top_footer">
            <div class="row">
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><a href="https://www.docker.com/what-docker">What is Docker</a></li>
                        <li><a href="https://www.docker.com/what-container">What is a Container</a></li>
                        <li><a href="https://www.docker.com/use-cases">Use Cases</a></li>
                        <li><a href="https://www.docker.com/customers">Customers</a></li>
                        <li><a href="https://www.docker.com/partners/partner-program">Partners</a></li>
                        <li class="break"><a href="https://www.docker.com/industry-government">For Government</a></li>
                        <li><a href="https://www.docker.com/company">About Docker</a></li>
                        <li><a href="https://www.docker.com/company/management">Management</a></li>
                        <li><a href="https://www.docker.com/company/news-and-press">Press &amp; News</a></li>
                        <li><a href="https://www.docker.com/careers">Careers</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><a href="https://www.docker.com/products/overview">Product</a></li>
                        <li><a href="https://www.docker.com/pricing">Pricing</a></li>
                        <li><a href="https://www.docker.com/docker-community">Community Edition</a></li>
                        <li class="break"><a href="https://www.docker.com/enterprise">Enterprise Edition </a></li>
                        <li><a href="https://www.docker.com/products/docker-datacenter">Docker Datacenter</a></li>
                        <li><a href="https://hub.docker.com/">Docker Hub</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/">Documentation</a></li>
                        <li><a href="https://www.docker.com/docker">Learn</a></li>
                        <li><a href="https://blog.docker.com" target="_blank">Blog</a></li>
                        <li><a href="https://engineering.docker.com" target="_blank">Engineering Blog</a></li>
                        <li><a href="https://training.docker.com/" target="_blank">Training</a></li>
                        <li><a href="https://success.docker.com/support">Support</a></li>
                        <li><a href="https://success.docker.com/kbase">Knowledge Base</a></li>
                        <li><a href="https://www.docker.com/products/resources">Resources</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><a href="https://www.docker.com/docker-community">Community</a></li>
                        <li><a href="https://www.docker.com/technologies/overview">Open Source</a></li>
                        <li><a href="https://www.docker.com/community/events">Events</a></li>
                        <li><a href="https://forums.docker.com/" target="_blank">Forums</a></li>
                        <li><a href="https://www.docker.com/community/docker-captains">Docker Captains</a></li>
                        <li><a href="https://www.docker.com/docker-community/scholarships">Scholarships</a></li>
                        <li><a href="https://blog.docker.com/curated/">Community News</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-nav">
                <nav class="footer_sub_nav">
                    <ul class="menu">
                        <li><a href="http://status.docker.com/">Status</a></li>
                        <li><a href="https://www.docker.com/docker-security">Security</a></li>
                        <li><a href="https://www.docker.com/legal">Legal</a></li>
                        <li><a href="https://www.docker.com/company/contact">Contact</a></li>
                    </ul>
                </nav>
            </div>
        </div>
        <div class="bottom_footer">
            <div class="footer-copyright col-xs-12 col-md-8">
                <p class="copyright">
                    Copyright &copy; 2019 Docker Inc. All rights reserved. </p>
            </div>
            <div class="footer_social_nav">
                <ul class="nav-social">
                    <li class="fa fa-twitter"><a href="http://twitter.com/docker">Twitter</a></li>
                    <li class="fa fa-youtube"><a href="http://www.youtube.com/user/dockerrun">Youtube</a></li>
                    <li class="fa fa-github"><a href="https://github.com/docker">GitHub</a></li>
                    <li class="fa fa-linkedin"><a href="https://www.linkedin.com/company/docker">Linkedin</a></li>
                    <li class="fa fa-facebook"><a href="https://www.facebook.com/docker.run">Facebook</a></li>
                    <li class="fa fa-reddit"><a href="http://www.reddit.com/r/docker">Reddit</a></li>
                    <li class="fa fa-slideshare"><a href="http://www.slideshare.net/docker">Slideshare</a></li>
                </ul>
            </div>
        </div>
    </div>

	</footer>
	<link rel="stylesheet" href="docs.docker.jp.onthefly/css/github.css">
	
	<script defer src="docs.docker.jp.onthefly/js/anchorlinks.js"></script>
	<script defer src="docs.docker.jp.onthefly/js/menu.js"></script>
	<script src="docs.docker.jp.onthefly/js/jquery.js"></script>
	<script src="docs.docker.jp.onthefly/js/bootstrap.min.js"></script>
	<!-- Always include the archive.js, but it doesn't do much unless we are an archive -->
	<script language="javascript">
	// Default to assuming this is an archive and hiding some stuff
	// See js/archive.js and js/docs.js for logic relating to this
	var isArchive = true;
	var dockerVersion = 'v19.03';
	// In archives, we need to know the page root and we get it from JEKYLL_ENV in the jekyll build command
	var jekyllEnv = 'development';
	// If unset (in non-archive branches), defaults to "development". In that case, reset it to empty
	if (jekyllEnv == 'development') {
		jekyllEnv = '';
	}
	var pageURL = jekyllEnv + '/ee/ucp/kubernetes/storage/use-azure-files/';
	</script>
	<script src="docs.docker.jp.onthefly/js/archive.js"></script>
	<script src="docs.docker.jp.onthefly/js/stickyfill.min.js"></script>
	<script defer src="docs.docker.jp.onthefly/js/metadata.js"></script>
	<script src="docs.docker.jp.onthefly/js/glossary.js"></script>
	<script defer src="docs.docker.jp.onthefly/js/docs.js"></script>
	<script defer src="docs.docker.jp.onthefly/js/toc.js"></script>
	<script language="javascript">
	jQuery(document).ready(function(){
				hookupTOCEvents();
			});
	</script>
</body>

</html>
