<!-- Page generated 2020-03-27 18:38:29 +0900 -->
<!-- relative link basehrefs -->

	
	
	
		
			
		
	
		
			
		
	
		
			
			


<!-- Logic for 'edit this button' -->


	

	

	

	

	

	

	

	

	


<!-- End of logic for 'edit this button' -->


<!DOCTYPE html>
<html lang="ja">

<head>
	<base href="https://matsuand.github.io/docs.docker.jp.onthefly/ee/cluster/" />
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<style type="text/css">
		@charset "UTF-8";
		[ng\:cloak],
		[ng-cloak],
		[data-ng-cloak],
		[x-ng-cloak],
		.ng-cloak,
		.x-ng-cloak,
		.ng-hide:not(.ng-hide-animate) {
			display: none !important;
		}

		ng\:form {
			display: block;
		}
	</style>
	<!-- Google Tag Manager -->
	<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
	new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
	j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
	'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-WL2QLG5');</script>
	<!-- End Google Tag Manager -->
	
	<!-- favicon -->
	<link rel="icon" type="image/x-icon" href="https://matsuand.github.io/docs.docker.jp.onthefly/favicons/docs@2x.ico" sizes="129x128">
	<meta name="msapplication-TileImage" content="https://matsuand.github.io/docs.docker.jp.onthefly/favicons/docs@2x.ico">
	<link rel="apple-touch-icon" type="image/x-icon" href="https://matsuand.github.io/docs.docker.jp.onthefly/favicons/docs@2x.ico" sizes="129x128">
	<meta property="og:image" content="https://matsuand.github.io/docs.docker.jp.onthefly/favicons/docs@2x.ico"/>
	<!-- metadata -->
	<meta property="og:type" content="website"/>
	<meta property="og:updated_time" itemprop="dateUpdated" content="2020-03-27T18:38:29+09:00"/>
	<meta property="og:image" itemprop="image primaryImageOfPage" content="https://matsuand.github.io/docs.docker.jp.onthefly/images/docs@2x.png"/>
	<meta name="twitter:card" content="summary"/>
	<meta name="twitter:domain" content="docs.docker.jp"/>
	<meta name="twitter:site" content="@docker_docs"/>
	<meta name="twitter:url" content="https://twitter.com/docker_docs"/>
	<meta name="twitter:title" itemprop="title name" content="Cluster file version 1 reference"/>
	<meta name="twitter:description" property="og:description" itemprop="description" content="This topic applies to Docker Enterprise. The Docker Enterprise platform business, including products, customers, and employees, has been acquired by Mirantis, inc., effective 13-November-2019. For more information on the acquisition..." />
	<meta name="twitter:image:src" content="https://matsuand.github.io/docs.docker.jp.onthefly/images/docs@2x.png"/>
	<meta name="twitter:image:alt" content="Docker ドキュメント"/>
	<meta property="article:published_time" itemprop="datePublished" content="2020-03-27T18:38:29+09:00"/>

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="keywords" content="documentation, docs, docker, cluster, infrastructure, automation">
	<link rel="stylesheet" href="https://matsuand.github.io/docs.docker.jp.onthefly/css/font-awesome.min.css">
	<link rel="stylesheet" href="https://matsuand.github.io/docs.docker.jp.onthefly/css/bootstrap.min.css">
	<link id="pygments" rel="stylesheet" href="https://matsuand.github.io/docs.docker.jp.onthefly/css/pygments/perldoc.css">
	<link id="pagestyle" rel="stylesheet" href="https://matsuand.github.io/docs.docker.jp.onthefly/css/style.css">

	<!-- Go get "Open Sans" font from Google -->
	<link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
	<!-- SEO stuff -->
	<title>Cluster file version 1 reference | Docker ドキュメント</title>
<meta property="og:title" content="Cluster file version 1 reference" />
<meta property="og:locale" content="ja_JP" />
<meta name="description" content="Cluster file reference and guidelines" />
<meta property="og:description" content="Cluster file reference and guidelines" />
<link rel="canonical" href="https://matsuand.github.io/docs.docker.jp.onthefly/ee/cluster/cluster-file/" />
<meta property="og:url" content="https://matsuand.github.io/docs.docker.jp.onthefly/ee/cluster/cluster-file/" />
<meta property="og:site_name" content="Docker ドキュメント" />
<script type="application/ld+json">
{"@context":"http://schema.org","@type":"WebPage","headline":"Cluster file version 1 reference","description":"Cluster file reference and guidelines","url":"https://matsuand.github.io/docs.docker.jp.onthefly/ee/cluster/cluster-file/"}</script>
	<!-- END SEO STUFF -->
	
	<script language="javascript">
	// Default to assuming this is an archive and hiding some stuff
	// See js/archive.js and js/docs.js for logic relating to this
	var isArchive = true;
	var dockerVersion = 'v19.03';
	</script>
</head>
<body ng-app="Docker" ng-controller="DockerController" class="colums">
	<header>
		 <nav class="nav-secondary navbar navbar-fixed-top">
    <!-- <div class="fan"></div> -->
    <div class="container-fluid">
        <div class="navbar-header">
            <a href="https://matsuand.github.io/docs.docker.jp.onthefly/"><img class="logo" src="https://matsuand.github.io/docs.docker.jp.onthefly/images/docker-docs-logo.svg" alt="Docker Docs" title="Docker Docs"></a>
        </div>
        <div class="navbar-collapse" aria-expanded="false" style="height: 1px;">
            <div class="search-form" id="search-div" style="visibility: hidden">
    <form class="search-form form-inline ng-pristine ng-valid" id="searchForm" action="/docs.docker.jp.onthefly/search/">
        <input class="search-field form-control ds-input" id="st-search-input" value="" name="q" placeholder="文書内検索" type="search" autocomplete="off" spellcheck="false" dir="auto" style="position: relative; vertical-align: top;">
        <div id="autocompleteContainer">
            <div id="autocompleteResults"></div>
        </div>
        <!-- <button type="submit" class="search-submit btn btn-default">検索</button> -->
    </form>
</div>
<div class="sidebar-toggle">
    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
    </button>
</div>
<div class="nav-container">
    <div id="tabs">
        <ul class="tabs" id="jsTOCHorizontal">

        </ul>
    </div>
    <div class="ctrl-right hidden-xs hidden-sm">
        <a href="javascript:void(0)" id="menu-toggle"><i class="fa fa-indent" aria-hidden="true"></i></a>
        <div class="btn-group" style="visibility: hidden">
  <button type="button" class="btn btn-default dropdown-btn dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    Docker v19.03 (current)     <span class="caret"></span>
  </button>
  <ul class="dropdown-menu">
    <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/v18.09/">Docker v18.09</a></li><li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/v18.03/">Docker v18.03</a></li><li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/v17.06/">Docker v17.06</a></li>
  </ul>
</div>

    </div>
</div>

        </div>
    </div>
</nav>

	</header>

	<div class="wrapper right-open">
		<div class="container-fluid">
			<div class="row">
				<div class="col-body">
					<main class="col-content content">
						<section class="section">
							
								
							<h1>Cluster file version 1 reference</h1>  <span class="reading-time" title="Estimated reading time">
  <span class="reading-time-label">読む時間の目安: </span>
  
  
    23 分
  
</span>

							
							
							<blockquote>
  <!-- This text will be included on all Docker pages that document Enterprise products, features, and technologies that are transitioning to Mirantis. -->
  <p>This topic applies to Docker Enterprise.</p>

  <p>The Docker Enterprise platform business, including products, customers, and employees, has been acquired by Mirantis, inc., effective 13-November-2019. For more information on the acquisition and how it may affect you and your business, refer to the <a href="https://www.docker.com/faq-for-docker-enterprise-customers-and-partners">Docker Enterprise Customer FAQ</a>.</p>
</blockquote>

<p>This topic describes version 1 of the Cluster file format.</p>

<h2 id="cluster-file-structure-and-examples">Cluster file structure and examples</h2>

<div class="panel panel-default">
  <div class="panel-heading collapsed" data-toggle="collapse" data-target="#collapseSample1" style="cursor: pointer">
Example Cluster file version 1 <em class="chevron fa fa-fw"></em>
  </div>
  <div class="collapse block" id="collapseSample1">
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
variable:
  domain: "YOUR DOMAIN, e.g. docker.com"
  subdomain: "A SUBDOMAIN, e.g. cluster"
  region: "THE AWS REGION TO DEPLOY, e.g. us-east-1"
  email: "YOUR.EMAIL@COMPANY.COM"
  ucp_password:
    type: prompt
provider:
  acme:
    email: ${email}
    server_url: https://acme-staging-v02.api.letsencrypt.org/directory
  aws:
    region: ${region}
cluster:
  dtr:
    version: docker/dtr:2.6.5
  engine:
    version: ee-stable-18.09.5
  ucp:
    username: admin
    password: ${ucp_password}
    version: docker/ucp:3.1.6
resource:
  aws_instance:
    managers:
      instance_type: t2.xlarge
      os: Ubuntu 16.04
      quantity: 3
    registry:
      instance_type: t2.xlarge
      os: Ubuntu 16.04
      quantity: 3
    workers:
      instance_type: t2.xlarge
      os: Ubuntu 16.04
      quantity: 3
  aws_lb:
    apps:
      domain: ${subdomain}.${domain}
      instances:
      - workers
      ports:
      - 80:8080
      - 443:8443
    dtr:
      domain: ${subdomain}.${domain}
      instances:
      - registry
      ports:
      - 443:443
    ucp:
      domain: ${subdomain}.${domain}
      instances:
      - managers
      ports:
      - 443:443
      - 6443:6443
  aws_route53_zone:
    dns:
      domain: ${domain}
      subdomain: ${subdomain}
</code></pre></div>    </div>
  </div>
</div>

<p>The topics on this reference page are organized alphabetically by top-level keys
to reflect the structure of the Cluster file. Top-level keys that define
a section in the configuration file, such as <code class="highlighter-rouge">cluster</code>, <code class="highlighter-rouge">provider</code>, and <code class="highlighter-rouge">resource</code>,
are listed with the options that support them as sub-topics. This information
maps to the indent structure of the Cluster file.</p>

<h3 id="cluster">cluster</h3>
<p>Specifies components to install and configure for a cluster.</p>

<p>The following components are available:</p>

<ul>
  <li><code class="highlighter-rouge">subscription</code>: (Optional) Configuration options for Docker Enterprise
Subscriptions.</li>
  <li><code class="highlighter-rouge">cloudstor</code>: (Optional) Configuration options for Docker Cloudstor.</li>
  <li><code class="highlighter-rouge">dtr</code>: (Optional) Configuration options for Docker Trusted Registry.</li>
  <li><code class="highlighter-rouge">engine</code>: (Optional) Configuration options for Docker Engine.</li>
  <li><code class="highlighter-rouge">ucp</code>: (Optional) Configuration options for Docker Universal Control Plane.</li>
  <li><code class="highlighter-rouge">registry</code>: (Optional) Configuration options for authenticating nodes with a registry to pull Docker images.</li>
</ul>

<h4 id="subscription">subscription</h4>
<p>Provide Docker Enterprise subscription information</p>
<ul>
  <li><code class="highlighter-rouge">id</code>: (Optional) The subscription UUID for this Docker Enterprise
installation <code class="highlighter-rouge">sub-xxxx</code>.</li>
  <li><code class="highlighter-rouge">license</code>: (Optional) The absolute path to a local Docker Enterprise license
file <code class="highlighter-rouge">/path/to/docker_subscription.lic</code>.</li>
  <li><code class="highlighter-rouge">trial</code>: (Optional) Specify if this is a trial subscription. Default is
<code class="highlighter-rouge">false</code></li>
</ul>

<h4 id="cloudstor">cloudstor</h4>
<p>Docker Cloudstor is a Docker Swarm Plugin that provides persistent storage to
Docker Swarm Clusters deployed on to AWS or Azure. By default Docker Cloudstor
is not installed on Docker Enterprise environments created with Docker Cluster.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">cluster</span><span class="pi">:</span>
  <span class="na">cloudstor</span><span class="pi">:</span>
    <span class="na">version</span><span class="pi">:</span> <span class="s1">'</span><span class="s">1.0'</span>
</code></pre></div></div>

<p>The following optional elements can be specified:</p>

<ul>
  <li><code class="highlighter-rouge">version</code>: (Required) The version of Docker Cloudstor to install. The default
is <code class="highlighter-rouge">disabled</code>. The only released version of Docker Cloudstor at this time is
<code class="highlighter-rouge">1.0</code>.</li>
  <li><code class="highlighter-rouge">use_efs</code>: (Optional) Specifies whether an Elastic File System should be
provisioned. By default Docker Cloudstor on AWS uses Elastic Block Store,
therefore this value defaults to <code class="highlighter-rouge">false</code>.</li>
</ul>

<h4 id="dtr">dtr</h4>
<p>Customizes the installation of Docker Trusted Registry.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">cluster</span><span class="pi">:</span>
  <span class="na">dtr</span><span class="pi">:</span>
    <span class="na">version</span><span class="pi">:</span> <span class="s2">"</span><span class="s">docker/dtr:2.6.5"</span>
    <span class="na">install_options</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s2">"</span><span class="s">--debug"</span>
    <span class="pi">-</span> <span class="s2">"</span><span class="s">--enable-pprof"</span>
</code></pre></div></div>

<p>The following optional elements can be specified:</p>

<ul>
  <li><code class="highlighter-rouge">version</code>: (Optional) The version of DTR to install.  Defaults to <code class="highlighter-rouge">docker/dtr:2.6.5</code>.</li>
  <li><code class="highlighter-rouge">ca</code>: (Optional) The path to a root CA public certificate.</li>
  <li><code class="highlighter-rouge">key</code>: (Optional) The path to a TLS private key.</li>
  <li><code class="highlighter-rouge">cert</code>: (Optional) The path to a public key certificate.</li>
  <li><code class="highlighter-rouge">install_options</code>: (Optional) Additional DTR install options.</li>
</ul>

<h4 id="engine">engine</h4>
<p>Customizes the installation of Docker Enterprise Engine.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">cluster</span><span class="pi">:</span>
  <span class="na">engine</span><span class="pi">:</span>
    <span class="na">channel</span><span class="pi">:</span> <span class="s2">"</span><span class="s">stable"</span>
    <span class="na">edition</span><span class="pi">:</span> <span class="s2">"</span><span class="s">ee"</span>
    <span class="na">version</span><span class="pi">:</span> <span class="s2">"</span><span class="s">19.03"</span>
</code></pre></div></div>

<p>The following optional elements can be specified:</p>
<ul>
  <li><code class="highlighter-rouge">version</code>: (Optional) The version of the Docker Engine to install.  Defaults to <code class="highlighter-rouge">19.03</code>.</li>
  <li><code class="highlighter-rouge">edition</code>: (Optional) The family of Docker Engine to install.  Defaults to <code class="highlighter-rouge">ee</code> for Enterprise edition.</li>
  <li><code class="highlighter-rouge">channel</code>: (Optional) The channel on the repository to pull updated packages.  Defaults to <code class="highlighter-rouge">stable</code>.</li>
  <li><code class="highlighter-rouge">url</code>: (Optional) Defaults to “https://storebits.docker.com/ee”.</li>
  <li><code class="highlighter-rouge">storage_driver</code>: (Optional)  The storage driver to use for the storage volume.  Default
value is dependent on the operating system.
    <ul>
      <li>Amazon Linux 2 is <code class="highlighter-rouge">overlay2</code>.</li>
      <li>Centos is <code class="highlighter-rouge">overlay2</code>.</li>
      <li>Oracle Linux is <code class="highlighter-rouge">overlay2</code>.</li>
      <li>RedHat is <code class="highlighter-rouge">overlay2</code>.</li>
      <li>SLES is <code class="highlighter-rouge">btrfs</code>.</li>
      <li>Ubuntu is <code class="highlighter-rouge">overlay2</code>.</li>
    </ul>
  </li>
  <li><code class="highlighter-rouge">storage_fstype</code>: (Optional) File system to use for storage volume.  Default value is dependent on the operating system.
    <ul>
      <li>Amazon Linux 2 is <code class="highlighter-rouge">xfs</code>.</li>
      <li>Centos is <code class="highlighter-rouge">xfs</code>.</li>
      <li>Oracle Linux is <code class="highlighter-rouge">xfs</code>.</li>
      <li>RedHat is <code class="highlighter-rouge">xfs</code>.</li>
      <li>SLES is <code class="highlighter-rouge">btrfs</code>.</li>
      <li>Ubuntu is <code class="highlighter-rouge">ext4</code>.</li>
    </ul>
  </li>
  <li><code class="highlighter-rouge">storage_volume</code>: (Optional) Docker storage volume path for <code class="highlighter-rouge">/var/lib/docker</code> Default value is provider dependent.
    <ul>
      <li>AWS
        <ul>
          <li>non-NVME is <code class="highlighter-rouge">/dev/xvdb</code>.</li>
          <li>NVME disks are one of <code class="highlighter-rouge">/dev/nvme[0-26]n1</code>.</li>
        </ul>
      </li>
      <li>Azure is <code class="highlighter-rouge">/dev/disk/azure/scsi1/lun0</code>.</li>
    </ul>
  </li>
  <li><code class="highlighter-rouge">daemon</code>: (Optional) Provides docker daemon options. Defaults to “”.</li>
  <li><code class="highlighter-rouge">ca</code>:  (dev) Defaults to “”.</li>
  <li><code class="highlighter-rouge">key</code>: (dev) Defaults to “”.</li>
  <li><code class="highlighter-rouge">enable_remote_tcp</code>: (dev) Enables direct access to docker engine. Defaults to <code class="highlighter-rouge">false</code>.</li>
</ul>

<p>*dev indicates that the functionality is only for development and testing.</p>

<h4 id="kubernetes">kubernetes</h4>
<p>Enables provider-specific options for Kubernetes support.</p>

<h5 id="aws-kubernetes-options">AWS Kubernetes options</h5>

<ul>
  <li><code class="highlighter-rouge">cloud_provider</code>: (Optional)Enable cloud provider support for Kubernetes.  Defaults to <code class="highlighter-rouge">false</code>.</li>
  <li><code class="highlighter-rouge">ebs_persistent_volumes</code>: (Optional) Enable persistent volume support with EBS volumes. Defaults to <code class="highlighter-rouge">false</code>.</li>
  <li><code class="highlighter-rouge">efs_persistent_volumes</code>:  (Optional) Enable persistent volume support with EFS.  Defaults to <code class="highlighter-rouge">false</code>.</li>
  <li><code class="highlighter-rouge">load_balancer</code>: (Optional) Enable Kubernetes pods to instantiate a load-balancer.  Defaults to <code class="highlighter-rouge">false</code>.</li>
  <li><code class="highlighter-rouge">nfs_storage</code>: (Optional) Install additional packages on node for NFS support.  Defaults to <code class="highlighter-rouge">false</code>.</li>
  <li><code class="highlighter-rouge">lifecycle</code>: (Optional) Defaults to <code class="highlighter-rouge">owned</code>.</li>
</ul>

<h4 id="registry">registry</h4>
<p>Customizes the registry from which the installation should pull images.  By default, Docker Hub and credentials to access Docker Hub are used.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">cluster</span><span class="pi">:</span>
  <span class="na">registry</span><span class="pi">:</span>
    <span class="na">password</span><span class="pi">:</span> <span class="s">${base64decode("TVJYeTNDQWpTSk5HTW1ZRzJQcE1kM0tVRlQ=")}</span>
    <span class="na">url</span><span class="pi">:</span> <span class="s">https://index.docker.io/v1/</span>
    <span class="na">username</span><span class="pi">:</span> <span class="s">user</span>
</code></pre></div></div>

<p>The following optional elements can be specified:</p>
<ul>
  <li><code class="highlighter-rouge">username</code>: The username for logging in to the registry on each node.  Default value is the current docker user.</li>
  <li><code class="highlighter-rouge">url</code>: The registry to use for pulling Docker images.  Defaults to “https://index.docker.io/v1/”.</li>
  <li><code class="highlighter-rouge">password</code>: The password for logging in to the registry on each node.  Default value is the current docker user’s password base64 encoded and wrapped in a call to base64decode.</li>
</ul>

<h4 id="ucp">ucp</h4>

<ul>
  <li><code class="highlighter-rouge">version</code>: Specifies the version of UCP to install.  Defaults to <code class="highlighter-rouge">docker/ucp:3.1.6</code>.</li>
  <li><code class="highlighter-rouge">username</code>: Specifies the username of the first user to create in UCP.  Defaults to <code class="highlighter-rouge">admin</code>.</li>
  <li><code class="highlighter-rouge">password</code>: Specifies the password of the first user to create in UCP.  Defaults to <code class="highlighter-rouge">dockerdocker</code>.</li>
  <li><code class="highlighter-rouge">ca</code>: Specifies a path to a root CA public certificate.</li>
  <li><code class="highlighter-rouge">key</code>: Specifies a path to a TLS private key.</li>
  <li><code class="highlighter-rouge">cert</code>: Specifies a path to a public key certificate.</li>
  <li><code class="highlighter-rouge">install_options</code>: Lists additional UCP install options.</li>
</ul>

<h5 id="additional-ucp-configuration-options">Additional UCP configuration options</h5>
<p>Docker Cluster also accepts all UCP configuration options and creates the initial UCP config on
installation. The following list provides supported options:</p>
<ul>
  <li><code class="highlighter-rouge">anonymize_tracking</code>: Anonymizes analytic data. Specify ‘true’ to hide the license ID. Defaults to ‘false’.</li>
  <li><code class="highlighter-rouge">audit_level</code>: Specifies the audit logging level. Leave empty for disabling audit logs (default).
Other valid values are ‘metadata’ and ‘request’.</li>
  <li><code class="highlighter-rouge">auto_refresh</code>: Specify ‘true’ to enable attempted automatic license renewal when the license
nears expiration. If disabled, you must manually upload renewed license after expiration. Defaults to ‘true’.</li>
  <li><code class="highlighter-rouge">azure_ip_count</code>: Sets the IP count for azure allocator to allocate IPs per Azure virtual machine.</li>
  <li><code class="highlighter-rouge">backend</code>: Specifie the name of the authorization backend to use, either ‘managed’ or ‘ldap’. Defaults to ‘managed’.</li>
  <li><code class="highlighter-rouge">calico_mtu</code>: Specifies the MTU (maximum transmission unit) size for the Calico plugin. Defaults to ‘1480’.</li>
  <li><code class="highlighter-rouge">cloud_provider</code>: Specifies the cloud provider for the kubernetes cluster.</li>
  <li><code class="highlighter-rouge">cluster_label</code>: Specifies a label to be included with analytics/.</li>
  <li><code class="highlighter-rouge">cni_installer_url</code>: Specifies the URL of a Kubernetes YAML file to be used for installing a CNI plugin.
Only applies during initial installation. If empty, the default CNI plugin is used.</li>
  <li><code class="highlighter-rouge">controller_port</code>: Configures the port that the ‘ucp-controller’ listens to. Defaults to ‘443’.</li>
  <li><code class="highlighter-rouge">custom_header_name</code>: Specifies the name of the custom header with ‘name’ = ‘<em>X-Custom-Header-Name</em>’.</li>
  <li><code class="highlighter-rouge">custom_header_value</code>: Specifies the value of the custom header with ‘value’ = ‘<em>Custom Header Value</em>’.</li>
  <li><code class="highlighter-rouge">default_new_user_role</code>: Specifies the role that new users get for their private resource sets.
Values are ‘admin’, ‘viewonly’, ‘scheduler’, ‘restrictedcontrol’, or ‘fullcontrol’. Defaults to ‘restrictedcontrol’.</li>
  <li><code class="highlighter-rouge">default_node_orchestrator</code>: Specifies the type of orchestrator to use for new nodes that are
joined to the cluster. Can be ‘swarm’ or ‘kubernetes’. Defaults to ‘swarm’.</li>
  <li><code class="highlighter-rouge">disable_tracking</code>: Specify ‘true’ to disable analytics of API call information. Defaults to ‘false’.</li>
  <li><code class="highlighter-rouge">disable_usageinfo</code>: Specify ‘true’ to disable analytics of usage information. Defaults to ‘false’.</li>
  <li><code class="highlighter-rouge">dns</code>: Specifies a CSV list of IP addresses to add as nameservers.</li>
  <li><code class="highlighter-rouge">dns_opt</code>: Specifies a CSV list of options used by DNS resolvers.</li>
  <li><code class="highlighter-rouge">dns_search</code>: Specifies a CSV list of domain names to search when a bare unqualified hostname is
used inside of a container.</li>
  <li><code class="highlighter-rouge">enable_admin_ucp_scheduling</code>: Specify ‘true’ to allow admins to schedule on containers on manager nodes.
Defaults to ‘false’.</li>
  <li><code class="highlighter-rouge">external_service_lb</code>: Specifies an optional external load balancer for default links to services with
exposed ports in the web interface.</li>
  <li><code class="highlighter-rouge">host_address</code>: Specifies the address for connecting to the DTR instance tied to this UCP cluster.</li>
  <li><code class="highlighter-rouge">log_host</code>: Specifies a remote syslog server to send UCP controller logs to. If omitted, controller
logs are sent through the default docker daemon logging driver from the ‘ucp-controller’ container.</li>
  <li><code class="highlighter-rouge">idpMetadataURL</code>: Specifies the Identity Provider Metadata URL.</li>
  <li><code class="highlighter-rouge">image_repository</code>: Specifies the repository to use for UCP images.</li>
  <li><code class="highlighter-rouge">install_args</code>: Specifies additional arguments to pass to the UCP installer.</li>
  <li><code class="highlighter-rouge">ipip_mtu</code>: Specifies the IPIP MTU size for the calico IPIP tunnel interface.</li>
  <li><code class="highlighter-rouge">kube_apiserver_port</code>: Configures the port to which the Kubernetes API server listens.</li>
  <li><code class="highlighter-rouge">kv_snapshot_count</code>: Sets the key-value store snapshot count setting. Defaults to ‘20000’.</li>
  <li><code class="highlighter-rouge">kv_timeout</code>: Sets the key-value store timeout setting, in milliseconds. Defaults to ‘5000’.</li>
  <li><code class="highlighter-rouge">lifetime_minutes</code>: Specifies the initial session lifetime, in minutes. Defaults to <code class="highlighter-rouge">4320</code>, which is 72 hours.</li>
  <li><code class="highlighter-rouge">local_volume_collection_mapping</code>: Stores data about collections for volumes in UCP’s local KV store
instead of on the volume labels. This is used for enforcing access control on volumes.</li>
  <li><code class="highlighter-rouge">log_level</code>: Specifies the logging level for UCP components. Values are syslog priority
levels (https://linux.die.net/man/5/syslog.conf): ‘debug’, ‘info’, ‘notice’, ‘warning’, ‘err’, ‘crit’, ‘alert’,
and ‘emerg’.</li>
  <li><code class="highlighter-rouge">managedPasswordDisabled</code>: Indicates if managed password is disabled. Defaults to false.</li>
  <li><code class="highlighter-rouge">managedPasswordFallbackUser</code>: The fallback user when the managed password authentication is disabled. Defaults to “”.</li>
  <li><code class="highlighter-rouge">manager_kube_reserved_resources</code>: Specifies reserve resources for Docker UCP and Kubernetes components
that are running on manager nodes.</li>
  <li><code class="highlighter-rouge">metrics_disk_usage_interval</code>: Specifies the interval for how frequently storage metrics are gathered.
This operation can impact performance when large volumes are present.</li>
  <li><code class="highlighter-rouge">metrics_retention_time</code>: Adjusts the metrics retention time.</li>
  <li><code class="highlighter-rouge">metrics_scrape_interval</code>: Specifies the interval for how frequently managers gather metrics from nodes in the cluster.</li>
  <li><code class="highlighter-rouge">nodeport_range</code>: Specifies the port range that for Kubernetes services of type NodePort can be exposed in.
Defaults to ‘32768-35535’.</li>
  <li><code class="highlighter-rouge">per_user_limit</code>: Specifies the maximum number of sessions that a user can have active simultaneously. If
the creation of a new session would put a user over this limit, the least recently used session is deleted.
A value of zero disables limiting the number of sessions that users can have. Defaults to <code class="highlighter-rouge">5</code>.</li>
  <li><code class="highlighter-rouge">pod_cidr</code>: Specifies the subnet pool from which the IP for the Pod should be allocated from the CNI ipam plugin.</li>
  <li><code class="highlighter-rouge">profiling_enabled</code>: Specify ‘true’ to enable specialized debugging endpoints for profiling UCP performance.
Defaults to ‘false’.</li>
  <li><code class="highlighter-rouge">log_protocol</code>: Specifies the protocol to use for remote logging. Values are ‘tcp’ and ‘udp’. Defaults to ‘tcp’.</li>
  <li><code class="highlighter-rouge">renewal_threshold_minutes</code>: Specifies the length of time, in minutes, before the expiration of a
session. When used, a session is extended by the current configured lifetime from that point in time. A zero value disables session extension. Defaults to <code class="highlighter-rouge">1440</code>, which is 24 hours.</li>
  <li><code class="highlighter-rouge">require_content_trust</code>: Specify ‘true’ to require images be signed by content trust. Defaults to ‘false’.</li>
  <li><code class="highlighter-rouge">require_signature_from</code>: Specifies a csv list of users or teams required to sign images.</li>
  <li><code class="highlighter-rouge">rethinkdb_cache_size</code>: Sets the size of the cache used by UCP’s RethinkDB servers. TDefaults to 1GB,
but leaving this field empty or specifying <code class="highlighter-rouge">auto</code> instructs RethinkDB to determine a cache size automatically.</li>
  <li><code class="highlighter-rouge">rootCerts</code>: Defaults to empty.</li>
  <li><code class="highlighter-rouge">samlEnabled</code>: Indicates if saml is used.</li>
  <li><code class="highlighter-rouge">samlLoginText</code>: Specifies the customized SAML login button text.</li>
  <li><code class="highlighter-rouge">service_id</code>: Specifies the DTR instance’s OpenID Connect Client ID, as registered with the Docker
authentication provider.</li>
  <li><code class="highlighter-rouge">spHost</code>: Specifies the Service Provider Host.</li>
  <li><code class="highlighter-rouge">storage_driver</code>: Specifies the UCP storage driver to install.</li>
  <li><code class="highlighter-rouge">support_dump_include_audit_logs</code>: When set to <code class="highlighter-rouge">true</code>, support dumps include audit logs in the logs
of the ‘ucp-controller’ container of each manager node. Defaults to ‘false’.</li>
  <li><code class="highlighter-rouge">swarm_port</code>: Configures the port that the ‘ucp-swarm-manager’ listens to. Defaults to ‘2376’.</li>
  <li><code class="highlighter-rouge">swarm_strategy</code>: Configures placement strategy for container scheduling.
This doesn’t affect swarm-mode services. Values are ‘spread’, ‘binpack’, and ‘random’.</li>
  <li><code class="highlighter-rouge">tlsSkipVerify</code>: Specifies TLS Skip verify for IdP Metadata.</li>
  <li><code class="highlighter-rouge">unmanaged_cni</code>: Defaults to ‘false’.</li>
  <li><code class="highlighter-rouge">worker_kube_reserved_resources</code>: Reserves resources for Docker UCP and Kubernetes components
that are running on worker nodes.</li>
  <li><code class="highlighter-rouge">custom_kube_api_server_flags</code>: Specifies the configuration options for the Kubernetes API server. (dev)</li>
  <li><code class="highlighter-rouge">custom_kube_controller_manager_flags</code>: Specifies the configuration options for the Kubernetes controller manager. (dev)</li>
  <li><code class="highlighter-rouge">custom_kube_scheduler_flags</code>: Specifies the configuration options for the Kubernetes scheduler. (dev)</li>
  <li><code class="highlighter-rouge">custom_kubelet_flags</code>: Specifies the configuration options for Kubelets. (dev)</li>
</ul>

<p>*dev indicates that the functionality is only for development and testing. Arbitrary Kubernetes configuration parameters are not tested and supported under the Docker Enterprise Software Support Agreement.</p>

<h4 id="vpc">vpc</h4>

<p>If you are deploying on to AWS, by default Docker Cluster will create a new AWS
VPC (Virtual Private Cloud) for the Docker Enterprise resources. To specify an
existing VPC, a user can specify a VPC ID in the Cluster File.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">cluster</span><span class="pi">:</span>
  <span class="na">vpc</span><span class="pi">:</span>
    <span class="na">id</span><span class="pi">:</span> <span class="s">vpc-existing-vpc-id</span>
</code></pre></div></div>

<p>Docker Cluster assumes the VPC CIDR is <code class="highlighter-rouge">172.31.0.0/16</code>, so will therefore
attempt to create AWS subnets from this range. Docker Cluster can not utilise
existing AWS subnets. To instruct Docker Cluster to provision subnets for an
alternative CIDR you can pass a new CIDR into the Cluster File.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">cluster</span><span class="pi">:</span>
  <span class="na">vpc</span><span class="pi">:</span>
    <span class="na">id</span><span class="pi">:</span> <span class="s">vpc-existing-vpc-id</span>
    <span class="na">cidr</span><span class="pi">:</span> <span class="s2">"</span><span class="s">192.168.0.0/16"</span>
</code></pre></div></div>

<p>The following elements can be specified:</p>

<ul>
  <li><code class="highlighter-rouge">id</code> - (Required) The existing AWS VPC ID <code class="highlighter-rouge">vpc-xxx</code></li>
  <li><code class="highlighter-rouge">cidr</code> - If the VPC’s CIDR is not the default <code class="highlighter-rouge">172.31.0.0/16</code> an alternative
CIDR can be specified here.</li>
</ul>

<h3 id="provider">provider</h3>
<p>Defines where the cluster’s resources are provisioned, as well as provider-specific configuration such as tags.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">provider</span><span class="pi">:</span>
  <span class="na">acme</span><span class="pi">:</span>
    <span class="na">email</span><span class="pi">:</span> <span class="s">${email}</span>
    <span class="na">server_url</span><span class="pi">:</span> <span class="s">https://acme-staging-v02.api.letsencrypt.org/directory</span>
  <span class="na">aws</span><span class="pi">:</span>
    <span class="na">region</span><span class="pi">:</span> <span class="s">${region}</span>
</code></pre></div></div>

<h4 id="acme">acme</h4>
<p>The Automated Certificate Management Environment (ACME) is an evolving standard for the automation of a domain-validated certificate authority. Docker Cluster uses the ACME provider to create SSL certificates that are signed by <a href="https://letsencrypt.org/">Let’s Encrypt</a>.</p>

<p>The ACME provider Configuration for the ACME provider supports arguments that closely align with the <a href="https://www.terraform.io/docs/providers/acme/index.html">Terraform ACME provider</a>:</p>

<p>The following elements can be specified:</p>
<ul>
  <li><code class="highlighter-rouge">email</code>: (Required) The email to associate the certificates with.</li>
  <li><code class="highlighter-rouge">server_url</code>: (Optional) The URL to the ACME endpoint’s directory.  Default is “https://acme-v02.api.letsencrypt.org/directory”</li>
</ul>

<h4 id="aws">aws</h4>
<p>Configuration for the AWS provider supports arguments that closely align with the <a href="https://www.terraform.io/docs/providers/aws/index.html">Terraform AWS provider</a>.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">aws</span><span class="pi">:</span>
  <span class="na">region</span><span class="pi">:</span> <span class="s2">"</span><span class="s">us-east-1"</span>
  <span class="na">tags</span><span class="pi">:</span>
    <span class="na">Owner</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Infra"</span>
    <span class="na">Environment</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Test"</span>
</code></pre></div></div>
<p>The following elements can be specified:</p>
<ul>
  <li><code class="highlighter-rouge">region</code> - (Required) This is the AWS region. It can be sourced from the <code class="highlighter-rouge">AWS_DEFAULT_REGION</code> environment variables, or
via a shared credentials file if <code class="highlighter-rouge">profile</code> is specified.</li>
  <li><code class="highlighter-rouge">tags</code> - (Optional) Additional name value pairs to assign to every resource (which
 supports tagging) in the cluster.</li>
  <li><code class="highlighter-rouge">access_key</code> - (Required) This is the AWS access key. It can be sourced from
the <code class="highlighter-rouge">AWS_ACCESS_KEY_ID</code> environment variable, or via
a shared credentials file if <code class="highlighter-rouge">profile</code> is specified.</li>
  <li><code class="highlighter-rouge">secret_key</code> - (Required) This is the AWS secret key. It can be sourced from
the <code class="highlighter-rouge">AWS_SECRET_ACCESS_KEY</code> environment variable, or
via a shared credentials file if <code class="highlighter-rouge">profile</code> is specified.</li>
  <li><code class="highlighter-rouge">profile</code> - (Optional) This is the AWS profile name as set in the shared credentials
file.</li>
  <li><code class="highlighter-rouge">assume_role</code> - (Optional) An <code class="highlighter-rouge">assume_role</code> block (documented below). Only one
<code class="highlighter-rouge">assume_role</code> block can be in the configuration.</li>
  <li><code class="highlighter-rouge">endpoints</code> - (Optional) Configuration block for customizing service endpoints. See the
<a href="https://matsuand.github.io/docs.docker.jp.onthefly/docs/providers/aws/guides/custom-service-endpoints.html">Custom Service Endpoints Guide</a>
for more information about connecting to alternate AWS endpoints or AWS compatible solutions.</li>
  <li><code class="highlighter-rouge">shared_credentials_file</code> = (Optional) This is the path to the shared
 credentials file.  If this is not set and a profile is specified,
 <code class="highlighter-rouge">~/.aws/credentials</code> is used.</li>
  <li><code class="highlighter-rouge">token</code> - (Optional) Session token for validating temporary credentials.
Typically provided after successful identity federation or Multi-Factor
Authentication (MFA) login. With MFA login, this is the session token
provided afterwards, not the 6 digit MFA code used to get temporary
credentials.  It can also be sourced from the <code class="highlighter-rouge">AWS_SESSION_TOKEN</code>
environment variable.</li>
  <li><code class="highlighter-rouge">max_retries</code> - (Optional) This is the maximum number of times an API
call is retried, in the case where requests are being throttled or
experiencing transient failures. The delay between the subsequent API
calls increases exponentially.</li>
  <li><code class="highlighter-rouge">allowed_account_ids</code> - (Optional) List of allowed, white listed, AWS
account IDs to prevent you from mistakenly using an incorrect one (and
potentially end up destroying a live environment). Conflicts with
<code class="highlighter-rouge">forbidden_account_ids</code>.</li>
  <li><code class="highlighter-rouge">forbidden_account_ids</code> - (Optional) List of forbidden, blacklisted,
AWS account IDs to prevent you mistakenly using a wrong one (and
potentially end up destroying a live environment). Conflicts with
<code class="highlighter-rouge">allowed_account_ids</code>.</li>
  <li><code class="highlighter-rouge">insecure</code> - (Optional) Explicitly allows the provider to
perform “insecure” SSL requests. If omitted, defaults to <code class="highlighter-rouge">false</code>.</li>
  <li><code class="highlighter-rouge">skip_credentials_validation</code> - (Optional) Skips the credentials
validation via the STS API. Useful for AWS API implementations that do
not have STS available or implemented.</li>
  <li><code class="highlighter-rouge">skip_get_ec2_platforms</code> - (Optional) Skips getting the supported EC2
platforms. Used by users that don’t have <code class="highlighter-rouge">ec2:DescribeAccountAttributes</code>
permissions.</li>
  <li><code class="highlighter-rouge">skip_region_validation</code> - (Optional) Skips validation of provided region name.
Useful for AWS-like implementations that use their own region names
or to bypass the validation for regions that aren’t publicly available yet.</li>
</ul>

<h3 id="resource">resource</h3>
<p>Resources to provision for a cluster.  Resources are organized as shown in the following example:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">resource</span><span class="pi">:</span>
  <span class="na">type</span><span class="pi">:</span>
    <span class="na">name</span><span class="pi">:</span>
      <span class="s">parameters</span>
</code></pre></div></div>
<p>For a given <code class="highlighter-rouge">type</code>, there may be more one or more named resources to provision.</p>

<p>For a given <code class="highlighter-rouge">name</code>, a resource may have one or more parameters.</p>

<h4 id="aws_instance">aws_instance</h4>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">resource</span><span class="pi">:</span>
  <span class="na">aws_instance</span><span class="pi">:</span>
    <span class="na">workers</span><span class="pi">:</span>
      <span class="na">instance_type</span><span class="pi">:</span> <span class="s">t2.xlarge</span>
      <span class="na">price</span><span class="pi">:</span> <span class="s">0.25</span>
      <span class="na">os</span><span class="pi">:</span> <span class="s">Ubuntu 16.04</span>
</code></pre></div></div>
<ul>
  <li><code class="highlighter-rouge">quantity</code>: (Required) The number of instances to create.</li>
  <li><code class="highlighter-rouge">os</code>: An alias that is expanded by <code class="highlighter-rouge">docker cluster</code> to the AMI owner and AMI name to install.
The following aliases are supported by <code class="highlighter-rouge">docker cluster</code>:
    <ul>
      <li><code class="highlighter-rouge">CentOS 7</code></li>
      <li><code class="highlighter-rouge">RHEL 7.1</code></li>
      <li><code class="highlighter-rouge">RHEL 7.2</code></li>
      <li><code class="highlighter-rouge">RHEL 7.3</code></li>
      <li><code class="highlighter-rouge">RHEL 7.4</code></li>
      <li><code class="highlighter-rouge">RHEL 7.5</code></li>
      <li><code class="highlighter-rouge">RHEL 7.6</code></li>
      <li><code class="highlighter-rouge">Oracle Linux 7.3</code></li>
      <li><code class="highlighter-rouge">Oracle Linux 7.4</code></li>
      <li><code class="highlighter-rouge">Oracle Linux 7.5</code></li>
      <li><code class="highlighter-rouge">SLES 12.2</code></li>
      <li><code class="highlighter-rouge">SLES 12.3</code></li>
      <li><code class="highlighter-rouge">SLES 15</code></li>
      <li><code class="highlighter-rouge">Ubuntu 14.04</code></li>
      <li><code class="highlighter-rouge">Ubuntu 16.04</code></li>
      <li><code class="highlighter-rouge">Ubuntu 18.04</code></li>
      <li><code class="highlighter-rouge">Windows Server 2016</code></li>
      <li><code class="highlighter-rouge">Windows Server 1709</code></li>
      <li><code class="highlighter-rouge">Windows Server 1803</code></li>
      <li><code class="highlighter-rouge">Windows Server 2019</code>
        <blockquote>
          <p>Note</p>

          <p>Make sure the OS you select is <a href="https://success.docker.com/article/compatibility-matrix">compatible</a>
  with the product you’re installing. Docker Cluster validates the support during installation.</p>
        </blockquote>
      </li>
    </ul>
  </li>
  <li><code class="highlighter-rouge">instance_type</code>: Specifies the <a href="https://aws.amazon.com/ec2/instance-types/">AWS instance type</a> to provision.</li>
  <li><code class="highlighter-rouge">key_name</code>: By default, Docker Cluster creates an <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-key-pairs.html">AWS EC2 Key Pair</a> and registers it with AWS for the cluster.
To use an existing AWS EC2 Key Pair, set this value to the name of the AWS EC2 Key Pair.</li>
  <li><code class="highlighter-rouge">ssh_private_key</code>: By default, Docker Cluster creates an <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-key-pairs.html">AWS EC2 Key Pair</a> and registers it with AWS for the cluster. To use an existing AWS EC2 Key Pair, set this value to the path of the private SSH key.</li>
  <li><code class="highlighter-rouge">username</code>: Specifies the username for the node with Administrative privileges. By default, the <code class="highlighter-rouge">os</code> option
sets this to the well-known username for the AMIs (which can change by distribution):
    <ul>
      <li>Amazon Linux 2 is <code class="highlighter-rouge">ec2-user</code>.</li>
      <li>Centos is <code class="highlighter-rouge">centos</code>.</li>
      <li>Oracle Linux is <code class="highlighter-rouge">ec2-user</code>.</li>
      <li>RedHat is <code class="highlighter-rouge">ec2-user</code>.</li>
      <li>SLES is <code class="highlighter-rouge">ec2-user</code>.</li>
      <li>Ubuntu is <code class="highlighter-rouge">ubuntu</code>.</li>
      <li>Windows is <code class="highlighter-rouge">Administrator</code>.</li>
    </ul>
  </li>
  <li><code class="highlighter-rouge">password</code>: This value is only used by Windows nodes. By default, Windows nodes have a random password generated.</li>
  <li><code class="highlighter-rouge">ami</code>: Specifies a custom AMI, or one that’s not currently available as an OS. Specify either the id or
the owner/name to query for the latest.
    <ul>
      <li><code class="highlighter-rouge">id</code>: Specifies the ID of the AMI. For example, <code class="highlighter-rouge">ami-0510c89f1a2691cf2</code>.</li>
      <li><code class="highlighter-rouge">owner</code>: Specifies the AWS account ID of the image owner. For example, <code class="highlighter-rouge">099720109477</code>.</li>
      <li><code class="highlighter-rouge">name</code>: Specifies the name of the AMI that was provided during image creation. For example, <code class="highlighter-rouge">ubuntu/images/hvm-ssd/ubuntu-xenial-16.04-amd64-server-*</code>.</li>
      <li><code class="highlighter-rouge">platform</code>: Specify <code class="highlighter-rouge">windows</code> for Windows instances.</li>
    </ul>
  </li>
  <li><code class="highlighter-rouge">tags</code>: (Optional) Specifies additional name value pairs to assign to every instance.</li>
  <li><code class="highlighter-rouge">swarm_labels</code>: (Optional) Specifies additional key value pairs that represent swarm labels to apply to every node.</li>
</ul>

<h4 id="aws_spot_instance_request">aws_spot_instance_request</h4>

<p>Provisions a spot instance request in AWS to dramatically reduce the cost of instances. Spot instance
availability is not guaranteed. Therefore, it is recommended to use <code class="highlighter-rouge">aws_spot_instance_request</code> for
additional worker nodes and not for mission-critical nodes like managers and registry.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">resource</span><span class="pi">:</span>
  <span class="na">aws_spot_instance_request</span><span class="pi">:</span>
    <span class="na">workers</span><span class="pi">:</span>
      <span class="na">instance_type</span><span class="pi">:</span> <span class="s">t2.xlarge</span>
      <span class="na">price</span><span class="pi">:</span> <span class="s">0.25</span>
      <span class="na">os</span><span class="pi">:</span> <span class="s">Ubuntu 16.04</span>
      <span class="na">quantity</span><span class="pi">:</span> <span class="s">3</span>
</code></pre></div></div>

<p>Supports the same set of parameters as <a href="https://matsuand.github.io/docs.docker.jp.onthefly/ee/cluster/#aws_instance">aws_instance</a>, with the addition of an optional price to limit the max bid for a spot instance.</p>
<ul>
  <li><code class="highlighter-rouge">price</code>: (Optional) Specifies a maximum price to bid on the spot instance.</li>
</ul>

<h4 id="aws_lb">aws_lb</h4>
<p>Provisions an AWS Load Balancer.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">resource</span><span class="pi">:</span>
  <span class="na">aws_lb</span><span class="pi">:</span>
    <span class="na">ucp</span><span class="pi">:</span>
      <span class="na">domain</span><span class="pi">:</span> <span class="s2">"</span><span class="s">example.com"</span>
      <span class="na">instances</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">managers</span>
      <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">443:443</span>
      <span class="pi">-</span> <span class="s">6443:6443</span>
</code></pre></div></div>
<p>The following options are supported:</p>

<ul>
  <li><code class="highlighter-rouge">instances</code>: (Required) Specifies a list of <code class="highlighter-rouge">aws_instance</code> and <code class="highlighter-rouge">aws_spot_instance_request</code> names to
attach to the load balancer.</li>
  <li><code class="highlighter-rouge">ports</code>: (Required) Specifies a list of <code class="highlighter-rouge">listening port[/protocol]:target port[/protocol]</code> mappings
to define how the load balancer should route traffic. By default, the protocol is <code class="highlighter-rouge">tcp</code>.</li>
  <li><code class="highlighter-rouge">domain</code>: Specifies the domain in which to create DNS records for this load balancer. The record is named the
same as this resource, appended by the domain. For example, if the resource is <code class="highlighter-rouge">ucp</code> and the domain is <code class="highlighter-rouge">example.com</code>,
the <code class="highlighter-rouge">A</code> record is <code class="highlighter-rouge">ucp.example.com</code>.</li>
  <li><code class="highlighter-rouge">internal</code>: (Optional) Defaults to <code class="highlighter-rouge">false</code>.</li>
  <li><code class="highlighter-rouge">type</code>: (Optional) Defaults to <code class="highlighter-rouge">network</code>.</li>
  <li><code class="highlighter-rouge">enable_cross_zone_load_balancing</code>: (Optional) Defaults to <code class="highlighter-rouge">false</code>.</li>
</ul>

<h4 id="aws_route53_zone">aws_route53_zone</h4>
<p>Creates a subdomain in an AWS route53 zone. The following example creates a public zone for <code class="highlighter-rouge">testing.example.com</code>:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">resource</span><span class="pi">:</span>
  <span class="na">aws_route53_zone</span><span class="pi">:</span>
    <span class="na">dns</span><span class="pi">:</span>
      <span class="na">domain</span><span class="pi">:</span> <span class="s">example.com</span>
      <span class="na">subdomain</span><span class="pi">:</span> <span class="s">testing</span>
</code></pre></div></div>
<p>The following elements are required:</p>
<ul>
  <li><code class="highlighter-rouge">domain</code>: (Required) Specifies the name of the hosted zone.</li>
  <li><code class="highlighter-rouge">subdomain</code>: (Required) Specifies the subdomain to create in the <code class="highlighter-rouge">domain</code> hosted zone.</li>
</ul>

<h3 id="variable">variable</h3>
<p>Docker cluster supports basic parameterization. The variable section defines a make of keys and values. A key can have a sub-key named <code class="highlighter-rouge">type</code>, which changes the behavior of the variable.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">variable</span><span class="pi">:</span>
  <span class="na">region</span><span class="pi">:</span> <span class="s2">"</span><span class="s">us-east-1"</span>
  <span class="na">password</span><span class="pi">:</span>
    <span class="na">prompt</span><span class="pi">:</span> <span class="no">true</span>
  <span class="na">instance_type</span><span class="pi">:</span>
    <span class="na">env</span><span class="pi">:</span> <span class="s">AWS_INSTANCE_TYPE</span>
</code></pre></div></div>

<p>Variables are referenced in the cluster definition as <code class="highlighter-rouge">${variable_name}</code>. For
example, <code class="highlighter-rouge">${region}</code> is substituted as <code class="highlighter-rouge">us-east-2</code> through the cluster
definition.</p>

<p>In addition to providing a literal value for variables, you can specify values
by:</p>

<ul>
  <li><code class="highlighter-rouge">prompt: true</code> - Request the value from the user and do not echo characters
as the value is entered.</li>
  <li><code class="highlighter-rouge">env</code>: Obtain the value from an environment variable</li>
</ul>

<h3 id="where-to-go-next">Where to go next</h3>
<ul>
  <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/reference/">UCP CLI reference</a></li>
  <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/reference/">DTR CLI reference</a></li>
</ul>


							<!-- tags -->
							
							
							
							<span class="glyphicon glyphicon-tags" style="padding-right: 10px"></span><span style="vertical-align: 2px"><a href="https://matsuand.github.io/docs.docker.jp.onthefly/search/?q=documentation">documentation</a>, <a href="https://matsuand.github.io/docs.docker.jp.onthefly/search/?q=docs">docs</a>, <a href="https://matsuand.github.io/docs.docker.jp.onthefly/search/?q=docker">docker</a>, <a href="https://matsuand.github.io/docs.docker.jp.onthefly/search/?q=cluster">cluster</a>, <a href="https://matsuand.github.io/docs.docker.jp.onthefly/search/?q=infrastructure">infrastructure</a>, <a href="https://matsuand.github.io/docs.docker.jp.onthefly/search/?q=automation">automation</a></span>
							
							<!-- link corrections -->
              <script language="JavaScript">
							var x = document.links.length;
							var baseHref = document.getElementsByTagName('base')[0].href
							for (i = 0; i < x; i++) {
							  var munged = false;
							  var thisHREF = document.links[i].href;
							  var originalURL = "/ee/cluster/cluster-file/";
							  if (thisHREF.indexOf(baseHref + "#") > -1) {
							    // hash fix
							    //console.log('BEFORE: base:',baseHref,'thisHREF:',thisHREF,'originalURL:',originalURL);
							    thisHREF = originalURL + thisHREF.replace(baseHref, "");
							    //console.log('AFTER: base:',baseHref,'thisHREF:',thisHREF,'originalURL:',originalURL);
							  }
							  if ((thisHREF.indexOf(window.location.hostname) > -1 || thisHREF.indexOf('http') == -1) && document.links[i].className.indexOf("nomunge") < 0) {
							    munged = true;
							    thisHREF = thisHREF.replace(".md", "/").replace("/index/", "/");
							    document.links[i].setAttribute('href', thisHREF);
							  }
							}
							</script>
							
						  <div id="ratings-div" style="color:#b9c2cc; text-align: center; margin-top: 150px; visibility: hidden">
								<div id="pd_rating_holder_8453675"></div>
								<script type="text/javascript">
									PDRTJS_settings_8453675 = {
										"id": "8453675",
										"unique_id": "ee/cluster/cluster-file.md",
										"title": "Cluster file version 1 reference",
										"permalink": "https://github.com/docker/docker.github.io/blob/master/ee/cluster/cluster-file.md"
									};
									(function(d, c, j) {
										if (!document.getElementById(j)) {
											var pd = d.createElement(c),
												s;
											pd.id = j;
											pd.src = ('https:' == document.location.protocol) ? 'https://polldaddy.com/js/rating/rating.js' : 'http://i0.poll.fm/js/rating/rating.js';
											s = document.getElementsByTagName(c)[0];
											s.parentNode.insertBefore(pd, s);
										}
									}(document, 'script', 'pd-rating-js'));
								</script>
							</div>
							
						</section>
					</main>
					<nav class="col-nav">
						<div id="sidebar-nav" class="sidebar hidden-sm hidden-xs">
						<div id="navbar" class="nav-sidebar">
    <ul class="nav" id="jsTOCLeftNav">
    </ul>
</div>

						</div>
					</nav>
					<div class="col-toc">
							<div class="sidebar hidden-xs hidden-sm">
							<div class="toc-nav">
								<div class="feedback-links">
									<ul>
										
										<li style="visibility: hidden"><a href="https://github.com/matsuand/docs.docker.jp/edit/v19.03.local/ee/cluster/cluster-file.md"><i class="fa fa-pencil-square-o" aria-hidden="true"></i> このページの編集</a></li>
										<li><a href="https://github.com/matsuand/docs.docker.jp.onthefly/issues/new?body=File: [ee/cluster/cluster-file.md](https://matsuand.github.io/docs.docker.jp.onthefly/ee/cluster/cluster-file/)"
															class="nomunge"><i class="fa fa-check" aria-hidden="true"></i> 文書変更のリクエスト</a></li>
										<li><a href="https://success.docker.com/support"><i class="fa fa-question" aria-hidden="true"></i> サポート依頼</a></li>
										<!-- toggle mode -->
										<li>
											<div class="toggle-mode">
												<div class="icon">
													<i class="fa fa-sun-o" aria-hidden="true"></i>
												</div>
												<div class="toggle-switch">
													<label class="switch">
														<input type="checkbox" id="switch-style">
														<div class="slider round"></div>
												</label>
												</div>
												<div class="icon">
													<i class="fa fa-moon-o" aria-hidden="true"></i>
												</div>
											</div>
										</li>
									</ul>
								</div>
								   
									<div id="side-toc-title">本ページ内</div>
									
<ul id="my_toc" class="inline_toc">
  <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/cluster-file.md#cluster-file-structure-and-examples" class="nomunge">Cluster file structure and examples</a>
    <ul>
      <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/cluster-file.md#cluster" class="nomunge">cluster</a>
        <ul>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/cluster-file.md#subscription" class="nomunge">subscription</a></li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/cluster-file.md#cloudstor" class="nomunge">cloudstor</a></li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/cluster-file.md#dtr" class="nomunge">dtr</a></li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/cluster-file.md#engine" class="nomunge">engine</a></li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/cluster-file.md#kubernetes" class="nomunge">kubernetes</a>
            <ul>
              <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/cluster-file.md#aws-kubernetes-options" class="nomunge">AWS Kubernetes options</a></li>
            </ul>
          </li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/cluster-file.md#registry" class="nomunge">registry</a></li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/cluster-file.md#ucp" class="nomunge">ucp</a>
            <ul>
              <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/cluster-file.md#additional-ucp-configuration-options" class="nomunge">Additional UCP configuration options</a></li>
            </ul>
          </li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/cluster-file.md#vpc" class="nomunge">vpc</a></li>
        </ul>
      </li>
      <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/cluster-file.md#provider" class="nomunge">provider</a>
        <ul>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/cluster-file.md#acme" class="nomunge">acme</a></li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/cluster-file.md#aws" class="nomunge">aws</a></li>
        </ul>
      </li>
      <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/cluster-file.md#resource" class="nomunge">resource</a>
        <ul>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/cluster-file.md#aws_instance" class="nomunge">aws_instance</a></li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/cluster-file.md#aws_spot_instance_request" class="nomunge">aws_spot_instance_request</a></li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/cluster-file.md#aws_lb" class="nomunge">aws_lb</a></li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/cluster-file.md#aws_route53_zone" class="nomunge">aws_route53_zone</a></li>
        </ul>
      </li>
      <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/cluster-file.md#variable" class="nomunge">variable</a></li>
      <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/cluster-file.md#where-to-go-next" class="nomunge">Where to go next</a></li>
    </ul>
  </li>
</ul>


								</div>
								
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	
	<footer class="footer">
		  
    <div class="container">
        <div class="top_footer">
            <div class="row">
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><a href="https://www.docker.com/what-docker">What is Docker</a></li>
                        <li><a href="https://www.docker.com/what-container">What is a Container</a></li>
                        <li><a href="https://www.docker.com/use-cases">Use Cases</a></li>
                        <li><a href="https://www.docker.com/customers">Customers</a></li>
                        <li><a href="https://www.docker.com/partners/partner-program">Partners</a></li>
                        <li class="break"><a href="https://www.docker.com/industry-government">For Government</a></li>
                        <li><a href="https://www.docker.com/company">About Docker</a></li>
                        <li><a href="https://www.docker.com/company/management">Management</a></li>
                        <li><a href="https://www.docker.com/company/news-and-press">Press &amp; News</a></li>
                        <li><a href="https://www.docker.com/careers">Careers</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><a href="https://www.docker.com/products/overview">Product</a></li>
                        <li><a href="https://www.docker.com/pricing">Pricing</a></li>
                        <li><a href="https://www.docker.com/docker-community">Community Edition</a></li>
                        <li class="break"><a href="https://www.docker.com/enterprise">Enterprise Edition </a></li>
                        <li><a href="https://www.docker.com/products/docker-datacenter">Docker Datacenter</a></li>
                        <li><a href="https://hub.docker.com/">Docker Hub</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/">Documentation</a></li>
                        <li><a href="https://www.docker.com/docker">Learn</a></li>
                        <li><a href="https://blog.docker.com" target="_blank">Blog</a></li>
                        <li><a href="https://engineering.docker.com" target="_blank">Engineering Blog</a></li>
                        <li><a href="https://training.docker.com/" target="_blank">Training</a></li>
                        <li><a href="https://success.docker.com/support">Support</a></li>
                        <li><a href="https://success.docker.com/kbase">Knowledge Base</a></li>
                        <li><a href="https://www.docker.com/products/resources">Resources</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><a href="https://www.docker.com/docker-community">Community</a></li>
                        <li><a href="https://www.docker.com/technologies/overview">Open Source</a></li>
                        <li><a href="https://www.docker.com/community/events">Events</a></li>
                        <li><a href="https://forums.docker.com/" target="_blank">Forums</a></li>
                        <li><a href="https://www.docker.com/community/docker-captains">Docker Captains</a></li>
                        <li><a href="https://www.docker.com/docker-community/scholarships">Scholarships</a></li>
                        <li><a href="https://blog.docker.com/curated/">Community News</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-nav">
                <nav class="footer_sub_nav">
                    <ul class="menu">
                        <li><a href="http://status.docker.com/">Status</a></li>
                        <li><a href="https://www.docker.com/docker-security">Security</a></li>
                        <li><a href="https://www.docker.com/legal">Legal</a></li>
                        <li><a href="https://www.docker.com/company/contact">Contact</a></li>
                    </ul>
                </nav>
            </div>
        </div>
        <div class="bottom_footer">
            <div class="footer-copyright col-xs-12 col-md-8">
                <p class="copyright">
                    Copyright &copy; 2019 Docker Inc. All rights reserved. </p>
            </div>
            <div class="footer_social_nav">
                <ul class="nav-social">
                    <li class="fa fa-twitter"><a href="http://twitter.com/docker">Twitter</a></li>
                    <li class="fa fa-youtube"><a href="http://www.youtube.com/user/dockerrun">Youtube</a></li>
                    <li class="fa fa-github"><a href="https://github.com/docker">GitHub</a></li>
                    <li class="fa fa-linkedin"><a href="https://www.linkedin.com/company/docker">Linkedin</a></li>
                    <li class="fa fa-facebook"><a href="https://www.facebook.com/docker.run">Facebook</a></li>
                    <li class="fa fa-reddit"><a href="http://www.reddit.com/r/docker">Reddit</a></li>
                    <li class="fa fa-slideshare"><a href="http://www.slideshare.net/docker">Slideshare</a></li>
                </ul>
            </div>
        </div>
    </div>

	</footer>
	<link rel="stylesheet" href="https://matsuand.github.io/docs.docker.jp.onthefly/css/github.css">
	
	<script defer src="https://matsuand.github.io/docs.docker.jp.onthefly/js/anchorlinks.js"></script>
	<script defer src="https://matsuand.github.io/docs.docker.jp.onthefly/js/menu.js"></script>
	<script src="https://matsuand.github.io/docs.docker.jp.onthefly/js/jquery.js"></script>
	<script src="https://matsuand.github.io/docs.docker.jp.onthefly/js/bootstrap.min.js"></script>
	<!-- Always include the archive.js, but it doesn't do much unless we are an archive -->
	<script language="javascript">
	// Default to assuming this is an archive and hiding some stuff
	// See js/archive.js and js/docs.js for logic relating to this
	var isArchive = true;
	var dockerVersion = 'v19.03';
	// In archives, we need to know the page root and we get it from JEKYLL_ENV in the jekyll build command
	var jekyllEnv = 'development';
	// If unset (in non-archive branches), defaults to "development". In that case, reset it to empty
	if (jekyllEnv == 'development') {
		jekyllEnv = '';
	}
	var pageURL = jekyllEnv + '/ee/cluster/cluster-file/';
	</script>
	<script src="https://matsuand.github.io/docs.docker.jp.onthefly/js/archive.js"></script>
	<script src="https://matsuand.github.io/docs.docker.jp.onthefly/js/stickyfill.min.js"></script>
	<script defer src="https://matsuand.github.io/docs.docker.jp.onthefly/js/metadata.js"></script>
	<script src="https://matsuand.github.io/docs.docker.jp.onthefly/js/glossary.js"></script>
	<script defer src="https://matsuand.github.io/docs.docker.jp.onthefly/js/docs.js"></script>
	<script defer src="https://matsuand.github.io/docs.docker.jp.onthefly/js/toc.js"></script>
	<script language="javascript">
	jQuery(document).ready(function(){
				hookupTOCEvents();
			});
	</script>
</body>

</html>
