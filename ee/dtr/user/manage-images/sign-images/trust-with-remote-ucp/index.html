<!-- Page generated 2020-05-30 14:52:22 +0900 -->
<!-- Logic for 'edit this button'


    

    

    

    

    

    

    

    

-->
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <style type="text/css">
      @charset "UTF-8";
      [ng\:cloak],
      [ng-cloak],
      [data-ng-cloak],
      [x-ng-cloak],
      .ng-cloak,
      .x-ng-cloak,
      .ng-hide:not(.ng-hide-animate) {
          display: none !important;
      }

      ng\:form {
          display: block;
      }
  </style>
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-WL2QLG5');</script>

  
  <!-- favicon -->
  <link rel="icon" type="image/x-icon" href="/docs.docker.jp.onthefly/favicons/docs@2x.ico" sizes="129x128">
  <meta name="msapplication-TileImage" content="/docs.docker.jp.onthefly/favicons/docs@2x.ico">
  <link rel="apple-touch-icon" type="image/x-icon" href="/docs.docker.jp.onthefly/favicons/docs@2x.ico" sizes="129x128">
  <meta property="og:image" content="/docs.docker.jp.onthefly/favicons/docs@2x.ico"/>
  <!-- metadata -->
  <meta property="og:type" content="website"/>
  <meta property="og:updated_time" itemprop="dateUpdated" content="2020-05-30T14:52:22+09:00"/>
  <meta property="og:image" itemprop="image primaryImageOfPage" content="/docs.docker.jp.onthefly/images/docs@2x.png"/>
  <meta name="twitter:card" content="summary"/>
  <meta name="twitter:domain" content="docs.docker.com"/>
  <meta name="twitter:site" content="@docker_docs"/>
  <meta name="twitter:url" content="https://twitter.com/docker_docs"/>
  <meta name="twitter:title" itemprop="title name" content="Using Docker Content Trust with a Remote UCP Cluster"/>
  <meta name="twitter:description" property="og:description" itemprop="description" content="This topic applies to Docker Enterprise. The Docker Enterprise platform business, including products, customers, and employees, has been acquired by Mirantis, inc., effective 13-November-2019. For more information on the acquisition..." />
  <meta name="twitter:image:src" content="/docs.docker.jp.onthefly/images/docs@2x.png"/>
  <meta name="twitter:image:alt" content="Docker Documentation"/>
  <meta property="article:published_time" itemprop="datePublished" content="2020-05-30T14:52:22+09:00"/>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="keywords" content="registry, sign, trust, notary">
  <link rel="stylesheet" href="/docs.docker.jp.onthefly/css/font-awesome.min.css">
  <link rel="stylesheet" href="/docs.docker.jp.onthefly/css/bootstrap.min.css">
  <link id="pygments" rel="stylesheet" href="/docs.docker.jp.onthefly/css/pygments/perldoc.css">
  <link id="pagestyle" rel="stylesheet" href="/docs.docker.jp.onthefly/css/style.css">

  <!-- Go get "Open Sans" font from Google -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
  <!-- SEO stuff -->
  <title>Using Docker Content Trust with a Remote UCP Cluster | Docker Documentation</title>
  <meta property="og:title" content="Using Docker Content Trust with a Remote UCP Cluster" />
  <meta property="og:locale" content="ja_JP" />
  <meta name="description" content="Learn how to use a single DTR's trust data with remote UCPs." />
  <meta property="og:description" content="Learn how to use a single DTR's trust data with remote UCPs." />
  <link rel="canonical" href="/ee/dtr/user/manage-images/sign-images/trust-with-remote-ucp/" />
  <meta property="og:url" content="https://docs.docker.com/ee/dtr/user/manage-images/sign-images/trust-with-remote-ucp/" />
  <meta property="og:site_name" content="Docker ドキュメント" />
  <script type="application/ld+json">{"@context":"http://schema.org","@type":"WebPage","headline":"Using Docker Content Trust with a Remote UCP Cluster","description":"Learn how to use a single DTR's trust data with remote UCPs.","url":"https://docs.docker.com/ee/dtr/user/manage-images/sign-images/trust-with-remote-ucp/"}</script>
  <!-- END SEO STUFF -->
  
  <script>
  // Default to assuming this is an archive and hiding some stuff
  // See js/archive.js and js/docs.js for logic relating to this
  var isArchive = true;
  var dockerVersion = 'v19.03';
  </script>
</head>


    <body ng-app="Docker" ng-controller="DockerController" class="colums">
    <header>
        <nav class="nav-secondary navbar navbar-fixed-top">
    <!-- <div class="fan"></div> -->
    <div class="container-fluid">
        <div class="navbar-header">
            <a href="/docs.docker.jp.onthefly/">
                <img class="logo" src="/docs.docker.jp.onthefly/images/docker-docs-logo.svg" alt="Docker Docs" title="Docker Docs">
            </a>
        </div>
        <div class="navbar-collapse" aria-expanded="false" style="height: 1px;">
            <div class="logo-mobile">
    <a href="/docs.docker.jp.onthefly/">
        <img src="/docs.docker.jp.onthefly/images/docker-icon.svg" alt="Docker Docs" title="Docker Docs">
    </a>
</div>
<div class="search-form" id="search-div" style="visibility: hidden">
    <form class="search-form form-inline ng-pristine ng-valid" id="searchForm" action="https://matsuand.github.io/docs.docker.jp.onthefly/search/">
        <input class="search-field form-control ds-input" id="st-search-input" value="" name="q" placeholder="文書内検索" type="search" autocomplete="off" spellcheck="false" dir="auto" style="position: relative; vertical-align: top;">
        <div id="autocompleteContainer">
            <div id="autocompleteResults"></div>
        </div>
        <!-- <button type="submit" class="search-submit btn btn-default">検索</button> -->
    </form>
</div>
<div class="sidebar-toggle">
    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
    </button>
</div>
<div class="nav-container hidden-sm hidden-xs">
    <div id="tabs">
        <ul class="tabs jsTOCHorizontal">

        </ul>
    </div>
    <div class="ctrl-right">
        <a href="javascript:void(0)" id="menu-toggle"><i class="fa fa-indent" aria-hidden="true"></i></a>
        <div class="btn-group" style="visibility: hidden">
  <button type="button" class="btn btn-default dropdown-btn dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    Docker v19.03 (最新)     <span class="caret"></span>
  </button>
  <ul class="dropdown-menu">
    <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/v18.09/">Docker v18.09</a></li><li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/v18.03/">Docker v18.03</a></li><li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/v17.06/">Docker v17.06</a></li>
  </ul>
</div>

    </div>
</div>

        </div>
    </div>
</nav>

    </header>
    <div class="wrapper right-open">
        <div class="container-fluid">
            <div class="row">
                <div class="col-body">
                    <main class="col-content content">
                        <section class="section">
                            
                            
                            <h1>Using Docker Content Trust with a Remote UCP Cluster</h1> 
                            <span class="reading-time" title="Estimated reading time">
  <span class="reading-time-label">読む時間の目安: </span>
  
  
    9 分
  
</span>

                            
                            
                            <blockquote>
  <!-- This text will be included on all Docker pages that document Enterprise products, features, and technologies that are transitioning to Mirantis. -->
  <p>This topic applies to Docker Enterprise.</p>

  <p>The Docker Enterprise platform business, including products, customers, and employees, has been acquired by Mirantis, inc., effective 13-November-2019. For more information on the acquisition and how it may affect you and your business, refer to the <a href="https://www.docker.com/faq-for-docker-enterprise-customers-and-partners">Docker Enterprise Customer FAQ</a>.</p>
</blockquote>

<p>For more advanced deployments, you may want to share one Docker Trusted Registry
across multiple Universal Control Planes. However, customers wanting to adopt
this model alongside the
<a href="/ee/ucp/admin/configure/run-only-the-images-you-trust.md">Only Run Signed Images</a>
UCP feature, run into problems as each UCP operates an independent set of users.</p>

<p>Docker Content Trust (DCT) gets around this problem, since users from
a remote UCP are able to sign images in the central DTR and still apply runtime
enforcement.</p>

<p>In the following example, we will connect DTR managed by UCP cluster 1 with a remote UCP cluster which we are calling UCP cluster 2, sign the
image with a user from UCP cluster 2, and provide runtime enforcement
within UCP cluster 2. This process could be repeated over and over,
integrating DTR with multiple remote UCP clusters, signing the image with users
from each environment, and then providing runtime enforcement in each remote UCP
cluster separately.</p>

<p><img src="../../../images/remoteucp-graphic.png" alt="" /></p>

<blockquote>
  <p>Before attempting this guide, familiarize yourself with <a href="engine/security/trust/content_trust/#signing-images-with-docker-content-trust">Docker Content
Trust</a>
and <a href="/ee/ucp/admin/configure/run-only-the-images-you-trust.md">Only Run Signed Images</a>
on a single UCP. Many of the concepts within this guide may be new without that
background.</p>
</blockquote>

<h2 id="prerequisites">Prerequisites</h2>

<ul>
  <li>Cluster 1, running UCP 3.0.x or higher, with a DTR 2.5.x or higher deployed
within the cluster.</li>
  <li>Cluster 2, running UCP 3.0.x or higher, with no DTR node.</li>
  <li>Nodes on Cluster 2 need to trust the Certificate Authority which signed DTR’s
TLS Certificate. This can be tested by logging on to a cluster 2 virtual
machine and running <code class="highlighter-rouge">curl https://dtr.example.com</code>.</li>
  <li>The DTR TLS Certificate needs be properly configured, ensuring that the
<strong>Loadbalancer/Public Address</strong> field has been configured, with this address
included <a href="/ee/dtr/admin/configure/use-your-own-tls-certificates/">within the
certificate</a>.</li>
  <li>A machine with the <a href="/ee/ucp/user-access/cli/">Docker Client</a> (CE 17.12 /
EE 1803 or newer) installed, as this contains the relevant <code class="highlighter-rouge">$ docker trust</code>
commands.</li>
</ul>

<h2 id="registering-dtr-with-a-remote-universal-control-plane">Registering DTR with a remote Universal Control Plane</h2>

<p>As there is no registry running within cluster 2, by default UCP will not know
where to check for trust data. Therefore, the first thing we need to do is
register DTR within the remote UCP in cluster 2. When you normally
install DTR, this registration process happens by default to
a local UCP, or cluster 1.</p>

<blockquote>
  <p>The registration process allows the remote UCP to get signature data from DTR,
however this will not provide Single Sign On (SSO). Users on cluster 2 will not be
synced with cluster 1’s UCP or DTR. Therefore when pulling images, registry
authentication will still need to be passed as part of the service definition
if the repository is private. See
<a href="https://kubernetes.io/docs/tasks/configure-pod-container/pull-image-private-registry/#create-a-secret-in-the-cluster-that-holds-your-authorization-token">Kubernetes</a>
or <a href="/engine/swarm/services/#create-a-service-using-an-image-on-a-private-registry">Docker
Swarm</a> examples.</p>
</blockquote>

<p>To add a new registry, retrieve the Certificate
Authority (CA) used to sign the DTR TLS Certificate through the DTR URL’s
<code class="highlighter-rouge">/ca</code> endpoint.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>curl <span class="nt">-ks</span> https://dtr.example.com/ca <span class="o">&gt;</span> dtr.crt
</code></pre></div></div>

<p>Next, convert the DTR certificate into a JSON configuration file
for registration within the UCP for cluster 2.</p>

<p>You can find a template of the <code class="highlighter-rouge">dtr-bundle.json</code> below. Replace the host address with your DTR URL, and enter the contents of the DTR CA certificate between the new line commands <code class="highlighter-rouge">\n and \n</code>.</p>

<blockquote>
  <h3 id="json-formatting">JSON Formatting</h3>
  <p>Ensure there are no line breaks between each line
of the DTR CA certificate within the JSON file. Use your favorite JSON formatter for validation.</p>
</blockquote>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">cat </span>dtr-bundle.json
<span class="o">{</span>
  <span class="s2">"hostAddress"</span>: <span class="s2">"dtr.example.com"</span>,
  <span class="s2">"caBundle"</span>: <span class="s2">"-----BEGIN CERTIFICATE-----</span><span class="se">\n</span><span class="s2">&lt;contents of cert&gt;</span><span class="se">\n</span><span class="s2">-----END CERTIFICATE-----"</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Now upload the configuration file to cluster 2’s UCP
through the UCP API endpoint, <code class="highlighter-rouge">/api/config/trustedregistry_</code>. To authenticate
against the API of cluster 2’s UCP, we have downloaded a <a href="/ee/ucp/user-access/cli/#download-client-certificates/">UCP client
bundle</a>, extracted it in
the current directory, and will reference the keys for authentication.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>curl <span class="nt">--cacert</span> ca.pem <span class="nt">--cert</span> cert.pem <span class="nt">--key</span> key.pem <span class="se">\</span>
    <span class="nt">-X</span> POST <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Accept: application/json"</span> <span class="se">\</span>
    <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
    <span class="nt">-d</span> @dtr-bundle.json <span class="se">\</span>
    https://cluster2.example.com/api/config/trustedregistry_
</code></pre></div></div>

<p>Navigate to the UCP web interface to verify that the JSON file was imported successfully, as the UCP endpoint will not
output anything. Select <strong>Admin &gt; Admin Settings &gt; Docker
Trusted Registry</strong>. If the registry has been added successfully, you should see
the DTR listed.</p>

<p><img src="../../../images/remoteucp-addregistry.png" alt="" class="with-border" /></p>

<p>Additionally, you can check the full <a href="/ee/ucp/admin/configure/ucp-configuration-file/">configuration
file</a> within cluster 2’s UCP.
Once downloaded, the <code class="highlighter-rouge">ucp-config.toml</code> file should now contain a section called
<code class="highlighter-rouge">[registries]</code></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>curl <span class="nt">--cacert</span> ca.pem <span class="nt">--cert</span> cert.pem <span class="nt">--key</span> key.pem https://cluster2.example.com/api/ucp/config-toml <span class="o">&gt;</span> ucp-config.toml
</code></pre></div></div>

<p>If the new registry isn’t shown in the list, check the <code class="highlighter-rouge">ucp-controller</code> container logs on cluster 2.</p>

<h2 id="signing-an-image-in-dtr">Signing an image in DTR</h2>

<p>We will now sign an image and push this to DTR. To sign images we need a user’s public private
key pair from cluster 2.  It can be found in a client bundle, with
<code class="highlighter-rouge">key.pem</code> being a private key and <code class="highlighter-rouge">cert.pem</code> being the public key on an <strong>X.509</strong>
certificate.</p>

<p>First, load the private key into the local Docker trust store
<code class="highlighter-rouge">(~/.docker/trust)</code>. The name used here is purely metadata to help keep track of
which keys you have imported.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ docker trust key load --name cluster2admin key.pem
Loading key from "key.pem"...
Enter passphrase for new cluster2admin key with ID a453196:
Repeat passphrase for new cluster2admin key with ID a453196:
Successfully imported key from key.pem
</code></pre></div></div>

<p>Next initiate the repository, and add the public key of cluster 2’s user
as a signer. You will be asked for a number of passphrases to protect the keys.
Keep note of these passphrases, and see [Docker Content Trust documentation]
(/engine/security/trust/trust_delegation/#managing-delegations-in-a-notary-server) to learn more about managing keys.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ docker trust signer add --key cert.pem cluster2admin dtr.example.com/admin/trustdemo
Adding signer "cluster2admin" to dtr.example.com/admin/trustdemo...
Initializing signed repository for dtr.example.com/admin/trustdemo...
Enter passphrase for root key with ID 4a72d81:
Enter passphrase for new repository key with ID dd4460f:
Repeat passphrase for new repository key with ID dd4460f:
Successfully initialized "dtr.example.com/admin/trustdemo"
Successfully added signer: cluster2admin to dtr.example.com/admin/trustdemo
</code></pre></div></div>

<p>Finally, sign the image tag. This pushes the image up to DTR, as well as
signs the tag with the user from cluster 2’s keys.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ docker trust sign dtr.example.com/admin/trustdemo:1
Signing and pushing trust data for local image dtr.example.com/admin/trustdemo:1, may overwrite remote trust data
The push refers to repository [dtr.olly.dtcntr.net/admin/trustdemo]
27c0b07c1b33: Layer already exists
aa84c03b5202: Layer already exists
5f6acae4a5eb: Layer already exists
df64d3292fd6: Layer already exists
1: digest: sha256:37062e8984d3b8fde253eba1832bfb4367c51d9f05da8e581bd1296fc3fbf65f size: 1153
Signing and pushing trust metadata
Enter passphrase for cluster2admin key with ID a453196:
Successfully signed dtr.example.com/admin/trustdemo:1
</code></pre></div></div>

<p>Within the DTR web interface, you should now be able to see your newly pushed tag with the <strong>Signed</strong> text next to the size.</p>

<p><img src="../../../images/remoteucp-signedimage.png" alt="" class="with-border" /></p>

<p>You could sign this image multiple times if required, whether it’s multiple
teams from the same cluster wanting to sign the image, or you integrating DTR with more remote UCPs so users from clusters 1,
2, 3, or more can all sign the same image.</p>

<h2 id="enforce-signed-image-tags-on-the-remote-ucp">Enforce Signed Image Tags on the Remote UCP</h2>

<p>We can now enable <strong>Only Run Signed Images</strong> on the remote UCP. To do this,
login to cluster 2’s UCP web interface as an admin. Select <strong>Admin &gt; Admin Settings &gt; Docker Content
Trust</strong>.</p>

<p>See <a href="/ee/ucp/admin/configure/run-only-the-images-you-trust/">Run only the images you trust</a> for more information on only running signed images in UCP.</p>

<p><img src="../../../images/remoteucp-enablesigning.png" alt="" class="with-border" /></p>

<p>Finally we can now deploy a workload on cluster 2, using a signed
image from a DTR running on cluster 1. This workload could be a simple <code class="highlighter-rouge">$ docker
run</code>, a Swarm Service, or a Kubernetes workload. As a simple test, source a
client bundle, and try running one of your signed images.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ source env.sh

$ docker service create dtr.example.com/admin/trustdemo:1
nqsph0n6lv9uzod4lapx0gwok
overall progress: 1 out of 1 tasks
1/1: running   [==================================================&gt;]
verify: Service converged

$ docker service ls
ID                  NAME                    MODE                REPLICAS            IMAGE                                   PORTS
nqsph0n6lv9u        laughing_lamarr         replicated          1/1                 dtr.example.com/admin/trustdemo:1
</code></pre></div></div>

<h2 id="troubleshooting">Troubleshooting</h2>

<p>If the image is stored in a private repository within DTR, you need to pass credentials to the
Orchestrator as there is no SSO between cluster 2 and DTR. See the relevant
<a href="https://kubernetes.io/docs/tasks/configure-pod-container/pull-image-private-registry/#create-a-secret-in-the-cluster-that-holds-your-authorization-token">Kubernetes</a> or <a href="/engine/swarm/services/#create-a-service-using-an-image-on-a-private-registry">Docker Swarm</a> documentation for more details.</p>

<h3 id="example-errors">Example Errors</h3>

<h4 id="image-or-trust-data-does-not-exist">Image or trust data does not exist</h4>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>image or trust data does not exist for dtr.example.com/admin/trustdemo:1
</code></pre></div></div>

<p>This means something went wrong when initiating the repository or signing the
image, as the tag contains no signing data.</p>

<h4 id="image-did-not-meet-required-signing-policy">Image did not meet required signing policy</h4>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Error response from daemon: image did not meet required signing policy

dtr.example.com/admin/trustdemo:1: image did not meet required signing policy
</code></pre></div></div>

<p>This means that the image was signed correctly, however the user who signed the
image does not meet the signing policy in cluster 2. This could be because you
signed the image with the wrong user keys.</p>

<h4 id="dtr-url-must-be-a-registered-trusted-registry">DTR URL must be a registered trusted registry</h4>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Error response from daemon: dtr.example.com must be a registered trusted registry. See 'docker run --help'.
</code></pre></div></div>

<p>This means you have not registered DTR to work with a remote UCP instance yet, as outlined in <a href="#registering-dtr-with-a-remote-universal-control-plane">Registering DTR with a Remote Universal Control Plane</a>.</p>

<h2 id="where-to-go-next">Where to go next</h2>

<ul>
  <li><a href="/notary/advanced_usage.md">Learn more about Notary</a></li>
  <li><a href="/notary/service_architecture.md">Notary architecture</a></li>
</ul>

                            <!-- tags -->
                            
                            <span class="glyphicon glyphicon-tags" style="padding-right: 10px"></span><span
                                style="vertical-align: 2px"><a
                                    href="https://docs.docker.com/search/?q=registry">registry</a>, <a
                                    href="https://docs.docker.com/search/?q=sign">sign</a>, <a
                                    href="https://docs.docker.com/search/?q=trust">trust</a>, <a
                                    href="https://docs.docker.com/search/?q=notary">notary</a></span>
                            
                            
                            <div id="ratings-div"
                                style="color:#b9c2cc; text-align: center; margin-top: 150px; visibility: hidden">
                                <div id="pd_rating_holder_8453675"></div>
                                <script type="text/javascript">
                                    PDRTJS_settings_8453675 = {
                                        "id": "8453675",
                                        "unique_id": "ee/dtr/user/manage-images/sign-images/trust-with-remote-ucp.md",
                                        "title": "Using Docker Content Trust with a Remote UCP Cluster",
                                        "permalink": "https://github.com/docker/docker.github.io/blob/master/ee/dtr/user/manage-images/sign-images/trust-with-remote-ucp.md"
                                    };
                                    (function (d, c, j) {
                                        if (!document.getElementById(j)) {
                                            var pd = d.createElement(c),
                                                s;
                                            pd.id = j;
                                            pd.src = ('https:' == document.location.protocol) ? 'https://polldaddy.com/js/rating/rating.js' : 'http://i0.poll.fm/js/rating/rating.js';
                                            s = document.getElementsByTagName(c)[0];
                                            s.parentNode.insertBefore(pd, s);
                                        }
                                    }(document, 'script', 'pd-rating-js'));
                                </script>
                            </div>
                            
                        </section>
                    </main>
                    <nav class="col-nav">
                        <div id="sidebar-nav" class="sidebar hidden-sm hidden-xs">
                            <div id="navbar" class="nav-sidebar">
    <ul class="nav jsTOCHorizontal hidden-md hidden-lg">
    </ul>
    <div class="divider hidden-md hidden-lg"></div>
    <ul class="nav" id="jsTOCLeftNav">
    </ul>
</div>

                        </div>
                    </nav>
                    <div class="col-toc">
                        <div class="sidebar hidden-xs hidden-sm">
                            <div class="toc-nav">
                                <div class="feedback-links">
                                    <ul>
                                        
                                        <li style="visibility: hidden"><a href="https://github.com/matsuand/docs.docker.jp/edit/v19.03.local/ee/dtr/user/manage-images/sign-images/trust-with-remote-ucp.md"><i
                                                    class="fa fa-pencil-square-o" aria-hidden="true"></i> このページの編集</a></li>
                                        <li><a href="https://github.com/matsuand/docs.docker.jp/issues/new?body=ファイル: [ee/dtr/user/manage-images/sign-images/trust-with-remote-ucp.md](https://matsuand.github.io/docs.docker.jp.onthefly/ee/dtr/user/manage-images/sign-images/trust-with-remote-ucp/)"
                                                class="nomunge"><i class="fa fa-check" aria-hidden="true"></i> 文書変更のリクエスト</a></li>
                                        <!-- toggle mode -->
                                        <li>
                                            <div class="toggle-mode">
                                                <div class="icon">
                                                    <i class="fa fa-sun-o" aria-hidden="true"></i>
                                                </div>
                                                <div class="toggle-switch">
                                                    <label class="switch">
                                                        <input type="checkbox" id="switch-style">
                                                        <div class="slider round"></div>
                                                    </label>
                                                </div>
                                                <div class="icon">
                                                    <i class="fa fa-moon-o" aria-hidden="true"></i>
                                                </div>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                                
                                
                                
                                
                                <div id="side-toc-title">本ページ内:</div>
                                
<ul id="my_toc" class="inline_toc">
  <li><a href="#prerequisites" class="nomunge">Prerequisites</a></li>
  <li><a href="#registering-dtr-with-a-remote-universal-control-plane" class="nomunge">Registering DTR with a remote Universal Control Plane</a>
    <ul>
      <li><a href="#json-formatting" class="nomunge">JSON Formatting</a></li>
    </ul>
  </li>
  <li><a href="#signing-an-image-in-dtr" class="nomunge">Signing an image in DTR</a></li>
  <li><a href="#enforce-signed-image-tags-on-the-remote-ucp" class="nomunge">Enforce Signed Image Tags on the Remote UCP</a></li>
  <li><a href="#troubleshooting" class="nomunge">Troubleshooting</a>
    <ul>
      <li><a href="#example-errors" class="nomunge">Example Errors</a></li>
    </ul>
  </li>
  <li><a href="#where-to-go-next" class="nomunge">Where to go next</a></li>
</ul>


                                
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    
    <footer class="footer">
          
    <div class="container">
        <div class="top_footer">
            <div class="row">
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/why-docker">Why Docker</a></b></li>
                        <li><a href="https://www.docker.com/what-container">What is a Container</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/products/overview">Products</a></b></li>
                        <li><a href="https://www.docker.com/products/docker-desktop">Docker Desktop</a></li>
                        <li><a href="https://www.docker.com/products/docker-hub">Docker Hub</a></li>
                        <li><b><a href="https://www.docker.com/products/docker-desktop">Features</a></b></li>
                        <li><a href="https://www.docker.com/products/container-runtime">Container Runtime</a></li>
                        <li><a href="https://www.docker.com/products/developer-tools">Developer Tools</a></li>
                        <li><a href="https://www.docker.com/products/kubernetes">Kubernetes</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/products/docker-desktop">Developers</a></b></li>
                        <li><a href="https://www.docker.com/use-cases">Use Cases</a></li>
                        <li><a href="https://www.docker.com/play-with-docker">Play with Docker</a></li>
                        <li><a href="https://www.docker.com/docker-community">Community</a></li>
                        <li><a href="https://www.docker.com/open-source">Open Source</a></li>
                        <li><a href="https://www.docker.com/community/docker-captains">Docker Captains</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/company" target="_blank">Company</a></b></li>
                        <li><a href="https://www.docker.com/company">About Us</a></li>
                        <li><a href="https://www.docker.com/blog/" target="_blank">Blog</a></li>
                        <li><a href="https://www.docker.com/customers">Customers</a></li>
                        <li><a href="https://www.docker.com/partners">Partners</a></li>
                        <li><a href="https://www.docker.com/company/newsroom">Newsroom</a></li>
                        <li><a href="https://www.docker.com/careers">Careers</a></li>
                        <li><a href="https://www.docker.com/company/contact">Contact Us</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-nav">
                <nav class="footer_sub_nav">
                    <ul class="menu">
                        <li><a href="http://status.docker.com/">Status</a></li>
                        <li><a href="https://www.docker.com/docker-security">Security</a></li>
                        <li><a href="https://www.docker.com/legal">Legal</a></li>
                        <li><a href="https://www.docker.com/company/contact">Contact</a></li>
                    </ul>
                </nav>
            </div>
        </div>
        <div class="bottom_footer">
            <div class="footer-copyright col-xs-12 col-md-8">
                <p class="copyright">
                    Copyright &copy; 2013-2020 Docker Inc. All rights reserved. </p>
            </div>
            <div class="footer_social_nav">
                <ul class="nav-social">
                    <li class="fa fa-twitter"><a href="http://twitter.com/docker">Twitter</a></li>
                    <li class="fa fa-youtube"><a href="http://www.youtube.com/user/dockerrun">Youtube</a></li>
                    <li class="fa fa-github"><a href="https://github.com/docker">GitHub</a></li>
                    <li class="fa fa-linkedin"><a href="https://www.linkedin.com/company/docker">Linkedin</a></li>
                    <li class="fa fa-facebook"><a href="https://www.facebook.com/docker.run">Facebook</a></li>
                    <li class="fa fa-slideshare"><a href="https://www.slideshare.net/docker">Slideshare</a></li>
                    <li class="fa fa-reddit"><a href="https://www.reddit.com/r/docker">Reddit</a></li>
                </ul>
            </div>
        </div>
    </div>

    </footer>
    <link rel="stylesheet" href="/docs.docker.jp.onthefly/css/github.css">
    
    <script defer src="/docs.docker.jp.onthefly/js/anchorlinks.js"></script>
    <script defer src="/docs.docker.jp.onthefly/js/menu.js"></script>
    <script src="/docs.docker.jp.onthefly/js/jquery.js"></script>
    <script src="/docs.docker.jp.onthefly/js/bootstrap.min.js"></script>
    <!-- Always include the archive.js, but it doesn't do much unless we are an archive -->
    <script>
        // Default to assuming this is an archive and hiding some stuff
        // See js/archive.js and js/docs.js for logic relating to this
        var isArchive = true;
        var dockerVersion = 'v19.03';
        // In archives, we need to know the page root and we get it from JEKYLL_ENV in the jekyll build command
        var jekyllEnv = 'development';
        // If unset (in non-archive branches), defaults to "development". In that case, reset it to empty
        if (jekyllEnv === 'development') {
            jekyllEnv = '';
        }
        var pageURL = jekyllEnv + '/ee/dtr/user/manage-images/sign-images/trust-with-remote-ucp/';
    </script>
    <script src="/docs.docker.jp.onthefly/js/archive.js"></script>
    <script src="/docs.docker.jp.onthefly/js/stickyfill.min.js"></script>
    <script defer src="/docs.docker.jp.onthefly/js/metadata.js"></script>
    <script src="/docs.docker.jp.onthefly/js/glossary.js"></script>
    <script defer src="/docs.docker.jp.onthefly/js/docs.js"></script>
    <script defer src="/docs.docker.jp.onthefly/js/toc.js"></script>
    <script defer src="/js/search.js"></script>
</body>


</html>
