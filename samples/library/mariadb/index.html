<!-- Page generated 2020-04-09 21:14:21 +0900 -->
<!-- relative link basehrefs -->

	


<!-- Logic for 'edit this button' -->


	

	

	

	

	

	

	

	


<!-- End of logic for 'edit this button' -->


<!DOCTYPE html>
<html lang="ja">

<head>
	<base href="/docs.docker.jp.onthefly/samples/library/mariadb/" />
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<style type="text/css">
		@charset "UTF-8";
		[ng\:cloak],
		[ng-cloak],
		[data-ng-cloak],
		[x-ng-cloak],
		.ng-cloak,
		.x-ng-cloak,
		.ng-hide:not(.ng-hide-animate) {
			display: none !important;
		}

		ng\:form {
			display: block;
		}
	</style>
	<!-- Google Tag Manager -->
	<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
	new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
	j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
	'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-WL2QLG5');</script>
	<!-- End Google Tag Manager -->
	
	<!-- favicon -->
	<link rel="icon" type="image/x-icon" href="/docs.docker.jp.onthefly/favicons/docs@2x.ico" sizes="129x128">
	<meta name="msapplication-TileImage" content="/docs.docker.jp.onthefly/favicons/docs@2x.ico">
	<link rel="apple-touch-icon" type="image/x-icon" href="/docs.docker.jp.onthefly/favicons/docs@2x.ico" sizes="129x128">
	<meta property="og:image" content="/docs.docker.jp.onthefly/favicons/docs@2x.ico"/>
	<!-- metadata -->
	<meta property="og:type" content="website"/>
	<meta property="og:updated_time" itemprop="dateUpdated" content="2020-04-09T21:14:21+09:00"/>
	<meta property="og:image" itemprop="image primaryImageOfPage" content="/docs.docker.jp.onthefly/images/docs@2x.png"/>
	<meta name="twitter:card" content="summary"/>
	<meta name="twitter:domain" content="docs.docker.jp"/>
	<meta name="twitter:site" content="@docker_docs"/>
	<meta name="twitter:url" content="https://twitter.com/docker_docs"/>
	<meta name="twitter:title" itemprop="title name" content="mariadb"/>
	<meta name="twitter:description" property="og:description" itemprop="description" content="MariaDB is a community-developed fork of MySQL intended to remain free under the GNU GPL. GitHub repo: https://github.com/docker-library/mariadb Library reference This content is imported from the official Docker Library docs,..." />
	<meta name="twitter:image:src" content="/docs.docker.jp.onthefly/images/docs@2x.png"/>
	<meta name="twitter:image:alt" content="Docker ドキュメント"/>
	<meta property="article:published_time" itemprop="datePublished" content="2020-04-09T21:14:21+09:00"/>

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="keywords" content="library, sample, mariadb">
	<link rel="stylesheet" href="/docs.docker.jp.onthefly/css/font-awesome.min.css">
	<link rel="stylesheet" href="/docs.docker.jp.onthefly/css/bootstrap.min.css">
	<link id="pygments" rel="stylesheet" href="/docs.docker.jp.onthefly/css/pygments/perldoc.css">
	<link id="pagestyle" rel="stylesheet" href="/docs.docker.jp.onthefly/css/style.css">

	<!-- Go get "Open Sans" font from Google -->
	<link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
	<!-- SEO stuff -->
	<title>mariadb | Docker ドキュメント</title>
<meta property="og:title" content="mariadb" />
<meta property="og:locale" content="ja_JP" />
<meta name="description" content="MariaDB is a community-developed fork of MySQL intended to remain free under the GNU GPL.
" />
<meta property="og:description" content="MariaDB is a community-developed fork of MySQL intended to remain free under the GNU GPL.
" />
<link rel="canonical" href="/docs.docker.jp.onthefly/samples/library/mariadb/" />
<meta property="og:url" content="https://matsuand.github.io/docs.docker.jp.onthefly/samples/library/mariadb/" />
<meta property="og:site_name" content="Docker ドキュメント" />
<script type="application/ld+json">
{"@context":"http://schema.org","@type":"WebPage","headline":"mariadb","description":"MariaDB is a community-developed fork of MySQL intended to remain free under the GNU GPL.
","url":"https://matsuand.github.io/docs.docker.jp.onthefly/samples/library/mariadb/"}</script>
	<!-- END SEO STUFF -->
	
	<script language="javascript">
	// Default to assuming this is an archive and hiding some stuff
	// See js/archive.js and js/docs.js for logic relating to this
	var isArchive = true;
	var dockerVersion = 'v19.03';
	</script>
</head>
<body ng-app="Docker" ng-controller="DockerController" class="colums">
	<header>
		 <nav class="nav-secondary navbar navbar-fixed-top">
    <!-- <div class="fan"></div> -->
    <div class="container-fluid">
        <div class="navbar-header">
            <a href="/docs.docker.jp.onthefly/"><img class="logo" src="/docs.docker.jp.onthefly/images/docker-docs-logo.svg" alt="Docker Docs" title="Docker Docs"></a>
        </div>
        <div class="navbar-collapse" aria-expanded="false" style="height: 1px;">
            <div class="search-form" id="search-div" style="visibility: hidden">
    <form class="search-form form-inline ng-pristine ng-valid" id="searchForm" action="/docs.docker.jp.onthefly/search/">
        <input class="search-field form-control ds-input" id="st-search-input" value="" name="q" placeholder="文書内検索" type="search" autocomplete="off" spellcheck="false" dir="auto" style="position: relative; vertical-align: top;">
        <div id="autocompleteContainer">
            <div id="autocompleteResults"></div>
        </div>
        <!-- <button type="submit" class="search-submit btn btn-default">検索</button> -->
    </form>
</div>
<div class="sidebar-toggle">
    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
    </button>
</div>
<div class="nav-container">
    <div id="tabs">
        <ul class="tabs" id="jsTOCHorizontal">

        </ul>
    </div>
    <div class="ctrl-right hidden-xs hidden-sm">
        <a href="javascript:void(0)" id="menu-toggle"><i class="fa fa-indent" aria-hidden="true"></i></a>
        <div class="btn-group" style="visibility: hidden">
  <button type="button" class="btn btn-default dropdown-btn dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    Docker v19.03 (current)     <span class="caret"></span>
  </button>
  <ul class="dropdown-menu">
    <li><a href="/docs.docker.jp.onthefly/v18.09/">Docker v18.09</a></li><li><a href="/docs.docker.jp.onthefly/v18.03/">Docker v18.03</a></li><li><a href="/docs.docker.jp.onthefly/v17.06/">Docker v17.06</a></li>
  </ul>
</div>

    </div>
</div>

        </div>
    </div>
</nav>

	</header>

	<div class="wrapper right-open">
		<div class="container-fluid">
			<div class="row">
				<div class="col-body">
					<main class="col-content content">
						<section class="section">
							
								
							<h1>mariadb</h1>  <span class="reading-time" title="Estimated reading time">
  <span class="reading-time-label">読む時間の目安: </span>
  
  
    12 分
  
</span>

							
							
							<p>MariaDB is a community-developed fork of MySQL intended to remain free under the GNU GPL.</p>

<p>GitHub repo: <a href="https://github.com/docker-library/mariadb">https://github.com/docker-library/mariadb</a></p>

<blockquote>
  <p><strong>Library reference</strong></p>

  <p>This content is imported from
<a href="https://github.com/docker-library/docs/tree/master/mariadb/">the official Docker Library docs</a>,
and is provided by the original uploader. You can view the Docker Hub page for this image at
<a href="https://hub.docker.com/images/mariadb">https://hub.docker.com/images/mariadb</a></p>
</blockquote>

<!-- content begin -->

<!--

********************************************************************************

WARNING:

    DO NOT EDIT "mariadb/README.md"

    IT IS AUTO-GENERATED

    (from the other files in "mariadb/" combined with a set of templates)

********************************************************************************

-->

<h1 id="supported-tags-and-respective-dockerfile-links">Supported tags and respective <code class="highlighter-rouge">Dockerfile</code> links</h1>

<ul>
  <li><a href="https://github.com/docker-library/mariadb/blob/52ea3012bb04d8b62f4a6f7792baa07815467173/10.4/Dockerfile"><code class="highlighter-rouge">10.4.6-bionic</code>, <code class="highlighter-rouge">10.4-bionic</code>, <code class="highlighter-rouge">10-bionic</code>, <code class="highlighter-rouge">bionic</code>, <code class="highlighter-rouge">10.4.6</code>, <code class="highlighter-rouge">10.4</code>, <code class="highlighter-rouge">10</code>, <code class="highlighter-rouge">latest</code></a></li>
  <li><a href="https://github.com/docker-library/mariadb/blob/52ea3012bb04d8b62f4a6f7792baa07815467173/10.3/Dockerfile"><code class="highlighter-rouge">10.3.16-bionic</code>, <code class="highlighter-rouge">10.3-bionic</code>, <code class="highlighter-rouge">10.3.16</code>, <code class="highlighter-rouge">10.3</code></a></li>
  <li><a href="https://github.com/docker-library/mariadb/blob/52ea3012bb04d8b62f4a6f7792baa07815467173/10.2/Dockerfile"><code class="highlighter-rouge">10.2.25-bionic</code>, <code class="highlighter-rouge">10.2-bionic</code>, <code class="highlighter-rouge">10.2.25</code>, <code class="highlighter-rouge">10.2</code></a></li>
  <li><a href="https://github.com/docker-library/mariadb/blob/52ea3012bb04d8b62f4a6f7792baa07815467173/10.1/Dockerfile"><code class="highlighter-rouge">10.1.40-bionic</code>, <code class="highlighter-rouge">10.1-bionic</code>, <code class="highlighter-rouge">10.1.40</code>, <code class="highlighter-rouge">10.1</code></a></li>
</ul>

<h1 id="quick-reference">Quick reference</h1>

<ul>
  <li>
    <p><strong>Where to get help</strong>:<br />
<a href="https://forums.docker.com/">the Docker Community Forums</a>, <a href="https://blog.docker.com/2016/11/introducing-docker-community-directory-docker-community-slack/">the Docker Community Slack</a>, or <a href="https://stackoverflow.com/search?tab=newest&amp;q=docker">Stack Overflow</a></p>
  </li>
  <li>
    <p><strong>Where to file issues</strong>:<br />
<a href="https://github.com/docker-library/mariadb/issues">https://github.com/docker-library/mariadb/issues</a></p>
  </li>
  <li>
    <p><strong>Maintained by</strong>:<br />
<a href="https://github.com/docker-library/mariadb">the Docker Community</a></p>
  </li>
  <li>
    <p><strong>Supported architectures</strong>: (<a href="https://github.com/docker-library/official-images#architectures-other-than-amd64">more info</a>)<br />
<a href="https://hub.docker.com/r/amd64/mariadb/"><code class="highlighter-rouge">amd64</code></a>, <a href="https://hub.docker.com/r/arm64v8/mariadb/"><code class="highlighter-rouge">arm64v8</code></a>, <a href="https://hub.docker.com/r/ppc64le/mariadb/"><code class="highlighter-rouge">ppc64le</code></a></p>
  </li>
  <li>
    <p><strong>Published image artifact details</strong>:<br />
<a href="https://github.com/docker-library/repo-info/blob/master/repos/mariadb">repo-info repo’s <code class="highlighter-rouge">repos/mariadb/</code> directory</a> (<a href="https://github.com/docker-library/repo-info/commits/master/repos/mariadb">history</a>)<br />
(image metadata, transfer size, etc)</p>
  </li>
  <li>
    <p><strong>Image updates</strong>:<br />
<a href="https://github.com/docker-library/official-images/pulls?q=label%3Alibrary%2Fmariadb">official-images PRs with label <code class="highlighter-rouge">library/mariadb</code></a><br />
<a href="https://github.com/docker-library/official-images/blob/master/library/mariadb">official-images repo’s <code class="highlighter-rouge">library/mariadb</code> file</a> (<a href="https://github.com/docker-library/official-images/commits/master/library/mariadb">history</a>)</p>
  </li>
  <li>
    <p><strong>Source of this description</strong>:<br />
<a href="https://github.com/docker-library/docs/tree/master/mariadb">docs repo’s <code class="highlighter-rouge">mariadb/</code> directory</a> (<a href="https://github.com/docker-library/docs/commits/master/mariadb">history</a>)</p>
  </li>
</ul>

<h1 id="what-is-mariadb">What is MariaDB?</h1>

<p>MariaDB is a community-developed fork of the MySQL relational database management system intended to remain free under the GNU GPL. Being a fork of a leading open source software system, it is notable for being led by the original developers of MySQL, who forked it due to concerns over its acquisition by Oracle. Contributors are required to share their copyright with the MariaDB Foundation.</p>

<p>The intent is also to maintain high compatibility with MySQL, ensuring a “drop-in” replacement capability with library binary equivalency and exact matching with MySQL APIs and commands. It includes the XtraDB storage engine for replacing InnoDB, as well as a new storage engine, Aria, that intends to be both a transactional and non-transactional engine perhaps even included in future versions of MySQL.</p>

<blockquote>
  <p><a href="https://en.wikipedia.org/wiki/MariaDB">wikipedia.org/wiki/MariaDB</a></p>
</blockquote>

<p><img src="https://raw.githubusercontent.com/docker-library/docs/74e3b3d4d60389208732dbd2c95145868111d959/mariadb/logo.png" alt="logo" /></p>

<h1 id="how-to-use-this-image">How to use this image</h1>

<h2 id="start-a-mariadb-server-instance">Start a <code class="highlighter-rouge">mariadb</code> server instance</h2>

<p>Starting a MariaDB instance is simple:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker run <span class="nt">--name</span> some-mariadb <span class="nt">-e</span> <span class="nv">MYSQL_ROOT_PASSWORD</span><span class="o">=</span>my-secret-pw <span class="nt">-d</span> mariadb:tag
</code></pre></div></div>

<p>... where <code class="highlighter-rouge">some-mariadb</code> is the name you want to assign to your container, <code class="highlighter-rouge">my-secret-pw</code> is the password to be set for the MySQL root user and <code class="highlighter-rouge">tag</code> is the tag specifying the MySQL version you want. See the list above for relevant tags.</p>

<h2 id="connect-to-mariadb-from-the-mysql-command-line-client">Connect to MariaDB from the MySQL command line client</h2>

<p>The following command starts another <code class="highlighter-rouge">mariadb</code> container instance and runs the <code class="highlighter-rouge">mysql</code> command line client against your original <code class="highlighter-rouge">mariadb</code> container, allowing you to execute SQL statements against your database instance:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker run <span class="nt">-it</span> <span class="nt">--network</span> some-network <span class="nt">--rm</span> mariadb mysql <span class="nt">-hsome-mariadb</span> <span class="nt">-uexample-user</span> <span class="nt">-p</span>
</code></pre></div></div>

<p>... where <code class="highlighter-rouge">some-mariadb</code> is the name of your original <code class="highlighter-rouge">mariadb</code> container (connected to the <code class="highlighter-rouge">some-network</code> Docker network).</p>

<p>This image can also be used as a client for non-Docker or remote instances:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker run <span class="nt">-it</span> <span class="nt">--rm</span> mariadb mysql <span class="nt">-hsome</span>.mysql.host <span class="nt">-usome-mysql-user</span> <span class="nt">-p</span>
</code></pre></div></div>

<p>More information about the MySQL command line client can be found in the <a href="http://dev.mysql.com/doc/en/mysql.html">MySQL documentation</a></p>

<h2 id="-via-docker-stack-deploy-or-docker-compose">... via <a href="https://matsuand.github.io/docs.docker.jp.onthefly/engine/reference/commandline/stack_deploy/"><code class="highlighter-rouge">docker stack deploy</code></a> or <a href="https://github.com/docker/compose"><code class="highlighter-rouge">docker-compose</code></a></h2>

<p>Example <code class="highlighter-rouge">stack.yml</code> for <code class="highlighter-rouge">mariadb</code>:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Use root/example as user/password credentials</span>
<span class="na">version</span><span class="pi">:</span> <span class="s1">'</span><span class="s">3.1'</span>

<span class="na">services</span><span class="pi">:</span>

  <span class="na">db</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">mariadb</span>
    <span class="na">restart</span><span class="pi">:</span> <span class="s">always</span>
    <span class="na">environment</span><span class="pi">:</span>
      <span class="na">MYSQL_ROOT_PASSWORD</span><span class="pi">:</span> <span class="s">example</span>

  <span class="na">adminer</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">adminer</span>
    <span class="na">restart</span><span class="pi">:</span> <span class="s">always</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">8080:8080</span>
</code></pre></div></div>

<p><a href="http://play-with-docker.com?stack=https://raw.githubusercontent.com/docker-library/docs/9efeec18b6b2ed232cf0fbd3914b6211e16e242c/mariadb/stack.yml"><img src="https://github.com/play-with-docker/stacks/raw/cff22438cb4195ace27f9b15784bbb497047afa7/assets/images/button.png" alt="Try in PWD" /></a></p>

<p>Run <code class="highlighter-rouge">docker stack deploy -c stack.yml mariadb</code> (or <code class="highlighter-rouge">docker-compose -f stack.yml up</code>), wait for it to initialize completely, and visit <code class="highlighter-rouge">http://swarm-ip:8080</code>, <code class="highlighter-rouge">http://localhost:8080</code>, or <code class="highlighter-rouge">http://host-ip:8080</code> (as appropriate).</p>

<h2 id="container-shell-access-and-viewing-mysql-logs">Container shell access and viewing MySQL logs</h2>

<p>The <code class="highlighter-rouge">docker exec</code> command allows you to run commands inside a Docker container. The following command line will give you a bash shell inside your <code class="highlighter-rouge">mariadb</code> container:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker <span class="nb">exec</span> <span class="nt">-it</span> some-mariadb bash
</code></pre></div></div>

<p>The log is available through Docker’s container log:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker logs some-mariadb
</code></pre></div></div>

<h2 id="using-a-custom-mysql-configuration-file">Using a custom MySQL configuration file</h2>

<p>The startup configuration is specified in the file <code class="highlighter-rouge">/etc/mysql/my.cnf</code>, and that file in turn includes any files found in the <code class="highlighter-rouge">/etc/mysql/conf.d</code> directory that end with <code class="highlighter-rouge">.cnf</code>. Settings in files in this directory will augment and/or override settings in <code class="highlighter-rouge">/etc/mysql/my.cnf</code>. If you want to use a customized MySQL configuration, you can create your alternative configuration file in a directory on the host machine and then mount that directory location as <code class="highlighter-rouge">/etc/mysql/conf.d</code> inside the <code class="highlighter-rouge">mariadb</code> container.</p>

<p>If <code class="highlighter-rouge">/my/custom/config-file.cnf</code> is the path and name of your custom configuration file, you can start your <code class="highlighter-rouge">mariadb</code> container like this (note that only the directory path of the custom config file is used in this command):</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker run <span class="nt">--name</span> some-mariadb <span class="nt">-v</span> /my/custom:/etc/mysql/conf.d <span class="nt">-e</span> <span class="nv">MYSQL_ROOT_PASSWORD</span><span class="o">=</span>my-secret-pw <span class="nt">-d</span> mariadb:tag
</code></pre></div></div>

<p>This will start a new container <code class="highlighter-rouge">some-mariadb</code> where the MariaDB instance uses the combined startup settings from <code class="highlighter-rouge">/etc/mysql/my.cnf</code> and <code class="highlighter-rouge">/etc/mysql/conf.d/config-file.cnf</code>, with settings from the latter taking precedence.</p>

<h3 id="configuration-without-a-cnf-file">Configuration without a <code class="highlighter-rouge">cnf</code> file</h3>

<p>Many configuration options can be passed as flags to <code class="highlighter-rouge">mysqld</code>. This will give you the flexibility to customize the container without needing a <code class="highlighter-rouge">cnf</code> file. For example, if you want to change the default encoding and collation for all tables to use UTF-8 (<code class="highlighter-rouge">utf8mb4</code>) just run the following:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker run <span class="nt">--name</span> some-mariadb <span class="nt">-e</span> <span class="nv">MYSQL_ROOT_PASSWORD</span><span class="o">=</span>my-secret-pw <span class="nt">-d</span> mariadb:tag <span class="nt">--character-set-server</span><span class="o">=</span>utf8mb4 <span class="nt">--collation-server</span><span class="o">=</span>utf8mb4_unicode_ci
</code></pre></div></div>

<p>If you would like to see a complete list of available options, just run:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker run <span class="nt">-it</span> <span class="nt">--rm</span> mariadb:tag <span class="nt">--verbose</span> <span class="nt">--help</span>
</code></pre></div></div>

<h2 id="environment-variables">Environment Variables</h2>

<p>When you start the <code class="highlighter-rouge">mariadb</code> image, you can adjust the configuration of the MariaDB instance by passing one or more environment variables on the <code class="highlighter-rouge">docker run</code> command line. Do note that none of the variables below will have any effect if you start the container with a data directory that already contains a database: any pre-existing database will always be left untouched on container startup.</p>

<h3 id="mysql_root_password"><code class="highlighter-rouge">MYSQL_ROOT_PASSWORD</code></h3>

<p>This variable is mandatory and specifies the password that will be set for the MariaDB <code class="highlighter-rouge">root</code> superuser account. In the above example, it was set to <code class="highlighter-rouge">my-secret-pw</code>.</p>

<h3 id="mysql_database"><code class="highlighter-rouge">MYSQL_DATABASE</code></h3>

<p>This variable is optional and allows you to specify the name of a database to be created on image startup. If a user/password was supplied (see below) then that user will be granted superuser access (<a href="http://dev.mysql.com/doc/en/adding-users.html">corresponding to <code class="highlighter-rouge">GRANT ALL</code></a>) to this database.</p>

<h3 id="mysql_user-mysql_password"><code class="highlighter-rouge">MYSQL_USER</code>, <code class="highlighter-rouge">MYSQL_PASSWORD</code></h3>

<p>These variables are optional, used in conjunction to create a new user and to set that user’s password. This user will be granted superuser permissions (see above) for the database specified by the <code class="highlighter-rouge">MYSQL_DATABASE</code> variable. Both variables are required for a user to be created.</p>

<p>Do note that there is no need to use this mechanism to create the root superuser, that user gets created by default with the password specified by the <code class="highlighter-rouge">MYSQL_ROOT_PASSWORD</code> variable.</p>

<h3 id="mysql_allow_empty_password"><code class="highlighter-rouge">MYSQL_ALLOW_EMPTY_PASSWORD</code></h3>

<p>This is an optional variable. Set to <code class="highlighter-rouge">yes</code> to allow the container to be started with a blank password for the root user. <em>NOTE</em>: Setting this variable to <code class="highlighter-rouge">yes</code> is not recommended unless you really know what you are doing, since this will leave your MariaDB instance completely unprotected, allowing anyone to gain complete superuser access.</p>

<h3 id="mysql_random_root_password"><code class="highlighter-rouge">MYSQL_RANDOM_ROOT_PASSWORD</code></h3>

<p>This is an optional variable. Set to <code class="highlighter-rouge">yes</code> to generate a random initial password for the root user (using <code class="highlighter-rouge">pwgen</code>). The generated root password will be printed to stdout (<code class="highlighter-rouge">GENERATED ROOT PASSWORD: .....</code>).</p>

<h2 id="docker-secrets">Docker Secrets</h2>

<p>As an alternative to passing sensitive information via environment variables, <code class="highlighter-rouge">_FILE</code> may be appended to the previously listed environment variables, causing the initialization script to load the values for those variables from files present in the container. In particular, this can be used to load passwords from Docker secrets stored in <code class="highlighter-rouge">/run/secrets/&lt;secret_name&gt;</code> files. For example:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker run <span class="nt">--name</span> some-mysql <span class="nt">-e</span> <span class="nv">MYSQL_ROOT_PASSWORD_FILE</span><span class="o">=</span>/run/secrets/mysql-root <span class="nt">-d</span> mariadb:tag
</code></pre></div></div>

<p>Currently, this is only supported for <code class="highlighter-rouge">MYSQL_ROOT_PASSWORD</code>, <code class="highlighter-rouge">MYSQL_ROOT_HOST</code>, <code class="highlighter-rouge">MYSQL_DATABASE</code>, <code class="highlighter-rouge">MYSQL_USER</code>, and <code class="highlighter-rouge">MYSQL_PASSWORD</code>.</p>

<h1 id="initializing-a-fresh-instance">Initializing a fresh instance</h1>

<p>When a container is started for the first time, a new database with the specified name will be created and initialized with the provided configuration variables. Furthermore, it will execute files with extensions <code class="highlighter-rouge">.sh</code>, <code class="highlighter-rouge">.sql</code> and <code class="highlighter-rouge">.sql.gz</code> that are found in <code class="highlighter-rouge">/docker-entrypoint-initdb.d</code>. Files will be executed in alphabetical order. You can easily populate your <code class="highlighter-rouge">mariadb</code> services by <a href="https://matsuand.github.io/docs.docker.jp.onthefly/engine/tutorials/dockervolumes/#mount-a-host-file-as-a-data-volume">mounting a SQL dump into that directory</a> and provide <a href="https://matsuand.github.io/docs.docker.jp.onthefly/reference/builder/">custom images</a> with contributed data. SQL files will be imported by default to the database specified by the <code class="highlighter-rouge">MYSQL_DATABASE</code> variable.</p>

<h1 id="caveats">Caveats</h1>

<h2 id="where-to-store-data">Where to Store Data</h2>

<p>Important note: There are several ways to store data used by applications that run in Docker containers. We encourage users of the <code class="highlighter-rouge">mariadb</code> images to familiarize themselves with the options available, including:</p>

<ul>
  <li>Let Docker manage the storage of your database data <a href="https://matsuand.github.io/docs.docker.jp.onthefly/engine/tutorials/dockervolumes/#adding-a-data-volume">by writing the database files to disk on the host system using its own internal volume management</a>. This is the default and is easy and fairly transparent to the user. The downside is that the files may be hard to locate for tools and applications that run directly on the host system, i.e. outside containers.</li>
  <li>Create a data directory on the host system (outside the container) and <a href="https://matsuand.github.io/docs.docker.jp.onthefly/engine/tutorials/dockervolumes/#mount-a-host-directory-as-a-data-volume">mount this to a directory visible from inside the container</a>. This places the database files in a known location on the host system, and makes it easy for tools and applications on the host system to access the files. The downside is that the user needs to make sure that the directory exists, and that e.g. directory permissions and other security mechanisms on the host system are set up correctly.</li>
</ul>

<p>The Docker documentation is a good starting point for understanding the different storage options and variations, and there are multiple blogs and forum postings that discuss and give advice in this area. We will simply show the basic procedure here for the latter option above:</p>

<ol>
  <li>Create a data directory on a suitable volume on your host system, e.g. <code class="highlighter-rouge">/my/own/datadir</code>.</li>
  <li>
    <p>Start your <code class="highlighter-rouge">mariadb</code> container like this:</p>

    <div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker run <span class="nt">--name</span> some-mariadb <span class="nt">-v</span> /my/own/datadir:/var/lib/mysql <span class="nt">-e</span> <span class="nv">MYSQL_ROOT_PASSWORD</span><span class="o">=</span>my-secret-pw <span class="nt">-d</span> mariadb:tag
</code></pre></div>    </div>
  </li>
</ol>

<p>The <code class="highlighter-rouge">-v /my/own/datadir:/var/lib/mysql</code> part of the command mounts the <code class="highlighter-rouge">/my/own/datadir</code> directory from the underlying host system as <code class="highlighter-rouge">/var/lib/mysql</code> inside the container, where MySQL by default will write its data files.</p>

<h2 id="no-connections-until-mysql-init-completes">No connections until MySQL init completes</h2>

<p>If there is no database initialized when the container starts, then a default database will be created. While this is the expected behavior, this means that it will not accept incoming connections until such initialization completes. This may cause issues when using automation tools, such as <code class="highlighter-rouge">docker-compose</code>, which start several containers simultaneously.</p>

<h2 id="usage-against-an-existing-database">Usage against an existing database</h2>

<p>If you start your <code class="highlighter-rouge">mariadb</code> container instance with a data directory that already contains a database (specifically, a <code class="highlighter-rouge">mysql</code> subdirectory), the <code class="highlighter-rouge">$MYSQL_ROOT_PASSWORD</code> variable should be omitted from the run command line; it will in any case be ignored, and the pre-existing database will not be changed in any way.</p>

<h2 id="creating-database-dumps">Creating database dumps</h2>

<p>Most of the normal tools will work, although their usage might be a little convoluted in some cases to ensure they have access to the <code class="highlighter-rouge">mysqld</code> server. A simple way to ensure this is to use <code class="highlighter-rouge">docker exec</code> and run the tool from the same container, similar to the following:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker <span class="nb">exec </span>some-mariadb sh <span class="nt">-c</span> <span class="s1">'exec mysqldump --all-databases -uroot -p"$MYSQL_ROOT_PASSWORD"'</span> <span class="o">&gt;</span> /some/path/on/your/host/all-databases.sql
</code></pre></div></div>

<h2 id="restoring-data-from-dump-files">Restoring data from dump files</h2>

<p>For restoring data. You can use <code class="highlighter-rouge">docker exec</code> command with <code class="highlighter-rouge">-i</code> flag, similar to the following:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker <span class="nb">exec</span> <span class="nt">-i</span> some-mariadb sh <span class="nt">-c</span> <span class="s1">'exec mysql -uroot -p"$MYSQL_ROOT_PASSWORD"'</span> &lt; /some/path/on/your/host/all-databases.sql
</code></pre></div></div>

<h1 id="license">License</h1>

<p>View <a href="https://mariadb.com/kb/en/library/licensing-faq/">license information</a> for the software contained in this image.</p>

<p>As with all Docker images, these likely also contain other software which may be under other licenses (such as Bash, etc from the base distribution, along with any direct or indirect dependencies of the primary software being contained).</p>

<p>Some additional license information which was able to be auto-detected might be found in <a href="https://github.com/docker-library/repo-info/tree/master/repos/mariadb">the <code class="highlighter-rouge">repo-info</code> repository’s <code class="highlighter-rouge">mariadb/</code> directory</a>.</p>

<p>As for any pre-built image usage, it is the image user’s responsibility to ensure that any use of this image complies with any relevant licenses for all software contained within.</p>


							<!-- tags -->
							
							<span class="glyphicon glyphicon-tags" style="padding-right: 10px"></span><span style="vertical-align: 2px"><a href="https://matsuand.github.io/docs.docker.jp.onthefly/search/?q=library">library</a>, <a href="https://matsuand.github.io/docs.docker.jp.onthefly/search/?q=sample">sample</a>, <a href="https://matsuand.github.io/docs.docker.jp.onthefly/search/?q=mariadb">mariadb</a></span>
							
							<!-- link corrections -->
              <script language="JavaScript">
							var x = document.links.length;
							var baseHref = document.getElementsByTagName('base')[0].href
							for (i = 0; i < x; i++) {
							  var munged = false;
							  var thisHREF = document.links[i].href;
							  var originalURL = "/samples/library/mariadb/";
							  if (thisHREF.indexOf(baseHref + "#") > -1) {
							    // hash fix
							    //console.log('BEFORE: base:',baseHref,'thisHREF:',thisHREF,'originalURL:',originalURL);
							    thisHREF = originalURL + thisHREF.replace(baseHref, "");
							    //console.log('AFTER: base:',baseHref,'thisHREF:',thisHREF,'originalURL:',originalURL);
							  }
							  if ((thisHREF.indexOf(window.location.hostname) > -1 || thisHREF.indexOf('http') == -1) && document.links[i].className.indexOf("nomunge") < 0) {
							    munged = true;
							    thisHREF = thisHREF.replace(".md", "/").replace("/index/", "/");
							    document.links[i].setAttribute('href', thisHREF);
							  }
							}
							</script>
							
						  <div id="ratings-div" style="color:#b9c2cc; text-align: center; margin-top: 150px; visibility: hidden">
								<div id="pd_rating_holder_8453675"></div>
								<script type="text/javascript">
									PDRTJS_settings_8453675 = {
										"id": "8453675",
										"unique_id": "_samples/library/mariadb/index.md",
										"title": "mariadb",
										"permalink": "https://github.com/docker/docker.github.io/blob/master/_samples/library/mariadb/index.md"
									};
									(function(d, c, j) {
										if (!document.getElementById(j)) {
											var pd = d.createElement(c),
												s;
											pd.id = j;
											pd.src = ('https:' == document.location.protocol) ? 'https://polldaddy.com/js/rating/rating.js' : 'http://i0.poll.fm/js/rating/rating.js';
											s = document.getElementsByTagName(c)[0];
											s.parentNode.insertBefore(pd, s);
										}
									}(document, 'script', 'pd-rating-js'));
								</script>
							</div>
							
						</section>
					</main>
					<nav class="col-nav">
						<div id="sidebar-nav" class="sidebar hidden-sm hidden-xs">
						<div id="navbar" class="nav-sidebar">
    <ul class="nav" id="jsTOCLeftNav">
    </ul>
</div>

						</div>
					</nav>
					<div class="col-toc">
							<div class="sidebar hidden-xs hidden-sm">
							<div class="toc-nav">
								<div class="feedback-links">
									<ul>
										
										<li style="visibility: hidden"><a href="https://github.com/matsuand/docs.docker.jp/edit/v19.03.local/_samples/library/mariadb/index.md"><i class="fa fa-pencil-square-o" aria-hidden="true"></i> このページの編集</a></li>
										<li><a href="https://github.com/matsuand/docs.docker.jp.onthefly/issues/new?body=File: [_samples/library/mariadb/index.md](https://matsuand.github.io/docs.docker.jp.onthefly/samples/library/mariadb/)"
															class="nomunge"><i class="fa fa-check" aria-hidden="true"></i> 文書変更のリクエスト</a></li>
										<!-- toggle mode -->
										<li>
											<div class="toggle-mode">
												<div class="icon">
													<i class="fa fa-sun-o" aria-hidden="true"></i>
												</div>
												<div class="toggle-switch">
													<label class="switch">
														<input type="checkbox" id="switch-style">
														<div class="slider round"></div>
												</label>
												</div>
												<div class="icon">
													<i class="fa fa-moon-o" aria-hidden="true"></i>
												</div>
											</div>
										</li>
									</ul>
								</div>
								   
									<div id="side-toc-title">本ページ内</div>
									
<ul id="my_toc" class="inline_toc">
  <li><a href="#start-a-mariadb-server-instance" class="nomunge">Start a mariadb server instance</a></li>
  <li><a href="#connect-to-mariadb-from-the-mysql-command-line-client" class="nomunge">Connect to MariaDB from the MySQL command line client</a></li>
  <li><a href="#-via-docker-stack-deploy-or-docker-compose" class="nomunge">... via docker stack deploy or docker-compose</a></li>
  <li><a href="#container-shell-access-and-viewing-mysql-logs" class="nomunge">Container shell access and viewing MySQL logs</a></li>
  <li><a href="#using-a-custom-mysql-configuration-file" class="nomunge">Using a custom MySQL configuration file</a>
    <ul>
      <li><a href="#configuration-without-a-cnf-file" class="nomunge">Configuration without a cnf file</a></li>
    </ul>
  </li>
  <li><a href="#environment-variables" class="nomunge">Environment Variables</a>
    <ul>
      <li><a href="#mysql_root_password" class="nomunge">MYSQL_ROOT_PASSWORD</a></li>
      <li><a href="#mysql_database" class="nomunge">MYSQL_DATABASE</a></li>
      <li><a href="#mysql_user-mysql_password" class="nomunge">MYSQL_USER, MYSQL_PASSWORD</a></li>
      <li><a href="#mysql_allow_empty_password" class="nomunge">MYSQL_ALLOW_EMPTY_PASSWORD</a></li>
      <li><a href="#mysql_random_root_password" class="nomunge">MYSQL_RANDOM_ROOT_PASSWORD</a></li>
    </ul>
  </li>
  <li><a href="#docker-secrets" class="nomunge">Docker Secrets</a></li>
  <li><a href="#where-to-store-data" class="nomunge">Where to Store Data</a></li>
  <li><a href="#no-connections-until-mysql-init-completes" class="nomunge">No connections until MySQL init completes</a></li>
  <li><a href="#usage-against-an-existing-database" class="nomunge">Usage against an existing database</a></li>
  <li><a href="#creating-database-dumps" class="nomunge">Creating database dumps</a></li>
  <li><a href="#restoring-data-from-dump-files" class="nomunge">Restoring data from dump files</a></li>
</ul>


								</div>
								
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	
	<footer class="footer">
		  
    <div class="container">
        <div class="top_footer">
            <div class="row">
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/why-docker">Why Docker</a></b></li>
                        <li><a href="https://www.docker.com/what-container">What is a Container</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/products/overview">Products</a></b></li>
                        <li><a href="https://www.docker.com/products/docker-desktop">Docker Desktop</a></li>
                        <li><a href="https://www.docker.com/products/docker-hub">Docker Hub</a></li>
                        <li><b><a href="https://www.docker.com/products/docker-desktop">Features</a></b></li>
                        <li><a href="https://www.docker.com/products/container-runtime">Container Runtime</a></li>
                        <li><a href="https://www.docker.com/products/developer-tools">Developer Tools</a></li>
                        <li><a href="https://www.docker.com/products/kubernetes">Kubernetes</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/products/docker-desktop">Developers</a></b></li>
                        <li><a href="https://www.docker.com/use-cases">Use Cases</a></li>
                        <li><a href="https://www.docker.com/play-with-docker">Play with Docker</a></li>
                        <li><a href="https://www.docker.com/docker-community">Community</a></li>
                        <li><a href="https://www.docker.com/open-source">Open Source</a></li>
                        <li><a href="https://www.docker.com/community/docker-captains">Docker Captains</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/company" target="_blank">Company</a></b></li>
                        <li><a href="https://www.docker.com/company">About Us</a></li>
                        <li><a href="https://www.docker.com/blog/" target="_blank">Blog</a></li>
                        <li><a href="https://www.docker.com/customers">Customers</a></li>
                        <li><a href="https://www.docker.com/partners">Partners</a></li>
                        <li><a href="https://www.docker.com/company/newsroom">Newsroom</a></li>
                        <li><a href="https://www.docker.com/careers">Careers</a></li>
                        <li><a href="https://www.docker.com/company/contact">Contact Us</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-nav">
                <nav class="footer_sub_nav">
                    <ul class="menu">
                        <li><a href="http://status.docker.com/">Status</a></li>
                        <li><a href="https://www.docker.com/docker-security">Security</a></li>
                        <li><a href="https://www.docker.com/legal">Legal</a></li>
                        <li><a href="https://www.docker.com/company/contact">Contact</a></li>
                    </ul>
                </nav>
            </div>
        </div>
        <div class="bottom_footer">
            <div class="footer-copyright col-xs-12 col-md-8">
                <p class="copyright">
                    Copyright &copy; 2013-2020 Docker Inc. All rights reserved. </p>
            </div>
            <div class="footer_social_nav">
                <ul class="nav-social">
                    <li class="fa fa-twitter"><a href="http://twitter.com/docker">Twitter</a></li>
                    <li class="fa fa-youtube"><a href="http://www.youtube.com/user/dockerrun">Youtube</a></li>
                    <li class="fa fa-github"><a href="https://github.com/docker">GitHub</a></li>
                    <li class="fa fa-linkedin"><a href="https://www.linkedin.com/company/docker">Linkedin</a></li>
                    <li class="fa fa-facebook"><a href="https://www.facebook.com/docker.run">Facebook</a></li>
                    <li class="fa fa-slideshare"><a href="https://www.slideshare.net/docker">Slideshare</a></li>
                    <li class="fa fa-reddit"><a href="https://www.reddit.com/r/docker">Reddit</a></li>
                </ul>
            </div>
        </div>
    </div>

	</footer>
	<link rel="stylesheet" href="/docs.docker.jp.onthefly/css/github.css">
	
	<script defer src="/docs.docker.jp.onthefly/js/anchorlinks.js"></script>
	<script defer src="/docs.docker.jp.onthefly/js/menu.js"></script>
	<script src="/docs.docker.jp.onthefly/js/jquery.js"></script>
	<script src="/docs.docker.jp.onthefly/js/bootstrap.min.js"></script>
	<!-- Always include the archive.js, but it doesn't do much unless we are an archive -->
	<script language="javascript">
	// Default to assuming this is an archive and hiding some stuff
	// See js/archive.js and js/docs.js for logic relating to this
	var isArchive = true;
	var dockerVersion = 'v19.03';
	// In archives, we need to know the page root and we get it from JEKYLL_ENV in the jekyll build command
	var jekyllEnv = 'development';
	// If unset (in non-archive branches), defaults to "development". In that case, reset it to empty
	if (jekyllEnv == 'development') {
		jekyllEnv = '';
	}
	var pageURL = jekyllEnv + '/samples/library/mariadb/';
	</script>
	<script src="/docs.docker.jp.onthefly/js/archive.js"></script>
	<script src="/docs.docker.jp.onthefly/js/stickyfill.min.js"></script>
	<script defer src="/docs.docker.jp.onthefly/js/metadata.js"></script>
	<script src="/docs.docker.jp.onthefly/js/glossary.js"></script>
	<script defer src="/docs.docker.jp.onthefly/js/docs.js"></script>
	<script defer src="/docs.docker.jp.onthefly/js/toc.js"></script>
	<script language="javascript">
	jQuery(document).ready(function(){
				hookupTOCEvents();
			});
	</script>
</body>

</html>
