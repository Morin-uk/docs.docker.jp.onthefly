<!-- Page generated 2019-06-20 10:48:14 +0900 -->
<!-- relative link basehrefs -->

	


<!-- Logic for 'edit this button' -->


	

	

	

	

	

	

	

	

	


<!-- End of logic for 'edit this button' -->


<!DOCTYPE html>
<html lang="ja">

<head>
	<base href="https://matsuand.github.io/docs.docker.jp.onthefly/samples/library/consul/" />
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<style type="text/css">
		@charset "UTF-8";
		[ng\:cloak],
		[ng-cloak],
		[data-ng-cloak],
		[x-ng-cloak],
		.ng-cloak,
		.x-ng-cloak,
		.ng-hide:not(.ng-hide-animate) {
			display: none !important;
		}

		ng\:form {
			display: block;
		}
	</style>
	<script type="text/javascript">
	  !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="4.0.0";
	  analytics.load("IWj9D0UpZHZdZUZX9jl98PcpBFWBnBMy");
	  analytics.page();
	  }}();
	</script>
	
	<!-- favicon -->
	<link rel="icon" type="image/x-icon" href="https://matsuand.github.io/docs.docker.jp.onthefly/favicons/docs@2x.ico" sizes="129x128">
	<meta name="msapplication-TileImage" content="https://matsuand.github.io/docs.docker.jp.onthefly/favicons/docs@2x.ico">
	<link rel="apple-touch-icon" type="image/x-icon" href="https://matsuand.github.io/docs.docker.jp.onthefly/favicons/docs@2x.ico" sizes="129x128">
	<meta property="og:image" content="https://matsuand.github.io/docs.docker.jp.onthefly/favicons/docs@2x.ico"/>
	<!-- metadata -->
	<meta property="og:type" content="website"/>
	<meta property="og:updated_time" itemprop="dateUpdated" content="2019-06-20T10:48:14+09:00"/>
	<meta property="og:image" itemprop="image primaryImageOfPage" content="https://matsuand.github.io/docs.docker.jp.onthefly/images/docs@2x.png"/>
	<meta name="twitter:card" content="summary"/>
	<meta name="twitter:domain" content="docs.docker.jp"/>
	<meta name="twitter:site" content="@docker_docs"/>
	<meta name="twitter:url" content="https://twitter.com/docker_docs"/>
	<meta name="twitter:title" itemprop="title name" content="consul"/>
	<meta name="twitter:description" property="og:description" itemprop="description" content="Consul is a datacenter runtime that provides service discovery, configuration, and orchestration. GitHub repo: https://github.com/hashicorp/docker-consul Library reference This content is imported from the official Docker Library docs, and is provided..." />
	<meta name="twitter:image:src" content="https://matsuand.github.io/docs.docker.jp.onthefly/images/docs@2x.png"/>
	<meta name="twitter:image:alt" content="Docker Documentation"/>
	<meta property="article:published_time" itemprop="datePublished" content="2019-06-20T10:48:14+09:00"/>

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="keywords" content="library, sample, consul">
	<link rel="stylesheet" href="https://matsuand.github.io/docs.docker.jp.onthefly/css/font-awesome.min.css">
	<link rel="stylesheet" href="https://matsuand.github.io/docs.docker.jp.onthefly/css/bootstrap.min.css">
	<link id="pygments" rel="stylesheet" href="https://matsuand.github.io/docs.docker.jp.onthefly/css/pygments/perldoc.css">
	<link id="pagestyle" rel="stylesheet" href="https://matsuand.github.io/docs.docker.jp.onthefly/css/style.css">

	<!-- Go get "Open Sans" font from Google -->
	<link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
	<!-- SEO stuff -->
	<title>consul | Docker Documentation</title>
<meta property="og:title" content="consul" />
<meta property="og:locale" content="ja_JP" />
<meta name="description" content="Consul is a datacenter runtime that provides service discovery, configuration, and orchestration.
" />
<meta property="og:description" content="Consul is a datacenter runtime that provides service discovery, configuration, and orchestration.
" />
<link rel="canonical" href="https://matsuand.github.io/docs.docker.jp.onthefly/samples/library/consul/" />
<meta property="og:url" content="https://matsuand.github.io/docs.docker.jp.onthefly/samples/library/consul/" />
<meta property="og:site_name" content="Docker Documentation" />
<script type="application/ld+json">
{"@context":"http://schema.org","@type":"WebPage","headline":"consul","description":"Consul is a datacenter runtime that provides service discovery, configuration, and orchestration.
","url":"https://matsuand.github.io/docs.docker.jp.onthefly/samples/library/consul/"}</script>
	<!-- END SEO STUFF -->
	
	<script language="javascript">
	// Default to assuming this is an archive and hiding some stuff
	// See js/archive.js and js/docs.js for logic relating to this
	var isArchive = true;
	var dockerVersion = 'v18.09';
	</script>
</head>
<body ng-app="Docker" ng-controller="DockerController" class="colums">
	<header>
		 <nav class="nav-secondary navbar navbar-fixed-top">
    <!-- <div class="fan"></div> -->
    <div class="container-fluid">
        <div class="navbar-header">
            <a href="https://matsuand.github.io/docs.docker.jp.onthefly/"><img class="logo" src="https://matsuand.github.io/docs.docker.jp.onthefly/images/docker-docs-logo.svg" alt="Docker Docs" title="Docker Docs"></a>
        </div>
        <div class="navbar-collapse" aria-expanded="false" style="height: 1px;">
            <div class="search-form" id="search-div" style="visibility: hidden">
    <form class="search-form form-inline ng-pristine ng-valid" id="searchForm" action="https://matsuand.github.io/docs.docker.jp.onthefly/search/">
        <input class="search-field form-control ds-input" id="st-search-input" value="" name="q" placeholder="文書内検索" type="search" autocomplete="off" spellcheck="false" dir="auto" style="position: relative; vertical-align: top;">
        <div id="autocompleteContainer">
            <div id="autocompleteResults"></div>
        </div>
        <!-- <button type="submit" class="search-submit btn btn-default">検索</button> -->
    </form>
</div>
<div class="sidebar-toggle">
    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
    </button>
</div>
<div class="nav-container">
    <div id="tabs">
        <ul class="tabs" id="jsTOCHorizontal">

        </ul>
    </div>
    <div class="ctrl-right hidden-xs hidden-sm">
        <a href="javascript:void(0)" id="menu-toggle"><i class="fa fa-indent" aria-hidden="true"></i></a>
        <div class="btn-group" style="visibility: hidden">
  <button type="button" class="btn btn-default dropdown-btn dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    Docker v18.09 (current)        <span class="caret"></span>
  </button>
  <ul class="dropdown-menu">
    <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/edge/">Docker edge</a></li><li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/v18.03/">Docker v18.03</a></li><li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/v17.12/">Docker v17.12</a></li><li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/v17.09/">Docker v17.09</a></li><li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/v17.06/">Docker v17.06</a></li><li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/v17.03/">Docker v17.03</a></li>
  </ul>
</div>

    </div>
</div>

        </div>
    </div>
</nav>

	</header>

	<div class="wrapper right-open">
		<div class="container-fluid">
			<div class="row">
				<div class="col-body">
					<main class="col-content content">
						<section class="section">
							
								
							<h1>consul</h1>  <span class="reading-time" title="Estimated reading time">
  <span class="reading-time-label">読む時間の目安: </span>
  
  
    18 分
  
</span>

							
							
							<p>Consul is a datacenter runtime that provides service discovery, configuration, and orchestration.</p>

<p>GitHub repo: <a href="https://github.com/hashicorp/docker-consul">https://github.com/hashicorp/docker-consul</a></p>

<blockquote>
  <p><strong>Library reference</strong></p>

  <p>This content is imported from
<a href="https://github.com/docker-library/docs/tree/master/consul/">the official Docker Library docs</a>,
and is provided by the original uploader. You can view the Docker Hub page for this image at
<a href="https://hub.docker.com/images/consul">https://hub.docker.com/images/consul</a></p>
</blockquote>

<!-- content begin -->

<!--

********************************************************************************

WARNING:

    DO NOT EDIT "consul/README.md"

    IT IS AUTO-GENERATED

    (from the other files in "consul/" combined with a set of templates)

********************************************************************************

-->

<h1 id="supported-tags-and-respective-dockerfile-links">Supported tags and respective <code class="highlighter-rouge">Dockerfile</code> links</h1>

<ul>
  <li><a href="https://github.com/hashicorp/docker-consul/blob/50eeee6cca0f109e8943e4159d0c57fea9e9fc64/0.X/Dockerfile"><code class="highlighter-rouge">1.5.0</code>, <code class="highlighter-rouge">1.5</code>, <code class="highlighter-rouge">latest</code> (<em>0.X/Dockerfile</em>)</a></li>
  <li><a href="https://github.com/hashicorp/docker-consul/blob/51e4b57f85dd4cf96ca95b3e05a405710721fcc3/0.X/Dockerfile"><code class="highlighter-rouge">1.4.4</code>, <code class="highlighter-rouge">1.4</code> (<em>0.X/Dockerfile</em>)</a></li>
  <li><a href="https://github.com/hashicorp/docker-consul/blob/9591d8392246c015dfee642f2634237ff791354a/0.X/Dockerfile"><code class="highlighter-rouge">1.3.1</code>, <code class="highlighter-rouge">1.3</code> (<em>0.X/Dockerfile</em>)</a></li>
  <li><a href="https://github.com/hashicorp/docker-consul/blob/1fba73564ac4f8e7bfcc6a59a2ee747ba4dad1e0/0.X/Dockerfile"><code class="highlighter-rouge">1.2.4</code>, <code class="highlighter-rouge">1.2</code> (<em>0.X/Dockerfile</em>)</a></li>
  <li><a href="https://github.com/hashicorp/docker-consul/blob/f52a1b9735ad74bebcf4555ffb8bb6fc1ab2dd95/0.X/Dockerfile"><code class="highlighter-rouge">1.1.1</code>, <code class="highlighter-rouge">1.1</code> (<em>0.X/Dockerfile</em>)</a></li>
  <li><a href="https://github.com/hashicorp/docker-consul/blob/fdad25d89f87b89c7f39c2cd3223f01fbde74ffc/0.X/Dockerfile"><code class="highlighter-rouge">1.0.8</code>, <code class="highlighter-rouge">1.0</code> (<em>0.X/Dockerfile</em>)</a></li>
  <li><a href="https://github.com/hashicorp/docker-consul/blob/dbc28ad074f219b1a5c277491d18f2e5244937c5/0.X/Dockerfile"><code class="highlighter-rouge">0.9.4</code>, <code class="highlighter-rouge">0.9</code> (<em>0.X/Dockerfile</em>)</a></li>
</ul>

<h1 id="quick-reference">Quick reference</h1>

<ul>
  <li>
    <p><strong>Where to get help</strong>:<br />
<a href="https://forums.docker.com/">the Docker Community Forums</a>, <a href="https://blog.docker.com/2016/11/introducing-docker-community-directory-docker-community-slack/">the Docker Community Slack</a>, or <a href="https://stackoverflow.com/search?tab=newest&amp;q=docker">Stack Overflow</a></p>
  </li>
  <li>
    <p><strong>Where to file issues</strong>:<br />
<a href="https://github.com/hashicorp/docker-consul/issues">https://github.com/hashicorp/docker-consul/issues</a></p>
  </li>
  <li>
    <p><strong>Maintained by</strong>:<br />
<a href="https://github.com/hashicorp/docker-consul">HashiCorp</a></p>
  </li>
  <li>
    <p><strong>Supported architectures</strong>: (<a href="https://github.com/docker-library/official-images#architectures-other-than-amd64">more info</a>)<br />
<a href="https://hub.docker.com/r/amd64/consul/"><code class="highlighter-rouge">amd64</code></a>, <a href="https://hub.docker.com/r/arm32v6/consul/"><code class="highlighter-rouge">arm32v6</code></a>, <a href="https://hub.docker.com/r/arm64v8/consul/"><code class="highlighter-rouge">arm64v8</code></a>, <a href="https://hub.docker.com/r/i386/consul/"><code class="highlighter-rouge">i386</code></a></p>
  </li>
  <li>
    <p><strong>Published image artifact details</strong>:<br />
<a href="https://github.com/docker-library/repo-info/blob/master/repos/consul">repo-info repo’s <code class="highlighter-rouge">repos/consul/</code> directory</a> (<a href="https://github.com/docker-library/repo-info/commits/master/repos/consul">history</a>)<br />
(image metadata, transfer size, etc)</p>
  </li>
  <li>
    <p><strong>Image updates</strong>:<br />
<a href="https://github.com/docker-library/official-images/pulls?q=label%3Alibrary%2Fconsul">official-images PRs with label <code class="highlighter-rouge">library/consul</code></a><br />
<a href="https://github.com/docker-library/official-images/blob/master/library/consul">official-images repo’s <code class="highlighter-rouge">library/consul</code> file</a> (<a href="https://github.com/docker-library/official-images/commits/master/library/consul">history</a>)</p>
  </li>
  <li>
    <p><strong>Source of this description</strong>:<br />
<a href="https://github.com/docker-library/docs/tree/master/consul">docs repo’s <code class="highlighter-rouge">consul/</code> directory</a> (<a href="https://github.com/docker-library/docs/commits/master/consul">history</a>)</p>
  </li>
  <li>
    <p><strong>Supported Docker versions</strong>:<br />
<a href="https://github.com/docker/docker-ce/releases/latest">the latest release</a> (down to 1.6 on a best-effort basis)</p>
  </li>
</ul>

<h1 id="consul">Consul</h1>

<p>Consul is a distributed, highly-available, and multi-datacenter aware tool for service discovery, configuration, and orchestration. Consul enables rapid deployment, configuration, and maintenance of service-oriented architectures at massive scale. For more information, please see:</p>

<ul>
  <li><a href="https://www.consul.io/">Consul documentation</a></li>
  <li><a href="https://github.com/hashicorp/consul">Consul on GitHub</a></li>
</ul>

<p><img src="https://raw.githubusercontent.com/docker-library/docs/8adb88e1e328c244711742f65319ed4064cff9a2/consul/logo.svg?sanitize=true" alt="logo" /></p>

<h1 id="consul-and-docker">Consul and Docker</h1>

<p>Consul has several moving parts so we’ll start with a brief introduction to Consul’s architecture and then detail how Consul interacts with Docker. Please see the <a href="https://www.consul.io/docs/internals/architecture.html">Consul Architecture</a> guide for more detail on all these concepts.</p>

<p>Each host in a Consul cluster runs the Consul agent, a long running daemon that can be started in client or server mode. Each cluster has at least 1 agent in server mode, and usually 3 or 5 for high availability. The server agents participate in a <a href="https://www.consul.io/docs/internals/consensus.html">consensus protocol</a>, maintain a centralized view of the cluster’s state, and respond to queries from other agents in the cluster. The rest of the agents in client mode participate in a <a href="https://www.consul.io/docs/internals/gossip.html">gossip protocol</a> to discover other agents and check them for failures, and they forward queries about the cluster to the server agents.</p>

<p>Applications running on a given host communicate only with their local Consul agent, using its HTTP APIs or DNS interface. Services on the host are also registered with the local Consul agent, which syncs the information with the Consul servers. Doing the most basic DNS-based service discovery using Consul, an application queries for <code class="highlighter-rouge">foo.service.consul</code> and gets a randomly shuffled subset of all the hosts providing service “foo”. This allows applications to locate services and balance the load without any intermediate proxies. Several HTTP APIs are also available for applications doing a deeper integration with Consul’s service discovery capabilities, as well as its other features such as the key/value store.</p>

<p>These concepts also apply when running Consul in Docker. Typically, you’ll run a single Consul agent container on each host, running alongside the Docker daemon. You’ll also need to configure some of the agents as servers (at least 3 for a basic HA setup). Consul should always be run with <code class="highlighter-rouge">--net=host</code> in Docker because Consul’s consensus and gossip protocols are sensitive to delays and packet loss, so the extra layers involved with other networking types are usually undesirable and unnecessary. We will talk more about this below.</p>

<p>We don’t cover Consul’s multi-datacenter capability here, but as long as <code class="highlighter-rouge">--net=host</code> is used, there should be no special considerations for Docker.</p>

<h1 id="using-the-container">Using the Container</h1>

<p>We chose Alpine as a lightweight base with a reasonably small surface area for security concerns, but with enough functionality for development, interactive debugging, and useful health, watch, and exec scripts running under Consul in the container. As of Consul 0.7, the image also includes <code class="highlighter-rouge">curl</code> since it is so commonly used for health checks.</p>

<p>Consul always runs under <a href="https://github.com/Yelp/dumb-init">dumb-init</a>, which handles reaping zombie processes and forwards signals on to all processes running in the container. We also use <a href="https://github.com/tianon/gosu">gosu</a> to run Consul as a non-root “consul” user for better security. These binaries are all built by HashiCorp and signed with our <a href="https://www.hashicorp.com/security.html">GPG key</a>, so you can verify the signed package used to build a given base image.</p>

<p>Running the Consul container with no arguments will give you a Consul server in <a href="https://www.consul.io/docs/agent/options.html#_dev">development mode</a>. The provided entry point script will also look for Consul subcommands and run <code class="highlighter-rouge">consul</code> as the correct user and with that subcommand. For example, you can execute <code class="highlighter-rouge">docker run consul members</code> and it will run the <code class="highlighter-rouge">consul members</code> command inside the container. The entry point also adds some special configuration options as detailed in the sections below when running the <code class="highlighter-rouge">agent</code> subcommand. Any other command gets <code class="highlighter-rouge">exec</code>-ed inside the container under <code class="highlighter-rouge">dumb-init</code>.</p>

<p>The container exposes <code class="highlighter-rouge">VOLUME /consul/data</code>, which is a path were Consul will place its persisted state. This isn’t used in any way when running in development mode. For client agents, this stores some information about the cluster and the client’s health checks in case the container is restarted. For server agents, this stores the client information plus snapshots and data related to the consensus algorithm and other state like Consul’s key/value store and catalog. For servers it is highly desirable to keep this volume’s data around when restarting containers to recover from outage scenarios. If this is bind mounted then ownership will be changed to the consul user when the container starts.</p>

<p>The container has a Consul configuration directory set up at <code class="highlighter-rouge">/consul/config</code> and the agent will load any configuration files placed here by binding a volume or by composing a new image and adding files. Alternatively, configuration can be added by passing the configuration JSON via environment variable <code class="highlighter-rouge">CONSUL_LOCAL_CONFIG</code>. If this is bind mounted then ownership will be changed to the consul user when the container starts.</p>

<p>Since Consul is almost always run with <code class="highlighter-rouge">--net=host</code> in Docker, some care is required when configuring Consul’s IP addresses. Consul has the concept of its cluster address as well as its client address. The cluster address is the address at which other Consul agents may contact a given agent. The client address is the address where other processes on the host contact Consul in order to make HTTP or DNS requests. You will typically need to tell Consul what its cluster address is when starting so that it binds to the correct interface and advertises a workable interface to the rest of the Consul agents. You’ll see this in the examples below as the <code class="highlighter-rouge">-bind=&lt;external ip&gt;</code> argument to Consul.</p>

<p>The entry point also includes a small utility to look up a client or bind address by interface name. To use this, set the <code class="highlighter-rouge">CONSUL_CLIENT_INTERFACE</code> and/or <code class="highlighter-rouge">CONSUL_BIND_INTERFACE</code> environment variables to the name of the interface you’d like Consul to use and a <code class="highlighter-rouge">-client=&lt;interface ip&gt;</code> and/or <code class="highlighter-rouge">-bind=&lt;interface ip&gt;</code> argument will be computed and passed to Consul at startup.</p>

<h2 id="running-consul-for-development">Running Consul for Development</h2>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker run <span class="nt">-d</span> <span class="nt">--name</span><span class="o">=</span>dev-consul <span class="nt">-e</span> <span class="nv">CONSUL_BIND_INTERFACE</span><span class="o">=</span>eth0 consul
</code></pre></div></div>

<p>This runs a completely in-memory Consul server agent with default bridge networking and no services exposed on the host, which is useful for development but should not be used in production. For example, if that server is running at internal address 172.17.0.2, you can run a three node cluster for development by starting up two more instances and telling them to join the first node.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker run <span class="nt">-d</span> <span class="nt">-e</span> <span class="nv">CONSUL_BIND_INTERFACE</span><span class="o">=</span>eth0 consul agent <span class="nt">-dev</span> <span class="nt">-join</span><span class="o">=</span>172.17.0.2
<span class="go">... server 2 starts
</span><span class="gp">$</span> docker run <span class="nt">-d</span> <span class="nt">-e</span> <span class="nv">CONSUL_BIND_INTERFACE</span><span class="o">=</span>eth0 consul agent <span class="nt">-dev</span> <span class="nt">-join</span><span class="o">=</span>172.17.0.2
<span class="go">... server 3 starts
</span></code></pre></div></div>

<p>Then we can query for all the members in the cluster by running a Consul CLI command in the first container:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker <span class="nb">exec</span> <span class="nt">-t</span> dev-consul consul members
<span class="go">Node          Address          Status  Type    Build  Protocol  DC
579db72c1ae1  172.17.0.3:8301  alive   server  0.6.3  2         dc1
93fe2309ef19  172.17.0.4:8301  alive   server  0.6.3  2         dc1
c9caabfd4c2a  172.17.0.2:8301  alive   server  0.6.3  2         dc1
</span></code></pre></div></div>

<p>Remember that Consul doesn’t use the data volume in this mode - once the container stops all of your state will be wiped out, so please don’t use this mode for production. Running completely on the bridge network with the development server is useful for testing multiple instances of Consul on a single machine, which is normally difficult to do because of port conflicts.</p>

<p>Development mode also starts a version of Consul’s web UI on port 8500. This can be added to the other Consul configurations by supplying the <code class="highlighter-rouge">-ui</code> option to Consul on the command line. The web assets are bundled inside the Consul binary in the container.</p>

<h2 id="running-consul-agent-in-client-mode">Running Consul Agent in Client Mode</h2>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span>  docker run <span class="nt">-d</span> <span class="nt">--net</span><span class="o">=</span>host <span class="nt">-e</span> <span class="s1">'CONSUL_LOCAL_CONFIG={"leave_on_terminate": true}'</span> consul agent <span class="nt">-bind</span><span class="o">=</span>&lt;external ip&gt; <span class="nt">-retry-join</span><span class="o">=</span>&lt;root agent ip&gt;
<span class="gp">==&gt;</span> Starting Consul agent...
<span class="gp">==&gt;</span> Starting Consul agent RPC...
<span class="gp">==&gt;</span> Consul agent running!
<span class="go">         Node name: 'linode'
        Datacenter: 'dc1'
            Server: false (bootstrap: false)
       Client Addr: 127.0.0.1 (HTTP: 8500, HTTPS: -1, DNS: 8600, RPC: 8400)
</span><span class="gp">      Cluster Addr: &lt;external ip&gt;</span> <span class="o">(</span>LAN: 8301, WAN: 8302<span class="o">)</span>
<span class="go">    Gossip encrypt: false, RPC-TLS: false, TLS-Incoming: false
</span><span class="gp">             Atlas: &lt;disabled&gt;</span>
<span class="c">...
</span></code></pre></div></div>

<p>This runs a Consul client agent sharing the host’s network and advertising the external IP address to the rest of the cluster. Note that the agent defaults to binding its client interfaces to 127.0.0.1, which is the host’s loopback interface. This would be a good configuration to use if other containers on the host also use <code class="highlighter-rouge">--net=host</code>, and it also exposes the agent to processes running directly on the host outside a container, such as HashiCorp’s Nomad.</p>

<p>The <code class="highlighter-rouge">-retry-join</code> parameter specifies the external IP of one other agent in the cluster to use to join at startup. There are several ways to control how an agent joins the cluster, see the <a href="https://www.consul.io/docs/agent/options.html">agent configuration</a> guide for more details on the <code class="highlighter-rouge">-join</code>, <code class="highlighter-rouge">-retry-join</code>, and <code class="highlighter-rouge">-atlas-join</code> options.</p>

<p>Note also we’ve set <a href="https://www.consul.io/docs/agent/options.html#leave_on_terminate"><code class="highlighter-rouge">leave_on_terminate</code></a> using the <code class="highlighter-rouge">CONSUL_LOCAL_CONFIG</code> environment variable. This is recommended for clients to and will be defaulted to <code class="highlighter-rouge">true</code> in Consul 0.7 and later, so this will no longer be necessary.</p>

<p>At startup, the agent will read config JSON files from <code class="highlighter-rouge">/consul/config</code>. Data will be persisted in the <code class="highlighter-rouge">/consul/data</code> volume.</p>

<p>Here are some example queries on a host with an external IP of 66.175.220.234:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> curl http://localhost:8500/v1/health/service/consul?pretty
<span class="go">[
    {
        "Node": {
            "Node": "linode",
            "Address": "66.175.220.234",
</span><span class="c">...
</span></code></pre></div></div>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> dig @localhost <span class="nt">-p</span> 8600 consul.service.consul
<span class="gp">;</span> &lt;&lt;<span class="o">&gt;&gt;</span> DiG 9.9.5-3ubuntu0.7-Ubuntu &lt;&lt;<span class="o">&gt;&gt;</span> @localhost <span class="nt">-p</span> 8600 consul.service.consul
<span class="gp">;</span> <span class="o">(</span>2 servers found<span class="o">)</span>
<span class="gp">;</span><span class="p">;</span> global options: +cmd
<span class="gp">;</span><span class="p">;</span> Got answer:
<span class="gp">;</span><span class="p">;</span> -&gt;&gt;HEADER<span class="o">&lt;&lt;-</span> <span class="no">opcode</span><span class="sh">: QUERY, status: NOERROR, id: 61616
</span><span class="gp">;</span><span class="sh">; flags: qr aa rd; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 0
</span><span class="gp">;</span><span class="sh">; WARNING: recursion requested but not available
</span><span class="go">
</span><span class="gp">;</span><span class="p">;</span> QUESTION SECTION:
<span class="gp">;</span>consul.service.consul.         IN      A
<span class="go">
</span><span class="gp">;</span><span class="p">;</span> ANSWER SECTION:
<span class="go">consul.service.consul.  0       IN      A       66.175.220.234
</span><span class="c">...
</span></code></pre></div></div>

<p>If you want to expose the Consul interfaces to other containers via a different network, such as the bridge network, use the <code class="highlighter-rouge">-client</code> option for Consul:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">docker run -d --net=host consul agent -bind=&lt;external ip&gt;</span> <span class="nt">-client</span><span class="o">=</span>&lt;bridge ip&gt; <span class="nt">-retry-join</span><span class="o">=</span>&lt;root agent ip&gt;
<span class="gp">==&gt;</span> Starting Consul agent...
<span class="gp">==&gt;</span> Starting Consul agent RPC...
<span class="gp">==&gt;</span> Consul agent running!
<span class="go">         Node name: 'linode'
        Datacenter: 'dc1'
            Server: false (bootstrap: false)
</span><span class="gp">       Client Addr: &lt;bridge ip&gt;</span> <span class="o">(</span>HTTP: 8500, HTTPS: <span class="nt">-1</span>, DNS: 8600, RPC: 8400<span class="o">)</span>
<span class="gp">      Cluster Addr: &lt;external ip&gt;</span> <span class="o">(</span>LAN: 8301, WAN: 8302<span class="o">)</span>
<span class="go">    Gossip encrypt: false, RPC-TLS: false, TLS-Incoming: false
</span><span class="gp">             Atlas: &lt;disabled&gt;</span>
<span class="c">...
</span></code></pre></div></div>

<p>With this configuration, Consul’s client interfaces will be bound to the bridge IP and available to other containers on that network, but not on the host network. Note that we still keep the cluster address out on the host network for performance. Consul will also accept the <code class="highlighter-rouge">-client=0.0.0.0</code> option to bind to all interfaces.</p>

<h2 id="running-consul-agent-in-server-mode">Running Consul Agent in Server Mode</h2>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker run <span class="nt">-d</span> <span class="nt">--net</span><span class="o">=</span>host <span class="nt">-e</span> <span class="s1">'CONSUL_LOCAL_CONFIG={"skip_leave_on_interrupt": true}'</span> consul agent <span class="nt">-server</span> <span class="nt">-bind</span><span class="o">=</span>&lt;external ip&gt; <span class="nt">-retry-join</span><span class="o">=</span>&lt;root agent ip&gt; <span class="nt">-bootstrap-expect</span><span class="o">=</span>&lt;number of server agents&gt;
</code></pre></div></div>

<p>This runs a Consul server agent sharing the host’s network. All of the network considerations and behavior we covered above for the client agent also apply to the server agent. A single server on its own won’t be able to form a quorum and will be waiting for other servers to join.</p>

<p>Just like the client agent, the <code class="highlighter-rouge">-retry-join</code> parameter specifies the external IP of one other agent in the cluster to use to join at startup. There are several ways to control how an agent joins the cluster, see the <a href="https://www.consul.io/docs/agent/options.html">agent configuration</a> guide for more details on the <code class="highlighter-rouge">-join</code>, <code class="highlighter-rouge">-retry-join</code>, and <code class="highlighter-rouge">-atlas-join</code> options. The server agent also consumes a <code class="highlighter-rouge">-bootstrap-expect</code> option that specifies how many server agents to watch for before bootstrapping the cluster for the first time. This provides an easy way to get an orderly startup with a new cluster. See the <a href="https://www.consul.io/docs/agent/options.html">agent configuration</a> guide for more details on the <code class="highlighter-rouge">-bootstrap</code> and <code class="highlighter-rouge">-bootstrap-expect</code> options.</p>

<p>Note also we’ve set <a href="https://www.consul.io/docs/agent/options.html#skip_leave_on_interrupt"><code class="highlighter-rouge">skip_leave_on_interrupt</code></a> using the <code class="highlighter-rouge">CONSUL_LOCAL_CONFIG</code> environment variable. This is recommended for servers and will be defaulted to <code class="highlighter-rouge">true</code> in Consul 0.7 and later, so this will no longer be necessary.</p>

<p>At startup, the agent will read config JSON files from <code class="highlighter-rouge">/consul/config</code>. Data will be persisted in the <code class="highlighter-rouge">/consul/data</code> volume.</p>

<p>Once the cluster is bootstrapped and quorum is achieved, you must use care to keep the minimum number of servers operating in order to avoid an outage state for the cluster. The deployment table in the <a href="https://www.consul.io/docs/internals/consensus.html">consensus</a> guide outlines the number of servers required for different configurations. There’s also an <a href="https://www.consul.io/docs/guides/servers.html">adding/removing servers</a> guide that describes that process, which is relevant to Docker configurations as well. The <a href="https://www.consul.io/docs/guides/outage.html">outage recovery</a> guide has steps to perform if servers are permanently lost. In general it’s best to restart or replace servers one at a time, making sure servers are healthy before proceeding to the next server.</p>

<h2 id="exposing-consuls-dns-server-on-port-53">Exposing Consul’s DNS Server on Port 53</h2>

<p>By default, Consul’s DNS server is exposed on port 8600. Because this is cumbersome to configure with facilities like <code class="highlighter-rouge">resolv.conf</code>, you may want to expose DNS on port 53. Consul 0.7 and later supports this by setting an environment variable that runs <code class="highlighter-rouge">setcap</code> on the Consul binary, allowing it to bind to privileged ports. Note that not all Docker storage backends support this feature (notably AUFS).</p>

<p>Here’s an example:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker run <span class="nt">-d</span> <span class="nt">--net</span><span class="o">=</span>host <span class="nt">-e</span> <span class="s1">'CONSUL_ALLOW_PRIVILEGED_PORTS='</span> consul <span class="nt">-dns-port</span><span class="o">=</span>53 <span class="nt">-recursor</span><span class="o">=</span>8.8.8.8
</code></pre></div></div>

<p>This example also includes a recursor configuration that uses Google’s DNS servers for non-Consul lookups. You may want to adjust this based on your particular DNS configuration. If you are binding Consul’s client interfaces to the host’s loopback address, then you should be able to configure your host’s <code class="highlighter-rouge">resolv.conf</code> to route DNS requests to Consul by including “127.0.0.1” as the primary DNS server. This would expose Consul’s DNS to all applications running on the host, but due to Docker’s built-in DNS server, you can’t point to this directly from inside your containers; Docker will issue an error message if you attempt to do this. You must configure Consul to listen on a non-localhost address that is reachable from within other containers.</p>

<p>Once you bind Consul’s client interfaces to the bridge or other network, you can use the <code class="highlighter-rouge">--dns</code> option in your <em>other containers</em> in order for them to use Consul’s DNS server, mapped to port 53. Here’s an example:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker run <span class="nt">-d</span> <span class="nt">--net</span><span class="o">=</span>host <span class="nt">-e</span> <span class="s1">'CONSUL_ALLOW_PRIVILEGED_PORTS='</span> consul agent <span class="nt">-dns-port</span><span class="o">=</span>53 <span class="nt">-recursor</span><span class="o">=</span>8.8.8.8 <span class="nt">-bind</span><span class="o">=</span>&lt;bridge ip&gt;
</code></pre></div></div>

<p>Now start another container and point it at Consul’s DNS, using the bridge address of the host:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker run <span class="nt">-i</span> <span class="nt">--dns</span><span class="o">=</span>&lt;bridge ip&gt; <span class="nt">-t</span> ubuntu sh <span class="nt">-c</span> <span class="s2">"apt-get update &amp;&amp; apt-get install -y dnsutils &amp;&amp; dig consul.service.consul"</span>
<span class="c">...
</span><span class="gp">;</span><span class="p">;</span> ANSWER SECTION:
<span class="go">consul.service.consul.  0       IN      A       66.175.220.234
</span><span class="c">...
</span></code></pre></div></div>

<p>In the example above, adding the bridge address to the host’s <code class="highlighter-rouge">/etc/resolv.conf</code> file should expose it to all containers without running with the <code class="highlighter-rouge">--dns</code> option.</p>

<h2 id="service-discovery-with-containers">Service Discovery with Containers</h2>

<p>There are several approaches you can use to register services running in containers with Consul. For manual configuration, your containers can use the local agent’s APIs to register and deregister themselves, see the <a href="https://www.consul.io/docs/agent/http/agent.html">Agent API</a> for more details. Another strategy is to create a derived Consul container for each host type which includes JSON config files for Consul to parse at startup, see <a href="https://www.consul.io/docs/agent/services.html">Services</a> for more information. Both of these approaches are fairly cumbersome, and the configured services may fall out of sync if containers die or additional containers are started.</p>

<p>If you run your containers under <a href="https://www.nomadproject.io/">HashiCorp’s Nomad</a> scheduler, it has <a href="https://www.nomadproject.io/docs/jobspec/servicediscovery.html">first class support for Consul</a>. The Nomad agent runs on each host alongside the Consul agent. When jobs are scheduled on a given host, the Nomad agent automatically takes care of syncing the Consul agent with the service information. This is very easy to manage, and even services on hosts running outside of Docker containers can be managed by Nomad and registered with Consul. You can find out more about running Docker under Nomad in the <a href="https://www.nomadproject.io/docs/drivers/docker.html">Docker Driver</a> guide.</p>

<p>Other open source options include <a href="http://gliderlabs.com/registrator/latest/">Registrator</a> from Glider Labs and <a href="https://www.joyent.com/containerpilot">ContainerPilot</a> from Joyent. Registrator works by running a Registrator instance on each host, alongside the Consul agent. Registrator monitors the Docker daemon for container stop and start events, and handles service registration with Consul using the container names and exposed ports as the service information. ContainerPilot manages service registration using tooling running inside the container to register services with Consul on start, manage a Consul TTL health check while running, and deregister services when the container stops.</p>

<h2 id="running-health-checks-in-docker-containers">Running Health Checks in Docker Containers</h2>

<p>Consul has the ability to execute health checks inside containers. If the Docker daemon is exposed to the Consul agent and the <code class="highlighter-rouge">DOCKER_HOST</code> environment variable is set, then checks can be configured with the Docker container ID to execute in. See the <a href="https://www.consul.io/docs/agent/checks.html">health checks</a> guide for more details.</p>

<h1 id="license">License</h1>

<p>View <a href="https://raw.githubusercontent.com/hashicorp/consul/master/LICENSE">license information</a> for the software contained in this image.</p>

<p>As with all Docker images, these likely also contain other software which may be under other licenses (such as Bash, etc from the base distribution, along with any direct or indirect dependencies of the primary software being contained).</p>

<p>Some additional license information which was able to be auto-detected might be found in <a href="https://github.com/docker-library/repo-info/tree/master/repos/consul">the <code class="highlighter-rouge">repo-info</code> repository’s <code class="highlighter-rouge">consul/</code> directory</a>.</p>

<p>As for any pre-built image usage, it is the image user’s responsibility to ensure that any use of this image complies with any relevant licenses for all software contained within.</p>


							<!-- tags -->
							
							
							
							<span class="glyphicon glyphicon-tags" style="padding-right: 10px"></span><span style="vertical-align: 2px"><a href="https://matsuand.github.io/docs.docker.jp.onthefly/glossary/?term=library">library</a>, <a href="https://matsuand.github.io/docs.docker.jp.onthefly/glossary/?term=sample">sample</a>, <a href="https://matsuand.github.io/docs.docker.jp.onthefly/glossary/?term=consul">consul</a></span>
							
							<!-- link corrections -->
              <script language="JavaScript">
							var x = document.links.length;
							var baseHref = document.getElementsByTagName('base')[0].href
							for (i = 0; i < x; i++) {
							  var munged = false;
							  var thisHREF = document.links[i].href;
							  var originalURL = "/samples/library/consul/";
							  if (thisHREF.indexOf(baseHref + "#") > -1) {
							    // hash fix
							    //console.log('BEFORE: base:',baseHref,'thisHREF:',thisHREF,'originalURL:',originalURL);
							    thisHREF = originalURL + thisHREF.replace(baseHref, "");
							    //console.log('AFTER: base:',baseHref,'thisHREF:',thisHREF,'originalURL:',originalURL);
							  }
							  if ((thisHREF.indexOf(window.location.hostname) > -1 || thisHREF.indexOf('http') == -1) && document.links[i].className.indexOf("nomunge") < 0) {
							    munged = true;
							    thisHREF = thisHREF.replace(".md", "/").replace("/index/", "/");
							    document.links[i].setAttribute('href', thisHREF);
							  }
							}
							</script>
							
						  <div id="ratings-div" style="color:#b9c2cc; text-align: center; margin-top: 150px; visibility: hidden">
								<div id="pd_rating_holder_8453675"></div>
								<script type="text/javascript">
									PDRTJS_settings_8453675 = {
										"id": "8453675",
										"unique_id": "_samples/library/consul/index.md",
										"title": "consul",
										"permalink": "https://github.com/docker/docker.github.io/blob/master/_samples/library/consul/index.md"
									};
									(function(d, c, j) {
										if (!document.getElementById(j)) {
											var pd = d.createElement(c),
												s;
											pd.id = j;
											pd.src = ('https:' == document.location.protocol) ? 'https://polldaddy.com/js/rating/rating.js' : 'http://i0.poll.fm/js/rating/rating.js';
											s = document.getElementsByTagName(c)[0];
											s.parentNode.insertBefore(pd, s);
										}
									}(document, 'script', 'pd-rating-js'));
								</script>
							</div>
							
						</section>
					</main>
					<nav class="col-nav">
						<div id="sidebar-nav" class="sidebar hidden-sm hidden-xs">
						<div id="navbar" class="nav-sidebar">
    <ul class="nav" id="jsTOCLeftNav">
    </ul>
</div>

						</div>
					</nav>
					<div class="col-toc">
							<div class="sidebar hidden-xs hidden-sm">
							<div class="toc-nav">
								<div class="feedback-links">
									<ul>
										
										<li style="visibility: hidden"><a href="https://github.com/matsuand/docs.docker.jp/edit/v18.09.local/_samples/library/consul/index.md"><i class="fa fa-pencil-square-o" aria-hidden="true"></i> このページの編集</a></li>
										<li><a href="https://github.com/matsuand/docs.docker.jp.onthefly/issues/new?body=File: [_samples/library/consul/index.md](https://matsuand.github.io/docs.docker.jp.onthefly/samples/library/consul/)"
															class="nomunge"><i class="fa fa-check" aria-hidden="true"></i> 文書変更のリクエスト</a></li>
										<li><a href="https://success.docker.com/support"><i class="fa fa-question" aria-hidden="true"></i> サポート依頼</a></li>
										<!-- toggle mode -->
										<li>
											<div class="toggle-mode">
												<div class="icon">
													<i class="fa fa-sun-o" aria-hidden="true"></i>
												</div>
												<div class="toggle-switch">
													<label class="switch">
														<input type="checkbox" id="switch-style">
														<div class="slider round"></div>
												</label>
												</div>
												<div class="icon">
													<i class="fa fa-moon-o" aria-hidden="true"></i>
												</div>
											</div>
										</li>
									</ul>
								</div>
								   
									<div id="side-toc-title">本ページ内</div>
									
<ul id="my_toc" class="inline_toc">
  <li><a href="#running-consul-for-development" class="nomunge">Running Consul for Development</a></li>
  <li><a href="#running-consul-agent-in-client-mode" class="nomunge">Running Consul Agent in Client Mode</a></li>
  <li><a href="#running-consul-agent-in-server-mode" class="nomunge">Running Consul Agent in Server Mode</a></li>
  <li><a href="#exposing-consuls-dns-server-on-port-53" class="nomunge">Exposing Consul’s DNS Server on Port 53</a></li>
  <li><a href="#service-discovery-with-containers" class="nomunge">Service Discovery with Containers</a></li>
  <li><a href="#running-health-checks-in-docker-containers" class="nomunge">Running Health Checks in Docker Containers</a></li>
</ul>


								</div>
								
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	
	<footer class="footer">
		  
    <div class="container">
        <div class="top_footer">
            <div class="row">
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><a href="https://www.docker.com/what-docker">What is Docker</a></li>
                        <li><a href="https://www.docker.com/what-container">What is a Container</a></li>
                        <li><a href="https://www.docker.com/use-cases">Use Cases</a></li>
                        <li><a href="https://www.docker.com/customers">Customers</a></li>
                        <li><a href="https://www.docker.com/partners/partner-program">Partners</a></li>
                        <li class="break"><a href="https://www.docker.com/industry-government">For Government</a></li>
                        <li><a href="https://www.docker.com/company">About Docker</a></li>
                        <li><a href="https://www.docker.com/company/management">Management</a></li>
                        <li><a href="https://www.docker.com/company/news-and-press">Press &amp; News</a></li>
                        <li><a href="https://www.docker.com/careers">Careers</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><a href="https://www.docker.com/products/overview">Product</a></li>
                        <li><a href="https://www.docker.com/pricing">Pricing</a></li>
                        <li><a href="https://www.docker.com/docker-community">Community Edition</a></li>
                        <li class="break"><a href="https://www.docker.com/enterprise">Enterprise Edition </a></li>
                        <li><a href="https://www.docker.com/products/docker-datacenter">Docker Datacenter</a></li>
                        <li><a href="https://hub.docker.com/">Docker Hub</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/">Documentation</a></li>
                        <li><a href="https://www.docker.com/docker">Learn</a></li>
                        <li><a href="https://blog.docker.com" target="_blank">Blog</a></li>
                        <li><a href="https://engineering.docker.com" target="_blank">Engineering Blog</a></li>
                        <li><a href="https://training.docker.com/" target="_blank">Training</a></li>
                        <li><a href="https://success.docker.com/support">Support</a></li>
                        <li><a href="https://success.docker.com/kbase">Knowledge Base</a></li>
                        <li><a href="https://www.docker.com/products/resources">Resources</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><a href="https://www.docker.com/docker-community">Community</a></li>
                        <li><a href="https://www.docker.com/technologies/overview">Open Source</a></li>
                        <li><a href="https://www.docker.com/community/events">Events</a></li>
                        <li><a href="https://forums.docker.com/" target="_blank">Forums</a></li>
                        <li><a href="https://www.docker.com/community/docker-captains">Docker Captains</a></li>
                        <li><a href="https://www.docker.com/docker-community/scholarships">Scholarships</a></li>
                        <li><a href="https://blog.docker.com/curated/">Community News</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-nav">
                <nav class="footer_sub_nav">
                    <ul class="menu">
                        <li><a href="http://status.docker.com/">Status</a></li>
                        <li><a href="https://www.docker.com/docker-security">Security</a></li>
                        <li><a href="https://www.docker.com/legal">Legal</a></li>
                        <li><a href="https://www.docker.com/company/contact">Contact</a></li>
                    </ul>
                </nav>
            </div>
        </div>
        <div class="bottom_footer">
            <div class="footer-copyright col-xs-12 col-md-8">
                <p class="copyright">
                    Copyright &copy; 2019 Docker Inc. All rights reserved. </p>
            </div>
            <div class="footer_social_nav">
                <ul class="nav-social">
                    <li class="fa fa-twitter"><a href="http://twitter.com/docker">Twitter</a></li>
                    <li class="fa fa-youtube"><a href="http://www.youtube.com/user/dockerrun">Youtube</a></li>
                    <li class="fa fa-github"><a href="https://github.com/docker">GitHub</a></li>
                    <li class="fa fa-linkedin"><a href="https://www.linkedin.com/company/docker">Linkedin</a></li>
                    <li class="fa fa-facebook"><a href="https://www.facebook.com/docker.run">Facebook</a></li>
                    <li class="fa fa-reddit"><a href="http://www.reddit.com/r/docker">Reddit</a></li>
                    <li class="fa fa-slideshare"><a href="http://www.slideshare.net/docker">Slideshare</a></li>
                </ul>
            </div>
        </div>
    </div>

	</footer>
	<link rel="stylesheet" href="https://matsuand.github.io/docs.docker.jp.onthefly/css/github.css">
	
	<!-- <script src="https://matsuand.github.io/docs.docker.jp.onthefly/js/anchorlinks.js"></script> -->
	<script defer src="https://matsuand.github.io/docs.docker.jp.onthefly/js/menu.js"></script>
	<script src="https://matsuand.github.io/docs.docker.jp.onthefly/js/jquery.js"></script>
	<script src="https://matsuand.github.io/docs.docker.jp.onthefly/js/bootstrap.min.js"></script>
	<!-- Always include the archive.js, but it doesn't do much unless we are an archive -->
	<script language="javascript">
	// Default to assuming this is an archive and hiding some stuff
	// See js/archive.js and js/docs.js for logic relating to this
	var isArchive = true;
	var dockerVersion = 'v18.09';
	// In archives, we need to know the page root and we get it from JEKYLL_ENV in the jekyll build command
	var jekyllEnv = 'development';
	// If unset (in non-archive branches), defaults to "development". In that case, reset it to empty
	if (jekyllEnv == 'development') {
		jekyllEnv = '';
	}
	var pageURL = jekyllEnv + '/samples/library/consul/';
	</script>
	<script src="https://matsuand.github.io/docs.docker.jp.onthefly/js/archive.js"></script>
	<script src="https://matsuand.github.io/docs.docker.jp.onthefly/js/stickyfill.min.js"></script>
	<script defer src="https://matsuand.github.io/docs.docker.jp.onthefly/js/metadata.js"></script>
	<script src="https://matsuand.github.io/docs.docker.jp.onthefly/js/glossary.js"></script>
	<script src="https://matsuand.github.io/docs.docker.jp.onthefly/js/collections_tocs.js"></script>
	<script defer src="https://matsuand.github.io/docs.docker.jp.onthefly/js/docs.js"></script>
	<script defer src="https://matsuand.github.io/docs.docker.jp.onthefly/js/toc.js"></script>
	<script language="javascript">
	jQuery(document).ready(function(){
				hookupTOCEvents();
			});
	</script>
</body>

</html>
