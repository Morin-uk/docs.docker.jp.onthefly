<!-- Page generated 2020-03-27 18:38:29 +0900 -->
<!-- relative link basehrefs -->

	


<!-- Logic for 'edit this button' -->


	

	

	

	

	

	

	

	

	


<!-- End of logic for 'edit this button' -->


<!DOCTYPE html>
<html lang="ja">

<head>
	<base href="/docs.docker.jp.onthefly/samples/library/postgres/" />
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<style type="text/css">
		@charset "UTF-8";
		[ng\:cloak],
		[ng-cloak],
		[data-ng-cloak],
		[x-ng-cloak],
		.ng-cloak,
		.x-ng-cloak,
		.ng-hide:not(.ng-hide-animate) {
			display: none !important;
		}

		ng\:form {
			display: block;
		}
	</style>
	<!-- Google Tag Manager -->
	<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
	new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
	j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
	'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-WL2QLG5');</script>
	<!-- End Google Tag Manager -->
	
	<!-- favicon -->
	<link rel="icon" type="image/x-icon" href="/docs.docker.jp.onthefly/favicons/docs@2x.ico" sizes="129x128">
	<meta name="msapplication-TileImage" content="/docs.docker.jp.onthefly/favicons/docs@2x.ico">
	<link rel="apple-touch-icon" type="image/x-icon" href="/docs.docker.jp.onthefly/favicons/docs@2x.ico" sizes="129x128">
	<meta property="og:image" content="/docs.docker.jp.onthefly/favicons/docs@2x.ico"/>
	<!-- metadata -->
	<meta property="og:type" content="website"/>
	<meta property="og:updated_time" itemprop="dateUpdated" content="2020-03-27T18:38:29+09:00"/>
	<meta property="og:image" itemprop="image primaryImageOfPage" content="/docs.docker.jp.onthefly/images/docs@2x.png"/>
	<meta name="twitter:card" content="summary"/>
	<meta name="twitter:domain" content="docs.docker.jp"/>
	<meta name="twitter:site" content="@docker_docs"/>
	<meta name="twitter:url" content="https://twitter.com/docker_docs"/>
	<meta name="twitter:title" itemprop="title name" content="postgres"/>
	<meta name="twitter:description" property="og:description" itemprop="description" content="The PostgreSQL object-relational database system provides reliability and data integrity. GitHub repo: https://github.com/docker-library/postgres Library reference This content is imported from the official Docker Library docs, and is provided by the..." />
	<meta name="twitter:image:src" content="/docs.docker.jp.onthefly/images/docs@2x.png"/>
	<meta name="twitter:image:alt" content="Docker ドキュメント"/>
	<meta property="article:published_time" itemprop="datePublished" content="2020-03-27T18:38:29+09:00"/>

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="keywords" content="library, sample, postgres">
	<link rel="stylesheet" href="/docs.docker.jp.onthefly/css/font-awesome.min.css">
	<link rel="stylesheet" href="/docs.docker.jp.onthefly/css/bootstrap.min.css">
	<link id="pygments" rel="stylesheet" href="/docs.docker.jp.onthefly/css/pygments/perldoc.css">
	<link id="pagestyle" rel="stylesheet" href="/docs.docker.jp.onthefly/css/style.css">

	<!-- Go get "Open Sans" font from Google -->
	<link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
	<!-- SEO stuff -->
	<title>postgres | Docker ドキュメント</title>
<meta property="og:title" content="postgres" />
<meta property="og:locale" content="ja_JP" />
<meta name="description" content="The PostgreSQL object-relational database system provides reliability and data integrity.
" />
<meta property="og:description" content="The PostgreSQL object-relational database system provides reliability and data integrity.
" />
<link rel="canonical" href="/docs.docker.jp.onthefly/samples/library/postgres/" />
<meta property="og:url" content="https://matsuand.github.io/docs.docker.jp.onthefly/samples/library/postgres/" />
<meta property="og:site_name" content="Docker ドキュメント" />
<script type="application/ld+json">
{"@context":"http://schema.org","@type":"WebPage","headline":"postgres","description":"The PostgreSQL object-relational database system provides reliability and data integrity.
","url":"https://matsuand.github.io/docs.docker.jp.onthefly/samples/library/postgres/"}</script>
	<!-- END SEO STUFF -->
	
	<script language="javascript">
	// Default to assuming this is an archive and hiding some stuff
	// See js/archive.js and js/docs.js for logic relating to this
	var isArchive = true;
	var dockerVersion = 'v19.03';
	</script>
</head>
<body ng-app="Docker" ng-controller="DockerController" class="colums">
	<header>
		 <nav class="nav-secondary navbar navbar-fixed-top">
    <!-- <div class="fan"></div> -->
    <div class="container-fluid">
        <div class="navbar-header">
            <a href="/docs.docker.jp.onthefly/"><img class="logo" src="/docs.docker.jp.onthefly/images/docker-docs-logo.svg" alt="Docker Docs" title="Docker Docs"></a>
        </div>
        <div class="navbar-collapse" aria-expanded="false" style="height: 1px;">
            <div class="search-form" id="search-div" style="visibility: hidden">
    <form class="search-form form-inline ng-pristine ng-valid" id="searchForm" action="/docs.docker.jp.onthefly/search/">
        <input class="search-field form-control ds-input" id="st-search-input" value="" name="q" placeholder="文書内検索" type="search" autocomplete="off" spellcheck="false" dir="auto" style="position: relative; vertical-align: top;">
        <div id="autocompleteContainer">
            <div id="autocompleteResults"></div>
        </div>
        <!-- <button type="submit" class="search-submit btn btn-default">検索</button> -->
    </form>
</div>
<div class="sidebar-toggle">
    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
    </button>
</div>
<div class="nav-container">
    <div id="tabs">
        <ul class="tabs" id="jsTOCHorizontal">

        </ul>
    </div>
    <div class="ctrl-right hidden-xs hidden-sm">
        <a href="javascript:void(0)" id="menu-toggle"><i class="fa fa-indent" aria-hidden="true"></i></a>
        <div class="btn-group" style="visibility: hidden">
  <button type="button" class="btn btn-default dropdown-btn dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    Docker v19.03 (current)     <span class="caret"></span>
  </button>
  <ul class="dropdown-menu">
    <li><a href="/docs.docker.jp.onthefly/v18.09/">Docker v18.09</a></li><li><a href="/docs.docker.jp.onthefly/v18.03/">Docker v18.03</a></li><li><a href="/docs.docker.jp.onthefly/v17.06/">Docker v17.06</a></li>
  </ul>
</div>

    </div>
</div>

        </div>
    </div>
</nav>

	</header>

	<div class="wrapper right-open">
		<div class="container-fluid">
			<div class="row">
				<div class="col-body">
					<main class="col-content content">
						<section class="section">
							
								
							<h1>postgres</h1>  <span class="reading-time" title="Estimated reading time">
  <span class="reading-time-label">読む時間の目安: </span>
  
  
    18 分
  
</span>

							
							
							<p>The PostgreSQL object-relational database system provides reliability and data integrity.</p>

<p>GitHub repo: <a href="https://github.com/docker-library/postgres">https://github.com/docker-library/postgres</a></p>

<blockquote>
  <p><strong>Library reference</strong></p>

  <p>This content is imported from
<a href="https://github.com/docker-library/docs/tree/master/postgres/">the official Docker Library docs</a>,
and is provided by the original uploader. You can view the Docker Hub page for this image at
<a href="https://hub.docker.com/images/postgres">https://hub.docker.com/images/postgres</a></p>
</blockquote>

<!-- content begin -->

<!--

********************************************************************************

WARNING:

    DO NOT EDIT "postgres/README.md"

    IT IS AUTO-GENERATED

    (from the other files in "postgres/" combined with a set of templates)

********************************************************************************

-->

<h1 id="supported-tags-and-respective-dockerfile-links">Supported tags and respective <code class="highlighter-rouge">Dockerfile</code> links</h1>

<ul>
  <li><a href="https://github.com/docker-library/postgres/blob/87b15b6c65ba985ac958e7b35ba787422113066e/12/Dockerfile"><code class="highlighter-rouge">12-beta2</code>, <code class="highlighter-rouge">12</code></a></li>
  <li><a href="https://github.com/docker-library/postgres/blob/ba24350aa02996f75cf5b44eea0af082775cc8ec/12/alpine/Dockerfile"><code class="highlighter-rouge">12-beta2-alpine</code>, <code class="highlighter-rouge">12-alpine</code></a></li>
  <li><a href="https://github.com/docker-library/postgres/blob/87b15b6c65ba985ac958e7b35ba787422113066e/11/Dockerfile"><code class="highlighter-rouge">11.4</code>, <code class="highlighter-rouge">11</code>, <code class="highlighter-rouge">latest</code></a></li>
  <li><a href="https://github.com/docker-library/postgres/blob/ba24350aa02996f75cf5b44eea0af082775cc8ec/11/alpine/Dockerfile"><code class="highlighter-rouge">11.4-alpine</code>, <code class="highlighter-rouge">11-alpine</code>, <code class="highlighter-rouge">alpine</code></a></li>
  <li><a href="https://github.com/docker-library/postgres/blob/87b15b6c65ba985ac958e7b35ba787422113066e/10/Dockerfile"><code class="highlighter-rouge">10.9</code>, <code class="highlighter-rouge">10</code></a></li>
  <li><a href="https://github.com/docker-library/postgres/blob/ba24350aa02996f75cf5b44eea0af082775cc8ec/10/alpine/Dockerfile"><code class="highlighter-rouge">10.9-alpine</code>, <code class="highlighter-rouge">10-alpine</code></a></li>
  <li><a href="https://github.com/docker-library/postgres/blob/87b15b6c65ba985ac958e7b35ba787422113066e/9.6/Dockerfile"><code class="highlighter-rouge">9.6.14</code>, <code class="highlighter-rouge">9.6</code>, <code class="highlighter-rouge">9</code></a></li>
  <li><a href="https://github.com/docker-library/postgres/blob/ba24350aa02996f75cf5b44eea0af082775cc8ec/9.6/alpine/Dockerfile"><code class="highlighter-rouge">9.6.14-alpine</code>, <code class="highlighter-rouge">9.6-alpine</code>, <code class="highlighter-rouge">9-alpine</code></a></li>
  <li><a href="https://github.com/docker-library/postgres/blob/87b15b6c65ba985ac958e7b35ba787422113066e/9.5/Dockerfile"><code class="highlighter-rouge">9.5.18</code>, <code class="highlighter-rouge">9.5</code></a></li>
  <li><a href="https://github.com/docker-library/postgres/blob/ba24350aa02996f75cf5b44eea0af082775cc8ec/9.5/alpine/Dockerfile"><code class="highlighter-rouge">9.5.18-alpine</code>, <code class="highlighter-rouge">9.5-alpine</code></a></li>
  <li><a href="https://github.com/docker-library/postgres/blob/87b15b6c65ba985ac958e7b35ba787422113066e/9.4/Dockerfile"><code class="highlighter-rouge">9.4.23</code>, <code class="highlighter-rouge">9.4</code></a></li>
  <li><a href="https://github.com/docker-library/postgres/blob/ba24350aa02996f75cf5b44eea0af082775cc8ec/9.4/alpine/Dockerfile"><code class="highlighter-rouge">9.4.23-alpine</code>, <code class="highlighter-rouge">9.4-alpine</code></a></li>
</ul>

<h1 id="quick-reference">Quick reference</h1>

<ul>
  <li>
    <p><strong>Where to get help</strong>:<br />
<a href="https://forums.docker.com/">the Docker Community Forums</a>, <a href="https://blog.docker.com/2016/11/introducing-docker-community-directory-docker-community-slack/">the Docker Community Slack</a>, or <a href="https://stackoverflow.com/search?tab=newest&amp;q=docker">Stack Overflow</a></p>
  </li>
  <li>
    <p><strong>Where to file issues</strong>:<br />
<a href="https://github.com/docker-library/postgres/issues">https://github.com/docker-library/postgres/issues</a></p>
  </li>
  <li>
    <p><strong>Maintained by</strong>:<br />
<a href="https://github.com/docker-library/postgres">the PostgreSQL Docker Community</a></p>
  </li>
  <li>
    <p><strong>Supported architectures</strong>: (<a href="https://github.com/docker-library/official-images#architectures-other-than-amd64">more info</a>)<br />
<a href="https://hub.docker.com/r/amd64/postgres/"><code class="highlighter-rouge">amd64</code></a>, <a href="https://hub.docker.com/r/arm32v5/postgres/"><code class="highlighter-rouge">arm32v5</code></a>, <a href="https://hub.docker.com/r/arm32v6/postgres/"><code class="highlighter-rouge">arm32v6</code></a>, <a href="https://hub.docker.com/r/arm32v7/postgres/"><code class="highlighter-rouge">arm32v7</code></a>, <a href="https://hub.docker.com/r/arm64v8/postgres/"><code class="highlighter-rouge">arm64v8</code></a>, <a href="https://hub.docker.com/r/i386/postgres/"><code class="highlighter-rouge">i386</code></a>, <a href="https://hub.docker.com/r/ppc64le/postgres/"><code class="highlighter-rouge">ppc64le</code></a>, <a href="https://hub.docker.com/r/s390x/postgres/"><code class="highlighter-rouge">s390x</code></a></p>
  </li>
  <li>
    <p><strong>Published image artifact details</strong>:<br />
<a href="https://github.com/docker-library/repo-info/blob/master/repos/postgres">repo-info repo’s <code class="highlighter-rouge">repos/postgres/</code> directory</a> (<a href="https://github.com/docker-library/repo-info/commits/master/repos/postgres">history</a>)<br />
(image metadata, transfer size, etc)</p>
  </li>
  <li>
    <p><strong>Image updates</strong>:<br />
<a href="https://github.com/docker-library/official-images/pulls?q=label%3Alibrary%2Fpostgres">official-images PRs with label <code class="highlighter-rouge">library/postgres</code></a><br />
<a href="https://github.com/docker-library/official-images/blob/master/library/postgres">official-images repo’s <code class="highlighter-rouge">library/postgres</code> file</a> (<a href="https://github.com/docker-library/official-images/commits/master/library/postgres">history</a>)</p>
  </li>
  <li>
    <p><strong>Source of this description</strong>:<br />
<a href="https://github.com/docker-library/docs/tree/master/postgres">docs repo’s <code class="highlighter-rouge">postgres/</code> directory</a> (<a href="https://github.com/docker-library/docs/commits/master/postgres">history</a>)</p>
  </li>
</ul>

<h1 id="what-is-postgresql">What is PostgreSQL?</h1>

<p>PostgreSQL, often simply “Postgres”, is an object-relational database management system (ORDBMS) with an emphasis on extensibility and standards-compliance. As a database server, its primary function is to store data, securely and supporting best practices, and retrieve it later, as requested by other software applications, be it those on the same computer or those running on another computer across a network (including the Internet). It can handle workloads ranging from small single-machine applications to large Internet-facing applications with many concurrent users. Recent versions also provide replication of the database itself for security and scalability.</p>

<p>PostgreSQL implements the majority of the SQL:2011 standard, is ACID-compliant and transactional (including most DDL statements) avoiding locking issues using multiversion concurrency control (MVCC), provides immunity to dirty reads and full serializability; handles complex SQL queries using many indexing methods that are not available in other databases; has updateable views and materialized views, triggers, foreign keys; supports functions and stored procedures, and other expandability, and has a large number of extensions written by third parties. In addition to the possibility of working with the major proprietary and open source databases, PostgreSQL supports migration from them, by its extensive standard SQL support and available migration tools. And if proprietary extensions had been used, by its extensibility that can emulate many through some built-in and third-party open source compatibility extensions, such as for Oracle.</p>

<blockquote>
  <p><a href="https://en.wikipedia.org/wiki/PostgreSQL">wikipedia.org/wiki/PostgreSQL</a></p>
</blockquote>

<p><img src="https://raw.githubusercontent.com/docker-library/docs/01c12653951b2fe592c1f93a13b4e289ada0e3a1/postgres/logo.png" alt="logo" /></p>

<h1 id="how-to-use-this-image">How to use this image</h1>

<h2 id="start-a-postgres-instance">start a postgres instance</h2>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker run <span class="nt">--name</span> some-postgres <span class="nt">-e</span> <span class="nv">POSTGRES_PASSWORD</span><span class="o">=</span>mysecretpassword <span class="nt">-d</span> postgres
</code></pre></div></div>

<p>The default <code class="highlighter-rouge">postgres</code> user and database are created in the entrypoint with <code class="highlighter-rouge">initdb</code>.</p>

<blockquote>
  <p>The postgres database is a default database meant for use by users, utilities and third party applications.</p>

  <p><a href="http://www.postgresql.org/docs/9.5/interactive/app-initdb.html">postgresql.org/docs</a></p>
</blockquote>

<h2 id="-or-via-psql">... or via <code class="highlighter-rouge">psql</code></h2>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker run <span class="nt">-it</span> <span class="nt">--rm</span> <span class="nt">--network</span> some-network postgres psql <span class="nt">-h</span> some-postgres <span class="nt">-U</span> postgres
<span class="go">psql (9.5.0)
Type "help" for help.

</span><span class="gp">postgres=#</span> SELECT 1<span class="p">;</span>
<span class="go"> ?column? 
----------
        1
(1 row)

</span></code></pre></div></div>

<h2 id="-via-docker-stack-deploy-or-docker-compose">... via <a href="https://matsuand.github.io/docs.docker.jp.onthefly/engine/reference/commandline/stack_deploy/"><code class="highlighter-rouge">docker stack deploy</code></a> or <a href="https://github.com/docker/compose"><code class="highlighter-rouge">docker-compose</code></a></h2>

<p>Example <code class="highlighter-rouge">stack.yml</code> for <code class="highlighter-rouge">postgres</code>:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Use postgres/example user/password credentials</span>
<span class="na">version</span><span class="pi">:</span> <span class="s1">'</span><span class="s">3.1'</span>

<span class="na">services</span><span class="pi">:</span>

  <span class="na">db</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">postgres</span>
    <span class="na">restart</span><span class="pi">:</span> <span class="s">always</span>
    <span class="na">environment</span><span class="pi">:</span>
      <span class="na">POSTGRES_PASSWORD</span><span class="pi">:</span> <span class="s">example</span>

  <span class="na">adminer</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">adminer</span>
    <span class="na">restart</span><span class="pi">:</span> <span class="s">always</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">8080:8080</span>
</code></pre></div></div>

<p><a href="http://play-with-docker.com?stack=https://raw.githubusercontent.com/docker-library/docs/9efeec18b6b2ed232cf0fbd3914b6211e16e242c/postgres/stack.yml"><img src="https://github.com/play-with-docker/stacks/raw/cff22438cb4195ace27f9b15784bbb497047afa7/assets/images/button.png" alt="Try in PWD" /></a></p>

<p>Run <code class="highlighter-rouge">docker stack deploy -c stack.yml postgres</code> (or <code class="highlighter-rouge">docker-compose -f stack.yml up</code>), wait for it to initialize completely, and visit <code class="highlighter-rouge">http://swarm-ip:8080</code>, <code class="highlighter-rouge">http://localhost:8080</code>, or <code class="highlighter-rouge">http://host-ip:8080</code> (as appropriate).</p>

<h1 id="how-to-extend-this-image">How to extend this image</h1>

<p>There are many ways to extend the <code class="highlighter-rouge">postgres</code> image. Without trying to support every possible use case, here are just a few that we have found useful.</p>

<h2 id="environment-variables">Environment Variables</h2>

<p>The PostgreSQL image uses several environment variables which are easy to miss. While none of the variables are required, they may significantly aid you in using the image.</p>

<p><strong>Warning</strong>: the Docker specific variables will only have an effect if you start the container with a data directory that is empty; any pre-existing database will be left untouched on container startup.</p>

<h3 id="postgres_password"><code class="highlighter-rouge">POSTGRES_PASSWORD</code></h3>

<p>This environment variable is recommended for you to use the PostgreSQL image. This environment variable sets the superuser password for PostgreSQL. The default superuser is defined by the <code class="highlighter-rouge">POSTGRES_USER</code> environment variable.</p>

<p>Note 1: The PostgreSQL image sets up <code class="highlighter-rouge">trust</code> authentication locally so you may notice a password is not required when connecting from <code class="highlighter-rouge">localhost</code> (inside the same container). However, a password will be required if connecting from a different host/container.</p>

<p>Note 2: This variable defines the superuser password in the PostgreSQL instance, as set by the <code class="highlighter-rouge">initdb</code> script during inital container startup. It has no effect on the <code class="highlighter-rouge">PGPASSWORD</code> environment variable that may be used by the <code class="highlighter-rouge">psql</code> client at runtime, as described at <a href="https://www.postgresql.org/docs/10/static/libpq-envars.html">https://www.postgresql.org/docs/10/static/libpq-envars.html</a>. <code class="highlighter-rouge">PGPASSWORD</code>, if used, will be specified as a separate environment variable.</p>

<h3 id="postgres_user"><code class="highlighter-rouge">POSTGRES_USER</code></h3>

<p>This optional environment variable is used in conjunction with <code class="highlighter-rouge">POSTGRES_PASSWORD</code> to set a user and its password. This variable will create the specified user with superuser power and a database with the same name. If it is not specified, then the default user of <code class="highlighter-rouge">postgres</code> will be used.</p>

<h3 id="postgres_db"><code class="highlighter-rouge">POSTGRES_DB</code></h3>

<p>This optional environment variable can be used to define a different name for the default database that is created when the image is first started. If it is not specified, then the value of <code class="highlighter-rouge">POSTGRES_USER</code> will be used.</p>

<h3 id="postgres_initdb_args"><code class="highlighter-rouge">POSTGRES_INITDB_ARGS</code></h3>

<p>This optional environment variable can be used to send arguments to <code class="highlighter-rouge">postgres initdb</code>. The value is a space separated string of arguments as <code class="highlighter-rouge">postgres initdb</code> would expect them. This is useful for adding functionality like data page checksums: <code class="highlighter-rouge">-e POSTGRES_INITDB_ARGS="--data-checksums"</code>.</p>

<h3 id="postgres_initdb_waldir"><code class="highlighter-rouge">POSTGRES_INITDB_WALDIR</code></h3>

<p>This optional environment variable can be used to define another location for the Postgres transaction log. By default the transaction log is stored in a subdirectory of the main Postgres data folder (<code class="highlighter-rouge">PGDATA</code>). Sometimes it can be desireable to store the transaction log in a different directory which may be backed by storage with different performance or reliability characteristics.</p>

<p><strong>Note:</strong> on PostgreSQL 9.x, this variable is <code class="highlighter-rouge">POSTGRES_INITDB_XLOGDIR</code> (reflecting <a href="https://wiki.postgresql.org/wiki/New_in_postgres_10#Renaming_of_.22xlog.22_to_.22wal.22_Globally_.28and_location.2Flsn.29">the changed name of the <code class="highlighter-rouge">--xlogdir</code> flag to <code class="highlighter-rouge">--waldir</code> in PostgreSQL 10+</a>).</p>

<h3 id="pgdata"><code class="highlighter-rouge">PGDATA</code></h3>

<p>This optional variable can be used to define another location - like a subdirectory - for the database files. The default is <code class="highlighter-rouge">/var/lib/postgresql/data</code>, but if the data volume you’re using is a filesystem mountpoint (like with GCE persistent disks), Postgres <code class="highlighter-rouge">initdb</code> recommends a subdirectory (for example <code class="highlighter-rouge">/var/lib/postgresql/data/pgdata</code> ) be created to contain the data.</p>

<p>This is an environment variable that is not Docker specific. Because the variable is used by the <code class="highlighter-rouge">postgres</code> server binary (see the <a href="https://www.postgresql.org/docs/11/app-postgres.html#id-1.9.5.14.7">PostgreSQL docs</a>), the entrypoint script takes it into account.</p>

<h2 id="docker-secrets">Docker Secrets</h2>

<p>As an alternative to passing sensitive information via environment variables, <code class="highlighter-rouge">_FILE</code> may be appended to some of the previously listed environment variables, causing the initialization script to load the values for those variables from files present in the container. In particular, this can be used to load passwords from Docker secrets stored in <code class="highlighter-rouge">/run/secrets/&lt;secret_name&gt;</code> files. For example:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker run <span class="nt">--name</span> some-postgres <span class="nt">-e</span> <span class="nv">POSTGRES_PASSWORD_FILE</span><span class="o">=</span>/run/secrets/postgres-passwd <span class="nt">-d</span> postgres
</code></pre></div></div>

<p>Currently, this is only supported for <code class="highlighter-rouge">POSTGRES_INITDB_ARGS</code>, <code class="highlighter-rouge">POSTGRES_PASSWORD</code>, <code class="highlighter-rouge">POSTGRES_USER</code>, and <code class="highlighter-rouge">POSTGRES_DB</code>.</p>

<h2 id="initialization-scripts">Initialization scripts</h2>

<p>If you would like to do additional initialization in an image derived from this one, add one or more <code class="highlighter-rouge">*.sql</code>, <code class="highlighter-rouge">*.sql.gz</code>, or <code class="highlighter-rouge">*.sh</code> scripts under <code class="highlighter-rouge">/docker-entrypoint-initdb.d</code> (creating the directory if necessary). After the entrypoint calls <code class="highlighter-rouge">initdb</code> to create the default <code class="highlighter-rouge">postgres</code> user and database, it will run any <code class="highlighter-rouge">*.sql</code> files, run any executable <code class="highlighter-rouge">*.sh</code> scripts, and source any non-executable <code class="highlighter-rouge">*.sh</code> scripts found in that directory to do further initialization before starting the service.</p>

<p><strong>Warning</strong>: scripts in <code class="highlighter-rouge">/docker-entrypoint-initdb.d</code> are only run if you start the container with a data directory that is empty; any pre-existing database will be left untouched on container startup. One common problem is that if one of your <code class="highlighter-rouge">/docker-entrypoint-initdb.d</code> scripts fails (which will cause the entrypoint script to exit) and your orchestrator restarts the container with the already initialized data directory, it will not continue on with your scripts.</p>

<p>For example, to add an additional user and database, add the following to <code class="highlighter-rouge">/docker-entrypoint-initdb.d/init-user-db.sh</code>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
<span class="nb">set</span> <span class="nt">-e</span>

psql <span class="nt">-v</span> <span class="nv">ON_ERROR_STOP</span><span class="o">=</span>1 <span class="nt">--username</span> <span class="s2">"</span><span class="nv">$POSTGRES_USER</span><span class="s2">"</span> <span class="nt">--dbname</span> <span class="s2">"</span><span class="nv">$POSTGRES_DB</span><span class="s2">"</span> <span class="o">&lt;&lt;-</span><span class="no">EOSQL</span><span class="sh">
	CREATE USER docker;
	CREATE DATABASE docker;
	GRANT ALL PRIVILEGES ON DATABASE docker TO docker;
</span><span class="no">EOSQL
</span></code></pre></div></div>

<p>These initialization files will be executed in sorted name order as defined by the current locale, which defaults to <code class="highlighter-rouge">en_US.utf8</code>. Any <code class="highlighter-rouge">*.sql</code> files will be executed by <code class="highlighter-rouge">POSTGRES_USER</code>, which defaults to the <code class="highlighter-rouge">postgres</code> superuser. It is recommended that any <code class="highlighter-rouge">psql</code> commands that are run inside of a <code class="highlighter-rouge">*.sh</code> script be executed as <code class="highlighter-rouge">POSTGRES_USER</code> by using the <code class="highlighter-rouge">--username "$POSTGRES_USER"</code> flag. This user will be able to connect without a password due to the presence of <code class="highlighter-rouge">trust</code> authentication for Unix socket connections made inside the container.</p>

<p>Additionally, as of <a href="https://github.com/docker-library/postgres/pull/253">docker-library/postgres#253</a>, these initialization scripts are run as the <code class="highlighter-rouge">postgres</code> user (or as the “semi-arbitrary user” specified with the <code class="highlighter-rouge">--user</code> flag to <code class="highlighter-rouge">docker run</code>; see the section titled “Arbitrary <code class="highlighter-rouge">--user</code> Notes” for more details). Also, as of <a href="https://github.com/docker-library/postgres/pull/440">docker-library/postgres#440</a>, the temporary daemon started for these initialization scripts listens only on the Unix socket, so any <code class="highlighter-rouge">psql</code> usage should drop the hostname portion (see <a href="https://github.com/docker-library/postgres/issues/474#issuecomment-416914741">docker-library/postgres#474 (comment)</a> for example).</p>

<h2 id="database-configuration">Database Configuration</h2>

<p>There are many ways to set PostgreSQL server configuration. For information on what is available to configure, see the postgresql.org <a href="https://www.postgresql.org/docs/current/static/runtime-config.html">docs</a> for the specific version of PostgreSQL that you are running. Here are a few options for setting configuration:</p>

<ul>
  <li>
    <p>Use a custom config file. Create a config file and get it into the container. If you need a starting place for your config file you can use the sample provided by PostgreSQL which is available in the container at <code class="highlighter-rouge">/usr/share/postgresql/postgresql.conf.sample</code> (<code class="highlighter-rouge">/usr/local/share/postgresql/postgresql.conf.sample</code> in Alpine variants).</p>

    <ul>
      <li><strong>Important note:</strong> you must set <code class="highlighter-rouge">listen_addresses = '*'</code>so that other containers will be able to access postgres.</li>
    </ul>

    <div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> <span class="c"># get the default config</span>
<span class="gp">$</span> docker run <span class="nt">-i</span> <span class="nt">--rm</span> postgres <span class="nb">cat</span> /usr/share/postgresql/postgresql.conf.sample <span class="o">&gt;</span> my-postgres.conf
<span class="go">
</span><span class="gp">$</span> <span class="c"># customize the config</span>
<span class="go">
</span><span class="gp">$</span> <span class="c"># run postgres with custom config</span>
<span class="gp">$</span> docker run <span class="nt">-d</span> <span class="nt">--name</span> some-postgres <span class="nt">-v</span> <span class="s2">"</span><span class="nv">$PWD</span><span class="s2">/my-postgres.conf"</span>:/etc/postgresql/postgresql.conf postgres <span class="nt">-c</span> <span class="s1">'config_file=/etc/postgresql/postgresql.conf'</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Set options directly on the run line. The entrypoint script is made so that any options passed to the docker command will be passed along to the <code class="highlighter-rouge">postgres</code> server daemon. From the <a href="https://www.postgresql.org/docs/current/static/app-postgres.html">docs</a> we see that any option available in a <code class="highlighter-rouge">.conf</code> file can be set via <code class="highlighter-rouge">-c</code>.</p>

    <div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker run <span class="nt">-d</span> <span class="nt">--name</span> some-postgres postgres <span class="nt">-c</span> <span class="s1">'shared_buffers=256MB'</span> <span class="nt">-c</span> <span class="s1">'max_connections=200'</span>
</code></pre></div>    </div>
  </li>
</ul>

<h2 id="locale-customization">Locale Customization</h2>

<p>You can extend the image with a simple <code class="highlighter-rouge">Dockerfile</code> to set a different locale. The following example will set the default locale to <code class="highlighter-rouge">de_DE.utf8</code>:</p>

<div class="language-dockerfile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">FROM</span><span class="s"> postgres:9.4</span>
<span class="k">RUN </span>localedef <span class="nt">-i</span> de_DE <span class="nt">-c</span> <span class="nt">-f</span> UTF-8 <span class="nt">-A</span> /usr/share/locale/locale.alias de_DE.UTF-8
<span class="k">ENV</span><span class="s"> LANG de_DE.utf8</span>
</code></pre></div></div>

<p>Since database initialization only happens on container startup, this allows us to set the language before it is created.</p>

<h2 id="additional-extensions">Additional Extensions</h2>

<p>When using the default (Debian-based) variants, installing additional extensions (such as PostGIS) should be as simple as installing the relevant packages (see <a href="https://github.com/appropriate/docker-postgis/blob/f6d28e4a1871b1f72e1c893ff103f10b6d7cb6e1/10-2.4/Dockerfile">github.com/appropriate/docker-postgis</a> for a concrete example).</p>

<p>When using the Alpine variants, any postgres extension not listed in <a href="https://www.postgresql.org/docs/10/static/contrib.html">postgres-contrib</a> will need to be compiled in your own image (again, see <a href="https://github.com/appropriate/docker-postgis/blob/f6d28e4a1871b1f72e1c893ff103f10b6d7cb6e1/10-2.4/alpine/Dockerfile">github.com/appropriate/docker-postgis</a> for a concrete example).</p>

<h1 id="arbitrary---user-notes">Arbitrary <code class="highlighter-rouge">--user</code> Notes</h1>

<p>As of <a href="https://github.com/docker-library/postgres/pull/253">docker-library/postgres#253</a>, this image supports running as a (mostly) arbitrary user via <code class="highlighter-rouge">--user</code> on <code class="highlighter-rouge">docker run</code>.</p>

<p>The main caveat to note is that <code class="highlighter-rouge">postgres</code> doesn’t care what UID it runs as (as long as the owner of <code class="highlighter-rouge">/var/lib/postgresql/data</code> matches), but <code class="highlighter-rouge">initdb</code> <em>does</em> care (and needs the user to exist in <code class="highlighter-rouge">/etc/passwd</code>):</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker run <span class="nt">-it</span> <span class="nt">--rm</span> <span class="nt">--user</span> www-data postgres
<span class="go">The files belonging to this database system will be owned by user "www-data".
</span><span class="c">...
</span><span class="go">
</span><span class="gp">$</span> docker run <span class="nt">-it</span> <span class="nt">--rm</span> <span class="nt">--user</span> 1000:1000 postgres
<span class="go">initdb: could not look up effective user ID 1000: user does not exist
</span></code></pre></div></div>

<p>The three easiest ways to get around this:</p>

<ol>
  <li>
    <p>use the Debian variants (not the Alpine variants) and thus allow the image to use <a href="https://cwrap.org/nss_wrapper.html">the <code class="highlighter-rouge">nss_wrapper</code> library</a> to “fake” <code class="highlighter-rouge">/etc/passwd</code> contents for you (see <a href="https://github.com/docker-library/postgres/pull/448">docker-library/postgres#448</a> for more details)</p>
  </li>
  <li>
    <p>bind-mount <code class="highlighter-rouge">/etc/passwd</code> read-only from the host (if the UID you desire is a valid user on your host):</p>

    <div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker run <span class="nt">-it</span> <span class="nt">--rm</span> <span class="nt">--user</span> <span class="s2">"</span><span class="k">$(</span>id <span class="nt">-u</span><span class="k">)</span><span class="s2">:</span><span class="k">$(</span>id <span class="nt">-g</span><span class="k">)</span><span class="s2">"</span> <span class="nt">-v</span> /etc/passwd:/etc/passwd:ro postgres
<span class="go">The files belonging to this database system will be owned by user "jsmith".
</span><span class="c">...
</span></code></pre></div>    </div>
  </li>
  <li>
    <p>initialize the target directory separately from the final runtime (with a <code class="highlighter-rouge">chown</code> in between):</p>

    <div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker volume create pgdata
<span class="gp">$</span> docker run <span class="nt">-it</span> <span class="nt">--rm</span> <span class="nt">-v</span> pgdata:/var/lib/postgresql/data postgres
<span class="go">The files belonging to this database system will be owned by user "postgres".
</span><span class="c">...
</span><span class="go">( once it's finished initializing successfully and is waiting for connections, stop it )
</span><span class="gp">$</span> docker run <span class="nt">-it</span> <span class="nt">--rm</span> <span class="nt">-v</span> pgdata:/var/lib/postgresql/data bash chown <span class="nt">-R</span> 1000:1000 /var/lib/postgresql/data
<span class="gp">$</span> docker run <span class="nt">-it</span> <span class="nt">--rm</span> <span class="nt">--user</span> 1000:1000 <span class="nt">-v</span> pgdata:/var/lib/postgresql/data postgres
<span class="go">LOG:  database system was shut down at 2017-01-20 00:03:23 UTC
LOG:  MultiXact member wraparound protections are now enabled
LOG:  autovacuum launcher started
LOG:  database system is ready to accept connections
</span></code></pre></div>    </div>
  </li>
</ol>

<h1 id="caveats">Caveats</h1>

<p>If there is no database when <code class="highlighter-rouge">postgres</code> starts in a container, then <code class="highlighter-rouge">postgres</code> will create the default database for you. While this is the expected behavior of <code class="highlighter-rouge">postgres</code>, this means that it will not accept incoming connections during that time. This may cause issues when using automation tools, such as <code class="highlighter-rouge">docker-compose</code>, that start several containers simultaneously.</p>

<p>Also note that the default <code class="highlighter-rouge">/dev/shm</code> size for containers is 64MB. If the shared memory is exhausted you will encounter <code class="highlighter-rouge">ERROR:  could not resize shared memory segment . . . : No space left on device</code>. You will want to pass <a href="https://matsuand.github.io/docs.docker.jp.onthefly/engine/reference/run/#runtime-constraints-on-resources"><code class="highlighter-rouge">--shm-size=256MB</code></a> for example to <code class="highlighter-rouge">docker run</code>, or alternatively in <a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/#shm_size"><code class="highlighter-rouge">docker-compose</code></a></p>

<p>See <a href="https://success.docker.com/article/ipvs-connection-timeout-issue">“IPVS connection timeout issue” in the Docker Success Center</a> for details about IPVS connection timeouts which will affect long-running idle connections to PostgreSQL in Swarm Mode using overlay networks.</p>

<h2 id="where-to-store-data">Where to Store Data</h2>

<p>Important note: There are several ways to store data used by applications that run in Docker containers. We encourage users of the <code class="highlighter-rouge">postgres</code> images to familiarize themselves with the options available, including:</p>

<ul>
  <li>Let Docker manage the storage of your database data <a href="https://matsuand.github.io/docs.docker.jp.onthefly/engine/tutorials/dockervolumes/#adding-a-data-volume">by writing the database files to disk on the host system using its own internal volume management</a>. This is the default and is easy and fairly transparent to the user. The downside is that the files may be hard to locate for tools and applications that run directly on the host system, i.e. outside containers.</li>
  <li>Create a data directory on the host system (outside the container) and <a href="https://matsuand.github.io/docs.docker.jp.onthefly/engine/tutorials/dockervolumes/#mount-a-host-directory-as-a-data-volume">mount this to a directory visible from inside the container</a>. This places the database files in a known location on the host system, and makes it easy for tools and applications on the host system to access the files. The downside is that the user needs to make sure that the directory exists, and that e.g. directory permissions and other security mechanisms on the host system are set up correctly.</li>
</ul>

<p>The Docker documentation is a good starting point for understanding the different storage options and variations, and there are multiple blogs and forum postings that discuss and give advice in this area. We will simply show the basic procedure here for the latter option above:</p>

<ol>
  <li>Create a data directory on a suitable volume on your host system, e.g. <code class="highlighter-rouge">/my/own/datadir</code>.</li>
  <li>
    <p>Start your <code class="highlighter-rouge">postgres</code> container like this:</p>

    <div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker run <span class="nt">--name</span> some-postgres <span class="nt">-v</span> /my/own/datadir:/var/lib/postgresql/data <span class="nt">-d</span> postgres:tag
</code></pre></div>    </div>
  </li>
</ol>

<p>The <code class="highlighter-rouge">-v /my/own/datadir:/var/lib/postgresql/data</code> part of the command mounts the <code class="highlighter-rouge">/my/own/datadir</code> directory from the underlying host system as <code class="highlighter-rouge">/var/lib/postgresql/data</code> inside the container, where PostgreSQL by default will write its data files.</p>

<h1 id="image-variants">Image Variants</h1>

<p>The <code class="highlighter-rouge">postgres</code> images come in many flavors, each designed for a specific use case.</p>

<h2 id="postgresversion"><code class="highlighter-rouge">postgres:&lt;version&gt;</code></h2>

<p>This is the defacto image. If you are unsure about what your needs are, you probably want to use this one. It is designed to be used both as a throw away container (mount your source code and start the container to start your app), as well as the base to build other images off of.</p>

<h2 id="postgresversion-alpine"><code class="highlighter-rouge">postgres:&lt;version&gt;-alpine</code></h2>

<p>This image is based on the popular <a href="http://alpinelinux.org">Alpine Linux project</a>, available in <a href="https://hub.docker.com/_/alpine">the <code class="highlighter-rouge">alpine</code> official image</a>. Alpine Linux is much smaller than most distribution base images (~5MB), and thus leads to much slimmer images in general.</p>

<p>This variant is highly recommended when final image size being as small as possible is desired. The main caveat to note is that it does use <a href="http://www.musl-libc.org">musl libc</a> instead of <a href="http://www.etalabs.net/compare_libcs.html">glibc and friends</a>, so certain software might run into issues depending on the depth of their libc requirements. However, most software doesn’t have an issue with this, so this variant is usually a very safe choice. See <a href="https://news.ycombinator.com/item?id=10782897">this Hacker News comment thread</a> for more discussion of the issues that might arise and some pro/con comparisons of using Alpine-based images.</p>

<p>To minimize image size, it’s uncommon for additional related tools (such as <code class="highlighter-rouge">git</code> or <code class="highlighter-rouge">bash</code>) to be included in Alpine-based images. Using this image as a base, add the things you need in your own Dockerfile (see the <a href="https://hub.docker.com/_/alpine/"><code class="highlighter-rouge">alpine</code> image description</a> for examples of how to install packages if you are unfamiliar).</p>

<h1 id="license">License</h1>

<p>View <a href="https://www.postgresql.org/about/licence/">license information</a> for the software contained in this image.</p>

<p>As with all Docker images, these likely also contain other software which may be under other licenses (such as Bash, etc from the base distribution, along with any direct or indirect dependencies of the primary software being contained).</p>

<p>Some additional license information which was able to be auto-detected might be found in <a href="https://github.com/docker-library/repo-info/tree/master/repos/postgres">the <code class="highlighter-rouge">repo-info</code> repository’s <code class="highlighter-rouge">postgres/</code> directory</a>.</p>

<p>As for any pre-built image usage, it is the image user’s responsibility to ensure that any use of this image complies with any relevant licenses for all software contained within.</p>


							<!-- tags -->
							
							
							
							<span class="glyphicon glyphicon-tags" style="padding-right: 10px"></span><span style="vertical-align: 2px"><a href="https://matsuand.github.io/docs.docker.jp.onthefly/search/?q=library">library</a>, <a href="https://matsuand.github.io/docs.docker.jp.onthefly/search/?q=sample">sample</a>, <a href="https://matsuand.github.io/docs.docker.jp.onthefly/search/?q=postgres">postgres</a></span>
							
							<!-- link corrections -->
              <script language="JavaScript">
							var x = document.links.length;
							var baseHref = document.getElementsByTagName('base')[0].href
							for (i = 0; i < x; i++) {
							  var munged = false;
							  var thisHREF = document.links[i].href;
							  var originalURL = "/samples/library/postgres/";
							  if (thisHREF.indexOf(baseHref + "#") > -1) {
							    // hash fix
							    //console.log('BEFORE: base:',baseHref,'thisHREF:',thisHREF,'originalURL:',originalURL);
							    thisHREF = originalURL + thisHREF.replace(baseHref, "");
							    //console.log('AFTER: base:',baseHref,'thisHREF:',thisHREF,'originalURL:',originalURL);
							  }
							  if ((thisHREF.indexOf(window.location.hostname) > -1 || thisHREF.indexOf('http') == -1) && document.links[i].className.indexOf("nomunge") < 0) {
							    munged = true;
							    thisHREF = thisHREF.replace(".md", "/").replace("/index/", "/");
							    document.links[i].setAttribute('href', thisHREF);
							  }
							}
							</script>
							
						  <div id="ratings-div" style="color:#b9c2cc; text-align: center; margin-top: 150px; visibility: hidden">
								<div id="pd_rating_holder_8453675"></div>
								<script type="text/javascript">
									PDRTJS_settings_8453675 = {
										"id": "8453675",
										"unique_id": "_samples/library/postgres/index.md",
										"title": "postgres",
										"permalink": "https://github.com/docker/docker.github.io/blob/master/_samples/library/postgres/index.md"
									};
									(function(d, c, j) {
										if (!document.getElementById(j)) {
											var pd = d.createElement(c),
												s;
											pd.id = j;
											pd.src = ('https:' == document.location.protocol) ? 'https://polldaddy.com/js/rating/rating.js' : 'http://i0.poll.fm/js/rating/rating.js';
											s = document.getElementsByTagName(c)[0];
											s.parentNode.insertBefore(pd, s);
										}
									}(document, 'script', 'pd-rating-js'));
								</script>
							</div>
							
						</section>
					</main>
					<nav class="col-nav">
						<div id="sidebar-nav" class="sidebar hidden-sm hidden-xs">
						<div id="navbar" class="nav-sidebar">
    <ul class="nav" id="jsTOCLeftNav">
    </ul>
</div>

						</div>
					</nav>
					<div class="col-toc">
							<div class="sidebar hidden-xs hidden-sm">
							<div class="toc-nav">
								<div class="feedback-links">
									<ul>
										
										<li style="visibility: hidden"><a href="https://github.com/matsuand/docs.docker.jp/edit/v19.03.local/_samples/library/postgres/index.md"><i class="fa fa-pencil-square-o" aria-hidden="true"></i> このページの編集</a></li>
										<li><a href="https://github.com/matsuand/docs.docker.jp.onthefly/issues/new?body=File: [_samples/library/postgres/index.md](https://matsuand.github.io/docs.docker.jp.onthefly/samples/library/postgres/)"
															class="nomunge"><i class="fa fa-check" aria-hidden="true"></i> 文書変更のリクエスト</a></li>
										<li><a href="https://success.docker.com/support"><i class="fa fa-question" aria-hidden="true"></i> サポート依頼</a></li>
										<!-- toggle mode -->
										<li>
											<div class="toggle-mode">
												<div class="icon">
													<i class="fa fa-sun-o" aria-hidden="true"></i>
												</div>
												<div class="toggle-switch">
													<label class="switch">
														<input type="checkbox" id="switch-style">
														<div class="slider round"></div>
												</label>
												</div>
												<div class="icon">
													<i class="fa fa-moon-o" aria-hidden="true"></i>
												</div>
											</div>
										</li>
									</ul>
								</div>
								   
									<div id="side-toc-title">本ページ内</div>
									
<ul id="my_toc" class="inline_toc">
  <li><a href="#start-a-postgres-instance" class="nomunge">start a postgres instance</a></li>
  <li><a href="#-or-via-psql" class="nomunge">... or via psql</a></li>
  <li><a href="#-via-docker-stack-deploy-or-docker-compose" class="nomunge">... via docker stack deploy or docker-compose</a></li>
  <li><a href="#environment-variables" class="nomunge">Environment Variables</a>
    <ul>
      <li><a href="#postgres_password" class="nomunge">POSTGRES_PASSWORD</a></li>
      <li><a href="#postgres_user" class="nomunge">POSTGRES_USER</a></li>
      <li><a href="#postgres_db" class="nomunge">POSTGRES_DB</a></li>
      <li><a href="#postgres_initdb_args" class="nomunge">POSTGRES_INITDB_ARGS</a></li>
      <li><a href="#postgres_initdb_waldir" class="nomunge">POSTGRES_INITDB_WALDIR</a></li>
      <li><a href="#pgdata" class="nomunge">PGDATA</a></li>
    </ul>
  </li>
  <li><a href="#docker-secrets" class="nomunge">Docker Secrets</a></li>
  <li><a href="#initialization-scripts" class="nomunge">Initialization scripts</a></li>
  <li><a href="#database-configuration" class="nomunge">Database Configuration</a></li>
  <li><a href="#locale-customization" class="nomunge">Locale Customization</a></li>
  <li><a href="#additional-extensions" class="nomunge">Additional Extensions</a></li>
  <li><a href="#where-to-store-data" class="nomunge">Where to Store Data</a></li>
  <li><a href="#postgresversion" class="nomunge">postgres:&lt;version&gt;</a></li>
  <li><a href="#postgresversion-alpine" class="nomunge">postgres:&lt;version&gt;-alpine</a></li>
</ul>


								</div>
								
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	
	<footer class="footer">
		  
    <div class="container">
        <div class="top_footer">
            <div class="row">
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><a href="https://www.docker.com/what-docker">What is Docker</a></li>
                        <li><a href="https://www.docker.com/what-container">What is a Container</a></li>
                        <li><a href="https://www.docker.com/use-cases">Use Cases</a></li>
                        <li><a href="https://www.docker.com/customers">Customers</a></li>
                        <li><a href="https://www.docker.com/partners/partner-program">Partners</a></li>
                        <li class="break"><a href="https://www.docker.com/industry-government">For Government</a></li>
                        <li><a href="https://www.docker.com/company">About Docker</a></li>
                        <li><a href="https://www.docker.com/company/management">Management</a></li>
                        <li><a href="https://www.docker.com/company/news-and-press">Press &amp; News</a></li>
                        <li><a href="https://www.docker.com/careers">Careers</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><a href="https://www.docker.com/products/overview">Product</a></li>
                        <li><a href="https://www.docker.com/pricing">Pricing</a></li>
                        <li><a href="https://www.docker.com/docker-community">Community Edition</a></li>
                        <li class="break"><a href="https://www.docker.com/enterprise">Enterprise Edition </a></li>
                        <li><a href="https://www.docker.com/products/docker-datacenter">Docker Datacenter</a></li>
                        <li><a href="https://hub.docker.com/">Docker Hub</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/">Documentation</a></li>
                        <li><a href="https://www.docker.com/docker">Learn</a></li>
                        <li><a href="https://blog.docker.com" target="_blank">Blog</a></li>
                        <li><a href="https://engineering.docker.com" target="_blank">Engineering Blog</a></li>
                        <li><a href="https://training.docker.com/" target="_blank">Training</a></li>
                        <li><a href="https://success.docker.com/support">Support</a></li>
                        <li><a href="https://success.docker.com/kbase">Knowledge Base</a></li>
                        <li><a href="https://www.docker.com/products/resources">Resources</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><a href="https://www.docker.com/docker-community">Community</a></li>
                        <li><a href="https://www.docker.com/technologies/overview">Open Source</a></li>
                        <li><a href="https://www.docker.com/community/events">Events</a></li>
                        <li><a href="https://forums.docker.com/" target="_blank">Forums</a></li>
                        <li><a href="https://www.docker.com/community/docker-captains">Docker Captains</a></li>
                        <li><a href="https://www.docker.com/docker-community/scholarships">Scholarships</a></li>
                        <li><a href="https://blog.docker.com/curated/">Community News</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-nav">
                <nav class="footer_sub_nav">
                    <ul class="menu">
                        <li><a href="http://status.docker.com/">Status</a></li>
                        <li><a href="https://www.docker.com/docker-security">Security</a></li>
                        <li><a href="https://www.docker.com/legal">Legal</a></li>
                        <li><a href="https://www.docker.com/company/contact">Contact</a></li>
                    </ul>
                </nav>
            </div>
        </div>
        <div class="bottom_footer">
            <div class="footer-copyright col-xs-12 col-md-8">
                <p class="copyright">
                    Copyright &copy; 2019 Docker Inc. All rights reserved. </p>
            </div>
            <div class="footer_social_nav">
                <ul class="nav-social">
                    <li class="fa fa-twitter"><a href="http://twitter.com/docker">Twitter</a></li>
                    <li class="fa fa-youtube"><a href="http://www.youtube.com/user/dockerrun">Youtube</a></li>
                    <li class="fa fa-github"><a href="https://github.com/docker">GitHub</a></li>
                    <li class="fa fa-linkedin"><a href="https://www.linkedin.com/company/docker">Linkedin</a></li>
                    <li class="fa fa-facebook"><a href="https://www.facebook.com/docker.run">Facebook</a></li>
                    <li class="fa fa-reddit"><a href="http://www.reddit.com/r/docker">Reddit</a></li>
                    <li class="fa fa-slideshare"><a href="http://www.slideshare.net/docker">Slideshare</a></li>
                </ul>
            </div>
        </div>
    </div>

	</footer>
	<link rel="stylesheet" href="/docs.docker.jp.onthefly/css/github.css">
	
	<script defer src="/docs.docker.jp.onthefly/js/anchorlinks.js"></script>
	<script defer src="/docs.docker.jp.onthefly/js/menu.js"></script>
	<script src="/docs.docker.jp.onthefly/js/jquery.js"></script>
	<script src="/docs.docker.jp.onthefly/js/bootstrap.min.js"></script>
	<!-- Always include the archive.js, but it doesn't do much unless we are an archive -->
	<script language="javascript">
	// Default to assuming this is an archive and hiding some stuff
	// See js/archive.js and js/docs.js for logic relating to this
	var isArchive = true;
	var dockerVersion = 'v19.03';
	// In archives, we need to know the page root and we get it from JEKYLL_ENV in the jekyll build command
	var jekyllEnv = 'development';
	// If unset (in non-archive branches), defaults to "development". In that case, reset it to empty
	if (jekyllEnv == 'development') {
		jekyllEnv = '';
	}
	var pageURL = jekyllEnv + '/samples/library/postgres/';
	</script>
	<script src="/docs.docker.jp.onthefly/js/archive.js"></script>
	<script src="/docs.docker.jp.onthefly/js/stickyfill.min.js"></script>
	<script defer src="/docs.docker.jp.onthefly/js/metadata.js"></script>
	<script src="/docs.docker.jp.onthefly/js/glossary.js"></script>
	<script defer src="/docs.docker.jp.onthefly/js/docs.js"></script>
	<script defer src="/docs.docker.jp.onthefly/js/toc.js"></script>
	<script language="javascript">
	jQuery(document).ready(function(){
				hookupTOCEvents();
			});
	</script>
</body>

</html>
