<!-- Page generated 2019-07-31 13:57:05 +0900 -->
<!-- relative link basehrefs -->

	


<!-- Logic for 'edit this button' -->


	

	

	

	

	

	

	

	

	


<!-- End of logic for 'edit this button' -->


<!DOCTYPE html>
<html lang="ja">

<head>
	<base href="https://matsuand.github.io/docs.docker.jp.onthefly/samples/library/rabbitmq/" />
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<style type="text/css">
		@charset "UTF-8";
		[ng\:cloak],
		[ng-cloak],
		[data-ng-cloak],
		[x-ng-cloak],
		.ng-cloak,
		.x-ng-cloak,
		.ng-hide:not(.ng-hide-animate) {
			display: none !important;
		}

		ng\:form {
			display: block;
		}
	</style>
	<script type="text/javascript">
	  !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="4.0.0";
	  analytics.load("IWj9D0UpZHZdZUZX9jl98PcpBFWBnBMy");
	  analytics.page();
	  }}();
	</script>
	
	<!-- favicon -->
	<link rel="icon" type="image/x-icon" href="https://matsuand.github.io/docs.docker.jp.onthefly/favicons/docs@2x.ico" sizes="129x128">
	<meta name="msapplication-TileImage" content="https://matsuand.github.io/docs.docker.jp.onthefly/favicons/docs@2x.ico">
	<link rel="apple-touch-icon" type="image/x-icon" href="https://matsuand.github.io/docs.docker.jp.onthefly/favicons/docs@2x.ico" sizes="129x128">
	<meta property="og:image" content="https://matsuand.github.io/docs.docker.jp.onthefly/favicons/docs@2x.ico"/>
	<!-- metadata -->
	<meta property="og:type" content="website"/>
	<meta property="og:updated_time" itemprop="dateUpdated" content="2019-07-31T13:57:05+09:00"/>
	<meta property="og:image" itemprop="image primaryImageOfPage" content="https://matsuand.github.io/docs.docker.jp.onthefly/images/docs@2x.png"/>
	<meta name="twitter:card" content="summary"/>
	<meta name="twitter:domain" content="docs.docker.jp"/>
	<meta name="twitter:site" content="@docker_docs"/>
	<meta name="twitter:url" content="https://twitter.com/docker_docs"/>
	<meta name="twitter:title" itemprop="title name" content="rabbitmq"/>
	<meta name="twitter:description" property="og:description" itemprop="description" content="RabbitMQ is an open source multi-protocol messaging broker. GitHub repo: https://github.com/docker-library/rabbitmq Library reference This content is imported from the official Docker Library docs, and is provided by the original uploader...." />
	<meta name="twitter:image:src" content="https://matsuand.github.io/docs.docker.jp.onthefly/images/docs@2x.png"/>
	<meta name="twitter:image:alt" content="Docker Documentation"/>
	<meta property="article:published_time" itemprop="datePublished" content="2019-07-31T13:57:05+09:00"/>

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="keywords" content="library, sample, rabbitmq">
	<link rel="stylesheet" href="https://matsuand.github.io/docs.docker.jp.onthefly/css/font-awesome.min.css">
	<link rel="stylesheet" href="https://matsuand.github.io/docs.docker.jp.onthefly/css/bootstrap.min.css">
	<link id="pygments" rel="stylesheet" href="https://matsuand.github.io/docs.docker.jp.onthefly/css/pygments/perldoc.css">
	<link id="pagestyle" rel="stylesheet" href="https://matsuand.github.io/docs.docker.jp.onthefly/css/style.css">

	<!-- Go get "Open Sans" font from Google -->
	<link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
	<!-- SEO stuff -->
	<title>rabbitmq | Docker Documentation</title>
<meta property="og:title" content="rabbitmq" />
<meta property="og:locale" content="ja_JP" />
<meta name="description" content="RabbitMQ is an open source multi-protocol messaging broker.
" />
<meta property="og:description" content="RabbitMQ is an open source multi-protocol messaging broker.
" />
<link rel="canonical" href="https://matsuand.github.io/docs.docker.jp.onthefly/samples/library/rabbitmq/" />
<meta property="og:url" content="https://matsuand.github.io/docs.docker.jp.onthefly/samples/library/rabbitmq/" />
<meta property="og:site_name" content="Docker Documentation" />
<script type="application/ld+json">
{"@context":"http://schema.org","@type":"WebPage","headline":"rabbitmq","description":"RabbitMQ is an open source multi-protocol messaging broker.
","url":"https://matsuand.github.io/docs.docker.jp.onthefly/samples/library/rabbitmq/"}</script>
	<!-- END SEO STUFF -->
	
	<script language="javascript">
	// Default to assuming this is an archive and hiding some stuff
	// See js/archive.js and js/docs.js for logic relating to this
	var isArchive = true;
	var dockerVersion = 'v19.03';
	</script>
</head>
<body ng-app="Docker" ng-controller="DockerController" class="colums">
	<header>
		 <nav class="nav-secondary navbar navbar-fixed-top">
    <!-- <div class="fan"></div> -->
    <div class="container-fluid">
        <div class="navbar-header">
            <a href="https://matsuand.github.io/docs.docker.jp.onthefly/"><img class="logo" src="https://matsuand.github.io/docs.docker.jp.onthefly/images/docker-docs-logo.svg" alt="Docker Docs" title="Docker Docs"></a>
        </div>
        <div class="navbar-collapse" aria-expanded="false" style="height: 1px;">
            <div class="search-form" id="search-div" style="visibility: hidden">
    <form class="search-form form-inline ng-pristine ng-valid" id="searchForm" action="https://matsuand.github.io/docs.docker.jp.onthefly/search/">
        <input class="search-field form-control ds-input" id="st-search-input" value="" name="q" placeholder="文書内検索" type="search" autocomplete="off" spellcheck="false" dir="auto" style="position: relative; vertical-align: top;">
        <div id="autocompleteContainer">
            <div id="autocompleteResults"></div>
        </div>
        <!-- <button type="submit" class="search-submit btn btn-default">検索</button> -->
    </form>
</div>
<div class="sidebar-toggle">
    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
    </button>
</div>
<div class="nav-container">
    <div id="tabs">
        <ul class="tabs" id="jsTOCHorizontal">

        </ul>
    </div>
    <div class="ctrl-right hidden-xs hidden-sm">
        <a href="javascript:void(0)" id="menu-toggle"><i class="fa fa-indent" aria-hidden="true"></i></a>
        <div class="btn-group" style="visibility: hidden">
  <button type="button" class="btn btn-default dropdown-btn dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    Docker v19.03 (current)         <span class="caret"></span>
  </button>
  <ul class="dropdown-menu">
    <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/edge/">Docker edge</a></li><li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/v18.09/">Docker v18.09</a></li><li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/v18.03/">Docker v18.03</a></li><li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/v17.12/">Docker v17.12</a></li><li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/v17.09/">Docker v17.09</a></li><li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/v17.06/">Docker v17.06</a></li><li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/v17.03/">Docker v17.03</a></li>
  </ul>
</div>

    </div>
</div>

        </div>
    </div>
</nav>

	</header>

	<div class="wrapper right-open">
		<div class="container-fluid">
			<div class="row">
				<div class="col-body">
					<main class="col-content content">
						<section class="section">
							
								
							<h1>rabbitmq</h1>  <span class="reading-time" title="Estimated reading time">
  <span class="reading-time-label">読む時間の目安: </span>
  
  
    11 分
  
</span>

							
							
							<p>RabbitMQ is an open source multi-protocol messaging broker.</p>

<p>GitHub repo: <a href="https://github.com/docker-library/rabbitmq">https://github.com/docker-library/rabbitmq</a></p>

<blockquote>
  <p><strong>Library reference</strong></p>

  <p>This content is imported from
<a href="https://github.com/docker-library/docs/tree/master/rabbitmq/">the official Docker Library docs</a>,
and is provided by the original uploader. You can view the Docker Hub page for this image at
<a href="https://hub.docker.com/images/rabbitmq">https://hub.docker.com/images/rabbitmq</a></p>
</blockquote>

<!-- content begin -->

<!--

********************************************************************************

WARNING:

    DO NOT EDIT "rabbitmq/README.md"

    IT IS AUTO-GENERATED

    (from the other files in "rabbitmq/" combined with a set of templates)

********************************************************************************

-->

<h1 id="supported-tags-and-respective-dockerfile-links">Supported tags and respective <code class="highlighter-rouge">Dockerfile</code> links</h1>

<ul>
  <li><a href="https://github.com/docker-library/rabbitmq/blob/d38a86acf3433c51359bd6da62668588a4660e2b/3.8-rc/ubuntu/Dockerfile"><code class="highlighter-rouge">3.8.0-beta.5</code>, <code class="highlighter-rouge">3.8-rc</code></a></li>
  <li><a href="https://github.com/docker-library/rabbitmq/blob/3a5957b93e31661739a9018bc2ae5d20f1bfae59/3.8-rc/ubuntu/management/Dockerfile"><code class="highlighter-rouge">3.8.0-beta.5-management</code>, <code class="highlighter-rouge">3.8-rc-management</code></a></li>
  <li><a href="https://github.com/docker-library/rabbitmq/blob/d38a86acf3433c51359bd6da62668588a4660e2b/3.8-rc/alpine/Dockerfile"><code class="highlighter-rouge">3.8.0-beta.5-alpine</code>, <code class="highlighter-rouge">3.8-rc-alpine</code></a></li>
  <li><a href="https://github.com/docker-library/rabbitmq/blob/3a5957b93e31661739a9018bc2ae5d20f1bfae59/3.8-rc/alpine/management/Dockerfile"><code class="highlighter-rouge">3.8.0-beta.5-management-alpine</code>, <code class="highlighter-rouge">3.8-rc-management-alpine</code></a></li>
  <li><a href="https://github.com/docker-library/rabbitmq/blob/22f59f67a22fa9b8ef054092c474c54ee1ef9c31/3.7/ubuntu/Dockerfile"><code class="highlighter-rouge">3.7.17</code>, <code class="highlighter-rouge">3.7</code>, <code class="highlighter-rouge">3</code>, <code class="highlighter-rouge">latest</code></a></li>
  <li><a href="https://github.com/docker-library/rabbitmq/blob/f22c0b266cfeb8cb6d776f9e6a961908c2557ad3/3.7/ubuntu/management/Dockerfile"><code class="highlighter-rouge">3.7.17-management</code>, <code class="highlighter-rouge">3.7-management</code>, <code class="highlighter-rouge">3-management</code>, <code class="highlighter-rouge">management</code></a></li>
  <li><a href="https://github.com/docker-library/rabbitmq/blob/22f59f67a22fa9b8ef054092c474c54ee1ef9c31/3.7/alpine/Dockerfile"><code class="highlighter-rouge">3.7.17-alpine</code>, <code class="highlighter-rouge">3.7-alpine</code>, <code class="highlighter-rouge">3-alpine</code>, <code class="highlighter-rouge">alpine</code></a></li>
  <li><a href="https://github.com/docker-library/rabbitmq/blob/4b2b11c59ee65c2a09616b163d4572559a86bb7b/3.7/alpine/management/Dockerfile"><code class="highlighter-rouge">3.7.17-management-alpine</code>, <code class="highlighter-rouge">3.7-management-alpine</code>, <code class="highlighter-rouge">3-management-alpine</code>, <code class="highlighter-rouge">management-alpine</code></a></li>
</ul>

<h1 id="quick-reference">Quick reference</h1>

<ul>
  <li>
    <p><strong>Where to get help</strong>:<br />
<a href="https://forums.docker.com/">the Docker Community Forums</a>, <a href="https://blog.docker.com/2016/11/introducing-docker-community-directory-docker-community-slack/">the Docker Community Slack</a>, or <a href="https://stackoverflow.com/search?tab=newest&amp;q=docker">Stack Overflow</a></p>
  </li>
  <li>
    <p><strong>Where to file issues</strong>:<br />
<a href="https://github.com/docker-library/rabbitmq/issues">https://github.com/docker-library/rabbitmq/issues</a></p>
  </li>
  <li>
    <p><strong>Maintained by</strong>:<br />
<a href="https://github.com/docker-library/rabbitmq">the Docker Community</a></p>
  </li>
  <li>
    <p><strong>Supported architectures</strong>: (<a href="https://github.com/docker-library/official-images#architectures-other-than-amd64">more info</a>)<br />
<a href="https://hub.docker.com/r/amd64/rabbitmq/"><code class="highlighter-rouge">amd64</code></a>, <a href="https://hub.docker.com/r/arm32v6/rabbitmq/"><code class="highlighter-rouge">arm32v6</code></a>, <a href="https://hub.docker.com/r/arm32v7/rabbitmq/"><code class="highlighter-rouge">arm32v7</code></a>, <a href="https://hub.docker.com/r/arm64v8/rabbitmq/"><code class="highlighter-rouge">arm64v8</code></a>, <a href="https://hub.docker.com/r/i386/rabbitmq/"><code class="highlighter-rouge">i386</code></a>, <a href="https://hub.docker.com/r/ppc64le/rabbitmq/"><code class="highlighter-rouge">ppc64le</code></a>, <a href="https://hub.docker.com/r/s390x/rabbitmq/"><code class="highlighter-rouge">s390x</code></a></p>
  </li>
  <li>
    <p><strong>Published image artifact details</strong>:<br />
<a href="https://github.com/docker-library/repo-info/blob/master/repos/rabbitmq">repo-info repo’s <code class="highlighter-rouge">repos/rabbitmq/</code> directory</a> (<a href="https://github.com/docker-library/repo-info/commits/master/repos/rabbitmq">history</a>)<br />
(image metadata, transfer size, etc)</p>
  </li>
  <li>
    <p><strong>Image updates</strong>:<br />
<a href="https://github.com/docker-library/official-images/pulls?q=label%3Alibrary%2Frabbitmq">official-images PRs with label <code class="highlighter-rouge">library/rabbitmq</code></a><br />
<a href="https://github.com/docker-library/official-images/blob/master/library/rabbitmq">official-images repo’s <code class="highlighter-rouge">library/rabbitmq</code> file</a> (<a href="https://github.com/docker-library/official-images/commits/master/library/rabbitmq">history</a>)</p>
  </li>
  <li>
    <p><strong>Source of this description</strong>:<br />
<a href="https://github.com/docker-library/docs/tree/master/rabbitmq">docs repo’s <code class="highlighter-rouge">rabbitmq/</code> directory</a> (<a href="https://github.com/docker-library/docs/commits/master/rabbitmq">history</a>)</p>
  </li>
</ul>

<h1 id="what-is-rabbitmq">What is RabbitMQ?</h1>

<p>RabbitMQ is open source message broker software (sometimes called message-oriented middleware) that implements the Advanced Message Queuing Protocol (AMQP). The RabbitMQ server is written in the Erlang programming language and is built on the Open Telecom Platform framework for clustering and failover. Client libraries to interface with the broker are available for all major programming languages.</p>

<blockquote>
  <p><a href="https://en.wikipedia.org/wiki/RabbitMQ">wikipedia.org/wiki/RabbitMQ</a></p>
</blockquote>

<p><img src="https://raw.githubusercontent.com/docker-library/docs/81187b7b50f5af5bdb64d75882f4d9c782ad52c3/rabbitmq/logo.png" alt="logo" /></p>

<h1 id="how-to-use-this-image">How to use this image</h1>

<h2 id="running-the-daemon">Running the daemon</h2>

<p>One of the important things to note about RabbitMQ is that it stores data based on what it calls the “Node Name”, which defaults to the hostname. What this means for usage in Docker is that we should specify <code class="highlighter-rouge">-h</code>/<code class="highlighter-rouge">--hostname</code> explicitly for each daemon so that we don’t get a random hostname and can keep track of our data:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker run <span class="nt">-d</span> <span class="nt">--hostname</span> my-rabbit <span class="nt">--name</span> some-rabbit rabbitmq:3
</code></pre></div></div>

<p>This will start a RabbitMQ container listening on the default port of 5672. If you give that a minute, then do <code class="highlighter-rouge">docker logs some-rabbit</code>, you’ll see in the output a block similar to:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>=INFO REPORT==== 6-Jul-2015::20:47:02 ===
node           : rabbit@my-rabbit
home dir       : /var/lib/rabbitmq
config file(s) : /etc/rabbitmq/rabbitmq.config
cookie hash    : UoNOcDhfxW9uoZ92wh6BjA==
log            : tty
sasl log       : tty
database dir   : /var/lib/rabbitmq/mnesia/rabbit@my-rabbit
</code></pre></div></div>

<p>Note the <code class="highlighter-rouge">database dir</code> there, especially that it has my “Node Name” appended to the end for the file storage. This image makes all of <code class="highlighter-rouge">/var/lib/rabbitmq</code> a volume by default.</p>

<h3 id="memory-limits">Memory Limits</h3>

<p>RabbitMQ contains functionality which explicitly tracks and manages memory usage, and thus needs to be made aware of cgroup-imposed limits.</p>

<p>The upstream configuration setting for this is <code class="highlighter-rouge">vm_memory_high_watermark</code>, and it is described under <a href="https://www.rabbitmq.com/memory.html">“Memory Alarms”</a> in the documentation.</p>

<p>In this image, this value is set via <code class="highlighter-rouge">RABBITMQ_VM_MEMORY_HIGH_WATERMARK</code>. The value of this environment variable is interpreted as follows:</p>

<ul>
  <li><code class="highlighter-rouge">0.49</code> is treated as <code class="highlighter-rouge">49%</code>, just like upstream (<code class="highlighter-rouge">{ vm_memory_high_watermark, 0.49 }</code>)</li>
  <li><code class="highlighter-rouge">56%</code> is treated as <code class="highlighter-rouge">56%</code> (<code class="highlighter-rouge">0.56</code>; <code class="highlighter-rouge">{ vm_memory_high_watermark, 0.56 }</code>)</li>
  <li><code class="highlighter-rouge">1073741824</code> is treated as an absolute number of bytes (<code class="highlighter-rouge">{ vm_memory_high_watermark, { absolute, 1073741824 } }</code>)</li>
  <li><code class="highlighter-rouge">1024MiB</code> is treated as an absolute number of bytes with a unit (<code class="highlighter-rouge">{ vm_memory_high_watermark, { absolute, "1024MiB" } }</code>)</li>
</ul>

<p>The main behavioral difference is in how percentages are handled. If the current container has a memory limit (<code class="highlighter-rouge">--memory</code>/<code class="highlighter-rouge">-m</code>), a percentage value will be calculated to an absolute byte value based on the memory limit, rather than being passed to RabbitMQ as-is. For example, a container run with <code class="highlighter-rouge">--memory 2048m</code> (and the implied upstream-default <code class="highlighter-rouge">RABBITMQ_VM_MEMORY_HIGH_WATERMARK</code> of <code class="highlighter-rouge">40%</code>) will set the effective limit to <code class="highlighter-rouge">819MB</code> (which is <code class="highlighter-rouge">40%</code> of <code class="highlighter-rouge">2048MB</code>).</p>

<h3 id="erlang-cookie">Erlang Cookie</h3>

<p>See the <a href="https://www.rabbitmq.com/clustering.html#erlang-cookie">RabbitMQ “Clustering Guide”</a> for more information about cookies and why they’re necessary.</p>

<p>For setting a consistent cookie (especially useful for clustering but also for remote/cross-container administration via <code class="highlighter-rouge">rabbitmqctl</code>), use <code class="highlighter-rouge">RABBITMQ_ERLANG_COOKIE</code>:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker run <span class="nt">-d</span> <span class="nt">--hostname</span> some-rabbit <span class="nt">--name</span> some-rabbit <span class="nt">--network</span> some-network <span class="nt">-e</span> <span class="nv">RABBITMQ_ERLANG_COOKIE</span><span class="o">=</span><span class="s1">'secret cookie here'</span> rabbitmq:3
</code></pre></div></div>

<p>This can then be used from a separate instance to connect:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker run <span class="nt">-it</span> <span class="nt">--rm</span> <span class="nt">--network</span> some-network <span class="nt">-e</span> <span class="nv">RABBITMQ_ERLANG_COOKIE</span><span class="o">=</span><span class="s1">'secret cookie here'</span> rabbitmq:3 bash
<span class="gp">root@f2a2d3d27c75:/#</span> rabbitmqctl <span class="nt">-n</span> rabbit@some-rabbit list_users
<span class="go">Listing users ...
guest   [administrator]
</span></code></pre></div></div>

<p>Alternatively, one can also use <code class="highlighter-rouge">RABBITMQ_NODENAME</code> to make repeated <code class="highlighter-rouge">rabbitmqctl</code> invocations simpler:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker run <span class="nt">-it</span> <span class="nt">--rm</span> <span class="nt">--network</span> some-network <span class="nt">-e</span> <span class="nv">RABBITMQ_ERLANG_COOKIE</span><span class="o">=</span><span class="s1">'secret cookie here'</span> <span class="nt">-e</span> <span class="nv">RABBITMQ_NODENAME</span><span class="o">=</span>rabbit@some-rabbit rabbitmq:3 bash
<span class="gp">root@f2a2d3d27c75:/#</span> rabbitmqctl list_users
<span class="go">Listing users ...
guest   [administrator]
</span></code></pre></div></div>

<p>If you wish to provide the cookie via a file (such as with <a href="https://matsuand.github.io/docs.docker.jp.onthefly/engine/swarm/secrets/">Docker Secrets</a>), it needs to be mounted at <code class="highlighter-rouge">/var/lib/rabbitmq/.erlang.cookie</code>:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">docker service create ... --secret source=my-erlang-cookie,target=/var/lib/rabbitmq/.erlang.cookie ... rabbitmq
</span></code></pre></div></div>

<p>(Note that it will likely also be necessary to specify <code class="highlighter-rouge">uid=XXX,gid=XXX,mode=0600</code> in order for Erlang in the container to be able to read the cookie file properly. See <a href="https://matsuand.github.io/docs.docker.jp.onthefly/engine/reference/commandline/service_create/#create-a-service-with-secrets">Docker’s <code class="highlighter-rouge">--secret</code> documentation for more details</a>.)</p>

<h3 id="management-plugin">Management Plugin</h3>

<p>There is a second set of tags provided with the <a href="https://www.rabbitmq.com/management.html">management plugin</a> installed and enabled by default, which is available on the standard management port of 15672, with the default username and password of <code class="highlighter-rouge">guest</code> / <code class="highlighter-rouge">guest</code>:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker run <span class="nt">-d</span> <span class="nt">--hostname</span> my-rabbit <span class="nt">--name</span> some-rabbit rabbitmq:3-management
</code></pre></div></div>

<p>You can access it by visiting <code class="highlighter-rouge">http://container-ip:15672</code> in a browser or, if you need access outside the host, on port 8080:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker run <span class="nt">-d</span> <span class="nt">--hostname</span> my-rabbit <span class="nt">--name</span> some-rabbit <span class="nt">-p</span> 8080:15672 rabbitmq:3-management
</code></pre></div></div>

<p>You can then go to <code class="highlighter-rouge">http://localhost:8080</code> or <code class="highlighter-rouge">http://host-ip:8080</code> in a browser.</p>

<h3 id="environment-variables">Environment Variables</h3>

<p>A small selection of the possible environment variables are defined in the Dockerfile to be passed through the docker engine (listed below). For a list of environment variables supported by RabbitMQ itself, see: https://www.rabbitmq.com/configure.html</p>

<p>For SSL configuration without the management plugin:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>RABBITMQ_SSL_CACERTFILE
RABBITMQ_SSL_CERTFILE
RABBITMQ_SSL_DEPTH
RABBITMQ_SSL_FAIL_IF_NO_PEER_CERT
RABBITMQ_SSL_KEYFILE
RABBITMQ_SSL_VERIFY
</code></pre></div></div>

<p>For SSL configuration using the management plugin:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>RABBITMQ_MANAGEMENT_SSL_CACERTFILE
RABBITMQ_MANAGEMENT_SSL_CERTFILE
RABBITMQ_MANAGEMENT_SSL_DEPTH
RABBITMQ_MANAGEMENT_SSL_FAIL_IF_NO_PEER_CERT
RABBITMQ_MANAGEMENT_SSL_KEYFILE
RABBITMQ_MANAGEMENT_SSL_VERIFY
</code></pre></div></div>

<h3 id="setting-default-user-and-password">Setting default user and password</h3>

<p>If you wish to change the default username and password of <code class="highlighter-rouge">guest</code> / <code class="highlighter-rouge">guest</code>, you can do so with the <code class="highlighter-rouge">RABBITMQ_DEFAULT_USER</code> and <code class="highlighter-rouge">RABBITMQ_DEFAULT_PASS</code> environmental variables:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker run <span class="nt">-d</span> <span class="nt">--hostname</span> my-rabbit <span class="nt">--name</span> some-rabbit <span class="nt">-e</span> <span class="nv">RABBITMQ_DEFAULT_USER</span><span class="o">=</span>user <span class="nt">-e</span> <span class="nv">RABBITMQ_DEFAULT_PASS</span><span class="o">=</span>password rabbitmq:3-management
</code></pre></div></div>

<p>You can then go to <code class="highlighter-rouge">http://localhost:8080</code> or <code class="highlighter-rouge">http://host-ip:8080</code> in a browser and use <code class="highlighter-rouge">user</code>/<code class="highlighter-rouge">password</code> to gain access to the management console</p>

<p>To source the username and password from files instead of environment variables, add a <code class="highlighter-rouge">_FILE</code> suffix to the environment variable names (for example, <code class="highlighter-rouge">RABBITMQ_DEFAULT_USER_FILE=/run/secrets/xxx</code> to use <a href="https://matsuand.github.io/docs.docker.jp.onthefly/engine/swarm/secrets/">Docker Secrets</a>).</p>

<h3 id="setting-default-vhost">Setting default vhost</h3>

<p>If you wish to change the default vhost, you can do so with the <code class="highlighter-rouge">RABBITMQ_DEFAULT_VHOST</code> environmental variables:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker run <span class="nt">-d</span> <span class="nt">--hostname</span> my-rabbit <span class="nt">--name</span> some-rabbit <span class="nt">-e</span> <span class="nv">RABBITMQ_DEFAULT_VHOST</span><span class="o">=</span>my_vhost rabbitmq:3-management
</code></pre></div></div>

<h3 id="enabling-hipe-deprecated">Enabling HiPE (deprecated)</h3>

<p><strong>Note</strong>: HiPE is disabled since version 3.7.15 of rabbimq images (https://github.com/docker-library/rabbitmq/pull/340)</p>

<p>See the <a href="http://www.rabbitmq.com/configure.html#config-items">RabbitMQ “Configuration”</a> for more information about various configuration options.</p>

<p>For enabling the HiPE compiler on startup use <code class="highlighter-rouge">RABBITMQ_HIPE_COMPILE</code> set to <code class="highlighter-rouge">1</code>. Accroding to the official documentation:</p>

<blockquote>
  <p>Set to true to precompile parts of RabbitMQ with HiPE, a just-in-time compiler for Erlang. This will increase server throughput at the cost of increased startup time. You might see 20-50% better performance at the cost of a few minutes delay at startup.</p>
</blockquote>

<p>It is therefore important to take that startup delay into consideration when configuring health checks, automated clustering etc.</p>

<h3 id="enabling-plugins">Enabling Plugins</h3>

<p>Creating a Dockerfile will have them enabled at runtime. To see the full list of plugins present on the image <code class="highlighter-rouge">rabbitmq-plugins list</code></p>

<pre><code class="language-Dockerfile">FROM rabbitmq:3.7-management
RUN rabbitmq-plugins enable --offline rabbitmq_mqtt rabbitmq_federation_management rabbitmq_stomp
</code></pre>

<p>You can also mount a file at <code class="highlighter-rouge">/etc/rabbitmq/enabled_plugins</code> with contents as an erlang list of atoms ending with a period.</p>

<p>Example <code class="highlighter-rouge">enabled_plugins</code></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span>rabbitmq_federation_management,rabbitmq_management,rabbitmq_mqtt,rabbitmq_stomp].
</code></pre></div></div>

<h3 id="additional-configuration">Additional Configuration</h3>

<p>If additional configuration is required, it is recommended to supply an appropriate <code class="highlighter-rouge">/etc/rabbitmq/rabbitmq.conf</code> file (see <a href="https://www.rabbitmq.com/configure.html#configuration-files">the “Configuration File(s)” section of the RabbitMQ documentation for more details</a>), for example via bind-mount, <a href="https://matsuand.github.io/docs.docker.jp.onthefly/engine/swarm/configs/">Docker Configs</a>, or a short <code class="highlighter-rouge">Dockerfile</code> with a <code class="highlighter-rouge">COPY</code> instruction.</p>

<p>Alternatively, it is possible to use the <code class="highlighter-rouge">RABBITMQ_SERVER_ADDITIONAL_ERL_ARGS</code> environment variable, whose syntax is described <a href="http://erlang.org/doc/design_principles/applications.html#id81887">in section 7.8 (“Configuring an Application”) of the Erlang OTP Design Principles User’s Guide</a> (the appropriate value for <code class="highlighter-rouge">-ApplName</code> is <code class="highlighter-rouge">-rabbit</code>), this method requires a slightly different reproduction of its equivalent entry in <code class="highlighter-rouge">rabbitmq.conf</code>. For example, configuring <a href="https://www.rabbitmq.com/configure.html#config-items"><code class="highlighter-rouge">channel_max</code></a> would look something like <code class="highlighter-rouge">-e RABBITMQ_SERVER_ADDITIONAL_ERL_ARGS="-rabbit channel_max 4007"</code>. Where the space between the variable <code class="highlighter-rouge">channel_max</code> and its value <code class="highlighter-rouge">4007</code> correctly becomes a comma when translated in the environment.</p>

<p>Additional configuration keys would be specified as a list. For example, configuring both <a href="https://www.rabbitmq.com/configure.html#config-items"><code class="highlighter-rouge">channel_max</code></a> and <a href="https://www.rabbitmq.com/ldap.html#overview"><code class="highlighter-rouge">auth_backends</code></a> would look something like <code class="highlighter-rouge">-e RABBITMQ_SERVER_ADDITIONAL_ERL_ARGS="-rabbit channel_max 4007 auth_backends [rabbit_auth_backend_ldap,rabbit_auth_backend_internal]"</code>. Note that some variables such as for <code class="highlighter-rouge">auth_backends</code> require their value(s) to be enclosed in brackets, and for multiple values explicitly including the comma as a delimiter.</p>

<h3 id="healthlivenessreadiness-checking">Health/Liveness/Readiness Checking</h3>

<p>See <a href="https://github.com/docker-library/faq#healthcheck">the “Official Images” FAQ</a> and <a href="https://github.com/docker-library/rabbitmq/pull/174#issuecomment-452002696">the discussion on docker-library/rabbitmq#174 (especially the large comment by Michael Klishin from RabbitMQ upstream)</a> for a detailed explanation of why this image does not come with a default <code class="highlighter-rouge">HEALTHCHECK</code> defined, and for suggestions for implementing your own health/liveness/readiness checks.</p>

<h1 id="image-variants">Image Variants</h1>

<p>The <code class="highlighter-rouge">rabbitmq</code> images come in many flavors, each designed for a specific use case.</p>

<h2 id="rabbitmqversion"><code class="highlighter-rouge">rabbitmq:&lt;version&gt;</code></h2>

<p>This is the defacto image. If you are unsure about what your needs are, you probably want to use this one. It is designed to be used both as a throw away container (mount your source code and start the container to start your app), as well as the base to build other images off of.</p>

<h2 id="rabbitmqversion-alpine"><code class="highlighter-rouge">rabbitmq:&lt;version&gt;-alpine</code></h2>

<p>This image is based on the popular <a href="http://alpinelinux.org">Alpine Linux project</a>, available in <a href="https://hub.docker.com/_/alpine">the <code class="highlighter-rouge">alpine</code> official image</a>. Alpine Linux is much smaller than most distribution base images (~5MB), and thus leads to much slimmer images in general.</p>

<p>This variant is highly recommended when final image size being as small as possible is desired. The main caveat to note is that it does use <a href="http://www.musl-libc.org">musl libc</a> instead of <a href="http://www.etalabs.net/compare_libcs.html">glibc and friends</a>, so certain software might run into issues depending on the depth of their libc requirements. However, most software doesn’t have an issue with this, so this variant is usually a very safe choice. See <a href="https://news.ycombinator.com/item?id=10782897">this Hacker News comment thread</a> for more discussion of the issues that might arise and some pro/con comparisons of using Alpine-based images.</p>

<p>To minimize image size, it’s uncommon for additional related tools (such as <code class="highlighter-rouge">git</code> or <code class="highlighter-rouge">bash</code>) to be included in Alpine-based images. Using this image as a base, add the things you need in your own Dockerfile (see the <a href="https://hub.docker.com/_/alpine/"><code class="highlighter-rouge">alpine</code> image description</a> for examples of how to install packages if you are unfamiliar).</p>

<h1 id="license">License</h1>

<p>View <a href="https://www.rabbitmq.com/mpl.html">license information</a> for the software contained in this image.</p>

<p>As with all Docker images, these likely also contain other software which may be under other licenses (such as Bash, etc from the base distribution, along with any direct or indirect dependencies of the primary software being contained).</p>

<p>Some additional license information which was able to be auto-detected might be found in <a href="https://github.com/docker-library/repo-info/tree/master/repos/rabbitmq">the <code class="highlighter-rouge">repo-info</code> repository’s <code class="highlighter-rouge">rabbitmq/</code> directory</a>.</p>

<p>As for any pre-built image usage, it is the image user’s responsibility to ensure that any use of this image complies with any relevant licenses for all software contained within.</p>


							<!-- tags -->
							
							
							
							<span class="glyphicon glyphicon-tags" style="padding-right: 10px"></span><span style="vertical-align: 2px"><a href="https://matsuand.github.io/docs.docker.jp.onthefly/glossary/?term=library">library</a>, <a href="https://matsuand.github.io/docs.docker.jp.onthefly/glossary/?term=sample">sample</a>, <a href="https://matsuand.github.io/docs.docker.jp.onthefly/glossary/?term=rabbitmq">rabbitmq</a></span>
							
							<!-- link corrections -->
              <script language="JavaScript">
							var x = document.links.length;
							var baseHref = document.getElementsByTagName('base')[0].href
							for (i = 0; i < x; i++) {
							  var munged = false;
							  var thisHREF = document.links[i].href;
							  var originalURL = "/samples/library/rabbitmq/";
							  if (thisHREF.indexOf(baseHref + "#") > -1) {
							    // hash fix
							    //console.log('BEFORE: base:',baseHref,'thisHREF:',thisHREF,'originalURL:',originalURL);
							    thisHREF = originalURL + thisHREF.replace(baseHref, "");
							    //console.log('AFTER: base:',baseHref,'thisHREF:',thisHREF,'originalURL:',originalURL);
							  }
							  if ((thisHREF.indexOf(window.location.hostname) > -1 || thisHREF.indexOf('http') == -1) && document.links[i].className.indexOf("nomunge") < 0) {
							    munged = true;
							    thisHREF = thisHREF.replace(".md", "/").replace("/index/", "/");
							    document.links[i].setAttribute('href', thisHREF);
							  }
							}
							</script>
							
						  <div id="ratings-div" style="color:#b9c2cc; text-align: center; margin-top: 150px; visibility: hidden">
								<div id="pd_rating_holder_8453675"></div>
								<script type="text/javascript">
									PDRTJS_settings_8453675 = {
										"id": "8453675",
										"unique_id": "_samples/library/rabbitmq/index.md",
										"title": "rabbitmq",
										"permalink": "https://github.com/docker/docker.github.io/blob/master/_samples/library/rabbitmq/index.md"
									};
									(function(d, c, j) {
										if (!document.getElementById(j)) {
											var pd = d.createElement(c),
												s;
											pd.id = j;
											pd.src = ('https:' == document.location.protocol) ? 'https://polldaddy.com/js/rating/rating.js' : 'http://i0.poll.fm/js/rating/rating.js';
											s = document.getElementsByTagName(c)[0];
											s.parentNode.insertBefore(pd, s);
										}
									}(document, 'script', 'pd-rating-js'));
								</script>
							</div>
							
						</section>
					</main>
					<nav class="col-nav">
						<div id="sidebar-nav" class="sidebar hidden-sm hidden-xs">
						<div id="navbar" class="nav-sidebar">
    <ul class="nav" id="jsTOCLeftNav">
    </ul>
</div>

						</div>
					</nav>
					<div class="col-toc">
							<div class="sidebar hidden-xs hidden-sm">
							<div class="toc-nav">
								<div class="feedback-links">
									<ul>
										
										<li style="visibility: hidden"><a href="https://github.com/matsuand/docs.docker.jp/edit/v19.03.local/_samples/library/rabbitmq/index.md"><i class="fa fa-pencil-square-o" aria-hidden="true"></i> このページの編集</a></li>
										<li><a href="https://github.com/matsuand/docs.docker.jp.onthefly/issues/new?body=File: [_samples/library/rabbitmq/index.md](https://matsuand.github.io/docs.docker.jp.onthefly/samples/library/rabbitmq/)"
															class="nomunge"><i class="fa fa-check" aria-hidden="true"></i> 文書変更のリクエスト</a></li>
										<li><a href="https://success.docker.com/support"><i class="fa fa-question" aria-hidden="true"></i> サポート依頼</a></li>
										<!-- toggle mode -->
										<li>
											<div class="toggle-mode">
												<div class="icon">
													<i class="fa fa-sun-o" aria-hidden="true"></i>
												</div>
												<div class="toggle-switch">
													<label class="switch">
														<input type="checkbox" id="switch-style">
														<div class="slider round"></div>
												</label>
												</div>
												<div class="icon">
													<i class="fa fa-moon-o" aria-hidden="true"></i>
												</div>
											</div>
										</li>
									</ul>
								</div>
								   
									<div id="side-toc-title">本ページ内</div>
									
<ul id="my_toc" class="inline_toc">
  <li><a href="#running-the-daemon" class="nomunge">Running the daemon</a>
    <ul>
      <li><a href="#memory-limits" class="nomunge">Memory Limits</a></li>
      <li><a href="#erlang-cookie" class="nomunge">Erlang Cookie</a></li>
      <li><a href="#management-plugin" class="nomunge">Management Plugin</a></li>
      <li><a href="#environment-variables" class="nomunge">Environment Variables</a></li>
      <li><a href="#setting-default-user-and-password" class="nomunge">Setting default user and password</a></li>
      <li><a href="#setting-default-vhost" class="nomunge">Setting default vhost</a></li>
      <li><a href="#enabling-hipe-deprecated" class="nomunge">Enabling HiPE (deprecated)</a></li>
      <li><a href="#enabling-plugins" class="nomunge">Enabling Plugins</a></li>
      <li><a href="#additional-configuration" class="nomunge">Additional Configuration</a></li>
      <li><a href="#healthlivenessreadiness-checking" class="nomunge">Health/Liveness/Readiness Checking</a></li>
    </ul>
  </li>
  <li><a href="#rabbitmqversion" class="nomunge">rabbitmq:&lt;version&gt;</a></li>
  <li><a href="#rabbitmqversion-alpine" class="nomunge">rabbitmq:&lt;version&gt;-alpine</a></li>
</ul>


								</div>
								
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	
	<footer class="footer">
		  
    <div class="container">
        <div class="top_footer">
            <div class="row">
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><a href="https://www.docker.com/what-docker">What is Docker</a></li>
                        <li><a href="https://www.docker.com/what-container">What is a Container</a></li>
                        <li><a href="https://www.docker.com/use-cases">Use Cases</a></li>
                        <li><a href="https://www.docker.com/customers">Customers</a></li>
                        <li><a href="https://www.docker.com/partners/partner-program">Partners</a></li>
                        <li class="break"><a href="https://www.docker.com/industry-government">For Government</a></li>
                        <li><a href="https://www.docker.com/company">About Docker</a></li>
                        <li><a href="https://www.docker.com/company/management">Management</a></li>
                        <li><a href="https://www.docker.com/company/news-and-press">Press &amp; News</a></li>
                        <li><a href="https://www.docker.com/careers">Careers</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><a href="https://www.docker.com/products/overview">Product</a></li>
                        <li><a href="https://www.docker.com/pricing">Pricing</a></li>
                        <li><a href="https://www.docker.com/docker-community">Community Edition</a></li>
                        <li class="break"><a href="https://www.docker.com/enterprise">Enterprise Edition </a></li>
                        <li><a href="https://www.docker.com/products/docker-datacenter">Docker Datacenter</a></li>
                        <li><a href="https://hub.docker.com/">Docker Hub</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/">Documentation</a></li>
                        <li><a href="https://www.docker.com/docker">Learn</a></li>
                        <li><a href="https://blog.docker.com" target="_blank">Blog</a></li>
                        <li><a href="https://engineering.docker.com" target="_blank">Engineering Blog</a></li>
                        <li><a href="https://training.docker.com/" target="_blank">Training</a></li>
                        <li><a href="https://success.docker.com/support">Support</a></li>
                        <li><a href="https://success.docker.com/kbase">Knowledge Base</a></li>
                        <li><a href="https://www.docker.com/products/resources">Resources</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><a href="https://www.docker.com/docker-community">Community</a></li>
                        <li><a href="https://www.docker.com/technologies/overview">Open Source</a></li>
                        <li><a href="https://www.docker.com/community/events">Events</a></li>
                        <li><a href="https://forums.docker.com/" target="_blank">Forums</a></li>
                        <li><a href="https://www.docker.com/community/docker-captains">Docker Captains</a></li>
                        <li><a href="https://www.docker.com/docker-community/scholarships">Scholarships</a></li>
                        <li><a href="https://blog.docker.com/curated/">Community News</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-nav">
                <nav class="footer_sub_nav">
                    <ul class="menu">
                        <li><a href="http://status.docker.com/">Status</a></li>
                        <li><a href="https://www.docker.com/docker-security">Security</a></li>
                        <li><a href="https://www.docker.com/legal">Legal</a></li>
                        <li><a href="https://www.docker.com/company/contact">Contact</a></li>
                    </ul>
                </nav>
            </div>
        </div>
        <div class="bottom_footer">
            <div class="footer-copyright col-xs-12 col-md-8">
                <p class="copyright">
                    Copyright &copy; 2019 Docker Inc. All rights reserved. </p>
            </div>
            <div class="footer_social_nav">
                <ul class="nav-social">
                    <li class="fa fa-twitter"><a href="http://twitter.com/docker">Twitter</a></li>
                    <li class="fa fa-youtube"><a href="http://www.youtube.com/user/dockerrun">Youtube</a></li>
                    <li class="fa fa-github"><a href="https://github.com/docker">GitHub</a></li>
                    <li class="fa fa-linkedin"><a href="https://www.linkedin.com/company/docker">Linkedin</a></li>
                    <li class="fa fa-facebook"><a href="https://www.facebook.com/docker.run">Facebook</a></li>
                    <li class="fa fa-reddit"><a href="http://www.reddit.com/r/docker">Reddit</a></li>
                    <li class="fa fa-slideshare"><a href="http://www.slideshare.net/docker">Slideshare</a></li>
                </ul>
            </div>
        </div>
    </div>

	</footer>
	<link rel="stylesheet" href="https://matsuand.github.io/docs.docker.jp.onthefly/css/github.css">
	
	<!-- <script src="https://matsuand.github.io/docs.docker.jp.onthefly/js/anchorlinks.js"></script> -->
	<script defer src="https://matsuand.github.io/docs.docker.jp.onthefly/js/menu.js"></script>
	<script src="https://matsuand.github.io/docs.docker.jp.onthefly/js/jquery.js"></script>
	<script src="https://matsuand.github.io/docs.docker.jp.onthefly/js/bootstrap.min.js"></script>
	<!-- Always include the archive.js, but it doesn't do much unless we are an archive -->
	<script language="javascript">
	// Default to assuming this is an archive and hiding some stuff
	// See js/archive.js and js/docs.js for logic relating to this
	var isArchive = true;
	var dockerVersion = 'v19.03';
	// In archives, we need to know the page root and we get it from JEKYLL_ENV in the jekyll build command
	var jekyllEnv = 'development';
	// If unset (in non-archive branches), defaults to "development". In that case, reset it to empty
	if (jekyllEnv == 'development') {
		jekyllEnv = '';
	}
	var pageURL = jekyllEnv + '/samples/library/rabbitmq/';
	</script>
	<script src="https://matsuand.github.io/docs.docker.jp.onthefly/js/archive.js"></script>
	<script src="https://matsuand.github.io/docs.docker.jp.onthefly/js/stickyfill.min.js"></script>
	<script defer src="https://matsuand.github.io/docs.docker.jp.onthefly/js/metadata.js"></script>
	<script src="https://matsuand.github.io/docs.docker.jp.onthefly/js/glossary.js"></script>
	<script src="https://matsuand.github.io/docs.docker.jp.onthefly/js/collections_tocs.js"></script>
	<script defer src="https://matsuand.github.io/docs.docker.jp.onthefly/js/docs.js"></script>
	<script defer src="https://matsuand.github.io/docs.docker.jp.onthefly/js/toc.js"></script>
	<script language="javascript">
	jQuery(document).ready(function(){
				hookupTOCEvents();
			});
	</script>
</body>

</html>
