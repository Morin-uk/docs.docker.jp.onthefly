<!-- Page generated 2019-07-31 13:57:05 +0900 -->
<!-- relative link basehrefs -->

	


<!-- Logic for 'edit this button' -->


	

	

	

	

	

	

	

	

	


<!-- End of logic for 'edit this button' -->


<!DOCTYPE html>
<html lang="ja">

<head>
	<base href="https://matsuand.github.io/docs.docker.jp.onthefly/samples/library/zookeeper/" />
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<style type="text/css">
		@charset "UTF-8";
		[ng\:cloak],
		[ng-cloak],
		[data-ng-cloak],
		[x-ng-cloak],
		.ng-cloak,
		.x-ng-cloak,
		.ng-hide:not(.ng-hide-animate) {
			display: none !important;
		}

		ng\:form {
			display: block;
		}
	</style>
	<script type="text/javascript">
	  !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="4.0.0";
	  analytics.load("IWj9D0UpZHZdZUZX9jl98PcpBFWBnBMy");
	  analytics.page();
	  }}();
	</script>
	
	<!-- favicon -->
	<link rel="icon" type="image/x-icon" href="https://matsuand.github.io/docs.docker.jp.onthefly/favicons/docs@2x.ico" sizes="129x128">
	<meta name="msapplication-TileImage" content="https://matsuand.github.io/docs.docker.jp.onthefly/favicons/docs@2x.ico">
	<link rel="apple-touch-icon" type="image/x-icon" href="https://matsuand.github.io/docs.docker.jp.onthefly/favicons/docs@2x.ico" sizes="129x128">
	<meta property="og:image" content="https://matsuand.github.io/docs.docker.jp.onthefly/favicons/docs@2x.ico"/>
	<!-- metadata -->
	<meta property="og:type" content="website"/>
	<meta property="og:updated_time" itemprop="dateUpdated" content="2019-07-31T13:57:05+09:00"/>
	<meta property="og:image" itemprop="image primaryImageOfPage" content="https://matsuand.github.io/docs.docker.jp.onthefly/images/docs@2x.png"/>
	<meta name="twitter:card" content="summary"/>
	<meta name="twitter:domain" content="docs.docker.jp"/>
	<meta name="twitter:site" content="@docker_docs"/>
	<meta name="twitter:url" content="https://twitter.com/docker_docs"/>
	<meta name="twitter:title" itemprop="title name" content="zookeeper"/>
	<meta name="twitter:description" property="og:description" itemprop="description" content="Apache ZooKeeper is an open-source server which enables highly reliable distributed coordination. GitHub repo: https://github.com/31z4/zookeeper-docker Library reference This content is imported from the official Docker Library docs, and is provided..." />
	<meta name="twitter:image:src" content="https://matsuand.github.io/docs.docker.jp.onthefly/images/docs@2x.png"/>
	<meta name="twitter:image:alt" content="Docker Documentation"/>
	<meta property="article:published_time" itemprop="datePublished" content="2019-07-31T13:57:05+09:00"/>

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="keywords" content="library, sample, zookeeper">
	<link rel="stylesheet" href="https://matsuand.github.io/docs.docker.jp.onthefly/css/font-awesome.min.css">
	<link rel="stylesheet" href="https://matsuand.github.io/docs.docker.jp.onthefly/css/bootstrap.min.css">
	<link id="pygments" rel="stylesheet" href="https://matsuand.github.io/docs.docker.jp.onthefly/css/pygments/perldoc.css">
	<link id="pagestyle" rel="stylesheet" href="https://matsuand.github.io/docs.docker.jp.onthefly/css/style.css">

	<!-- Go get "Open Sans" font from Google -->
	<link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
	<!-- SEO stuff -->
	<title>zookeeper | Docker Documentation</title>
<meta property="og:title" content="zookeeper" />
<meta property="og:locale" content="ja_JP" />
<meta name="description" content="Apache ZooKeeper is an open-source server which enables highly reliable distributed coordination.
" />
<meta property="og:description" content="Apache ZooKeeper is an open-source server which enables highly reliable distributed coordination.
" />
<link rel="canonical" href="https://matsuand.github.io/docs.docker.jp.onthefly/samples/library/zookeeper/" />
<meta property="og:url" content="https://matsuand.github.io/docs.docker.jp.onthefly/samples/library/zookeeper/" />
<meta property="og:site_name" content="Docker Documentation" />
<script type="application/ld+json">
{"@context":"http://schema.org","@type":"WebPage","headline":"zookeeper","description":"Apache ZooKeeper is an open-source server which enables highly reliable distributed coordination.
","url":"https://matsuand.github.io/docs.docker.jp.onthefly/samples/library/zookeeper/"}</script>
	<!-- END SEO STUFF -->
	
	<script language="javascript">
	// Default to assuming this is an archive and hiding some stuff
	// See js/archive.js and js/docs.js for logic relating to this
	var isArchive = true;
	var dockerVersion = 'v19.03';
	</script>
</head>
<body ng-app="Docker" ng-controller="DockerController" class="colums">
	<header>
		 <nav class="nav-secondary navbar navbar-fixed-top">
    <!-- <div class="fan"></div> -->
    <div class="container-fluid">
        <div class="navbar-header">
            <a href="https://matsuand.github.io/docs.docker.jp.onthefly/"><img class="logo" src="https://matsuand.github.io/docs.docker.jp.onthefly/images/docker-docs-logo.svg" alt="Docker Docs" title="Docker Docs"></a>
        </div>
        <div class="navbar-collapse" aria-expanded="false" style="height: 1px;">
            <div class="search-form" id="search-div" style="visibility: hidden">
    <form class="search-form form-inline ng-pristine ng-valid" id="searchForm" action="https://matsuand.github.io/docs.docker.jp.onthefly/search/">
        <input class="search-field form-control ds-input" id="st-search-input" value="" name="q" placeholder="文書内検索" type="search" autocomplete="off" spellcheck="false" dir="auto" style="position: relative; vertical-align: top;">
        <div id="autocompleteContainer">
            <div id="autocompleteResults"></div>
        </div>
        <!-- <button type="submit" class="search-submit btn btn-default">検索</button> -->
    </form>
</div>
<div class="sidebar-toggle">
    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
    </button>
</div>
<div class="nav-container">
    <div id="tabs">
        <ul class="tabs" id="jsTOCHorizontal">

        </ul>
    </div>
    <div class="ctrl-right hidden-xs hidden-sm">
        <a href="javascript:void(0)" id="menu-toggle"><i class="fa fa-indent" aria-hidden="true"></i></a>
        <div class="btn-group" style="visibility: hidden">
  <button type="button" class="btn btn-default dropdown-btn dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    Docker v19.03 (current)         <span class="caret"></span>
  </button>
  <ul class="dropdown-menu">
    <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/edge/">Docker edge</a></li><li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/v18.09/">Docker v18.09</a></li><li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/v18.03/">Docker v18.03</a></li><li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/v17.12/">Docker v17.12</a></li><li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/v17.09/">Docker v17.09</a></li><li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/v17.06/">Docker v17.06</a></li><li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/v17.03/">Docker v17.03</a></li>
  </ul>
</div>

    </div>
</div>

        </div>
    </div>
</nav>

	</header>

	<div class="wrapper right-open">
		<div class="container-fluid">
			<div class="row">
				<div class="col-body">
					<main class="col-content content">
						<section class="section">
							
								
							<h1>zookeeper</h1>  <span class="reading-time" title="Estimated reading time">
  <span class="reading-time-label">読む時間の目安: </span>
  
  
    8 分
  
</span>

							
							
							<p>Apache ZooKeeper is an open-source server which enables highly reliable distributed coordination.</p>

<p>GitHub repo: <a href="https://github.com/31z4/zookeeper-docker">https://github.com/31z4/zookeeper-docker</a></p>

<blockquote>
  <p><strong>Library reference</strong></p>

  <p>This content is imported from
<a href="https://github.com/docker-library/docs/tree/master/zookeeper/">the official Docker Library docs</a>,
and is provided by the original uploader. You can view the Docker Hub page for this image at
<a href="https://hub.docker.com/images/zookeeper">https://hub.docker.com/images/zookeeper</a></p>
</blockquote>

<!-- content begin -->

<!--

********************************************************************************

WARNING:

    DO NOT EDIT "zookeeper/README.md"

    IT IS AUTO-GENERATED

    (from the other files in "zookeeper/" combined with a set of templates)

********************************************************************************

-->

<h1 id="supported-tags-and-respective-dockerfile-links">Supported tags and respective <code class="highlighter-rouge">Dockerfile</code> links</h1>

<ul>
  <li><a href="https://github.com/31z4/zookeeper-docker/blob/c978f835bc33509324b51cb210c8c5c9934c38ff/3.4.14/Dockerfile"><code class="highlighter-rouge">3.4.14</code>, <code class="highlighter-rouge">3.4</code></a></li>
  <li><a href="https://github.com/31z4/zookeeper-docker/blob/c978f835bc33509324b51cb210c8c5c9934c38ff/3.5.5/Dockerfile"><code class="highlighter-rouge">3.5.5</code>, <code class="highlighter-rouge">3.5</code>, <code class="highlighter-rouge">latest</code></a></li>
</ul>

<h1 id="quick-reference">Quick reference</h1>

<ul>
  <li>
    <p><strong>Where to get help</strong>:<br />
<a href="https://forums.docker.com/">the Docker Community Forums</a>, <a href="https://blog.docker.com/2016/11/introducing-docker-community-directory-docker-community-slack/">the Docker Community Slack</a>, or <a href="https://stackoverflow.com/search?tab=newest&amp;q=docker">Stack Overflow</a></p>
  </li>
  <li>
    <p><strong>Where to file issues</strong>:<br />
<a href="https://github.com/31z4/zookeeper-docker/issues">https://github.com/31z4/zookeeper-docker/issues</a></p>
  </li>
  <li>
    <p><strong>Maintained by</strong>:<br />
<a href="https://github.com/31z4/zookeeper-docker">the Docker Community</a></p>
  </li>
  <li>
    <p><strong>Supported architectures</strong>: (<a href="https://github.com/docker-library/official-images#architectures-other-than-amd64">more info</a>)<br />
<a href="https://hub.docker.com/r/amd64/zookeeper/"><code class="highlighter-rouge">amd64</code></a></p>
  </li>
  <li>
    <p><strong>Published image artifact details</strong>:<br />
<a href="https://github.com/docker-library/repo-info/blob/master/repos/zookeeper">repo-info repo’s <code class="highlighter-rouge">repos/zookeeper/</code> directory</a> (<a href="https://github.com/docker-library/repo-info/commits/master/repos/zookeeper">history</a>)<br />
(image metadata, transfer size, etc)</p>
  </li>
  <li>
    <p><strong>Image updates</strong>:<br />
<a href="https://github.com/docker-library/official-images/pulls?q=label%3Alibrary%2Fzookeeper">official-images PRs with label <code class="highlighter-rouge">library/zookeeper</code></a><br />
<a href="https://github.com/docker-library/official-images/blob/master/library/zookeeper">official-images repo’s <code class="highlighter-rouge">library/zookeeper</code> file</a> (<a href="https://github.com/docker-library/official-images/commits/master/library/zookeeper">history</a>)</p>
  </li>
  <li>
    <p><strong>Source of this description</strong>:<br />
<a href="https://github.com/docker-library/docs/tree/master/zookeeper">docs repo’s <code class="highlighter-rouge">zookeeper/</code> directory</a> (<a href="https://github.com/docker-library/docs/commits/master/zookeeper">history</a>)</p>
  </li>
</ul>

<h1 id="what-is-apache-zookeeper">What is Apache Zookeeper?</h1>

<p>Apache ZooKeeper is a software project of the Apache Software Foundation, providing an open source distributed configuration service, synchronization service, and naming registry for large distributed systems. ZooKeeper was a sub-project of Hadoop but is now a top-level project in its own right.</p>

<blockquote>
  <p><a href="https://en.wikipedia.org/wiki/Apache_ZooKeeper">wikipedia.org/wiki/Apache_ZooKeeper</a></p>
</blockquote>

<p><img src="https://raw.githubusercontent.com/docker-library/docs/f906e95d1c27856aa79ea1bd8600da51466e7b0b/zookeeper/logo.png" alt="logo" /></p>

<h1 id="how-to-use-this-image">How to use this image</h1>

<h2 id="start-a-zookeeper-server-instance">Start a Zookeeper server instance</h2>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker run <span class="nt">--name</span> some-zookeeper <span class="nt">--restart</span> always <span class="nt">-d</span> zookeeper
</code></pre></div></div>

<p>This image includes <code class="highlighter-rouge">EXPOSE 2181 2888 3888 8080</code> (the zookeeper client port, follower port, election port, AdminServer port respectively), so standard container linking will make it automatically available to the linked containers. Since the Zookeeper “fails fast” it’s better to always restart it.</p>

<h2 id="connect-to-zookeeper-from-an-application-in-another-docker-container">Connect to Zookeeper from an application in another Docker container</h2>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker run <span class="nt">--name</span> some-app <span class="nt">--link</span> some-zookeeper:zookeeper <span class="nt">-d</span> application-that-uses-zookeeper
</code></pre></div></div>

<h2 id="connect-to-zookeeper-from-the-zookeeper-command-line-client">Connect to Zookeeper from the Zookeeper command line client</h2>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker run <span class="nt">-it</span> <span class="nt">--rm</span> <span class="nt">--link</span> some-zookeeper:zookeeper zookeeper zkCli.sh <span class="nt">-server</span> zookeeper
</code></pre></div></div>

<h2 id="-via-docker-stack-deploy-or-docker-compose">... via <a href="https://matsuand.github.io/docs.docker.jp.onthefly/engine/reference/commandline/stack_deploy/"><code class="highlighter-rouge">docker stack deploy</code></a> or <a href="https://github.com/docker/compose"><code class="highlighter-rouge">docker-compose</code></a></h2>

<p>Example <code class="highlighter-rouge">stack.yml</code> for <code class="highlighter-rouge">zookeeper</code>:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">version</span><span class="pi">:</span> <span class="s1">'</span><span class="s">3.1'</span>

<span class="na">services</span><span class="pi">:</span>
  <span class="na">zoo1</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">zookeeper</span>
    <span class="na">restart</span><span class="pi">:</span> <span class="s">always</span>
    <span class="na">hostname</span><span class="pi">:</span> <span class="s">zoo1</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">2181:2181</span>
    <span class="na">environment</span><span class="pi">:</span>
      <span class="na">ZOO_MY_ID</span><span class="pi">:</span> <span class="s">1</span>
      <span class="na">ZOO_SERVERS</span><span class="pi">:</span> <span class="s">server.1=0.0.0.0:2888:3888;2181 server.2=zoo2:2888:3888;2181 server.3=zoo3:2888:3888;2181</span>

  <span class="na">zoo2</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">zookeeper</span>
    <span class="na">restart</span><span class="pi">:</span> <span class="s">always</span>
    <span class="na">hostname</span><span class="pi">:</span> <span class="s">zoo2</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">2182:2181</span>
    <span class="na">environment</span><span class="pi">:</span>
      <span class="na">ZOO_MY_ID</span><span class="pi">:</span> <span class="s">2</span>
      <span class="na">ZOO_SERVERS</span><span class="pi">:</span> <span class="s">server.1=zoo1:2888:3888;2181 server.2=0.0.0.0:2888:3888;2181 server.3=zoo3:2888:3888;2181</span>

  <span class="na">zoo3</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">zookeeper</span>
    <span class="na">restart</span><span class="pi">:</span> <span class="s">always</span>
    <span class="na">hostname</span><span class="pi">:</span> <span class="s">zoo3</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">2183:2181</span>
    <span class="na">environment</span><span class="pi">:</span>
      <span class="na">ZOO_MY_ID</span><span class="pi">:</span> <span class="s">3</span>
      <span class="na">ZOO_SERVERS</span><span class="pi">:</span> <span class="s">server.1=zoo1:2888:3888;2181 server.2=zoo2:2888:3888;2181 server.3=0.0.0.0:2888:3888;2181</span>
</code></pre></div></div>

<p><a href="http://play-with-docker.com?stack=https://raw.githubusercontent.com/docker-library/docs/ef162dce5998011e1753c3337dcbe61200c522d2/zookeeper/stack.yml"><img src="https://github.com/play-with-docker/stacks/raw/cff22438cb4195ace27f9b15784bbb497047afa7/assets/images/button.png" alt="Try in PWD" /></a></p>

<p>This will start Zookeeper 3.5 in <a href="https://zookeeper.apache.org/doc/current/zookeeperStarted.html#sc_RunningReplicatedZooKeeper">replicated mode</a>. Please note, that Zookeeper 3.4 has slightly different <code class="highlighter-rouge">ZOO_SERVERS</code> format. Run <code class="highlighter-rouge">docker stack deploy -c stack.yml zookeeper</code> (or <code class="highlighter-rouge">docker-compose -f stack.yml up</code>) and wait for it to initialize completely. Ports <code class="highlighter-rouge">2181-2183</code> will be exposed.</p>

<blockquote>
  <p>Please be aware that setting up multiple servers on a single machine will not create any redundancy. If something were to happen which caused the machine to die, all of the zookeeper servers would be offline. Full redundancy requires that each server have its own machine. It must be a completely separate physical server. Multiple virtual machines on the same physical host are still vulnerable to the complete failure of that host.</p>
</blockquote>

<p>Consider using <a href="https://www.docker.com/products/docker-swarm">Docker Swarm</a> when running Zookeeper in replicated mode.</p>

<h2 id="configuration">Configuration</h2>

<p>Zookeeper configuration is located in <code class="highlighter-rouge">/conf</code>. One way to change it is mounting your config file as a volume:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker run <span class="nt">--name</span> some-zookeeper <span class="nt">--restart</span> always <span class="nt">-d</span> <span class="nt">-v</span> <span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>/zoo.cfg:/conf/zoo.cfg zookeeper
</code></pre></div></div>

<h2 id="environment-variables">Environment variables</h2>

<p>ZooKeeper recommended defaults are used if <code class="highlighter-rouge">zoo.cfg</code> file is not provided. They can be overridden using the following environment variables.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker run <span class="nt">-e</span> <span class="s2">"ZOO_INIT_LIMIT=10"</span> <span class="nt">--name</span> some-zookeeper <span class="nt">--restart</span> always <span class="nt">-d</span> 31z4/zookeeper
</code></pre></div></div>

<h3 id="zoo_tick_time"><code class="highlighter-rouge">ZOO_TICK_TIME</code></h3>

<p>Defaults to <code class="highlighter-rouge">2000</code>. ZooKeeper’s <code class="highlighter-rouge">tickTime</code></p>

<blockquote>
  <p>The length of a single tick, which is the basic time unit used by ZooKeeper, as measured in milliseconds. It is used to regulate heartbeats, and timeouts. For example, the minimum session timeout will be two ticks</p>
</blockquote>

<h3 id="zoo_init_limit"><code class="highlighter-rouge">ZOO_INIT_LIMIT</code></h3>

<p>Defaults to <code class="highlighter-rouge">5</code>. ZooKeeper’s <code class="highlighter-rouge">initLimit</code></p>

<blockquote>
  <p>Amount of time, in ticks (see tickTime), to allow followers to connect and sync to a leader. Increased this value as needed, if the amount of data managed by ZooKeeper is large.</p>
</blockquote>

<h3 id="zoo_sync_limit"><code class="highlighter-rouge">ZOO_SYNC_LIMIT</code></h3>

<p>Defaults to <code class="highlighter-rouge">2</code>. ZooKeeper’s <code class="highlighter-rouge">syncLimit</code></p>

<blockquote>
  <p>Amount of time, in ticks (see tickTime), to allow followers to sync with ZooKeeper. If followers fall too far behind a leader, they will be dropped.</p>
</blockquote>

<h3 id="zoo_max_client_cnxns"><code class="highlighter-rouge">ZOO_MAX_CLIENT_CNXNS</code></h3>

<p>Defaults to <code class="highlighter-rouge">60</code>. ZooKeeper’s <code class="highlighter-rouge">maxClientCnxns</code></p>

<blockquote>
  <p>Limits the number of concurrent connections (at the socket level) that a single client, identified by IP address, may make to a single member of the ZooKeeper ensemble.</p>
</blockquote>

<h3 id="zoo_standalone_enabled"><code class="highlighter-rouge">ZOO_STANDALONE_ENABLED</code></h3>

<p>Defaults to <code class="highlighter-rouge">true</code>. Zookeeper’s <a href="https://zookeeper.apache.org/doc/r3.5.5/zookeeperReconfig.html#sc_reconfig_standaloneEnabled"><code class="highlighter-rouge">standaloneEnabled</code></a></p>

<blockquote>
  <p>Prior to 3.5.0, one could run ZooKeeper in Standalone mode or in a Distributed mode. These are separate implementation stacks, and switching between them during run time is not possible. By default (for backward compatibility) standaloneEnabled is set to true. The consequence of using this default is that if started with a single server the ensemble will not be allowed to grow, and if started with more than one server it will not be allowed to shrink to contain fewer than two participants.</p>
</blockquote>

<h3 id="zoo_adminserver_enabled"><code class="highlighter-rouge">ZOO_ADMINSERVER_ENABLED</code></h3>

<p>Defaults to <code class="highlighter-rouge">true</code>. Zookeeper’s <a href="http://zookeeper.apache.org/doc/r3.5.5/zookeeperAdmin.html#sc_adminserver_config"><code class="highlighter-rouge">admin.enableServer</code></a></p>

<blockquote>
  <p>New in 3.5.0: The AdminServer is an embedded Jetty server that provides an HTTP interface to the four letter word commands. By default, the server is started on port 8080, and commands are issued by going to the URL “/commands/[command name]”, e.g., http://localhost:8080/commands/stat.</p>
</blockquote>

<h3 id="zoo_autopurge_purgeinterval"><code class="highlighter-rouge">ZOO_AUTOPURGE_PURGEINTERVAL</code></h3>

<p>Defaults to <code class="highlighter-rouge">0</code>. Zookeeper’s <a href="https://zookeeper.apache.org/doc/current/zookeeperAdmin.html#sc_advancedConfiguration"><code class="highlighter-rouge">autoPurge.purgeInterval</code></a></p>

<blockquote>
  <p>The time interval in hours for which the purge task has to be triggered. Set to a positive integer (1 and above) to enable the auto purging. Defaults to 0.</p>
</blockquote>

<h3 id="zoo_autopurge_snapretaincount"><code class="highlighter-rouge">ZOO_AUTOPURGE_SNAPRETAINCOUNT</code></h3>

<p>Defaults to <code class="highlighter-rouge">3</code>. Zookeeper’s <a href="https://zookeeper.apache.org/doc/current/zookeeperAdmin.html#sc_advancedConfiguration"><code class="highlighter-rouge">autoPurge.snapRetainCount</code></a></p>

<blockquote>
  <p>When enabled, ZooKeeper auto purge feature retains the autopurge.snapRetainCount most recent snapshots and the corresponding transaction logs in the dataDir and dataLogDir respectively and deletes the rest. Defaults to 3. Minimum value is 3.</p>
</blockquote>

<h2 id="replicated-mode">Replicated mode</h2>

<p>Environment variables below are mandatory if you want to run Zookeeper in replicated mode.</p>

<h3 id="zoo_my_id"><code class="highlighter-rouge">ZOO_MY_ID</code></h3>

<p>The id must be unique within the ensemble and should have a value between 1 and 255. Do note that this variable will not have any effect if you start the container with a <code class="highlighter-rouge">/data</code> directory that already contains the <code class="highlighter-rouge">myid</code> file.</p>

<h3 id="zoo_servers"><code class="highlighter-rouge">ZOO_SERVERS</code></h3>

<p>This variable allows you to specify a list of machines of the Zookeeper ensemble. Each entry has the form of <code class="highlighter-rouge">server.id=host:port:port</code>. Entries are separated with space. Do note that this variable will not have any effect if you start the container with a <code class="highlighter-rouge">/conf</code> directory that already contains the <code class="highlighter-rouge">zoo.cfg</code> file.</p>

<p>In 3.5, the syntax of this has changed. Servers should be specified as such: <code class="highlighter-rouge">server.id=&lt;address1&gt;:&lt;port1&gt;:&lt;port2&gt;[:role];[&lt;client port address&gt;:]&lt;client port&gt;</code> <a href="https://zookeeper.apache.org/doc/r3.5.5/zookeeperReconfig.html">Zookeeper Dynamic Reconfiguration</a></p>

<h2 id="where-to-store-data">Where to store data</h2>

<p>This image is configured with volumes at <code class="highlighter-rouge">/data</code> and <code class="highlighter-rouge">/datalog</code> to hold the Zookeeper in-memory database snapshots and the transaction log of updates to the database, respectively.</p>

<blockquote>
  <p>Be careful where you put the transaction log. A dedicated transaction log device is key to consistent good performance. Putting the log on a busy device will adversely affect performance.</p>
</blockquote>

<h2 id="how-to-configure-logging">How to configure logging</h2>

<p>By default, ZooKeeper redirects stdout/stderr outputs to the console. You can redirect to a file located in <code class="highlighter-rouge">/logs</code> by passing environment variable <code class="highlighter-rouge">ZOO_LOG4J_PROP</code> as follows:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker run <span class="nt">--name</span> some-zookeeper <span class="nt">--restart</span> always <span class="nt">-e</span> <span class="nv">ZOO_LOG4J_PROP</span><span class="o">=</span><span class="s2">"INFO,ROLLINGFILE"</span> zookeeper
</code></pre></div></div>

<p>This will write logs to <code class="highlighter-rouge">/logs/zookeeper.log</code>. Check <a href="https://zookeeper.apache.org/doc/current/zookeeperAdmin.html#sc_logging">ZooKeeper Logging</a> for more details.</p>

<p>This image is configured with a volume at <code class="highlighter-rouge">/logs</code> for your convenience.</p>

<h1 id="license">License</h1>

<p>View <a href="https://github.com/apache/zookeeper/blob/master/LICENSE.txt">license information</a> for the software contained in this image.</p>

<p>As with all Docker images, these likely also contain other software which may be under other licenses (such as Bash, etc from the base distribution, along with any direct or indirect dependencies of the primary software being contained).</p>

<p>Some additional license information which was able to be auto-detected might be found in <a href="https://github.com/docker-library/repo-info/tree/master/repos/zookeeper">the <code class="highlighter-rouge">repo-info</code> repository’s <code class="highlighter-rouge">zookeeper/</code> directory</a>.</p>

<p>As for any pre-built image usage, it is the image user’s responsibility to ensure that any use of this image complies with any relevant licenses for all software contained within.</p>


							<!-- tags -->
							
							
							
							<span class="glyphicon glyphicon-tags" style="padding-right: 10px"></span><span style="vertical-align: 2px"><a href="https://matsuand.github.io/docs.docker.jp.onthefly/glossary/?term=library">library</a>, <a href="https://matsuand.github.io/docs.docker.jp.onthefly/glossary/?term=sample">sample</a>, <a href="https://matsuand.github.io/docs.docker.jp.onthefly/glossary/?term=zookeeper">zookeeper</a></span>
							
							<!-- link corrections -->
              <script language="JavaScript">
							var x = document.links.length;
							var baseHref = document.getElementsByTagName('base')[0].href
							for (i = 0; i < x; i++) {
							  var munged = false;
							  var thisHREF = document.links[i].href;
							  var originalURL = "/samples/library/zookeeper/";
							  if (thisHREF.indexOf(baseHref + "#") > -1) {
							    // hash fix
							    //console.log('BEFORE: base:',baseHref,'thisHREF:',thisHREF,'originalURL:',originalURL);
							    thisHREF = originalURL + thisHREF.replace(baseHref, "");
							    //console.log('AFTER: base:',baseHref,'thisHREF:',thisHREF,'originalURL:',originalURL);
							  }
							  if ((thisHREF.indexOf(window.location.hostname) > -1 || thisHREF.indexOf('http') == -1) && document.links[i].className.indexOf("nomunge") < 0) {
							    munged = true;
							    thisHREF = thisHREF.replace(".md", "/").replace("/index/", "/");
							    document.links[i].setAttribute('href', thisHREF);
							  }
							}
							</script>
							
						  <div id="ratings-div" style="color:#b9c2cc; text-align: center; margin-top: 150px; visibility: hidden">
								<div id="pd_rating_holder_8453675"></div>
								<script type="text/javascript">
									PDRTJS_settings_8453675 = {
										"id": "8453675",
										"unique_id": "_samples/library/zookeeper/index.md",
										"title": "zookeeper",
										"permalink": "https://github.com/docker/docker.github.io/blob/master/_samples/library/zookeeper/index.md"
									};
									(function(d, c, j) {
										if (!document.getElementById(j)) {
											var pd = d.createElement(c),
												s;
											pd.id = j;
											pd.src = ('https:' == document.location.protocol) ? 'https://polldaddy.com/js/rating/rating.js' : 'http://i0.poll.fm/js/rating/rating.js';
											s = document.getElementsByTagName(c)[0];
											s.parentNode.insertBefore(pd, s);
										}
									}(document, 'script', 'pd-rating-js'));
								</script>
							</div>
							
						</section>
					</main>
					<nav class="col-nav">
						<div id="sidebar-nav" class="sidebar hidden-sm hidden-xs">
						<div id="navbar" class="nav-sidebar">
    <ul class="nav" id="jsTOCLeftNav">
    </ul>
</div>

						</div>
					</nav>
					<div class="col-toc">
							<div class="sidebar hidden-xs hidden-sm">
							<div class="toc-nav">
								<div class="feedback-links">
									<ul>
										
										<li style="visibility: hidden"><a href="https://github.com/matsuand/docs.docker.jp/edit/v19.03.local/_samples/library/zookeeper/index.md"><i class="fa fa-pencil-square-o" aria-hidden="true"></i> このページの編集</a></li>
										<li><a href="https://github.com/matsuand/docs.docker.jp.onthefly/issues/new?body=File: [_samples/library/zookeeper/index.md](https://matsuand.github.io/docs.docker.jp.onthefly/samples/library/zookeeper/)"
															class="nomunge"><i class="fa fa-check" aria-hidden="true"></i> 文書変更のリクエスト</a></li>
										<li><a href="https://success.docker.com/support"><i class="fa fa-question" aria-hidden="true"></i> サポート依頼</a></li>
										<!-- toggle mode -->
										<li>
											<div class="toggle-mode">
												<div class="icon">
													<i class="fa fa-sun-o" aria-hidden="true"></i>
												</div>
												<div class="toggle-switch">
													<label class="switch">
														<input type="checkbox" id="switch-style">
														<div class="slider round"></div>
												</label>
												</div>
												<div class="icon">
													<i class="fa fa-moon-o" aria-hidden="true"></i>
												</div>
											</div>
										</li>
									</ul>
								</div>
								   
									<div id="side-toc-title">本ページ内</div>
									
<ul id="my_toc" class="inline_toc">
  <li><a href="#start-a-zookeeper-server-instance" class="nomunge">Start a Zookeeper server instance</a></li>
  <li><a href="#connect-to-zookeeper-from-an-application-in-another-docker-container" class="nomunge">Connect to Zookeeper from an application in another Docker container</a></li>
  <li><a href="#connect-to-zookeeper-from-the-zookeeper-command-line-client" class="nomunge">Connect to Zookeeper from the Zookeeper command line client</a></li>
  <li><a href="#-via-docker-stack-deploy-or-docker-compose" class="nomunge">... via docker stack deploy or docker-compose</a></li>
  <li><a href="#configuration" class="nomunge">Configuration</a></li>
  <li><a href="#environment-variables" class="nomunge">Environment variables</a>
    <ul>
      <li><a href="#zoo_tick_time" class="nomunge">ZOO_TICK_TIME</a></li>
      <li><a href="#zoo_init_limit" class="nomunge">ZOO_INIT_LIMIT</a></li>
      <li><a href="#zoo_sync_limit" class="nomunge">ZOO_SYNC_LIMIT</a></li>
      <li><a href="#zoo_max_client_cnxns" class="nomunge">ZOO_MAX_CLIENT_CNXNS</a></li>
      <li><a href="#zoo_standalone_enabled" class="nomunge">ZOO_STANDALONE_ENABLED</a></li>
      <li><a href="#zoo_adminserver_enabled" class="nomunge">ZOO_ADMINSERVER_ENABLED</a></li>
      <li><a href="#zoo_autopurge_purgeinterval" class="nomunge">ZOO_AUTOPURGE_PURGEINTERVAL</a></li>
      <li><a href="#zoo_autopurge_snapretaincount" class="nomunge">ZOO_AUTOPURGE_SNAPRETAINCOUNT</a></li>
    </ul>
  </li>
  <li><a href="#replicated-mode" class="nomunge">Replicated mode</a>
    <ul>
      <li><a href="#zoo_my_id" class="nomunge">ZOO_MY_ID</a></li>
      <li><a href="#zoo_servers" class="nomunge">ZOO_SERVERS</a></li>
    </ul>
  </li>
  <li><a href="#where-to-store-data" class="nomunge">Where to store data</a></li>
  <li><a href="#how-to-configure-logging" class="nomunge">How to configure logging</a></li>
</ul>


								</div>
								
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	
	<footer class="footer">
		  
    <div class="container">
        <div class="top_footer">
            <div class="row">
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><a href="https://www.docker.com/what-docker">What is Docker</a></li>
                        <li><a href="https://www.docker.com/what-container">What is a Container</a></li>
                        <li><a href="https://www.docker.com/use-cases">Use Cases</a></li>
                        <li><a href="https://www.docker.com/customers">Customers</a></li>
                        <li><a href="https://www.docker.com/partners/partner-program">Partners</a></li>
                        <li class="break"><a href="https://www.docker.com/industry-government">For Government</a></li>
                        <li><a href="https://www.docker.com/company">About Docker</a></li>
                        <li><a href="https://www.docker.com/company/management">Management</a></li>
                        <li><a href="https://www.docker.com/company/news-and-press">Press &amp; News</a></li>
                        <li><a href="https://www.docker.com/careers">Careers</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><a href="https://www.docker.com/products/overview">Product</a></li>
                        <li><a href="https://www.docker.com/pricing">Pricing</a></li>
                        <li><a href="https://www.docker.com/docker-community">Community Edition</a></li>
                        <li class="break"><a href="https://www.docker.com/enterprise">Enterprise Edition </a></li>
                        <li><a href="https://www.docker.com/products/docker-datacenter">Docker Datacenter</a></li>
                        <li><a href="https://hub.docker.com/">Docker Hub</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/">Documentation</a></li>
                        <li><a href="https://www.docker.com/docker">Learn</a></li>
                        <li><a href="https://blog.docker.com" target="_blank">Blog</a></li>
                        <li><a href="https://engineering.docker.com" target="_blank">Engineering Blog</a></li>
                        <li><a href="https://training.docker.com/" target="_blank">Training</a></li>
                        <li><a href="https://success.docker.com/support">Support</a></li>
                        <li><a href="https://success.docker.com/kbase">Knowledge Base</a></li>
                        <li><a href="https://www.docker.com/products/resources">Resources</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><a href="https://www.docker.com/docker-community">Community</a></li>
                        <li><a href="https://www.docker.com/technologies/overview">Open Source</a></li>
                        <li><a href="https://www.docker.com/community/events">Events</a></li>
                        <li><a href="https://forums.docker.com/" target="_blank">Forums</a></li>
                        <li><a href="https://www.docker.com/community/docker-captains">Docker Captains</a></li>
                        <li><a href="https://www.docker.com/docker-community/scholarships">Scholarships</a></li>
                        <li><a href="https://blog.docker.com/curated/">Community News</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-nav">
                <nav class="footer_sub_nav">
                    <ul class="menu">
                        <li><a href="http://status.docker.com/">Status</a></li>
                        <li><a href="https://www.docker.com/docker-security">Security</a></li>
                        <li><a href="https://www.docker.com/legal">Legal</a></li>
                        <li><a href="https://www.docker.com/company/contact">Contact</a></li>
                    </ul>
                </nav>
            </div>
        </div>
        <div class="bottom_footer">
            <div class="footer-copyright col-xs-12 col-md-8">
                <p class="copyright">
                    Copyright &copy; 2019 Docker Inc. All rights reserved. </p>
            </div>
            <div class="footer_social_nav">
                <ul class="nav-social">
                    <li class="fa fa-twitter"><a href="http://twitter.com/docker">Twitter</a></li>
                    <li class="fa fa-youtube"><a href="http://www.youtube.com/user/dockerrun">Youtube</a></li>
                    <li class="fa fa-github"><a href="https://github.com/docker">GitHub</a></li>
                    <li class="fa fa-linkedin"><a href="https://www.linkedin.com/company/docker">Linkedin</a></li>
                    <li class="fa fa-facebook"><a href="https://www.facebook.com/docker.run">Facebook</a></li>
                    <li class="fa fa-reddit"><a href="http://www.reddit.com/r/docker">Reddit</a></li>
                    <li class="fa fa-slideshare"><a href="http://www.slideshare.net/docker">Slideshare</a></li>
                </ul>
            </div>
        </div>
    </div>

	</footer>
	<link rel="stylesheet" href="https://matsuand.github.io/docs.docker.jp.onthefly/css/github.css">
	
	<!-- <script src="https://matsuand.github.io/docs.docker.jp.onthefly/js/anchorlinks.js"></script> -->
	<script defer src="https://matsuand.github.io/docs.docker.jp.onthefly/js/menu.js"></script>
	<script src="https://matsuand.github.io/docs.docker.jp.onthefly/js/jquery.js"></script>
	<script src="https://matsuand.github.io/docs.docker.jp.onthefly/js/bootstrap.min.js"></script>
	<!-- Always include the archive.js, but it doesn't do much unless we are an archive -->
	<script language="javascript">
	// Default to assuming this is an archive and hiding some stuff
	// See js/archive.js and js/docs.js for logic relating to this
	var isArchive = true;
	var dockerVersion = 'v19.03';
	// In archives, we need to know the page root and we get it from JEKYLL_ENV in the jekyll build command
	var jekyllEnv = 'development';
	// If unset (in non-archive branches), defaults to "development". In that case, reset it to empty
	if (jekyllEnv == 'development') {
		jekyllEnv = '';
	}
	var pageURL = jekyllEnv + '/samples/library/zookeeper/';
	</script>
	<script src="https://matsuand.github.io/docs.docker.jp.onthefly/js/archive.js"></script>
	<script src="https://matsuand.github.io/docs.docker.jp.onthefly/js/stickyfill.min.js"></script>
	<script defer src="https://matsuand.github.io/docs.docker.jp.onthefly/js/metadata.js"></script>
	<script src="https://matsuand.github.io/docs.docker.jp.onthefly/js/glossary.js"></script>
	<script src="https://matsuand.github.io/docs.docker.jp.onthefly/js/collections_tocs.js"></script>
	<script defer src="https://matsuand.github.io/docs.docker.jp.onthefly/js/docs.js"></script>
	<script defer src="https://matsuand.github.io/docs.docker.jp.onthefly/js/toc.js"></script>
	<script language="javascript">
	jQuery(document).ready(function(){
				hookupTOCEvents();
			});
	</script>
</body>

</html>
