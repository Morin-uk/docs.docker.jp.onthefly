<!-- Page generated 2020-03-27 18:38:29 +0900 -->
<!-- relative link basehrefs -->

	


<!-- Logic for 'edit this button' -->


	

	

	

	

	

	

	

	

	


<!-- End of logic for 'edit this button' -->


<!DOCTYPE html>
<html lang="ja">

<head>
	<base href="/docs.docker.jp.onthefly/samples/library/silverpeas/" />
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<style type="text/css">
		@charset "UTF-8";
		[ng\:cloak],
		[ng-cloak],
		[data-ng-cloak],
		[x-ng-cloak],
		.ng-cloak,
		.x-ng-cloak,
		.ng-hide:not(.ng-hide-animate) {
			display: none !important;
		}

		ng\:form {
			display: block;
		}
	</style>
	<!-- Google Tag Manager -->
	<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
	new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
	j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
	'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-WL2QLG5');</script>
	<!-- End Google Tag Manager -->
	
	<!-- favicon -->
	<link rel="icon" type="image/x-icon" href="/docs.docker.jp.onthefly/favicons/docs@2x.ico" sizes="129x128">
	<meta name="msapplication-TileImage" content="/docs.docker.jp.onthefly/favicons/docs@2x.ico">
	<link rel="apple-touch-icon" type="image/x-icon" href="/docs.docker.jp.onthefly/favicons/docs@2x.ico" sizes="129x128">
	<meta property="og:image" content="/docs.docker.jp.onthefly/favicons/docs@2x.ico"/>
	<!-- metadata -->
	<meta property="og:type" content="website"/>
	<meta property="og:updated_time" itemprop="dateUpdated" content="2020-03-27T18:38:29+09:00"/>
	<meta property="og:image" itemprop="image primaryImageOfPage" content="/docs.docker.jp.onthefly/images/docs@2x.png"/>
	<meta name="twitter:card" content="summary"/>
	<meta name="twitter:domain" content="docs.docker.jp"/>
	<meta name="twitter:site" content="@docker_docs"/>
	<meta name="twitter:url" content="https://twitter.com/docker_docs"/>
	<meta name="twitter:title" itemprop="title name" content="silverpeas"/>
	<meta name="twitter:description" property="og:description" itemprop="description" content="Silverpeas is a turnkey and open-source Collaborative and Social-Networking Portal. GitHub repo: https://github.com/Silverpeas/docker-silverpeas-prod Library reference This content is imported from the official Docker Library docs, and is provided by the..." />
	<meta name="twitter:image:src" content="/docs.docker.jp.onthefly/images/docs@2x.png"/>
	<meta name="twitter:image:alt" content="Docker ドキュメント"/>
	<meta property="article:published_time" itemprop="datePublished" content="2020-03-27T18:38:29+09:00"/>

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="keywords" content="library, sample, silverpeas">
	<link rel="stylesheet" href="/docs.docker.jp.onthefly/css/font-awesome.min.css">
	<link rel="stylesheet" href="/docs.docker.jp.onthefly/css/bootstrap.min.css">
	<link id="pygments" rel="stylesheet" href="/docs.docker.jp.onthefly/css/pygments/perldoc.css">
	<link id="pagestyle" rel="stylesheet" href="/docs.docker.jp.onthefly/css/style.css">

	<!-- Go get "Open Sans" font from Google -->
	<link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
	<!-- SEO stuff -->
	<title>silverpeas | Docker ドキュメント</title>
<meta property="og:title" content="silverpeas" />
<meta property="og:locale" content="ja_JP" />
<meta name="description" content="Silverpeas is a turnkey and open-source Collaborative and Social-Networking Portal.
" />
<meta property="og:description" content="Silverpeas is a turnkey and open-source Collaborative and Social-Networking Portal.
" />
<link rel="canonical" href="/docs.docker.jp.onthefly/samples/library/silverpeas/" />
<meta property="og:url" content="https://matsuand.github.io/docs.docker.jp.onthefly/samples/library/silverpeas/" />
<meta property="og:site_name" content="Docker ドキュメント" />
<script type="application/ld+json">
{"@context":"http://schema.org","@type":"WebPage","headline":"silverpeas","description":"Silverpeas is a turnkey and open-source Collaborative and Social-Networking Portal.
","url":"https://matsuand.github.io/docs.docker.jp.onthefly/samples/library/silverpeas/"}</script>
	<!-- END SEO STUFF -->
	
	<script language="javascript">
	// Default to assuming this is an archive and hiding some stuff
	// See js/archive.js and js/docs.js for logic relating to this
	var isArchive = true;
	var dockerVersion = 'v19.03';
	</script>
</head>
<body ng-app="Docker" ng-controller="DockerController" class="colums">
	<header>
		 <nav class="nav-secondary navbar navbar-fixed-top">
    <!-- <div class="fan"></div> -->
    <div class="container-fluid">
        <div class="navbar-header">
            <a href="/docs.docker.jp.onthefly/"><img class="logo" src="/docs.docker.jp.onthefly/images/docker-docs-logo.svg" alt="Docker Docs" title="Docker Docs"></a>
        </div>
        <div class="navbar-collapse" aria-expanded="false" style="height: 1px;">
            <div class="search-form" id="search-div" style="visibility: hidden">
    <form class="search-form form-inline ng-pristine ng-valid" id="searchForm" action="/docs.docker.jp.onthefly/search/">
        <input class="search-field form-control ds-input" id="st-search-input" value="" name="q" placeholder="文書内検索" type="search" autocomplete="off" spellcheck="false" dir="auto" style="position: relative; vertical-align: top;">
        <div id="autocompleteContainer">
            <div id="autocompleteResults"></div>
        </div>
        <!-- <button type="submit" class="search-submit btn btn-default">検索</button> -->
    </form>
</div>
<div class="sidebar-toggle">
    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
    </button>
</div>
<div class="nav-container">
    <div id="tabs">
        <ul class="tabs" id="jsTOCHorizontal">

        </ul>
    </div>
    <div class="ctrl-right hidden-xs hidden-sm">
        <a href="javascript:void(0)" id="menu-toggle"><i class="fa fa-indent" aria-hidden="true"></i></a>
        <div class="btn-group" style="visibility: hidden">
  <button type="button" class="btn btn-default dropdown-btn dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    Docker v19.03 (current)     <span class="caret"></span>
  </button>
  <ul class="dropdown-menu">
    <li><a href="/docs.docker.jp.onthefly/v18.09/">Docker v18.09</a></li><li><a href="/docs.docker.jp.onthefly/v18.03/">Docker v18.03</a></li><li><a href="/docs.docker.jp.onthefly/v17.06/">Docker v17.06</a></li>
  </ul>
</div>

    </div>
</div>

        </div>
    </div>
</nav>

	</header>

	<div class="wrapper right-open">
		<div class="container-fluid">
			<div class="row">
				<div class="col-body">
					<main class="col-content content">
						<section class="section">
							
								
							<h1>silverpeas</h1>  <span class="reading-time" title="Estimated reading time">
  <span class="reading-time-label">読む時間の目安: </span>
  
  
    13 分
  
</span>

							
							
							<p>Silverpeas is a turnkey and open-source Collaborative and Social-Networking Portal.</p>

<p>GitHub repo: <a href="https://github.com/Silverpeas/docker-silverpeas-prod">https://github.com/Silverpeas/docker-silverpeas-prod</a></p>

<blockquote>
  <p><strong>Library reference</strong></p>

  <p>This content is imported from
<a href="https://github.com/docker-library/docs/tree/master/silverpeas/">the official Docker Library docs</a>,
and is provided by the original uploader. You can view the Docker Hub page for this image at
<a href="https://hub.docker.com/images/silverpeas">https://hub.docker.com/images/silverpeas</a></p>
</blockquote>

<!-- content begin -->

<!--

********************************************************************************

WARNING:

    DO NOT EDIT "silverpeas/README.md"

    IT IS AUTO-GENERATED

    (from the other files in "silverpeas/" combined with a set of templates)

********************************************************************************

-->

<h1 id="supported-tags-and-respective-dockerfile-links">Supported tags and respective <code class="highlighter-rouge">Dockerfile</code> links</h1>

<ul>
  <li><a href="https://github.com/Silverpeas/docker-silverpeas-prod/blob/189a4f2db783d5052add54f2c07ca7a3b860c685/Dockerfile"><code class="highlighter-rouge">6.0.2</code>, <code class="highlighter-rouge">latest</code></a></li>
</ul>

<h1 id="quick-reference">Quick reference</h1>

<ul>
  <li>
    <p><strong>Where to get help</strong>:<br />
<a href="https://groups.google.com/forum/#!forum/silverpeas-users">the Silverpeas user mailing list</a></p>
  </li>
  <li>
    <p><strong>Where to file issues</strong>:<br />
<a href="https://github.com/Silverpeas/docker-silverpeas-prod/issues">https://github.com/Silverpeas/docker-silverpeas-prod/issues</a></p>
  </li>
  <li>
    <p><strong>Maintained by</strong>:<br />
<a href="https://github.com/Silverpeas/docker-silverpeas-prod">Silverpeas</a></p>
  </li>
  <li>
    <p><strong>Supported architectures</strong>: (<a href="https://github.com/docker-library/official-images#architectures-other-than-amd64">more info</a>)<br />
<a href="https://hub.docker.com/r/amd64/silverpeas/"><code class="highlighter-rouge">amd64</code></a></p>
  </li>
  <li>
    <p><strong>Published image artifact details</strong>:<br />
<a href="https://github.com/docker-library/repo-info/blob/master/repos/silverpeas">repo-info repo’s <code class="highlighter-rouge">repos/silverpeas/</code> directory</a> (<a href="https://github.com/docker-library/repo-info/commits/master/repos/silverpeas">history</a>)<br />
(image metadata, transfer size, etc)</p>
  </li>
  <li>
    <p><strong>Image updates</strong>:<br />
<a href="https://github.com/docker-library/official-images/pulls?q=label%3Alibrary%2Fsilverpeas">official-images PRs with label <code class="highlighter-rouge">library/silverpeas</code></a><br />
<a href="https://github.com/docker-library/official-images/blob/master/library/silverpeas">official-images repo’s <code class="highlighter-rouge">library/silverpeas</code> file</a> (<a href="https://github.com/docker-library/official-images/commits/master/library/silverpeas">history</a>)</p>
  </li>
  <li>
    <p><strong>Source of this description</strong>:<br />
<a href="https://github.com/docker-library/docs/tree/master/silverpeas">docs repo’s <code class="highlighter-rouge">silverpeas/</code> directory</a> (<a href="https://github.com/docker-library/docs/commits/master/silverpeas">history</a>)</p>
  </li>
</ul>

<h1 id="what-is-silverpeas">What is Silverpeas</h1>

<p><a href="https://www.silverpeas.org">Silverpeas</a> is a Collaborative and Social-Networking Portal built to facilitate and to leverage the collaboration, the knowledge-sharing and the feedback of persons, teams and organizations.</p>

<p>Accessible from a simple web browser or from a smartphone, Silverpeas is used every days by ourselves. With about 30 ready-to-use applications and with its conversional and relational functions, it makes possible for users to work together, share their knowledge and good practices, and in general to improve their reciprocal empathy, therefore their willingness to collaborate.</p>

<p>Silverpeas is usually used as an intranet and extranet platform dedicated to collaboration and information sharing.</p>

<p><img src="https://raw.githubusercontent.com/docker-library/docs/f0d096186294d86320e52224d7c8dabf450c17eb/silverpeas/logo.png" alt="logo" /></p>

<h1 id="how-to-use-this-image">How to use this image</h1>

<p>Docker images of Silverpeas require one of the following database system in order to be used:</p>

<ul>
  <li>the open-source, powerful and recommended PostgreSQL database system,</li>
  <li>the Microsoft SQLServer database system,</li>
  <li>the Oracle database system.</li>
</ul>

<p>The Silverpeas images support actually only the two first database systems; because of the non-free licensing issues with the Oracle JDBC drivers, Silverpeas cannot include these drivers by default and consequently it cannot use transparently an Oracle database system as a persistence backend.</p>

<p>For the same reasons, the Docker images of Silverpeas aren’t shipped with the Oracle JVM but with OpenJDK. Silverpeas uses the Wildfly application server as runtime.</p>

<p>The Silverpeas images use the following environment variables to set the database access parameters:</p>

<ul>
  <li><code class="highlighter-rouge">DB_SERVERTYPE</code> to specify the database system to use with Silverpeas: POSTGRESQL for PostgreSQL, MSSQL for Microsoft SQLServer, ORACLE for Oracle. By default, it is set to POSTGRESQL.</li>
  <li><code class="highlighter-rouge">DB_SERVER</code> to specify the IP address or the name of the host on which the database system is running. By default, it is set to <code class="highlighter-rouge">database</code>, so that any container running a database can be linked to the Silverpeas container with this name.</li>
  <li><code class="highlighter-rouge">DB_NAME</code> to specify the database to use with Silverpeas. By default, it is set to <code class="highlighter-rouge">Silverpeas</code>.</li>
  <li><code class="highlighter-rouge">DB_USER</code> to specify the user identifier to use by Silverpeas to access the database. By default, it is set to <code class="highlighter-rouge">silverpeas</code> (it is recommended to dedicate a user account in the database for each application).</li>
  <li><code class="highlighter-rouge">DB_PASSWORD</code> to specify the password associated with the user identifier above.</li>
</ul>

<p>These environment variables can be also defined as properties into the Silverpeas global configuration file <code class="highlighter-rouge">config.properties</code> (see below).</p>

<h2 id="start-a-silverpeas-instance-with-a-database-from-a-docker-container">Start a Silverpeas instance with a database from a Docker container</h2>

<p>In <a href="https://hub.docker.com/">Docker Hub</a>, no Docker images of Microsoft SQLServer are currently available, but you will find a lot of images of PostgreSQL. For example, with an <a href="https://hub.docker.com/_/postgres/">official PostgreSQL docker image</a>, you can start a PostgreSQL instance initialized with a superuser <code class="highlighter-rouge">postgres</code> with as password <code class="highlighter-rouge">mysecretpassword</code>:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker run <span class="nt">--name</span> postgresql <span class="nt">-d</span> <span class="se">\</span>
    <span class="nt">-e</span> <span class="nv">POSTGRES_PASSWORD</span><span class="o">=</span><span class="s2">"mysecretpassword"</span> <span class="se">\</span>
    <span class="nt">-v</span> postgresql-data:/var/lib/postgresql/data <span class="se">\</span>
    postgres:9.6
</code></pre></div></div>

<p>We recommend strongly to mount the directory with the database file on the host so the data won’t be lost when upgrading PostgreSQL to a newer version (a Data Volume Container can be used instead). For any information how to start a PostgreSQL container, you can refer its <a href="https://hub.docker.com/_/postgres/">documentation</a>.</p>

<p>Once the database system is running, a database for Silverpeas has to be created and a user with administrative rights on this database (and only on this database) should be added; it is recommended for a security reason to create a dedicated user account in the database for each application and therefore for Silverpeas. In this document, and by default, a database <code class="highlighter-rouge">Silverpeas</code> and a user <code class="highlighter-rouge">silverpeas</code> for that database are created.</p>

<h3 id="start-a-silverpeas-instance-with-the-default-configuration">Start a Silverpeas instance with the default configuration</h3>

<p>Finally, a Silverpeas instance can be started by specifying the required database access parameters with the environment variables. In the example, the database is named <code class="highlighter-rouge">Silverpeas</code> and the priviledged user is <code class="highlighter-rouge">silverpeas</code> with as password <code class="highlighter-rouge">thesilverpeaspassword</code>:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker run <span class="nt">--name</span> silverpeas <span class="nt">-p</span> 8080:8000 <span class="nt">-d</span> <span class="se">\</span>
    <span class="nt">-e</span> <span class="nv">DB_NAME</span><span class="o">=</span><span class="s2">"Silverpeas"</span> <span class="se">\</span>
    <span class="nt">-e</span> <span class="nv">DB_USER</span><span class="o">=</span><span class="s2">"silverpeas"</span> <span class="se">\</span>
    <span class="nt">-e</span> <span class="nv">DB_PASSWORD</span><span class="o">=</span><span class="s2">"thesilverpeaspassword"</span> <span class="se">\</span>
    <span class="nt">-v</span> silverpeas-log:/opt/silverpeas/log <span class="se">\</span>
    <span class="nt">-v</span> silverpeas-data:/opt/silverpeas/data <span class="se">\</span>
    <span class="nt">--link</span> postgresql:database <span class="se">\</span>
    silverpeas
</code></pre></div></div>

<p>By default, <code class="highlighter-rouge">database</code> is the default hostname used by Silverpeas for its persistence backend. So, as the PostgreSQL database is linked here under the alias <code class="highlighter-rouge">database</code>, we don’t have to explicitly indicate its hostname with the <code class="highlighter-rouge">DB_SERVER</code> environment variable. The Silverpeas images expose the 8000 port and here this port is mapped to the 8080 port of the host; Silverpeas is then accessible at <code class="highlighter-rouge">http://localhost:8080/silverpeas</code>. You can sign in Silverpeas with the administrator account <code class="highlighter-rouge">SilverAdmin</code> and with as password <code class="highlighter-rouge">SilverAdmin</code>.</p>

<p>By default, some volumes are created inside the container, so that we can access them in the host. (Refers the <a href="https://matsuand.github.io/docs.docker.jp.onthefly/engine/tutorials/dockervolumes/#locating-a-volume">Docker Documentation</a> to locate them.) Among them <code class="highlighter-rouge">/opt/silverpeas/log</code> and <code class="highlighter-rouge">/opt/silverpeas/data</code>: the first volume contains the logs produced by Silverpeas whereas the second volume contains all the data that are created and managed by the users in Silverpeas. Because the latter has already a directories structure created at image creation, a host directory cannot be mounted into the container at <code class="highlighter-rouge">opt/silverpeas/data</code> without losing the volume’s content (the mount point overlays the pre-existing content of the volume). In our example, in order to easily locate the two volumes, we label them explicitly with respectively the labels <code class="highlighter-rouge">silverpeas-log</code> and <code class="highlighter-rouge">silverpeas-data</code>. (Using a <a href="https://matsuand.github.io/docs.docker.jp.onthefly/engine/userguide/containers/dockervolumes/">Data Volume Container</a> to map <code class="highlighter-rouge">/opt/silverpeas/log</code> and <code class="highlighter-rouge">/opt/silverpeas/data</code> is a better solution.)</p>

<p>Silverpeas takes some time to start, so we recommend you to glance at the logs the complete starting of Silverpeas (see the section about the logs).</p>

<h3 id="start-a-silverpeas-instance-with-a-finer-configuration">Start a Silverpeas instance with a finer configuration</h3>

<p>The Silverpeas global configuration is defined in the <code class="highlighter-rouge">/opt/silverpeas/configuration/config.properties</code> file whose a sample can be found <a href="https://raw.githubusercontent.com/Silverpeas/Silverpeas-Distribution/master/src/main/dist/configuration/sample_config.properties">here</a> or in the container directory <code class="highlighter-rouge">/opt/silverpeas/configuration/</code>. You can explicitly create the <code class="highlighter-rouge">config.properties</code> file with, additionally to the database access parameters (don’t forget in that case to specify the <code class="highlighter-rouge">DB_SERVER</code> property with as value <code class="highlighter-rouge">database</code>), your peculiar configuration parameters and then start a Silverpeas instance with this configuration file:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker run <span class="nt">--name</span> silverpeas <span class="nt">-p</span> 8080:8000 <span class="nt">-d</span> <span class="se">\</span>
    <span class="nt">-v</span> /etc/silverpeas/config.properties:/opt/silverpeas/configuration/config.properties
<span class="go">    -v silverpeas-log:/opt/silverpeas/log \
    -v silverpeas-data:/opt/silverpeas/data \
    --link postgresql:database \
    silverpeas
</span></code></pre></div></div>

<p>where <code class="highlighter-rouge">/etc/silverpeas/config.properties</code> is your own configuration file on the host. For security reason, we strongly recommend to set explicitly the administrator’s credentials with the properties <code class="highlighter-rouge">SILVERPEAS_ADMIN_LOGIN</code> and <code class="highlighter-rouge">SILVERPEAS_ADMIN_PASSWORD</code> in the <code class="highlighter-rouge">config.properties</code> file. (Don’t forget to set also the administrator email address with the property <code class="highlighter-rouge">SILVERPEAS_ADMIN_EMAIL</code>.)</p>

<p>Below an example of such a configuration file:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SILVERPEAS_ADMIN_LOGIN=SilverAdmin
SILVERPEAS_ADMIN_PASSWORD=theadministratorpassword
SILVERPEAS_ADMIN_EMAIM=admin@foo.com

DB_SERVERTYPE=POSTGRESQL
DB_SERVER=database
DB_NAME=Silverpeas
DB_USER=silverpeas
DB_PASSWORD=thesilverpeaspassword

CONVERTER_HOST=libreoffice
CONVERTER_PORT=8997

SMTP_SERVER=smtp.foo.com
SMTP_AUTHENTICATION=true
SMTP_DEBUG=false
SMTP_PORT=465
SMTP_USER=silverpeas
SMTP_PASSWORD=thesmtpsilverpeaspassword
SMTP_SECURE=true
</code></pre></div></div>

<h2 id="start-a-silverpeas-instance-with-a-database-on-the-host">Start a Silverpeas instance with a database on the host</h2>

<p>For a database system running on the host (or on a remote host) with 192.168.1.14 as IP address, you have to specify this host both to the container at starting and to Silverpeas by defining it into its global configuration file:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker run <span class="nt">--name</span> silverpeas <span class="nt">-p</span> 8080:8000 <span class="nt">-d</span> <span class="se">\</span>
    <span class="nt">--add-host</span><span class="o">=</span>database:192.168.1.14 <span class="se">\</span>
    <span class="nt">-v</span> /etc/silverpeas/config.properties:/opt/silverpeas/configuration/config.properties <span class="se">\</span>
    <span class="nt">-v</span> silverpeas-log:/opt/silverpeas/log <span class="se">\</span>
    <span class="nt">-v</span> silverpeas-data:/opt/silverpeas/data <span class="se">\</span>
    silverpeas
</code></pre></div></div>

<p>where <code class="highlighter-rouge">database</code> is the hostname referred by the <code class="highlighter-rouge">DB_SERVER</code> parameter in your <code class="highlighter-rouge">/etc/silverpeas/config.properties</code> file as the host running the database system and that is mapped here to the actual IP address of this host. The hostname is added in the <code class="highlighter-rouge">/etc/hosts</code> file in the container.</p>

<p>For a PostgreSQL database system, some configurations are required in order to be accessed from the Silverpeas container:</p>

<ul>
  <li>
    <p>In the file <code class="highlighter-rouge">postgresql.conf</code>, edit the parameter <code class="highlighter-rouge">listen_addresses</code> to add the address of the PostgreSQL host (<code class="highlighter-rouge">192.168.1.14</code> in our example)</p>

    <p>listen_addresses = ‘localhost,192.168.1.14’</p>
  </li>
  <li>
    <p>In the file <code class="highlighter-rouge">pg_hba.conf</code>, add an entry for the Docker subnetwork</p>

    <p>host all all 172.17.0.0/16 md5</p>
  </li>
  <li>
    <p>Don’t forget to restart PostgreSQL for the changes to be taken into account.</p>
  </li>
</ul>

<h1 id="using-a-data-volume-container">Using a Data Volume Container</h1>

<p>The data produced by Silverpeas mean to be persistent, available to the next versions of Silverpeas, and they have to be accessible to other containers like the one running LibreOffice. For doing, the Docker team recommends to use a Data Volume Container.</p>

<p>In Silverpeas, there are four types of data produced by the application:</p>

<ul>
  <li>the logging stored in <code class="highlighter-rouge">/opt/silverpeas/log</code>,</li>
  <li>the user data and those produced by Silverpeas from the user data in <code class="highlighter-rouge">/opt/silverpeas/data</code>,</li>
  <li>the workflows created by the workflow editor in <code class="highlighter-rouge">/opt/silverpeas/xmlcomponents/workflows</code>.</li>
</ul>

<p>Beside these directories, according to your specific needs, custom configuration scripts can be added in the directories <code class="highlighter-rouge">/opt/silverpeas/configuration/jboss</code> and <code class="highlighter-rouge">/opt/silverpeas/configuration/silverpeas</code>.</p>

<p>The directories <code class="highlighter-rouge">/opt/silverpeas/log</code>, <code class="highlighter-rouge">/opt/silverpeas/data</code>, and <code class="highlighter-rouge">/opt/silverpeas/xmlcomponents/workflows</code> are all defined as volumes in the Docker image.</p>

<p>All these different kind of data have to be consistent for a given state of Silverpeas; they form a coherent whole set. Then, defining a Data Volume Container to gather all of these volumes is a better solution over multiple shared-storage volume definitions. You can, with a such Data Volume Container, backup, restore or migrate more easily the full set of the data of Silverpeas.</p>

<p>To define a Data Volume Container for Silverpeas, for example:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker create <span class="nt">--name</span> silverpeas-store <span class="se">\</span>
    <span class="nt">-v</span> silverpeas-data:/opt/silverpeas/data <span class="se">\</span>
    <span class="nt">-v</span> silverpeas-log:/opt/silverpeas/log <span class="se">\</span>
    <span class="nt">-v</span> silverpeas-workflows:/opt/silverpeas/xmlcomponents/workflows <span class="se">\</span>
    <span class="nt">-v</span> /etc/silverpeas/config.properties:/opt/silverpeas/configuration/config.properties <span class="se">\</span>
    silverpeas <span class="se">\</span>
    /bin/true
</code></pre></div></div>

<p>Then to mount the volumes in the Silverpeas container:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker run <span class="nt">--name</span> silverpeas <span class="nt">-p</span> 8080:8000 <span class="nt">-d</span> <span class="se">\</span>
    <span class="nt">--link</span> postgresql:database <span class="se">\</span>
    <span class="nt">--volumes-from</span> silverpeas-store <span class="se">\</span>
    silverpeas
</code></pre></div></div>

<p>If you have to customize the settings of Silverpeas or add, for example, a new database definition, then specify these settings with the Data Volume Container, so that they will be available to the next versions of Silverpeas which will be then configured correctly like your previous Silverpeas installation:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker create <span class="nt">--name</span> silverpeas-store <span class="se">\</span>
    <span class="nt">-v</span> silverpeas-data:/opt/silverpeas/data <span class="se">\</span>
    <span class="nt">-v</span> silverpeas-log:/opt/silverpeas/log <span class="se">\</span>
    <span class="nt">-v</span> silverpeas-properties:/opt/silverpeas/properties <span class="se">\</span>
    <span class="nt">-v</span> /etc/silverpeas/config.properties:/opt/silverpeas/configuration/config.properties <span class="se">\</span>
    <span class="nt">-v</span> /etc/silverpeas/CustomerSettings.xml:/opt/silverpeas/configuration/silverpeas/CustomerSettings.xml <span class="se">\</span>
    <span class="nt">-v</span> /etc/silverpeas/my-datasource.cli:/opt/silverpeas/configuration/jboss/my-datasource.cli <span class="se">\</span>
    silverpeas <span class="se">\</span>
    /bin/true
</code></pre></div></div>

<h1 id="document-conversion">Document conversion</h1>

<p>Some features in Silverpeas (export, preview, content visualization, ...) requires a document converter. The document converter isn’t mandatory to use Silverpeas but it gives access to additional features. The document conversion is performed in Silverpeas by the program LibreOffice running as a daemon. So, in order to enable and to use these features, you have first to use a Data Volume Container to store all the Silverpeas data and second to run a container embbeding a LibreOffice program running as a daemon. There is no official Docker images of LibreOffice but DockerHub hosts some of unofficial images of it (<a href="https://hub.docker.com/r/xcgd/libreoffice/">xcgd/libreoffice</a> for example).</p>

<p>Once a Data Volume Container is created for Silverpeas as explained in the section above, you have to link it with the Docker image running LibreOffice as a daemon in order the program have access the documents to convert:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker run <span class="nt">--name</span> libreoffice <span class="nt">-d</span> <span class="se">\</span>
    <span class="nt">--volumes-from</span> silverpeas-store <span class="se">\</span>
    xcgd/libreoffice
</code></pre></div></div>

<p>Check the port at which the LibreOffice image is listening and then defines it in the Silverpeas configuration. In our example, <code class="highlighter-rouge">xcgd/libreoffice</code> listens by default the port 8997. The configuration parameters to communicate with LibreOffice are defined by the two following properties:</p>

<ul>
  <li><code class="highlighter-rouge">CONVERTER_HOST</code> is either the IP address or the name of the host in which runs LibreOffice,</li>
  <li><code class="highlighter-rouge">CONVERTER_PORT</code> is the port number at which the LibreOffice daemon listens.</li>
</ul>

<p>These properties have to be defined in the Silverpeas global configuration file <code class="highlighter-rouge">config.properties</code> that is mounted in the Data Volume Container:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>CONVERTER_HOST=libreoffice
CONVERTER_PORT=8997
</code></pre></div></div>

<p>Then the Docker image of Silverpeas can be ran:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker run <span class="nt">--name</span> silverpeas <span class="nt">-p</span> 8080:8000 <span class="nt">-d</span> <span class="se">\</span>
    <span class="nt">--link</span> postgresql:database <span class="se">\</span>
    <span class="nt">--link</span> libreoffice:libreoffice <span class="se">\</span>
    <span class="nt">--volumes-from</span> silverpeas-store <span class="se">\</span>
    silverpeas
</code></pre></div></div>

<h1 id="logs">Logs</h1>

<p>You can follow the activity of Silverpeas by watching the logs generated in the mounted <code class="highlighter-rouge">/opt/silverpeas/log</code> directory.</p>

<p>The output of Wildfly is redirected into the container standard output and so it can be watched as following:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker logs <span class="nt">-f</span> silverpeas
</code></pre></div></div>

<p>Silverpeas takes some time to start, so we recommend you to glance at the logs for the complete starting of Silverpeas.</p>

<h1 id="license">License</h1>

<p>View <a href="https://www.silverpeas.org/legal/licensing_gnu_affero.html">license information</a> for the software contained in this image.</p>

<p>Silverpeas uses FLOSS softwares. These are (in a non exhaustive list):</p>

<ul>
  <li>Libraries under the MIT license like JQuery and Angular JS.</li>
  <li>Libraries and applications under the Apache 2.0 license like the Apache Commons libraries and the Image Magick tool.</li>
  <li>Libraries and applications under the GPL/LGPL license like SWFTools, FlexPaper Flash GPL, LibreOffice, OpenJDK.</li>
</ul>

<p>As with all Docker images, these likely also contain other software which may be under other licenses (such as Bash, etc from the base distribution, along with any direct or indirect dependencies of the primary software being contained).</p>

<p>Some additional license information which was able to be auto-detected might be found in <a href="https://github.com/docker-library/repo-info/tree/master/repos/silverpeas">the <code class="highlighter-rouge">repo-info</code> repository’s <code class="highlighter-rouge">silverpeas/</code> directory</a>.</p>

<p>As for any pre-built image usage, it is the image user’s responsibility to ensure that any use of this image complies with any relevant licenses for all software contained within.</p>


							<!-- tags -->
							
							
							
							<span class="glyphicon glyphicon-tags" style="padding-right: 10px"></span><span style="vertical-align: 2px"><a href="https://matsuand.github.io/docs.docker.jp.onthefly/search/?q=library">library</a>, <a href="https://matsuand.github.io/docs.docker.jp.onthefly/search/?q=sample">sample</a>, <a href="https://matsuand.github.io/docs.docker.jp.onthefly/search/?q=silverpeas">silverpeas</a></span>
							
							<!-- link corrections -->
              <script language="JavaScript">
							var x = document.links.length;
							var baseHref = document.getElementsByTagName('base')[0].href
							for (i = 0; i < x; i++) {
							  var munged = false;
							  var thisHREF = document.links[i].href;
							  var originalURL = "/samples/library/silverpeas/";
							  if (thisHREF.indexOf(baseHref + "#") > -1) {
							    // hash fix
							    //console.log('BEFORE: base:',baseHref,'thisHREF:',thisHREF,'originalURL:',originalURL);
							    thisHREF = originalURL + thisHREF.replace(baseHref, "");
							    //console.log('AFTER: base:',baseHref,'thisHREF:',thisHREF,'originalURL:',originalURL);
							  }
							  if ((thisHREF.indexOf(window.location.hostname) > -1 || thisHREF.indexOf('http') == -1) && document.links[i].className.indexOf("nomunge") < 0) {
							    munged = true;
							    thisHREF = thisHREF.replace(".md", "/").replace("/index/", "/");
							    document.links[i].setAttribute('href', thisHREF);
							  }
							}
							</script>
							
						  <div id="ratings-div" style="color:#b9c2cc; text-align: center; margin-top: 150px; visibility: hidden">
								<div id="pd_rating_holder_8453675"></div>
								<script type="text/javascript">
									PDRTJS_settings_8453675 = {
										"id": "8453675",
										"unique_id": "_samples/library/silverpeas/index.md",
										"title": "silverpeas",
										"permalink": "https://github.com/docker/docker.github.io/blob/master/_samples/library/silverpeas/index.md"
									};
									(function(d, c, j) {
										if (!document.getElementById(j)) {
											var pd = d.createElement(c),
												s;
											pd.id = j;
											pd.src = ('https:' == document.location.protocol) ? 'https://polldaddy.com/js/rating/rating.js' : 'http://i0.poll.fm/js/rating/rating.js';
											s = document.getElementsByTagName(c)[0];
											s.parentNode.insertBefore(pd, s);
										}
									}(document, 'script', 'pd-rating-js'));
								</script>
							</div>
							
						</section>
					</main>
					<nav class="col-nav">
						<div id="sidebar-nav" class="sidebar hidden-sm hidden-xs">
						<div id="navbar" class="nav-sidebar">
    <ul class="nav" id="jsTOCLeftNav">
    </ul>
</div>

						</div>
					</nav>
					<div class="col-toc">
							<div class="sidebar hidden-xs hidden-sm">
							<div class="toc-nav">
								<div class="feedback-links">
									<ul>
										
										<li style="visibility: hidden"><a href="https://github.com/matsuand/docs.docker.jp/edit/v19.03.local/_samples/library/silverpeas/index.md"><i class="fa fa-pencil-square-o" aria-hidden="true"></i> このページの編集</a></li>
										<li><a href="https://github.com/matsuand/docs.docker.jp.onthefly/issues/new?body=File: [_samples/library/silverpeas/index.md](https://matsuand.github.io/docs.docker.jp.onthefly/samples/library/silverpeas/)"
															class="nomunge"><i class="fa fa-check" aria-hidden="true"></i> 文書変更のリクエスト</a></li>
										<li><a href="https://success.docker.com/support"><i class="fa fa-question" aria-hidden="true"></i> サポート依頼</a></li>
										<!-- toggle mode -->
										<li>
											<div class="toggle-mode">
												<div class="icon">
													<i class="fa fa-sun-o" aria-hidden="true"></i>
												</div>
												<div class="toggle-switch">
													<label class="switch">
														<input type="checkbox" id="switch-style">
														<div class="slider round"></div>
												</label>
												</div>
												<div class="icon">
													<i class="fa fa-moon-o" aria-hidden="true"></i>
												</div>
											</div>
										</li>
									</ul>
								</div>
								   
									<div id="side-toc-title">本ページ内</div>
									
<ul id="my_toc" class="inline_toc">
  <li><a href="#start-a-silverpeas-instance-with-a-database-from-a-docker-container" class="nomunge">Start a Silverpeas instance with a database from a Docker container</a>
    <ul>
      <li><a href="#start-a-silverpeas-instance-with-the-default-configuration" class="nomunge">Start a Silverpeas instance with the default configuration</a></li>
      <li><a href="#start-a-silverpeas-instance-with-a-finer-configuration" class="nomunge">Start a Silverpeas instance with a finer configuration</a></li>
    </ul>
  </li>
  <li><a href="#start-a-silverpeas-instance-with-a-database-on-the-host" class="nomunge">Start a Silverpeas instance with a database on the host</a></li>
</ul>


								</div>
								
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	
	<footer class="footer">
		  
    <div class="container">
        <div class="top_footer">
            <div class="row">
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><a href="https://www.docker.com/what-docker">What is Docker</a></li>
                        <li><a href="https://www.docker.com/what-container">What is a Container</a></li>
                        <li><a href="https://www.docker.com/use-cases">Use Cases</a></li>
                        <li><a href="https://www.docker.com/customers">Customers</a></li>
                        <li><a href="https://www.docker.com/partners/partner-program">Partners</a></li>
                        <li class="break"><a href="https://www.docker.com/industry-government">For Government</a></li>
                        <li><a href="https://www.docker.com/company">About Docker</a></li>
                        <li><a href="https://www.docker.com/company/management">Management</a></li>
                        <li><a href="https://www.docker.com/company/news-and-press">Press &amp; News</a></li>
                        <li><a href="https://www.docker.com/careers">Careers</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><a href="https://www.docker.com/products/overview">Product</a></li>
                        <li><a href="https://www.docker.com/pricing">Pricing</a></li>
                        <li><a href="https://www.docker.com/docker-community">Community Edition</a></li>
                        <li class="break"><a href="https://www.docker.com/enterprise">Enterprise Edition </a></li>
                        <li><a href="https://www.docker.com/products/docker-datacenter">Docker Datacenter</a></li>
                        <li><a href="https://hub.docker.com/">Docker Hub</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/">Documentation</a></li>
                        <li><a href="https://www.docker.com/docker">Learn</a></li>
                        <li><a href="https://blog.docker.com" target="_blank">Blog</a></li>
                        <li><a href="https://engineering.docker.com" target="_blank">Engineering Blog</a></li>
                        <li><a href="https://training.docker.com/" target="_blank">Training</a></li>
                        <li><a href="https://success.docker.com/support">Support</a></li>
                        <li><a href="https://success.docker.com/kbase">Knowledge Base</a></li>
                        <li><a href="https://www.docker.com/products/resources">Resources</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><a href="https://www.docker.com/docker-community">Community</a></li>
                        <li><a href="https://www.docker.com/technologies/overview">Open Source</a></li>
                        <li><a href="https://www.docker.com/community/events">Events</a></li>
                        <li><a href="https://forums.docker.com/" target="_blank">Forums</a></li>
                        <li><a href="https://www.docker.com/community/docker-captains">Docker Captains</a></li>
                        <li><a href="https://www.docker.com/docker-community/scholarships">Scholarships</a></li>
                        <li><a href="https://blog.docker.com/curated/">Community News</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-nav">
                <nav class="footer_sub_nav">
                    <ul class="menu">
                        <li><a href="http://status.docker.com/">Status</a></li>
                        <li><a href="https://www.docker.com/docker-security">Security</a></li>
                        <li><a href="https://www.docker.com/legal">Legal</a></li>
                        <li><a href="https://www.docker.com/company/contact">Contact</a></li>
                    </ul>
                </nav>
            </div>
        </div>
        <div class="bottom_footer">
            <div class="footer-copyright col-xs-12 col-md-8">
                <p class="copyright">
                    Copyright &copy; 2019 Docker Inc. All rights reserved. </p>
            </div>
            <div class="footer_social_nav">
                <ul class="nav-social">
                    <li class="fa fa-twitter"><a href="http://twitter.com/docker">Twitter</a></li>
                    <li class="fa fa-youtube"><a href="http://www.youtube.com/user/dockerrun">Youtube</a></li>
                    <li class="fa fa-github"><a href="https://github.com/docker">GitHub</a></li>
                    <li class="fa fa-linkedin"><a href="https://www.linkedin.com/company/docker">Linkedin</a></li>
                    <li class="fa fa-facebook"><a href="https://www.facebook.com/docker.run">Facebook</a></li>
                    <li class="fa fa-reddit"><a href="http://www.reddit.com/r/docker">Reddit</a></li>
                    <li class="fa fa-slideshare"><a href="http://www.slideshare.net/docker">Slideshare</a></li>
                </ul>
            </div>
        </div>
    </div>

	</footer>
	<link rel="stylesheet" href="/docs.docker.jp.onthefly/css/github.css">
	
	<script defer src="/docs.docker.jp.onthefly/js/anchorlinks.js"></script>
	<script defer src="/docs.docker.jp.onthefly/js/menu.js"></script>
	<script src="/docs.docker.jp.onthefly/js/jquery.js"></script>
	<script src="/docs.docker.jp.onthefly/js/bootstrap.min.js"></script>
	<!-- Always include the archive.js, but it doesn't do much unless we are an archive -->
	<script language="javascript">
	// Default to assuming this is an archive and hiding some stuff
	// See js/archive.js and js/docs.js for logic relating to this
	var isArchive = true;
	var dockerVersion = 'v19.03';
	// In archives, we need to know the page root and we get it from JEKYLL_ENV in the jekyll build command
	var jekyllEnv = 'development';
	// If unset (in non-archive branches), defaults to "development". In that case, reset it to empty
	if (jekyllEnv == 'development') {
		jekyllEnv = '';
	}
	var pageURL = jekyllEnv + '/samples/library/silverpeas/';
	</script>
	<script src="/docs.docker.jp.onthefly/js/archive.js"></script>
	<script src="/docs.docker.jp.onthefly/js/stickyfill.min.js"></script>
	<script defer src="/docs.docker.jp.onthefly/js/metadata.js"></script>
	<script src="/docs.docker.jp.onthefly/js/glossary.js"></script>
	<script defer src="/docs.docker.jp.onthefly/js/docs.js"></script>
	<script defer src="/docs.docker.jp.onthefly/js/toc.js"></script>
	<script language="javascript">
	jQuery(document).ready(function(){
				hookupTOCEvents();
			});
	</script>
</body>

</html>
