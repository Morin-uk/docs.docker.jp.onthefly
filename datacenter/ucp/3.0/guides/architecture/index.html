<!-- Page generated 2019-06-20 10:48:14 +0900 -->
<!-- relative link basehrefs -->

	
	
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
		
	
		
			
			


<!-- Logic for 'edit this button' -->


	

	

	

	

	

	

	

	

	


<!-- End of logic for 'edit this button' -->


<!DOCTYPE html>
<html lang="ja">

<head>
	<base href="https://matsuand.github.io/docs.docker.jp.onthefly/datacenter/ucp/3.0/guides/" />
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<style type="text/css">
		@charset "UTF-8";
		[ng\:cloak],
		[ng-cloak],
		[data-ng-cloak],
		[x-ng-cloak],
		.ng-cloak,
		.x-ng-cloak,
		.ng-hide:not(.ng-hide-animate) {
			display: none !important;
		}

		ng\:form {
			display: block;
		}
	</style>
	<script type="text/javascript">
	  !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="4.0.0";
	  analytics.load("IWj9D0UpZHZdZUZX9jl98PcpBFWBnBMy");
	  analytics.page();
	  }}();
	</script>
	
	<!-- favicon -->
	<link rel="icon" type="image/x-icon" href="https://matsuand.github.io/docs.docker.jp.onthefly/favicons/docs@2x.ico" sizes="129x128">
	<meta name="msapplication-TileImage" content="https://matsuand.github.io/docs.docker.jp.onthefly/favicons/docs@2x.ico">
	<link rel="apple-touch-icon" type="image/x-icon" href="https://matsuand.github.io/docs.docker.jp.onthefly/favicons/docs@2x.ico" sizes="129x128">
	<meta property="og:image" content="https://matsuand.github.io/docs.docker.jp.onthefly/favicons/docs@2x.ico"/>
	<!-- metadata -->
	<meta property="og:type" content="website"/>
	<meta property="og:updated_time" itemprop="dateUpdated" content="2019-06-20T10:48:14+09:00"/>
	<meta property="og:image" itemprop="image primaryImageOfPage" content="https://matsuand.github.io/docs.docker.jp.onthefly/images/docs@2x.png"/>
	<meta name="twitter:card" content="summary"/>
	<meta name="twitter:domain" content="docs.docker.jp"/>
	<meta name="twitter:site" content="@docker_docs"/>
	<meta name="twitter:url" content="https://twitter.com/docker_docs"/>
	<meta name="twitter:title" itemprop="title name" content="UCP architecture"/>
	<meta name="twitter:description" property="og:description" itemprop="description" content="Universal Control Plane is a containerized application that runs on Docker Enterprise Edition, extending its functionality to simplify the deployment, configuration, and monitoring of your applications at scale. UCP also..." />
	<meta name="twitter:image:src" content="https://matsuand.github.io/docs.docker.jp.onthefly/images/docs@2x.png"/>
	<meta name="twitter:image:alt" content="Docker Documentation"/>
	<meta property="article:published_time" itemprop="datePublished" content="2019-06-20T10:48:14+09:00"/>

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="keywords" content="ucp, architecture">
	<link rel="stylesheet" href="https://matsuand.github.io/docs.docker.jp.onthefly/css/font-awesome.min.css">
	<link rel="stylesheet" href="https://matsuand.github.io/docs.docker.jp.onthefly/css/bootstrap.min.css">
	<link id="pygments" rel="stylesheet" href="https://matsuand.github.io/docs.docker.jp.onthefly/css/pygments/perldoc.css">
	<link id="pagestyle" rel="stylesheet" href="https://matsuand.github.io/docs.docker.jp.onthefly/css/style.css">

	<!-- Go get "Open Sans" font from Google -->
	<link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
	<!-- SEO stuff -->
	<title>UCP architecture | Docker Documentation</title>
<meta property="og:title" content="UCP architecture" />
<meta property="og:locale" content="ja_JP" />
<meta name="description" content="Learn about the architecture of Docker Universal Control Plane." />
<meta property="og:description" content="Learn about the architecture of Docker Universal Control Plane." />
<link rel="canonical" href="https://matsuand.github.io/docs.docker.jp.onthefly/datacenter/ucp/3.0/guides/architecture/" />
<meta property="og:url" content="https://matsuand.github.io/docs.docker.jp.onthefly/datacenter/ucp/3.0/guides/architecture/" />
<meta property="og:site_name" content="Docker Documentation" />
<script type="application/ld+json">
{"@context":"http://schema.org","@type":"WebPage","headline":"UCP architecture","description":"Learn about the architecture of Docker Universal Control Plane.","url":"https://matsuand.github.io/docs.docker.jp.onthefly/datacenter/ucp/3.0/guides/architecture/"}</script>
	<!-- END SEO STUFF -->
	<meta name="robots" content="noindex" />
	<script language="javascript">
	// Default to assuming this is an archive and hiding some stuff
	// See js/archive.js and js/docs.js for logic relating to this
	var isArchive = true;
	var dockerVersion = 'v18.09';
	</script>
</head>
<body ng-app="Docker" ng-controller="DockerController" class="colums">
	<header>
		 <nav class="nav-secondary navbar navbar-fixed-top">
    <!-- <div class="fan"></div> -->
    <div class="container-fluid">
        <div class="navbar-header">
            <a href="https://matsuand.github.io/docs.docker.jp.onthefly/"><img class="logo" src="https://matsuand.github.io/docs.docker.jp.onthefly/images/docker-docs-logo.svg" alt="Docker Docs" title="Docker Docs"></a>
        </div>
        <div class="navbar-collapse" aria-expanded="false" style="height: 1px;">
            <div class="search-form" id="search-div" style="visibility: hidden">
    <form class="search-form form-inline ng-pristine ng-valid" /id="searchForm" action="/docs.docker.jp.onthefly/search/">
        <input class="search-field form-control ds-input" id="st-search-input" value="" name="q" placeholder="文書内検索" type="search" autocomplete="off" spellcheck="false" dir="auto" style="position: relative; vertical-align: top;">
        <div id="autocompleteContainer">
            <div id="autocompleteResults"></div>
        </div>
        <!-- <button type="submit" class="search-submit btn btn-default">検索</button> -->
    </form>
</div>
<div class="sidebar-toggle">
    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
    </button>
</div>
<div class="nav-container">
    <div id="tabs">
        <ul class="tabs" id="jsTOCHorizontal">

        </ul>
    </div>
    <div class="ctrl-right hidden-xs hidden-sm">
        <a href="javascript:void(0)" id="menu-toggle"><i class="fa fa-indent" aria-hidden="true"></i></a>
        <div class="btn-group" style="visibility: hidden">
  <button type="button" class="btn btn-default dropdown-btn dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    Docker v18.09 (current)        <span class="caret"></span>
  </button>
  <ul class="dropdown-menu">
    <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/edge/">Docker edge</a></li><li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/v18.03/">Docker v18.03</a></li><li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/v17.12/">Docker v17.12</a></li><li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/v17.09/">Docker v17.09</a></li><li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/v17.06/">Docker v17.06</a></li><li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/v17.03/">Docker v17.03</a></li>
  </ul>
</div>

    </div>
</div>

        </div>
    </div>
</nav>

	</header>

	<div class="wrapper right-open">
		<div class="container-fluid">
			<div class="row">
				<div class="col-body">
					<main class="col-content content">
						<section class="section">
							
								
							<h1>UCP architecture</h1>  <span class="reading-time" title="Estimated reading time">
  <span class="reading-time-label">読む時間の目安: </span>
  
  
    12 分
  
</span>

							


<blockquote><p>These are the docs for UCP version 3.0.11</p>
<p>To select a different version, use the selector below.</p>
<p>
  <div class="dropdown">
    <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">3.0.11
    <span class="caret"></span></button>
    <ul class="dropdown-menu">
      
        <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/ee/ucp/">3.1 (latest)</a></li>
      
        
      
        <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/datacenter/ucp/2.2/guides/">2.2</a></li>
      
        <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/datacenter/ucp/2.1/guides/">2.1</a></li>
      
        <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/datacenter/ucp/2.0/guides/">2.0</a></li>
      
        <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/datacenter/ucp/1.1/overview/">1.1</a></li>
      
    </ul>
  </div>
  </p>
</blockquote>

							
							<p>Universal Control Plane is a containerized application that runs on
<a href="https://matsuand.github.io/docs.docker.jp.onthefly/ee/index.md">Docker Enterprise Edition</a>, extending its functionality
to simplify the deployment, configuration, and monitoring of your applications at scale.</p>

<p>UCP also secures Docker with role-based access control so that only authorized
users can make changes and deploy applications to your Docker cluster.</p>

<p><img src="images/ucp-architecture-1.svg" alt="" class="with-border" /></p>

<p>Once Universal Control Plane (UCP) instance is deployed, developers and IT
operations no longer interact with Docker Engine directly, but interact with
UCP instead. Since UCP exposes the standard Docker API, this is all done
transparently, so that you can use the tools you already know and love, like
the Docker CLI client and Docker Compose.</p>

<h2 id="under-the-hood">Under the hood</h2>

<p>Docker UCP leverages the clustering and orchestration functionality provided
by Docker.</p>

<p><img src="images/ucp-architecture-2.svg" alt="" class="with-border" /></p>

<p>A swarm is a collection of nodes that are in the same Docker cluster.
<a href="https://matsuand.github.io/docs.docker.jp.onthefly/engine/swarm/key-concepts.md">Nodes</a> in a Docker swarm operate in one of two
modes: Manager or Worker. If nodes are not already running in a swarm when
installing UCP, nodes will be configured to run in swarm mode.</p>

<p>When you deploy UCP, it starts running a globally scheduled service called
<code class="highlighter-rouge">ucp-agent</code>. This service monitors the node where it’s running and starts
and stops UCP services, based on whether the node is a
<a href="https://matsuand.github.io/docs.docker.jp.onthefly/engine/swarm/key-concepts.md">manager or a worker node</a>.</p>

<p>If the node is a:</p>

<ul>
  <li><strong>Manager</strong>: the <code class="highlighter-rouge">ucp-agent</code> service automatically starts serving all UCP
components, including the UCP web UI and data stores used by UCP. The
<code class="highlighter-rouge">ucp-agent</code> accomplishes this by
<a href="architecture/#ucp-components-in-manager-nodes">deploying several containers</a>
on the node. By promoting a node to manager, UCP automatically becomes
highly available and fault tolerant.</li>
  <li><strong>Worker</strong>: on worker nodes, the <code class="highlighter-rouge">ucp-agent</code> service starts serving a proxy
service that ensures only authorized users and other UCP services can run
Docker commands in that node. The <code class="highlighter-rouge">ucp-agent</code> deploys a
<a href="architecture/#ucp-components-in-worker-nodes">subset of containers</a> on worker nodes.</li>
</ul>

<h2 id="ucp-internal-components">UCP internal components</h2>

<p>The core component of UCP is a globally-scheduled service called <code class="highlighter-rouge">ucp-agent</code>.
When you install UCP on a node, or join a node to a swarm that’s being managed
by UCP, the <code class="highlighter-rouge">ucp-agent</code> service starts running on that node.</p>

<p>Once this service is running, it deploys containers with other UCP components,
and it ensures they keep running. The UCP components that are deployed
on a node depend on whether the node is a manager or a worker.</p>

<blockquote>
  <p>OS-specific component names</p>

  <p>Some UCP component names depend on the node’s operating system. For example,
on Windows, the <code class="highlighter-rouge">ucp-agent</code> component is named <code class="highlighter-rouge">ucp-agent-win</code>.
<a href="https://matsuand.github.io/docs.docker.jp.onthefly/datacenter/ucp/3.0/guides/admin/install/architecture-specific-images/">Learn about architecture-specific images</a>.</p>
</blockquote>

<p>Internally, UCP uses the following components:</p>

<ul>
  <li>Calico 3.0.1</li>
  <li>Kubernetes 1.8.11</li>
</ul>

<h3 id="ucp-components-in-manager-nodes">UCP components in manager nodes</h3>

<p>Manager nodes run all UCP services, including the web UI and data stores that
persist the state of UCP. These are the UCP services running on manager nodes:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">UCP component</th>
      <th style="text-align: left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">k8s_calico-kube-controllers</td>
      <td style="text-align: left">A cluster-scoped Kubernetes controller used to coordinate Calico networking. Runs on one manager node only.</td>
    </tr>
    <tr>
      <td style="text-align: left">k8s_calico-node</td>
      <td style="text-align: left">The Calico node agent, which coordinates networking fabric according to the cluster-wide Calico configuration. Part of the <code class="highlighter-rouge">calico-node</code> daemonset. Runs on all nodes. Configure the CNI plugin by using the <code class="highlighter-rouge">--cni-installer-url</code> flag. If this flag isn’t set, UCP uses Calico as the default CNI plugin.</td>
    </tr>
    <tr>
      <td style="text-align: left">k8s_install-cni_calico-node</td>
      <td style="text-align: left">A container that’s responsible for installing the Calico CNI plugin binaries and configuration on each host. Part of the <code class="highlighter-rouge">calico-node</code> daemonset. Runs on all nodes.</td>
    </tr>
    <tr>
      <td style="text-align: left">k8s_POD_calico-node</td>
      <td style="text-align: left">Pause container for the <code class="highlighter-rouge">calico-node</code> pod.</td>
    </tr>
    <tr>
      <td style="text-align: left">k8s_POD_calico-kube-controllers</td>
      <td style="text-align: left">Pause container for the <code class="highlighter-rouge">calico-kube-controllers</code> pod.</td>
    </tr>
    <tr>
      <td style="text-align: left">k8s_POD_compose</td>
      <td style="text-align: left">Pause container for the <code class="highlighter-rouge">compose</code> pod.</td>
    </tr>
    <tr>
      <td style="text-align: left">k8s_POD_kube-dns</td>
      <td style="text-align: left">Pause container for the <code class="highlighter-rouge">kube-dns</code> pod.</td>
    </tr>
    <tr>
      <td style="text-align: left">k8s_ucp-dnsmasq-nanny</td>
      <td style="text-align: left">A dnsmasq instance used in the Kubernetes DNS Service. Part of the <code class="highlighter-rouge">kube-dns</code> deployment. Runs on one manager node only.</td>
    </tr>
    <tr>
      <td style="text-align: left">k8s_ucp-kube-compose</td>
      <td style="text-align: left">A custom Kubernetes resource component that’s responsible for translating Compose files into Kubernetes constructs. Part of the <code class="highlighter-rouge">compose</code> deployment. Runs on one manager node only.</td>
    </tr>
    <tr>
      <td style="text-align: left">k8s_ucp-kube-dns</td>
      <td style="text-align: left">The main Kubernetes DNS Service, used by pods to <a href="https://v1-8.docs.kubernetes.io/docs/concepts/services-networking/dns-pod-service/">resolve service names</a>. Part of the <code class="highlighter-rouge">kube-dns</code> deployment. Runs on one manager node only. Provides service discovery for Kubernetes services and pods. A set of three containers deployed via Kubernetes as a single pod.</td>
    </tr>
    <tr>
      <td style="text-align: left">k8s_ucp-kubedns-sidecar</td>
      <td style="text-align: left">Health checking and metrics daemon of the Kubernetes DNS Service. Part of the <code class="highlighter-rouge">kube-dns</code> deployment. Runs on one manager node only.</td>
    </tr>
    <tr>
      <td style="text-align: left">ucp-agent</td>
      <td style="text-align: left">Monitors the node and ensures the right UCP services are running.</td>
    </tr>
    <tr>
      <td style="text-align: left">ucp-auth-api</td>
      <td style="text-align: left">The centralized service for identity and authentication used by UCP and DTR.</td>
    </tr>
    <tr>
      <td style="text-align: left">ucp-auth-store</td>
      <td style="text-align: left">Stores authentication configurations and data for users, organizations, and teams.</td>
    </tr>
    <tr>
      <td style="text-align: left">ucp-auth-worker</td>
      <td style="text-align: left">Performs scheduled LDAP synchronizations and cleans authentication and authorization data.</td>
    </tr>
    <tr>
      <td style="text-align: left">ucp-client-root-ca</td>
      <td style="text-align: left">A certificate authority to sign client bundles.</td>
    </tr>
    <tr>
      <td style="text-align: left">ucp-cluster-root-ca</td>
      <td style="text-align: left">A certificate authority used for TLS communication between UCP components.</td>
    </tr>
    <tr>
      <td style="text-align: left">ucp-controller</td>
      <td style="text-align: left">The UCP web server.</td>
    </tr>
    <tr>
      <td style="text-align: left">ucp-dsinfo</td>
      <td style="text-align: left">Docker system information collection script to assist with troubleshooting.</td>
    </tr>
    <tr>
      <td style="text-align: left">ucp-interlock</td>
      <td style="text-align: left">Monitors swarm workloads configured to use Layer 7 routing. Only runs when you enable Layer 7 routing.</td>
    </tr>
    <tr>
      <td style="text-align: left">ucp-interlock-proxy</td>
      <td style="text-align: left">A service that provides load balancing and proxying for swarm workloads. Only runs when you enable Layer 7 routing.</td>
    </tr>
    <tr>
      <td style="text-align: left">ucp-kube-apiserver</td>
      <td style="text-align: left">A master component that serves the Kubernetes API. It persists its state in <code class="highlighter-rouge">etcd</code> directly, and all other components communicate with API server directly.</td>
    </tr>
    <tr>
      <td style="text-align: left">ucp-kube-controller-manager</td>
      <td style="text-align: left">A master component that manages the desired state of controllers and other Kubernetes objects. It monitors the API server and performs background tasks when needed.</td>
    </tr>
    <tr>
      <td style="text-align: left">ucp-kubelet</td>
      <td style="text-align: left">The Kubernetes node agent running on every node, which is responsible for running Kubernetes pods, reporting the health of the node, and monitoring resource usage.</td>
    </tr>
    <tr>
      <td style="text-align: left">ucp-kube-proxy</td>
      <td style="text-align: left">The networking proxy running on every node, which enables pods to contact Kubernetes services and other pods, via cluster IP addresses.</td>
    </tr>
    <tr>
      <td style="text-align: left">ucp-kube-scheduler</td>
      <td style="text-align: left">A master component that handles scheduling of pods. It communicates with the API server only to obtain workloads that need to be scheduled.</td>
    </tr>
    <tr>
      <td style="text-align: left">ucp-kv</td>
      <td style="text-align: left">Used to store the UCP configurations. Don’t use it in your applications, since it’s for internal use only. Also used by Kubernetes components.</td>
    </tr>
    <tr>
      <td style="text-align: left">ucp-metrics</td>
      <td style="text-align: left">Used to collect and process metrics for a node, like the disk space available.</td>
    </tr>
    <tr>
      <td style="text-align: left">ucp-proxy</td>
      <td style="text-align: left">A TLS proxy. It allows secure access to the local Docker Engine to UCP components.</td>
    </tr>
    <tr>
      <td style="text-align: left">ucp-reconcile</td>
      <td style="text-align: left">When ucp-agent detects that the node is not running the right UCP components, it starts the ucp-reconcile container to converge the node to its desired state. It is expected for the ucp-reconcile container to remain in an exited state when the node is healthy.</td>
    </tr>
    <tr>
      <td style="text-align: left">ucp-swarm-manager</td>
      <td style="text-align: left">Used to provide backwards-compatibility with Docker Swarm.</td>
    </tr>
  </tbody>
</table>

<h3 id="ucp-components-in-worker-nodes">UCP components in worker nodes</h3>

<p>Worker nodes are the ones where you run your applications. These are the UCP
services running on worker nodes:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">UCP component</th>
      <th style="text-align: left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">k8s_calico-node</td>
      <td style="text-align: left">The Calico node agent, which coordinates networking fabric according to the cluster-wide Calico configuration. Part of the <code class="highlighter-rouge">calico-node</code> daemonset. Runs on all nodes.</td>
    </tr>
    <tr>
      <td style="text-align: left">k8s_install-cni_calico-node</td>
      <td style="text-align: left">A container that’s responsible for installing the Calico CNI plugin binaries and configuration on each host. Part of the <code class="highlighter-rouge">calico-node</code> daemonset. Runs on all nodes.</td>
    </tr>
    <tr>
      <td style="text-align: left">k8s_POD_calico-node</td>
      <td style="text-align: left">“Pause” container for the Calico-node pod. By default, this container is hidden, but you can see it by running <code class="highlighter-rouge">docker ps -a</code>.</td>
    </tr>
    <tr>
      <td style="text-align: left">ucp-agent</td>
      <td style="text-align: left">Monitors the node and ensures the right UCP services are running</td>
    </tr>
    <tr>
      <td style="text-align: left">ucp-interlock-extension</td>
      <td style="text-align: left">Helper service that reconfigures the ucp-interlock-proxy service based on the swarm workloads that are running.</td>
    </tr>
    <tr>
      <td style="text-align: left">ucp-interlock-proxy</td>
      <td style="text-align: left">A service that provides load balancing and proxying for swarm workloads. Only runs when you enable Layer 7 routing.</td>
    </tr>
    <tr>
      <td style="text-align: left">ucp-dsinfo</td>
      <td style="text-align: left">Docker system information collection script to assist with troubleshooting</td>
    </tr>
    <tr>
      <td style="text-align: left">ucp-kubelet</td>
      <td style="text-align: left">The kubernetes node agent running on every node, which is responsible for running Kubernetes pods, reporting the health of the node, and monitoring resource usage</td>
    </tr>
    <tr>
      <td style="text-align: left">ucp-kube-proxy</td>
      <td style="text-align: left">The networking proxy running on every node, which enables pods to contact Kubernetes services and other pods, via cluster IP addresses</td>
    </tr>
    <tr>
      <td style="text-align: left">ucp-reconcile</td>
      <td style="text-align: left">When ucp-agent detects that the node is not running the right UCP components, it starts the ucp-reconcile container to converge the node to its desired state. It is expected for the ucp-reconcile container to remain in an exited state when the node is healthy.</td>
    </tr>
    <tr>
      <td style="text-align: left">ucp-proxy</td>
      <td style="text-align: left">A TLS proxy. It allows secure access to the local Docker Engine to UCP components</td>
    </tr>
  </tbody>
</table>

<h2 id="pause-containers">Pause containers</h2>

<p>Every pod in Kubernetes has a <em>pause</em> container, which is an “empty” container
that bootstraps the pod to establish all of the namespaces. Pause containers
hold the cgroups, reservations, and namespaces of a pod before its individual
containers are created. The pause container’s image is always present, so the
allocation of the pod’s resources is instantaneous.</p>

<p>By default, pause containers are hidden, but you can see them by running
<code class="highlighter-rouge">docker ps -a</code>.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker ps -a | grep -I pause

8c9707885bf6        dockereng/ucp-pause:3.0.0-6d332d3        "/pause"                 47 hours ago        Up 47 hours                                                                                               k8s_POD_calico-kube-controllers-559f6948dc-5c84l_kube-system_d00e5130-1bf4-11e8-b426-0242ac110011_0
258da23abbf5        dockereng/ucp-pause:3.0.0-6d332d3        "/pause"                 47 hours ago        Up 47 hours                                                                                               k8s_POD_kube-dns-6d46d84946-tqpzr_kube-system_d63acec6-1bf4-11e8-b426-0242ac110011_0
2e27b5d31a06        dockereng/ucp-pause:3.0.0-6d332d3        "/pause"                 47 hours ago        Up 47 hours                                                                                               k8s_POD_compose-698cf787f9-dxs29_kube-system_d5866b3c-1bf4-11e8-b426-0242ac110011_0
5d96dff73458        dockereng/ucp-pause:3.0.0-6d332d3        "/pause"                 47 hours ago        Up 47 hours                                                                                               k8s_POD_calico-node-4fjgv_kube-system_d043a0ea-1bf4-11e8-b426-0242ac110011_0
</code></pre></div></div>

<h2 id="volumes-used-by-ucp">Volumes used by UCP</h2>

<p>Docker UCP uses these named volumes to persist data in all nodes where it runs:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Volume name</th>
      <th style="text-align: left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">ucp-auth-api-certs</td>
      <td style="text-align: left">Certificate and keys for the authentication and authorization service</td>
    </tr>
    <tr>
      <td style="text-align: left">ucp-auth-store-certs</td>
      <td style="text-align: left">Certificate and keys for the authentication and authorization store</td>
    </tr>
    <tr>
      <td style="text-align: left">ucp-auth-store-data</td>
      <td style="text-align: left">Data of the authentication and authorization store, replicated across managers</td>
    </tr>
    <tr>
      <td style="text-align: left">ucp-auth-worker-certs</td>
      <td style="text-align: left">Certificate and keys for authentication worker</td>
    </tr>
    <tr>
      <td style="text-align: left">ucp-auth-worker-data</td>
      <td style="text-align: left">Data of the authentication worker</td>
    </tr>
    <tr>
      <td style="text-align: left">ucp-client-root-ca</td>
      <td style="text-align: left">Root key material for the UCP root CA that issues client certificates</td>
    </tr>
    <tr>
      <td style="text-align: left">ucp-cluster-root-ca</td>
      <td style="text-align: left">Root key material for the UCP root CA that issues certificates for swarm members</td>
    </tr>
    <tr>
      <td style="text-align: left">ucp-controller-client-certs</td>
      <td style="text-align: left">Certificate and keys used by the UCP web server to communicate with other UCP components</td>
    </tr>
    <tr>
      <td style="text-align: left">ucp-controller-server-certs</td>
      <td style="text-align: left">Certificate and keys for the UCP web server running in the node</td>
    </tr>
    <tr>
      <td style="text-align: left">ucp-kv</td>
      <td style="text-align: left">UCP configuration data, replicated across managers</td>
    </tr>
    <tr>
      <td style="text-align: left">ucp-kv-certs</td>
      <td style="text-align: left">Certificates and keys for the key-value store</td>
    </tr>
    <tr>
      <td style="text-align: left">ucp-metrics-data</td>
      <td style="text-align: left">Monitoring data gathered by UCP</td>
    </tr>
    <tr>
      <td style="text-align: left">ucp-metrics-inventory</td>
      <td style="text-align: left">Configuration file used by the ucp-metrics service</td>
    </tr>
    <tr>
      <td style="text-align: left">ucp-node-certs</td>
      <td style="text-align: left">Certificate and keys for node communication</td>
    </tr>
  </tbody>
</table>

<p>You can customize the volume driver used for these volumes, by creating
the volumes before installing UCP. During the installation, UCP checks which
volumes don’t exist in the node, and creates them using the default volume
driver.</p>

<p>By default, the data for these volumes can be found at
<code class="highlighter-rouge">/var/lib/docker/volumes/&lt;volume-name&gt;/_data</code>.</p>

<h2 id="configurations-use-by-ucp">Configurations use by UCP</h2>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Configuration name</th>
      <th style="text-align: left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">com.docker.interlock.extension</td>
      <td style="text-align: left">Configuration for the Interlock extension service that monitors and configures the proxy service</td>
    </tr>
    <tr>
      <td style="text-align: left">com.docker.interlock.proxy</td>
      <td style="text-align: left">Configuration for the service responsible for handling user requests and routing them</td>
    </tr>
    <tr>
      <td style="text-align: left">com.docker.license</td>
      <td style="text-align: left">The Docker EE license</td>
    </tr>
    <tr>
      <td style="text-align: left">com.docker.ucp.config</td>
      <td style="text-align: left">The UCP controller configuration. Most of the settings available on the UCP UI are stored here</td>
    </tr>
    <tr>
      <td style="text-align: left">com.docker.ucp.interlock.conf</td>
      <td style="text-align: left">Configuration for the core Interlock service</td>
    </tr>
  </tbody>
</table>

<h2 id="how-you-interact-with-ucp">How you interact with UCP</h2>

<p>There are two ways to interact with UCP: the web UI or the CLI.</p>

<p>You can use the UCP web UI to manage your swarm, grant and revoke user
permissions, deploy, configure, manage, and monitor your applications.</p>

<p><img src="images/ucp-architecture-3.svg" alt="" class="with-border" /></p>

<p>UCP also exposes the standard Docker API, so you can continue using existing
tools like the Docker CLI client. Since UCP secures your cluster with role-based
access control, you need to configure your Docker CLI client and other client
tools to authenticate your requests using
<a href="user-access/index.md">client certificates</a> that you can download
from your UCP profile page.</p>

<h2 id="where-to-go-next">Where to go next</h2>

<ul>
  <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/datacenter/ucp/3.0/guides/admin/install/system-requirements/">System requirements</a></li>
  <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/datacenter/ucp/3.0/guides/admin/install/plan-installation/">Plan your installation</a></li>
</ul>

							<!-- tags -->
							
							
							
							<span class="glyphicon glyphicon-tags" style="padding-right: 10px"></span><span style="vertical-align: 2px"><a href="https://matsuand.github.io/docs.docker.jp.onthefly/glossary/?term=ucp">ucp</a>, <a href="https://matsuand.github.io/docs.docker.jp.onthefly/glossary/?term=architecture">architecture</a></span>
							
							<!-- link corrections -->
              <script language="JavaScript">
							var x = document.links.length;
							var baseHref = document.getElementsByTagName('base')[0].href
							for (i = 0; i < x; i++) {
							  var munged = false;
							  var thisHREF = document.links[i].href;
							  var originalURL = "/datacenter/ucp/3.0/guides/architecture/";
							  if (thisHREF.indexOf(baseHref + "#") > -1) {
							    // hash fix
							    //console.log('BEFORE: base:',baseHref,'thisHREF:',thisHREF,'originalURL:',originalURL);
							    thisHREF = originalURL + thisHREF.replace(baseHref, "");
							    //console.log('AFTER: base:',baseHref,'thisHREF:',thisHREF,'originalURL:',originalURL);
							  }
							  if ((thisHREF.indexOf(window.location.hostname) > -1 || thisHREF.indexOf('http') == -1) && document.links[i].className.indexOf("nomunge") < 0) {
							    munged = true;
							    thisHREF = thisHREF.replace(".md", "/").replace("/index/", "/");
							    document.links[i].setAttribute('href', thisHREF);
							  }
							}
							</script>
							
						  <div id="ratings-div" style="color:#b9c2cc; text-align: center; margin-top: 150px; visibility: hidden">
								<div id="pd_rating_holder_8453675"></div>
								<script type="text/javascript">
									PDRTJS_settings_8453675 = {
										"id": "8453675",
										"unique_id": "datacenter/ucp/3.0/guides/architecture.md",
										"title": "UCP architecture",
										"permalink": "https://github.com/docker/docker.github.io/blob/master/datacenter/ucp/3.0/guides/architecture.md"
									};
									(function(d, c, j) {
										if (!document.getElementById(j)) {
											var pd = d.createElement(c),
												s;
											pd.id = j;
											pd.src = ('https:' == document.location.protocol) ? 'https://polldaddy.com/js/rating/rating.js' : 'http://i0.poll.fm/js/rating/rating.js';
											s = document.getElementsByTagName(c)[0];
											s.parentNode.insertBefore(pd, s);
										}
									}(document, 'script', 'pd-rating-js'));
								</script>
							</div>
							
						</section>
					</main>
					<nav class="col-nav">
						<div id="sidebar-nav" class="sidebar hidden-sm hidden-xs">
						<div id="navbar" class="nav-sidebar">
    <ul class="nav" id="jsTOCLeftNav">
    </ul>
</div>

						</div>
					</nav>
					<div class="col-toc">
							<div class="sidebar hidden-xs hidden-sm">
							<div class="toc-nav">
								<div class="feedback-links">
									<ul>
										
										<li style="visibility: hidden"><a href="https://github.com/matsuand/docs.docker.jp/edit/v18.09.local/datacenter/ucp/3.0/guides/architecture.md"><i class="fa fa-pencil-square-o" aria-hidden="true"></i> このページの編集</a></li>
										<li><a href="https://github.com/matsuand/docs.docker.jp.onthefly/issues/new?body=File: [datacenter/ucp/3.0/guides/architecture.md](https://matsuand.github.io/docs.docker.jp.onthefly/datacenter/ucp/3.0/guides/architecture/)"
															class="nomunge"><i class="fa fa-check" aria-hidden="true"></i> 文書変更のリクエスト</a></li>
										<li><a href="https://success.docker.com/support"><i class="fa fa-question" aria-hidden="true"></i> サポート依頼</a></li>
										<!-- toggle mode -->
										<li>
											<div class="toggle-mode">
												<div class="icon">
													<i class="fa fa-sun-o" aria-hidden="true"></i>
												</div>
												<div class="toggle-switch">
													<label class="switch">
														<input type="checkbox" id="switch-style">
														<div class="slider round"></div>
												</label>
												</div>
												<div class="icon">
													<i class="fa fa-moon-o" aria-hidden="true"></i>
												</div>
											</div>
										</li>
									</ul>
								</div>
								   
									<div id="side-toc-title">本ページ内</div>
									
<ul id="my_toc" class="inline_toc">
  <li><a href="architecture/#under-the-hood" class="nomunge">Under the hood</a></li>
  <li><a href="architecture/#ucp-internal-components" class="nomunge">UCP internal components</a>
    <ul>
      <li><a href="architecture/#ucp-components-in-manager-nodes" class="nomunge">UCP components in manager nodes</a></li>
      <li><a href="architecture/#ucp-components-in-worker-nodes" class="nomunge">UCP components in worker nodes</a></li>
    </ul>
  </li>
  <li><a href="architecture/#pause-containers" class="nomunge">Pause containers</a></li>
  <li><a href="architecture/#volumes-used-by-ucp" class="nomunge">Volumes used by UCP</a></li>
  <li><a href="architecture/#configurations-use-by-ucp" class="nomunge">Configurations use by UCP</a></li>
  <li><a href="architecture/#how-you-interact-with-ucp" class="nomunge">How you interact with UCP</a></li>
  <li><a href="architecture/#where-to-go-next" class="nomunge">Where to go next</a></li>
</ul>


								</div>
								
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	
	<footer class="footer">
		  
    <div class="container">
        <div class="top_footer">
            <div class="row">
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><a href="https://www.docker.com/what-docker">What is Docker</a></li>
                        <li><a href="https://www.docker.com/what-container">What is a Container</a></li>
                        <li><a href="https://www.docker.com/use-cases">Use Cases</a></li>
                        <li><a href="https://www.docker.com/customers">Customers</a></li>
                        <li><a href="https://www.docker.com/partners/partner-program">Partners</a></li>
                        <li class="break"><a href="https://www.docker.com/industry-government">For Government</a></li>
                        <li><a href="https://www.docker.com/company">About Docker</a></li>
                        <li><a href="https://www.docker.com/company/management">Management</a></li>
                        <li><a href="https://www.docker.com/company/news-and-press">Press &amp; News</a></li>
                        <li><a href="https://www.docker.com/careers">Careers</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><a href="https://www.docker.com/products/overview">Product</a></li>
                        <li><a href="https://www.docker.com/pricing">Pricing</a></li>
                        <li><a href="https://www.docker.com/docker-community">Community Edition</a></li>
                        <li class="break"><a href="https://www.docker.com/enterprise">Enterprise Edition </a></li>
                        <li><a href="https://www.docker.com/products/docker-datacenter">Docker Datacenter</a></li>
                        <li><a href="https://hub.docker.com/">Docker Hub</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/">Documentation</a></li>
                        <li><a href="https://www.docker.com/docker">Learn</a></li>
                        <li><a href="https://blog.docker.com" target="_blank">Blog</a></li>
                        <li><a href="https://engineering.docker.com" target="_blank">Engineering Blog</a></li>
                        <li><a href="https://training.docker.com/" target="_blank">Training</a></li>
                        <li><a href="https://success.docker.com/support">Support</a></li>
                        <li><a href="https://success.docker.com/kbase">Knowledge Base</a></li>
                        <li><a href="https://www.docker.com/products/resources">Resources</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><a href="https://www.docker.com/docker-community">Community</a></li>
                        <li><a href="https://www.docker.com/technologies/overview">Open Source</a></li>
                        <li><a href="https://www.docker.com/community/events">Events</a></li>
                        <li><a href="https://forums.docker.com/" target="_blank">Forums</a></li>
                        <li><a href="https://www.docker.com/community/docker-captains">Docker Captains</a></li>
                        <li><a href="https://www.docker.com/docker-community/scholarships">Scholarships</a></li>
                        <li><a href="https://blog.docker.com/curated/">Community News</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-nav">
                <nav class="footer_sub_nav">
                    <ul class="menu">
                        <li><a href="http://status.docker.com/">Status</a></li>
                        <li><a href="https://www.docker.com/docker-security">Security</a></li>
                        <li><a href="https://www.docker.com/legal">Legal</a></li>
                        <li><a href="https://www.docker.com/company/contact">Contact</a></li>
                    </ul>
                </nav>
            </div>
        </div>
        <div class="bottom_footer">
            <div class="footer-copyright col-xs-12 col-md-8">
                <p class="copyright">
                    Copyright &copy; 2019 Docker Inc. All rights reserved. </p>
            </div>
            <div class="footer_social_nav">
                <ul class="nav-social">
                    <li class="fa fa-twitter"><a href="http://twitter.com/docker">Twitter</a></li>
                    <li class="fa fa-youtube"><a href="http://www.youtube.com/user/dockerrun">Youtube</a></li>
                    <li class="fa fa-github"><a href="https://github.com/docker">GitHub</a></li>
                    <li class="fa fa-linkedin"><a href="https://www.linkedin.com/company/docker">Linkedin</a></li>
                    <li class="fa fa-facebook"><a href="https://www.facebook.com/docker.run">Facebook</a></li>
                    <li class="fa fa-reddit"><a href="http://www.reddit.com/r/docker">Reddit</a></li>
                    <li class="fa fa-slideshare"><a href="http://www.slideshare.net/docker">Slideshare</a></li>
                </ul>
            </div>
        </div>
    </div>

	</footer>
	<link rel="stylesheet" href="https://matsuand.github.io/docs.docker.jp.onthefly/css/github.css">
	
	<!-- <script src="https://matsuand.github.io/docs.docker.jp.onthefly/js/anchorlinks.js"></script> -->
	<script defer src="https://matsuand.github.io/docs.docker.jp.onthefly/js/menu.js"></script>
	<script src="https://matsuand.github.io/docs.docker.jp.onthefly/js/jquery.js"></script>
	<script src="https://matsuand.github.io/docs.docker.jp.onthefly/js/bootstrap.min.js"></script>
	<!-- Always include the archive.js, but it doesn't do much unless we are an archive -->
	<script language="javascript">
	// Default to assuming this is an archive and hiding some stuff
	// See js/archive.js and js/docs.js for logic relating to this
	var isArchive = true;
	var dockerVersion = 'v18.09';
	// In archives, we need to know the page root and we get it from JEKYLL_ENV in the jekyll build command
	var jekyllEnv = 'development';
	// If unset (in non-archive branches), defaults to "development". In that case, reset it to empty
	if (jekyllEnv == 'development') {
		jekyllEnv = '';
	}
	var pageURL = jekyllEnv + '/datacenter/ucp/3.0/guides/architecture/';
	</script>
	<script src="https://matsuand.github.io/docs.docker.jp.onthefly/js/archive.js"></script>
	<script src="https://matsuand.github.io/docs.docker.jp.onthefly/js/stickyfill.min.js"></script>
	<script defer src="https://matsuand.github.io/docs.docker.jp.onthefly/js/metadata.js"></script>
	<script src="https://matsuand.github.io/docs.docker.jp.onthefly/js/glossary.js"></script>
	<script src="https://matsuand.github.io/docs.docker.jp.onthefly/js/collections_tocs.js"></script>
	<script defer src="https://matsuand.github.io/docs.docker.jp.onthefly/js/docs.js"></script>
	<script defer src="https://matsuand.github.io/docs.docker.jp.onthefly/js/toc.js"></script>
	<script language="javascript">
	jQuery(document).ready(function(){
				hookupTOCEvents();
			});
	</script>
</body>

</html>
