<!-- Page generated 2020-05-27 13:03:45 +0900 -->
<!-- Logic for 'edit this button'


    

    

    

    

    

    

    

    

-->
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <style type="text/css">
      @charset "UTF-8";
      [ng\:cloak],
      [ng-cloak],
      [data-ng-cloak],
      [x-ng-cloak],
      .ng-cloak,
      .x-ng-cloak,
      .ng-hide:not(.ng-hide-animate) {
          display: none !important;
      }

      ng\:form {
          display: block;
      }
  </style>
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-WL2QLG5');</script>

  
  <!-- favicon -->
  <link rel="icon" type="image/x-icon" href="/docs.docker.jp.onthefly/favicons/docs@2x.ico" sizes="129x128">
  <meta name="msapplication-TileImage" content="/docs.docker.jp.onthefly/favicons/docs@2x.ico">
  <link rel="apple-touch-icon" type="image/x-icon" href="/docs.docker.jp.onthefly/favicons/docs@2x.ico" sizes="129x128">
  <meta property="og:image" content="/docs.docker.jp.onthefly/favicons/docs@2x.ico"/>
  <!-- metadata -->
  <meta property="og:type" content="website"/>
  <meta property="og:updated_time" itemprop="dateUpdated" content="2020-05-27T13:03:45+09:00"/>
  <meta property="og:image" itemprop="image primaryImageOfPage" content="/docs.docker.jp.onthefly/images/docs@2x.png"/>
  <meta name="twitter:card" content="summary"/>
  <meta name="twitter:domain" content="docs.docker.com"/>
  <meta name="twitter:site" content="@docker_docs"/>
  <meta name="twitter:url" content="https://twitter.com/docker_docs"/>
  <meta name="twitter:title" itemprop="title name" content="Configuring Azure Files Storage for Kubernetes"/>
  <meta name="twitter:description" property="og:description" itemprop="description" content="Platform operators can provide persistent storage for workloads running on Docker Enterprise and Microsoft Azure by using Azure Files. You can either pre-provision Azure Files Shares to be consumed by..." />
  <meta name="twitter:image:src" content="/docs.docker.jp.onthefly/images/docs@2x.png"/>
  <meta name="twitter:image:alt" content="Docker Documentation"/>
  <meta property="article:published_time" itemprop="datePublished" content="2020-05-27T13:03:45+09:00"/>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="keywords" content="Universal Control Plane, UCP, Docker EE, Kubernetes, storage, volume">
  <link rel="stylesheet" href="/docs.docker.jp.onthefly/css/font-awesome.min.css">
  <link rel="stylesheet" href="/docs.docker.jp.onthefly/css/bootstrap.min.css">
  <link id="pygments" rel="stylesheet" href="/docs.docker.jp.onthefly/css/pygments/perldoc.css">
  <link id="pagestyle" rel="stylesheet" href="/docs.docker.jp.onthefly/css/style.css">

  <!-- Go get "Open Sans" font from Google -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
  <!-- SEO stuff -->
  <title>Configuring Azure Files Storage for Kubernetes | Docker Documentation</title>
  <meta property="og:title" content="Configuring Azure Files Storage for Kubernetes" />
  <meta property="og:locale" content="ja_JP" />
  <meta name="description" content="Learn how to add persistent storage to your Docker Enterprise clusters running on Azure with Azure Files." />
  <meta property="og:description" content="Learn how to add persistent storage to your Docker Enterprise clusters running on Azure with Azure Files." />
  <link rel="canonical" href="/datacenter/ucp/3.1/guides/kubernetes/storage/use-azure-files/" />
  <meta property="og:url" content="https://docs.docker.com/datacenter/ucp/3.1/guides/kubernetes/storage/use-azure-files/" />
  <meta property="og:site_name" content="Docker ドキュメント" />
  <script type="application/ld+json">{"@context":"http://schema.org","@type":"WebPage","headline":"Configuring Azure Files Storage for Kubernetes","description":"Learn how to add persistent storage to your Docker Enterprise clusters running on Azure with Azure Files.","url":"https://docs.docker.com/datacenter/ucp/3.1/guides/kubernetes/storage/use-azure-files/"}</script>
  <!-- END SEO STUFF -->
  <meta name="robots" content="noindex" />
  <script>
  // Default to assuming this is an archive and hiding some stuff
  // See js/archive.js and js/docs.js for logic relating to this
  var isArchive = true;
  var dockerVersion = 'v19.03';
  </script>
</head>


    <body ng-app="Docker" ng-controller="DockerController" class="colums">
    <header>
        <nav class="nav-secondary navbar navbar-fixed-top">
    <!-- <div class="fan"></div> -->
    <div class="container-fluid">
        <div class="navbar-header">
            <a href="/docs.docker.jp.onthefly/"><img class="logo" src="/docs.docker.jp.onthefly/images/docker-docs-logo.svg" alt="Docker Docs" title="Docker Docs"></a>
        </div>
        <div class="navbar-collapse" aria-expanded="false" style="height: 1px;">
            <div class="search-form" id="search-div" style="visibility: hidden">
    <form class="search-form form-inline ng-pristine ng-valid" id="searchForm" action="https://matsuand.github.io/docs.docker.jp.onthefly/search/">
        <input class="search-field form-control ds-input" id="st-search-input" value="" name="q" placeholder="文書内検索" type="search" autocomplete="off" spellcheck="false" dir="auto" style="position: relative; vertical-align: top;">
        <div id="autocompleteContainer">
            <div id="autocompleteResults"></div>
        </div>
        <!-- <button type="submit" class="search-submit btn btn-default">検索</button> -->
    </form>
</div>
<div class="sidebar-toggle">
    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
    </button>
</div>
<div class="nav-container">
    <div id="tabs">
        <ul class="tabs" id="jsTOCHorizontal">

        </ul>
    </div>
    <div class="ctrl-right hidden-xs hidden-sm">
        <a href="javascript:void(0)" id="menu-toggle"><i class="fa fa-indent" aria-hidden="true"></i></a>
        <div class="btn-group" style="visibility: hidden">
  <button type="button" class="btn btn-default dropdown-btn dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    Docker v19.03 (最新)     <span class="caret"></span>
  </button>
  <ul class="dropdown-menu">
    <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/v18.09/">Docker v18.09</a></li><li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/v18.03/">Docker v18.03</a></li><li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/v17.06/">Docker v17.06</a></li>
  </ul>
</div>

    </div>
</div>

        </div>
    </div>
</nav>

    </header>
    <div class="wrapper right-open">
        <div class="container-fluid">
            <div class="row">
                <div class="col-body">
                    <main class="col-content content">
                        <section class="section">
                            
                            
                            <h1>Configuring Azure Files Storage for Kubernetes</h1> 
                            <span class="reading-time" title="Estimated reading time">
  <span class="reading-time-label">読む時間の目安: </span>
  
  
    6 分
  
</span>

                            


<blockquote><p>The documentation herein is for UCP version 3.1.12.</p>
<p>Use the drop-down below to access documentation for the current version or for a different past version.</p>
<p>
  <div class="dropdown">
    <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">3.1.12
    <span class="caret"></span></button>
    <ul class="dropdown-menu">
      
        <li><a href="/ee/ucp/">3.2 (latest)</a></li>
      
        
      
        <li><a href="/datacenter/ucp/3.0/guides/">3.0</a></li>
      
        <li><a href="/datacenter/ucp/2.2/guides/">2.2</a></li>
      
        <li><a href="/datacenter/ucp/2.1/guides/">2.1</a></li>
      
        <li><a href="/datacenter/ucp/2.0/guides/">2.0</a></li>
      
        
      
    </ul>
  </div>
  </p>
</blockquote>

                            
                            <p>Platform operators can provide persistent storage for workloads running on
Docker Enterprise and Microsoft Azure by using Azure Files. You can either
pre-provision Azure Files Shares to be consumed by
Kubernetes Pods or can you use the Azure Kubernetes integration to dynamically
provision Azure Files Shares on demand.</p>

<h2 id="prerequisites">Prerequisites</h2>

<p>This guide assumes you have already provisioned a UCP environment on
Microsoft Azure. The cluster must be provisioned after meeting all
prerequisites listed in <a href="/ee/ucp/admin/install/cloudproviders/install-on-azure.md">Install UCP on Azure</a>.</p>

<p>Additionally, this guide uses the Kubernetes Command Line tool <code class="highlighter-rouge">$
kubectl</code> to provision Kubernetes objects within a UCP cluster. Therefore, you must download
this tool along with a UCP client bundle. For more
information on configuring CLI access to UCP, see <a href="/ee/ucp/user-access/cli.md">CLI Based Access</a>.</p>

<h2 id="manually-provisioning-azure-files">Manually Provisioning Azure Files</h2>

<p>You can use existing Azure Files Shares or manually provision new ones to
provide persistent storage for Kubernetes Pods. Azure Files Shares can be
manually provisioned in the Azure Portal using ARM Templates or using the Azure
CLI. The following example uses the Azure CLI to manually provision
Azure Files Shares.</p>

<h3 id="creating-an-azure-storage-account">Creating an Azure Storage Account</h3>

<p>When manually creating an Azure Files Share, first create an Azure
Storage Account for the file shares. If you have already provisioned
a Storage Account, you can skip to <a href="#creating-an-azure-files-share">Creating an Azure Files Share</a>.</p>

<blockquote>
  <p><strong>Note</strong>: the Azure Kubernetes Driver does not support Azure Storage Accounts
created using Azure Premium Storage.</p>
</blockquote>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ REGION</span><span class="o">=</span>ukwest
<span class="nv">$ SA</span><span class="o">=</span>mystorageaccount
<span class="nv">$ RG</span><span class="o">=</span>myresourcegroup

<span class="nv">$ </span>az storage account create <span class="se">\</span>
 <span class="nt">--name</span> <span class="nv">$SA</span> <span class="se">\</span>
 <span class="nt">--resource-group</span> <span class="nv">$RG</span> <span class="se">\</span>
 <span class="nt">--location</span> <span class="nv">$REGION</span> <span class="se">\</span>
 <span class="nt">--sku</span> Standard_LRS
</code></pre></div></div>

<h3 id="creating-an-azure-files-share">Creating an Azure Files Share</h3>

<p>Next, provision an Azure Files Share. The size of this share can be
adjusted to fit the end user’s requirements. If you have already created an
Azure Files Share, you can skip to <a href="#configuring-a-kubernetes-secret">Configuring a Kubernetes
Secret</a>.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ SA</span><span class="o">=</span>mystorageaccount
<span class="nv">$ RG</span><span class="o">=</span>myresourcegroup
<span class="nv">$ FS</span><span class="o">=</span>myfileshare
<span class="nv">$ SIZE</span><span class="o">=</span>5

<span class="c"># This Azure Collection String can also be found in the Azure Portal</span>
<span class="nv">$ </span><span class="nb">export </span><span class="nv">AZURE_STORAGE_CONNECTION_STRING</span><span class="o">=</span><span class="sb">`</span>az storage account show-connection-string <span class="nt">--name</span> <span class="nv">$SA</span> <span class="nt">--resource-group</span> <span class="nv">$RG</span> <span class="nt">-o</span> tsv<span class="sb">`</span>

<span class="nv">$ </span>az storage share create <span class="se">\</span>
  <span class="nt">--name</span> <span class="nv">$FS</span> <span class="se">\</span>
  <span class="nt">--quota</span> <span class="nv">$SIZE</span> <span class="se">\</span>
  <span class="nt">--connection-string</span> <span class="nv">$AZURE_STORAGE_CONNECTION_STRING</span>
</code></pre></div></div>

<h3 id="configuring-a-kubernetes-secret">Configuring a Kubernetes Secret</h3>

<p>After a File Share has been created, you must load the Azure Storage
Account Access key as a Kubernetes Secret into UCP. This provides access to
the file share when Kubernetes attempts to mount the share into a pod. This key
can be found in the Azure Portal or retrieved as shown in the following example by the Azure CLI:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ SA</span><span class="o">=</span>mystorageaccount
<span class="nv">$ RG</span><span class="o">=</span>myresourcegroup
<span class="nv">$ FS</span><span class="o">=</span>myfileshare

<span class="c"># The Azure Storage Account Access Key can also be found in the Azure Portal</span>
<span class="nv">$ STORAGE_KEY</span><span class="o">=</span><span class="k">$(</span>az storage account keys list <span class="nt">--resource-group</span> <span class="nv">$RG</span> <span class="nt">--account-name</span> <span class="nv">$SA</span> <span class="nt">--query</span> <span class="s2">"[0].value"</span> <span class="nt">-o</span> tsv<span class="k">)</span>

<span class="nv">$ </span>kubectl create secret generic azure-secret <span class="se">\</span>
  <span class="nt">--from-literal</span><span class="o">=</span><span class="nv">azurestorageaccountname</span><span class="o">=</span><span class="nv">$SA</span> <span class="se">\</span>
  <span class="nt">--from-literal</span><span class="o">=</span><span class="nv">azurestorageaccountkey</span><span class="o">=</span><span class="nv">$STORAGE_KEY</span>
</code></pre></div></div>

<h3 id="mount-the-azure-files-share-into-a-kubernetes-pod">Mount the Azure Files Share into a Kubernetes Pod</h3>

<p>The final step is to mount the Azure Files Share, using the Kubernetes Secret, into
a Kubernetes Pod. The following code creates a standalone Kubernetes pod, but you
can also use alternative Kubernetes Objects such as Deployments, DaemonSets, or
StatefulSets, with the existing Azure Files Share.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ FS</span><span class="o">=</span>myfileshare

<span class="nv">$ </span><span class="nb">cat</span> <span class="o">&lt;&lt;</span><span class="no">EOF</span><span class="sh"> | kubectl create -f -
apiVersion: v1
kind: Pod
metadata:
  name: mypod-azurefile
spec:
  containers:
  - image: nginx
    name: mypod
    volumeMounts:
      - name: mystorage
        mountPath: /data
  volumes:
  - name: mystorage
    azureFile:
      secretName: azure-secret
      shareName: </span><span class="nv">$FS</span><span class="sh">
      readOnly: false
</span><span class="no">EOF
</span></code></pre></div></div>

<h2 id="dynamically-provisioning-azure-files-shares">Dynamically Provisioning Azure Files Shares</h2>

<h3 id="defining-the-azure-disk-storage-class">Defining the Azure Disk Storage Class</h3>

<p>Kubernetes can dynamically provision Azure Files Shares using the Azure
Kubernetes integration, which was configured when UCP was installed. For
Kubernetes to know which APIs to use when provisioning storage, you must
create Kubernetes Storage Classes specific to each storage
backend. For more information on Kubernetes Storage Classes, see <a href="https://kubernetes.io/docs/concepts/storage/storage-classes/">Storage
Classes</a>.</p>

<blockquote>
  <p>Today, only the Standard Storage Class is supported when using the Azure
Kubernetes Plugin. File shares using the Premium Storage Class will fail to
mount.</p>
</blockquote>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">cat</span> <span class="o">&lt;&lt;</span><span class="no">EOF</span><span class="sh"> | kubectl create -f -
kind: StorageClass
apiVersion: storage.k8s.io/v1
metadata:
  name: standard
provisioner: kubernetes.io/azure-file
mountOptions:
  - dir_mode=0777
  - file_mode=0777
  - uid=1000
  - gid=1000
parameters:
  skuName: Standard_LRS
</span><span class="no">EOF
</span></code></pre></div></div>

<p>To see which Storage Classes have been provisioned:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl get storageclasses
NAME       PROVISIONER                AGE
azurefile  kubernetes.io/azure-file   1m
</code></pre></div></div>

<h3 id="creating-an-azure-files-share-using-a-persistent-volume-claim">Creating an Azure Files Share using a Persistent Volume Claim</h3>

<p>After you create a Storage Class, you can use Kubernetes
Objects to dynamically provision Azure Files Shares. This is done using
Kubernetes Persistent Volumes Claims
<a href="https://kubernetes.io/docs/concepts/storage/persistent-volumes/#introduction">PVCs</a>.
Kubernetes uses an existing Azure Storage Account if one exists inside of the
Azure Resource Group. If an Azure Storage Account does not exist,
Kubernetes creates one.</p>

<p>The following example uses the standard storage class and creates a 5 GB Azure
File Share. Alter these values to fit your use case.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">cat</span> <span class="o">&lt;&lt;</span><span class="no">EOF</span><span class="sh"> | kubectl create -f -
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: azure-file-pvc
spec:
  accessModes:
    - ReadWriteMany
  storageClassName: standard
  resources:
    requests:
      storage: 5Gi
</span><span class="no">EOF
</span></code></pre></div></div>

<p>At this point, you should see a newly created Persistent Volume Claim and Persistent Volume:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl get pvc
NAME             STATUS    VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS   AGE
azure-file-pvc   Bound     pvc-f7ccebf0-70e0-11e9-8d0a-0242ac110007   5Gi        RWX            standard       22s

<span class="nv">$ </span>kubectl get pv
NAME                                       CAPACITY   ACCESS MODES   RECLAIM POLICY   STATUS    CLAIM                    STORAGECLASS   REASON    AGE
pvc-f7ccebf0-70e0-11e9-8d0a-0242ac110007   5Gi        RWX            Delete           Bound     default/azure-file-pvc   standard                 2m
</code></pre></div></div>

<h3 id="attach-the-new-azure-files-share-to-a-kubernetes-pod">Attach the new Azure Files Share to a Kubernetes Pod</h3>

<p>Now that a Kubernetes Persistent Volume has been created, mount this into
a Kubernetes Pod. The file share can be consumed by any Kubernetes object type
such as a Deployment, DaemonSet, or StatefulSet. However, the following
example just mounts the persistent volume into a standalone pod.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">cat</span> <span class="o">&lt;&lt;</span><span class="no">EOF</span><span class="sh"> | kubectl create -f -
kind: Pod
apiVersion: v1
metadata:
  name: mypod
spec:
  containers:
    - name: task-pv-container
      image: nginx
      ports:
        - containerPort: 80
          name: "http-server"
      volumeMounts:
        - mountPath: "/usr/share/nginx/html"
          name: storage
  volumes:
    - name: storage
      persistentVolumeClaim:
       claimName: azure-file-pvc
</span><span class="no">EOF
</span></code></pre></div></div>

<h2 id="where-to-go-next">Where to go next</h2>

<ul>
  <li><a href="/ee/ucp/kubernetes/layer-7-routing/">Deploy an Ingress Controller on
Kubernetes</a></li>
  <li><a href="/ee/ucp/kubernetes/kubernetes-network-encryption/">Discover Network Encryption on
Kubernetes</a></li>
</ul>

                            <!-- tags -->
                            
                            <span class="glyphicon glyphicon-tags" style="padding-right: 10px"></span><span
                                style="vertical-align: 2px"><a
                                    href="https://docs.docker.com/search/?q=Universal Control Plane">Universal Control Plane</a>, <a
                                    href="https://docs.docker.com/search/?q=UCP">UCP</a>, <a
                                    href="https://docs.docker.com/search/?q=Docker EE">Docker EE</a>, <a
                                    href="https://docs.docker.com/search/?q=Kubernetes">Kubernetes</a>, <a
                                    href="https://docs.docker.com/search/?q=storage">storage</a>, <a
                                    href="https://docs.docker.com/search/?q=volume">volume</a></span>
                            
                            
                            <div id="ratings-div"
                                style="color:#b9c2cc; text-align: center; margin-top: 150px; visibility: hidden">
                                <div id="pd_rating_holder_8453675"></div>
                                <script type="text/javascript">
                                    PDRTJS_settings_8453675 = {
                                        "id": "8453675",
                                        "unique_id": "datacenter/ucp/3.1/guides/kubernetes/storage/use-azure-files.md",
                                        "title": "Configuring Azure Files Storage for Kubernetes",
                                        "permalink": "https://github.com/docker/docker.github.io/blob/master/datacenter/ucp/3.1/guides/kubernetes/storage/use-azure-files.md"
                                    };
                                    (function (d, c, j) {
                                        if (!document.getElementById(j)) {
                                            var pd = d.createElement(c),
                                                s;
                                            pd.id = j;
                                            pd.src = ('https:' == document.location.protocol) ? 'https://polldaddy.com/js/rating/rating.js' : 'http://i0.poll.fm/js/rating/rating.js';
                                            s = document.getElementsByTagName(c)[0];
                                            s.parentNode.insertBefore(pd, s);
                                        }
                                    }(document, 'script', 'pd-rating-js'));
                                </script>
                            </div>
                            
                        </section>
                    </main>
                    <nav class="col-nav">
                        <div id="sidebar-nav" class="sidebar hidden-sm hidden-xs">
                            <div id="navbar" class="nav-sidebar">
    <ul class="nav" id="jsTOCLeftNav">
    </ul>
</div>

                        </div>
                    </nav>
                    <div class="col-toc">
                        <div class="sidebar hidden-xs hidden-sm">
                            <div class="toc-nav">
                                <div class="feedback-links">
                                    <ul>
                                        
                                        <li style="visibility: hidden"><a href="https://github.com/matsuand/docs.docker.jp/edit/v19.03.local/datacenter/ucp/3.1/guides/kubernetes/storage/use-azure-files.md"><i
                                                    class="fa fa-pencil-square-o" aria-hidden="true"></i> このページの編集</a></li>
                                        <li><a href="https://github.com/matsuand/docs.docker.jp/issues/new?body=ファイル: [datacenter/ucp/3.1/guides/kubernetes/storage/use-azure-files.md](https://matsuand.github.io/docs.docker.jp.onthefly/datacenter/ucp/3.1/guides/kubernetes/storage/use-azure-files/)"
                                                class="nomunge"><i class="fa fa-check" aria-hidden="true"></i> 文書変更のリクエスト</a></li>
                                        <!-- toggle mode -->
                                        <li>
                                            <div class="toggle-mode">
                                                <div class="icon">
                                                    <i class="fa fa-sun-o" aria-hidden="true"></i>
                                                </div>
                                                <div class="toggle-switch">
                                                    <label class="switch">
                                                        <input type="checkbox" id="switch-style">
                                                        <div class="slider round"></div>
                                                    </label>
                                                </div>
                                                <div class="icon">
                                                    <i class="fa fa-moon-o" aria-hidden="true"></i>
                                                </div>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                                
                                
                                
                                
                                <div id="side-toc-title">本ページ内:</div>
                                
<ul id="my_toc" class="inline_toc">
  <li><a href="#prerequisites" class="nomunge">Prerequisites</a></li>
  <li><a href="#manually-provisioning-azure-files" class="nomunge">Manually Provisioning Azure Files</a>
    <ul>
      <li><a href="#creating-an-azure-storage-account" class="nomunge">Creating an Azure Storage Account</a></li>
      <li><a href="#creating-an-azure-files-share" class="nomunge">Creating an Azure Files Share</a></li>
      <li><a href="#configuring-a-kubernetes-secret" class="nomunge">Configuring a Kubernetes Secret</a></li>
      <li><a href="#mount-the-azure-files-share-into-a-kubernetes-pod" class="nomunge">Mount the Azure Files Share into a Kubernetes Pod</a></li>
    </ul>
  </li>
  <li><a href="#dynamically-provisioning-azure-files-shares" class="nomunge">Dynamically Provisioning Azure Files Shares</a>
    <ul>
      <li><a href="#defining-the-azure-disk-storage-class" class="nomunge">Defining the Azure Disk Storage Class</a></li>
      <li><a href="#creating-an-azure-files-share-using-a-persistent-volume-claim" class="nomunge">Creating an Azure Files Share using a Persistent Volume Claim</a></li>
      <li><a href="#attach-the-new-azure-files-share-to-a-kubernetes-pod" class="nomunge">Attach the new Azure Files Share to a Kubernetes Pod</a></li>
    </ul>
  </li>
  <li><a href="#where-to-go-next" class="nomunge">Where to go next</a></li>
</ul>


                                
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    
    <footer class="footer">
          
    <div class="container">
        <div class="top_footer">
            <div class="row">
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/why-docker">Why Docker</a></b></li>
                        <li><a href="https://www.docker.com/what-container">What is a Container</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/products/overview">Products</a></b></li>
                        <li><a href="https://www.docker.com/products/docker-desktop">Docker Desktop</a></li>
                        <li><a href="https://www.docker.com/products/docker-hub">Docker Hub</a></li>
                        <li><b><a href="https://www.docker.com/products/docker-desktop">Features</a></b></li>
                        <li><a href="https://www.docker.com/products/container-runtime">Container Runtime</a></li>
                        <li><a href="https://www.docker.com/products/developer-tools">Developer Tools</a></li>
                        <li><a href="https://www.docker.com/products/kubernetes">Kubernetes</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/products/docker-desktop">Developers</a></b></li>
                        <li><a href="https://www.docker.com/use-cases">Use Cases</a></li>
                        <li><a href="https://www.docker.com/play-with-docker">Play with Docker</a></li>
                        <li><a href="https://www.docker.com/docker-community">Community</a></li>
                        <li><a href="https://www.docker.com/open-source">Open Source</a></li>
                        <li><a href="https://www.docker.com/community/docker-captains">Docker Captains</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/company" target="_blank">Company</a></b></li>
                        <li><a href="https://www.docker.com/company">About Us</a></li>
                        <li><a href="https://www.docker.com/blog/" target="_blank">Blog</a></li>
                        <li><a href="https://www.docker.com/customers">Customers</a></li>
                        <li><a href="https://www.docker.com/partners">Partners</a></li>
                        <li><a href="https://www.docker.com/company/newsroom">Newsroom</a></li>
                        <li><a href="https://www.docker.com/careers">Careers</a></li>
                        <li><a href="https://www.docker.com/company/contact">Contact Us</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-nav">
                <nav class="footer_sub_nav">
                    <ul class="menu">
                        <li><a href="http://status.docker.com/">Status</a></li>
                        <li><a href="https://www.docker.com/docker-security">Security</a></li>
                        <li><a href="https://www.docker.com/legal">Legal</a></li>
                        <li><a href="https://www.docker.com/company/contact">Contact</a></li>
                    </ul>
                </nav>
            </div>
        </div>
        <div class="bottom_footer">
            <div class="footer-copyright col-xs-12 col-md-8">
                <p class="copyright">
                    Copyright &copy; 2013-2020 Docker Inc. All rights reserved. </p>
            </div>
            <div class="footer_social_nav">
                <ul class="nav-social">
                    <li class="fa fa-twitter"><a href="http://twitter.com/docker">Twitter</a></li>
                    <li class="fa fa-youtube"><a href="http://www.youtube.com/user/dockerrun">Youtube</a></li>
                    <li class="fa fa-github"><a href="https://github.com/docker">GitHub</a></li>
                    <li class="fa fa-linkedin"><a href="https://www.linkedin.com/company/docker">Linkedin</a></li>
                    <li class="fa fa-facebook"><a href="https://www.facebook.com/docker.run">Facebook</a></li>
                    <li class="fa fa-slideshare"><a href="https://www.slideshare.net/docker">Slideshare</a></li>
                    <li class="fa fa-reddit"><a href="https://www.reddit.com/r/docker">Reddit</a></li>
                </ul>
            </div>
        </div>
    </div>

    </footer>
    <link rel="stylesheet" href="/docs.docker.jp.onthefly/css/github.css">
    
    <script defer src="/docs.docker.jp.onthefly/js/anchorlinks.js"></script>
    <script defer src="/docs.docker.jp.onthefly/js/menu.js"></script>
    <script src="/docs.docker.jp.onthefly/js/jquery.js"></script>
    <script src="/docs.docker.jp.onthefly/js/bootstrap.min.js"></script>
    <!-- Always include the archive.js, but it doesn't do much unless we are an archive -->
    <script>
        // Default to assuming this is an archive and hiding some stuff
        // See js/archive.js and js/docs.js for logic relating to this
        var isArchive = true;
        var dockerVersion = 'v19.03';
        // In archives, we need to know the page root and we get it from JEKYLL_ENV in the jekyll build command
        var jekyllEnv = 'development';
        // If unset (in non-archive branches), defaults to "development". In that case, reset it to empty
        if (jekyllEnv === 'development') {
            jekyllEnv = '';
        }
        var pageURL = jekyllEnv + '/datacenter/ucp/3.1/guides/kubernetes/storage/use-azure-files/';
    </script>
    <script src="/docs.docker.jp.onthefly/js/archive.js"></script>
    <script src="/docs.docker.jp.onthefly/js/stickyfill.min.js"></script>
    <script defer src="/docs.docker.jp.onthefly/js/metadata.js"></script>
    <script src="/docs.docker.jp.onthefly/js/glossary.js"></script>
    <script defer src="/docs.docker.jp.onthefly/js/docs.js"></script>
    <script defer src="/docs.docker.jp.onthefly/js/toc.js"></script>
    <script>
        jQuery(document).ready(function () { hookupTOCEvents(); });
    </script>
</body>


</html>
